function rhex(t){for(str="",j=0;j<=3;j++)str+=hex_chr.charAt(t>>8*j+4&15)+hex_chr.charAt(t>>8*j&15);return str}function str2blks_MD5(t){for(nblk=(t.length+8>>6)+1,blks=new Array(16*nblk),i=0;i<16*nblk;i++)blks[i]=0;for(i=0;i<t.length;i++)blks[i>>2]|=t.charCodeAt(i)<<i%4*8;return blks[i>>2]|=128<<i%4*8,blks[16*nblk-2]=8*t.length,blks}function add(t,e){var n=(65535&t)+(65535&e),r=(t>>16)+(e>>16)+(n>>16);return r<<16|65535&n}function rol(t,e){return t<<e|t>>>32-e}function cmn(t,e,n,r,i,a){return add(rol(add(add(e,t),add(r,a)),i),n)}function ff(t,e,n,r,i,a,o){return cmn(e&n|~e&r,t,e,i,a,o)}function gg(t,e,n,r,i,a,o){return cmn(e&r|n&~r,t,e,i,a,o)}function hh(t,e,n,r,i,a,o){return cmn(e^n^r,t,e,i,a,o)}function ii(t,e,n,r,i,a,o){return cmn(n^(e|~r),t,e,i,a,o)}function calcMD5(t){for(x=str2blks_MD5(t),a=1732584193,b=-271733879,c=-1732584194,d=271733878,i=0;i<x.length;i+=16)olda=a,oldb=b,oldc=c,oldd=d,a=ff(a,b,c,d,x[i+0],7,-680876936),d=ff(d,a,b,c,x[i+1],12,-389564586),c=ff(c,d,a,b,x[i+2],17,606105819),b=ff(b,c,d,a,x[i+3],22,-1044525330),a=ff(a,b,c,d,x[i+4],7,-176418897),d=ff(d,a,b,c,x[i+5],12,1200080426),c=ff(c,d,a,b,x[i+6],17,-1473231341),b=ff(b,c,d,a,x[i+7],22,-45705983),a=ff(a,b,c,d,x[i+8],7,1770035416),d=ff(d,a,b,c,x[i+9],12,-1958414417),c=ff(c,d,a,b,x[i+10],17,-42063),b=ff(b,c,d,a,x[i+11],22,-1990404162),a=ff(a,b,c,d,x[i+12],7,1804603682),d=ff(d,a,b,c,x[i+13],12,-40341101),c=ff(c,d,a,b,x[i+14],17,-1502002290),b=ff(b,c,d,a,x[i+15],22,1236535329),a=gg(a,b,c,d,x[i+1],5,-165796510),d=gg(d,a,b,c,x[i+6],9,-1069501632),c=gg(c,d,a,b,x[i+11],14,643717713),b=gg(b,c,d,a,x[i+0],20,-373897302),a=gg(a,b,c,d,x[i+5],5,-701558691),d=gg(d,a,b,c,x[i+10],9,38016083),c=gg(c,d,a,b,x[i+15],14,-660478335),b=gg(b,c,d,a,x[i+4],20,-405537848),a=gg(a,b,c,d,x[i+9],5,568446438),d=gg(d,a,b,c,x[i+14],9,-1019803690),c=gg(c,d,a,b,x[i+3],14,-187363961),b=gg(b,c,d,a,x[i+8],20,1163531501),a=gg(a,b,c,d,x[i+13],5,-1444681467),d=gg(d,a,b,c,x[i+2],9,-51403784),c=gg(c,d,a,b,x[i+7],14,1735328473),b=gg(b,c,d,a,x[i+12],20,-1926607734),a=hh(a,b,c,d,x[i+5],4,-378558),d=hh(d,a,b,c,x[i+8],11,-2022574463),c=hh(c,d,a,b,x[i+11],16,1839030562),b=hh(b,c,d,a,x[i+14],23,-35309556),a=hh(a,b,c,d,x[i+1],4,-1530992060),d=hh(d,a,b,c,x[i+4],11,1272893353),c=hh(c,d,a,b,x[i+7],16,-155497632),b=hh(b,c,d,a,x[i+10],23,-1094730640),a=hh(a,b,c,d,x[i+13],4,681279174),d=hh(d,a,b,c,x[i+0],11,-358537222),c=hh(c,d,a,b,x[i+3],16,-722521979),b=hh(b,c,d,a,x[i+6],23,76029189),a=hh(a,b,c,d,x[i+9],4,-640364487),d=hh(d,a,b,c,x[i+12],11,-421815835),c=hh(c,d,a,b,x[i+15],16,530742520),b=hh(b,c,d,a,x[i+2],23,-995338651),a=ii(a,b,c,d,x[i+0],6,-198630844),d=ii(d,a,b,c,x[i+7],10,1126891415),c=ii(c,d,a,b,x[i+14],15,-1416354905),b=ii(b,c,d,a,x[i+5],21,-57434055),a=ii(a,b,c,d,x[i+12],6,1700485571),d=ii(d,a,b,c,x[i+3],10,-1894986606),c=ii(c,d,a,b,x[i+10],15,-1051523),b=ii(b,c,d,a,x[i+1],21,-2054922799),a=ii(a,b,c,d,x[i+8],6,1873313359),d=ii(d,a,b,c,x[i+15],10,-30611744),c=ii(c,d,a,b,x[i+6],15,-1560198380),b=ii(b,c,d,a,x[i+13],21,1309151649),a=ii(a,b,c,d,x[i+4],6,-145523070),d=ii(d,a,b,c,x[i+11],10,-1120210379),c=ii(c,d,a,b,x[i+2],15,718787259),b=ii(b,c,d,a,x[i+9],21,-343485551),a=add(a,olda),b=add(b,oldb),c=add(c,oldc),d=add(d,oldd);return rhex(a)+rhex(b)+rhex(c)+rhex(d)}function createLocalDatabase(){var t=[{key:"db_version",value:window.globals.properties.version,description:"Version of created database"},{key:"ui_lang",value:"EN",description:"Language"},{key:"ui_money_format",value:"comma",description:"Money Format"},{key:"sync_enabled",value:!0,description:"Sync enabled"},{key:"sync_startup",value:!1,description:"Sync on startup"},{key:"sync_continuous",value:!0,description:"Sync continuously or only manually"},{key:"sync_lastupdate",value:1,description:"Timestamp of last sync"}];db.createTableWithData("settings",t),db.createTable("category",["uniqueid","timestamp","lastupdate","synchronized","description","icon","order","disabled"]);for(var e=(Date.now(),["Other","Groceries","Canteen","Eating Out","Fun","Clothing","Car","Transport","Travel","Household","Salary","Finance","Medical","Education","Rent / Loan","Communication"]),n=0;n<e.length;n++)db.insert("category",{uniqueid:createUniqueid(n,n,!0),timestamp:1,lastupdate:1,synchronized:!0,description:e[n],icon:n,order:n+1,disabled:!1});db.createTable("item",["uniqueid","timestamp","lastupdate","synchronized","account","category","price","description","deleted","version"]),db.createTableWithData("account",[{uniqueid:createUniqueid(1,"Default",!0),timestamp:1,lastupdate:0,synchronized:!1,description:"Default",initial_balance:0,order:1,disabled:!1}])}function deleteLocalDatabase(){expApp.confirm("This functionality is not available yet.","OK",function(){})}function getSettings(t){t=t||!1;var e=null;t&&(e={key:t});var n=db.query("settings",e),r=db.query("settings",null);if(console.debug("getSettings settingName",t,e,n,r),e)return n[0].value;var a={};for(i=0;i<n.length;i++)a[n[i].key]=n[i].value;return a}function setSettings(t,e){if(void 0!==e&&(t=[{key:t,value:e}]),t)for(i=0;i<t.length;i++)db.update("settings",{key:t[i].key},function(e){return e.value=t[i].value,e})}function getIcons(t){return 0!==t&&(t=t||!1),t||0===t?window.globals.icons[t]:window.globals.icons}function getAccounts(t){t=t||!1;var e=null;t&&(e={uniqueid:t});var n=db.queryAll("account",{query:e,sort:[["order","ASC"]]});if(e)return n[0];var r=[];for(i=0;i<n.length;i++)r.push(n[i]);return r}function getItemsFromTimerange(t,e,n){t=new Date(t).getTime(),e=new Date(e).getTime(),n=n||!1;for(var r=[],i=db.query("account",{disabled:!0}),a=0;a<i.length;a++)r.push(i[a].uniqueid);var o=db.queryAll("item",{query:function(n){return!n.deleted&&n.timestamp>=t&&n.timestamp<e&&r.indexOf(n.account)===-1}});if(n){for(var s=0,a=0;a<o.length;a++)s+=o[a].price;return s}return o}function getEntriesNewerThan(t,e,n){for(var r=[],i=0;i<t.length;i++){var a=db.query(n,{uniqueid:t[i].uniqueid});t[i].lastupdate>=e&&(0==a.length||a[0].lastupdate<=e)&&r.push(t[i])}return r}function chunkString(t,e){for(var n,r=Math.ceil(t.length/e),i=new Array(r),a=0;a<r;a++)n=a*e,i[a]=t.substring(n,n+e);return i}function createCSVDataLink(t,e,n,r){r=r||!1;var i="";i+=n+"\r\n\n";var a=db.tableFields(t),o=a.join();i+=o+"\r\n";var s=convertJSONtoCSV(e);return 0!=s.length&&(i+=s,r||(i="data:text/csv;charset=utf-8,"+escape(i)),i)}function convertJSONtoCSV(t){for(var e="object"!=("undefined"==typeof t?"undefined":_typeof(t))?JSON.parse(t):t,n="",r=0;r<e.length;r++){var i="";for(var a in e[r])i+='"'+e[r][a]+'",';n+=i.slice(0,i.length-1)+"\r\n"}return n}function getBalanceFromTimerange(t,e){return getItemsFromTimerange(t,e,!0)}function getTotalBalance(){for(var t=0,e=[],n=getAccounts(),r=0;r<n.length;r++)n[r].disabled?e.push(n[r].uniqueid):t+=n[r].initial_balance;for(var i=db.queryAll("item",{query:function(t){return!t.deleted&&e.indexOf(t.account)===-1}}),r=0;r<i.length;r++)t+=i[r].price;return t}function getAccountBalance(t){var e=db.queryAll("item",{query:{account:t,deleted:!1}}),n=getAccounts(t).initial_balance,r=0;console.debug("getAccountBalance",t,e.length,e);for(var i=0;i<e.length;i++)r+=e[i].price;return r+n}function onStatsDateChange(t){var e,n=$(t.delegateTarget).val();e=void 0==n||null==n||0==n.length||NaN==Date.parse(n)?0:Date.parse(n),"form-stats-date-start"==$(t.delegateTarget).attr("id")?Charts.filter.timestamp.start=e:Charts.filter.timestamp.end=e,Charts.draw()}function syncInit(){expApp.showPreloader("Sync with Dropbox ..."),getSettings("sync_enabled")?(window.client||(window.client=new Dropbox.Client({key:DROPBOX_APP_KEY})),window.client.authenticate(null,function(t){t?expApp.alert(t):syncSetup()})):(expApp.hidePreloader(),expApp.alert("Please enable sync in settings first before using it."))}function syncSetup(){window.globals.properties.debug&&console.log("syncSetup"),window.client&&window.client.isAuthenticated()?ds?(window.globals.properties.debug&&console.log("syncSetup/else"),window.setTimeout(function(){sync()},1e3)):client.getDatastoreManager().openDefaultDatastore(function(t,e){t?expApp.alert("Sync error when opening default datastore: "+t):(ds=e,dsTable=ds.getTable("sync"),window.setTimeout(function(){sync()},1e3))}):(expApp.hidePreloader(),expApp.alert("Sync failed because you are not authenticated with Dropbox yet."))}function syncSignOut(){window.client||(window.client=new Dropbox.Client({key:DROPBOX_APP_KEY})),window.client.authenticate(null,function(t){t?expApp.alert(t):client.isAuthenticated()&&client.signOut()})}function getSyncTime(){return!!ds&&ds.getModifiedTime()}function sync(){window.globals.properties.debug&&console.log("sync");var t=getSettings("sync_lastupdate"),e=dsTable.getOrInsert("sync",{name:"items",json:"[]"}),n=dsTable.getOrInsert("sync2",{name:"items2",json:""}),r=dsTable.getOrInsert("sync3",{name:"items3",json:""}),a=JSON.parse(e.get("json")+n.get("json")+r.get("json"));if(a.length>0)if(t<getSyncTime().getTime()){var o=getEntriesNewerThan(a,t,"item");for(window.globals.properties.debug&&console.log("Merge input: "+o),i=0;i<o.length;i++)db.insertOrUpdate("item",{uniqueid:o[i].uniqueid},o[i]);db.update("item",{synchronized:!1},function(t){return t.lastupdate=Date.now(),t.synchronized=!0,t}),db.commit()}else window.globals.properties.debug&&console.log("Everything is up to date.");syncItems=JSON.stringify(db.query("item")),itemChunks=chunkString(syncItems,Math.ceil(syncItems.length/3)),dsTable.query({name:"items"})[0].update({json:itemChunks[0]}),dsTable.query({name:"items2"})[0].update({json:itemChunks[1]}),dsTable.query({name:"items3"})[0].update({json:itemChunks[2]});var e=dsTable.getOrInsert("category",{name:"category",json:"[]"}),a=JSON.parse(e.get("json"));if(a.length>0)if(t<getSyncTime().getTime()){var o=getEntriesNewerThan(a,t,"category");for(window.globals.properties.debug&&console.log("Merge input: "+o),i=0;i<o.length;i++)db.insertOrUpdate("category",{uniqueid:o[i].uniqueid},o[i]);db.update("category",{synchronized:!1},function(t){return t.lastupdate=Date.now(),t.synchronized=!0,t}),db.commit()}else window.globals.properties.debug&&console.log("Everything is up to date.");dsTable.query({name:"category"})[0].update({json:JSON.stringify(db.query("category"))});var e=dsTable.getOrInsert("account",{name:"account",json:"[]"}),a=JSON.parse(e.get("json"));if(a.length>0)if(t<getSyncTime().getTime()){var o=getEntriesNewerThan(a,t,"account");for(window.globals.properties.debug&&console.log("Merge input: "+o),i=0;i<o.length;i++)db.insertOrUpdate("account",{uniqueid:o[i].uniqueid},o[i]);db.update("account",{synchronized:!1},function(t){return t.lastupdate=Date.now(),t.synchronized=!0,t}),db.commit()}else window.globals.properties.debug&&console.log("Everything is up to date.");dsTable.query({name:"account"})[0].update({json:JSON.stringify(db.query("account"))}),setSettings("sync_lastupdate",Date.now()),pageIndexLeft.trigger(),pageIndex.trigger(),expApp.hidePreloader()}function createUniqueid(t,e,n){n=n||!1;var r=""+t+e;return n||(r+=navigator.userAgent),calcMD5(r)}function getFormattedPrice(t){return t=parseFloat(t).toFixed(2),money_format=getSettings("ui_money_format"),"comma"===money_format&&(t=t.replace(".",",")),t}function formatPrice(t,e){e=e||!1,colorClass="red",t>=0&&(colorClass="green"),formattedPrice=getFormattedPrice(t);var n="";return e&&(e=getAccounts(e),e.disabled&&(colorClass="gray"),db.rowCount("account")>1&&(n='<br><span class="item-subtitle color-gray">'+e.description+"</span>")),'<span class="color-'+colorClass+'">'+formattedPrice+n+"</span>"}function formatDate(t,e){return e=e||!1,date=new Date(t),day=date.getDate(),1==(day+"").length&&(day="0"+day),month=date.getMonth()+1,1==(month+"").length&&(month="0"+month),hours=date.getHours(),1==(hours+"").length&&(hours="0"+hours),minutes=date.getMinutes(),1==(minutes+"").length&&(minutes="0"+minutes),e?date.getFullYear()+"-"+month+"-"+day+"T"+hours+":"+minutes:day+"."+month+"."+date.getFullYear()+" "+hours+":"+minutes}function createCategoryOptions(t,e,n,r){e=e||!1,n=n||!1,r=r||!1;var a=$(t),o=$("<div />");a.empty(),n&&a.append($("<option>").val(0).text("All"));var s={disabled:!1};r&&(s=null);var l=db.queryAll("category",{query:s,sort:[["order","ASC"]]});for(i=0;i<l.length;i++){var u=$("<option>").val(l[i].uniqueid).text(l[i].description);e&&e==l[i].uniqueid&&u.attr("selected","selected"),o.append(u)}a.append(o.html())}function createAccountOptions(t,e,n,r){e=e||!1,n=n||!1,r=r||!1;var a=$(t),o=$("<div />");a.empty(),n&&a.append($("<option>").val(0).text("All"));var s={disabled:!1};r&&(s=null);var l=db.queryAll("account",{query:s,sort:[["order","ASC"]]});for(i=0;i<l.length;i++){var u=$("<option>").val(l[i].uniqueid).text(l[i].description);e&&e==l[i].uniqueid&&u.attr("selected","selected"),o.append(u)}a.append(o.html())}function validateItemForm(t,e,n,r,i,a){var o,s,l,u,c,f;if(a=a||!1,0!=t&&null!=t&&NaN!=parseFloat(t)&&0!=t.length){if(o=parseFloat(t),s=e,l=n.replace('"',"'"),f="true"==a,c=i,i.length>1&&e.length>1){u=void 0==r||null==r||0==r.length||NaN==Date.parse(r)?Date.now():Date.parse(r);var d={price:o,category:s,description:l,date:u,deleted:f,account:c};return d}expApp.alert("Please select an account and a category.")}else expApp.alert("Please fill in a cost.");return!1}function createItemListElements(t,e,n,r,a,o,s,l){a=a||!1,o=o||!1,l=l||!1,$list=$("<ul />"),a&&($balance=$(a));for(var u=0,c=window.globals.temp[s],f=db.queryAll("category",{sort:[["order","ASC"]]}),d={},h=0;h<f.length;h++)d[f[h].uniqueid]=f[h];for(items=db.queryAll("item",{query:e,sort:n,limit:r}),l&&(c.infiniteScroll={endReached:!1,lastIndex:0},items.length<=window.globals.static.infiniteScrollItemsPerLoad&&(expApp.detachInfiniteScroll(".infinite-scroll-"+s),$(c.container).find(".infinite-scroll-preloader").remove())),i=0;i<items.length;i++){var p=items[i];if(u+=p.price,i>=c.infiniteScroll.lastIndex&&i<c.infiniteScroll.lastIndex+window.globals.static.infiniteScrollItemsPerLoad){var g=d[p.category],m=p.description,v=" | "+g.description;null!=m&&0!=m.length||(m='<span class="color-gray">'+g.description+"</span>",v="");var y='<a class="swipeout-delete swipeout-overswipe" data-confirm="Are you sure that you want to delete this item?" href="">Delete</a>';o&&(y=""),$list.append('<li class="swipeout" data-uniqueid="'+p.uniqueid+'" data-tempid="'+s+'">\t<div class="swipeout-content item-content">\t\t<div class="item-media">\t\t\t<span class="icon-wrap"><i class="color-black icon ion '+getIcons(g.icon)+'"></i></span>\t\t</div>\t\t<div class="item-inner">\t\t\t<div class="item-title-row">\t\t\t\t<div class="item-title">'+m+'</div>\t\t\t\t<div class="item-after">'+formatPrice(p.price,p.account)+'\t\t\t\t</div>\t\t\t</div>\t\t\t<div class="item-subtitle color-gray">'+formatDate(p.timestamp)+v+'</div>\t\t</div>\t</div>\t<div class="swipeout-actions-right">\t\t<a href="" class="edit-item" data-uniqueid="'+p.uniqueid+'" data-tempid="'+s+'">Edit</a>'+y+"\t</div></li>")}}c.infiniteScroll.lastIndex=c.infiniteScroll.lastIndex+window.globals.static.infiniteScrollItemsPerLoad,c.infiniteScroll.lastIndex>items.length&&(c.infiniteScroll.endReached=!0),l&&$(t).empty(),$(t).append($list.html()),a&&$balance.html(formatPrice(u)),$$(".page-expenses-list .edit-item").on("click",function(t){var e=$(t.target).attr("data-uniqueid"),n=$(t.target).attr("data-tempid"),r=db.query("item",{uniqueid:e})[0];$(".popup-edit-item").attr("data-uniqueid",e),$(".popup-edit-item").attr("data-tempid",n),$(".popup-edit-item #form-edit-price").val(r.price),$(".popup-edit-item #form-edit-description").val(r.description),$(".popup-edit-item #form-edit-date").val(formatDate(r.timestamp,!0)),$(".popup-edit-item").attr("data-deleted",r.deleted),createCategoryOptions($(".popup-edit-item #form-edit-category"),r.category,!1,!0),createAccountOptions($(".popup-edit-item #form-edit-account"),r.account,!1,!0),r.deleted?($(".popup-edit-item #form-edit-restore").show(),$(".popup-edit-item #form-edit-restore").on("click",function(t){$(".popup-edit-item").attr("data-deleted",!1),$(".popup-edit-item-save").click()})):$(".popup-edit-item #form-edit-restore").hide(),$(".popup-edit-item-save").on("click",function(t){t.preventDefault();var e=$(".popup-edit-item").attr("data-uniqueid"),n=$(".popup-edit-item").attr("data-tempid");if(e.length>1){var r=$(".popup-edit-item #form-edit-price").val(),i=$(".popup-edit-item #form-edit-category").val(),a=$(".popup-edit-item #form-edit-description").val(),o=$(".popup-edit-item #form-edit-date").val(),s=$(".popup-edit-item").attr("data-deleted"),l=$(".popup-edit-item #form-edit-account").val(),u=validateItemForm(r,i,a,o,l,s);u&&(db.update("item",{uniqueid:e},function(t){return t.price=u.price,t.category=u.category,t.account=u.account,t.description=u.description,t.timestamp=u.date,t.deleted=u.deleted,t.lastupdate=Date.now(),t.synchronized=!1,t.version=window.globals.properties.version,t}),expApp.closeModal(".popup-edit-item"),updateItemList($(c.container).find("#expenses-list-category").val(),n,!0),pageIndexLeft.trigger(),pageIndex.trigger())}}),expApp.popup(".popup-edit-item")}),$$(".page-expenses-list .swipeout").on("deleted",function(t){delID=$(t.target).attr("data-uniqueid"),console.log("deleted item ",delID),db.update("item",{uniqueid:delID},function(t){return t.deleted=!0,t.lastupdate=Date.now(),t.synchronized=!1,t}),delItem=db.query("item",{uniqueid:delID}),delItemCategory=db.query("category",{uniqueid:delItem[0].category}),notificationDescription="",null!=delItem[0].description&&0!=delItem[0].description.length&&(notificationDescription=": "+delItem[0].description),pageIndexLeft.trigger(),pageIndex.trigger(),expApp.addNotification({title:"Item removed",message:formatPrice(delItem[0].price)+'</span> for <span class="color-blue">'+delItemCategory[0].description+"</span>"+notificationDescription,hold:1e3})})}function createCategoryListElements(t){$list=$(t).empty();for(var e=db.queryAll("category",{sort:[["order","ASC"]]}),n=0;n<e.length;n++){var r=e[n],i=r.disabled?"":' checked="checked"';$list.append('<li class="swipeout" data-uniqueid="'+r.uniqueid+'">\t<label class="label-checkbox swipeout-content item-content disabled">\t\t<input type="checkbox" id="cat-'+r.uniqueid+'"'+i+'>\t\t<div class="item-media">\t\t\t<i class="icon icon-form-checkbox"></i>\t\t</div>\t\t<div class="item-inner">\t\t\t<div class="item-title">'+r.description+'</div>\t\t\t<div class="item-after">\t\t\t\t<i class="icon ion '+getIcons(r.icon)+'"></i>\t\t\t</div>\t\t</div>\t</label>\t<div class="sortable-handler"></div>\t<div class="swipeout-actions-right">\t\t<a href="#" class="edit-category" data-uniqueid="'+r.uniqueid+'">Edit</a>\t</div></li>')}$list.append('<li><a class="item-link list-button" id="settings-categories-add">Add category</a></li>'),$(t).find(".edit-category").on("click",function(t){var e=$(t.target).attr("data-uniqueid");openCategoryPopup(e)}),$("#settings-categories-add").on("click",function(e){e.preventDefault();var n=createUniqueid(Date.now(),"New Category"+Date.now());db.insert("category",{uniqueid:n,timestamp:Date.now(),lastupdate:Date.now(),synchronized:!1,description:"New Category",icon:0,order:99,disabled:!1}),openCategoryPopup(n),createCategoryListElements(t)})}function createAccountListElements(t){$list=$(t).empty();for(var e=db.queryAll("account",{sort:[["order","ASC"]]}),n=0;n<e.length;n++){var r=e[n],i=r.disabled?"":' checked="checked"';$list.append('<li class="swipeout" data-uniqueid="'+r.uniqueid+'">\t<label class="label-checkbox swipeout-content item-content disabled">\t\t<input type="checkbox" id="cat-'+r.uniqueid+'"'+i+'>\t\t<div class="item-media">\t\t\t<i class="icon icon-form-checkbox"></i>\t\t</div>\t\t<div class="item-inner">\t\t\t<div class="item-title">'+r.description+'</div>\t\t\t<div class="item-after">'+formatPrice(r.initial_balance)+'\t\t\t</div>\t\t</div>\t</label>\t<div class="sortable-handler"></div>\t<div class="swipeout-actions-right">\t\t<a href="#" class="edit-category" data-uniqueid="'+r.uniqueid+'">Edit</a>\t</div></li>')}$list.append('<li><a class="item-link list-button" id="settings-accounts-add">Add account</a></li>'),$(t).find(".edit-category").on("click",function(t){var e=$(t.target).attr("data-uniqueid");openAccountPopup(e)}),$("#settings-accounts-add").on("click",function(e){e.preventDefault();var n=createUniqueid(Date.now(),"New Account"+Date.now());db.insert("account",{uniqueid:n,timestamp:Date.now(),lastupdate:Date.now(),synchronized:!1,description:"New Account",initial_balance:0,order:99,disabled:!1}),openAccountPopup(n),createAccountListElements(t)})}function updateItemList(t,e,n){t=t||0,n=n||!1,page=window.globals.temp[e];var r={deleted:!1},i=[["timestamp","DESC"]],a=null,o=$(page.container).find("#expenses-list-balance"),s=!1;switch(0!=t&&(r.category=t),page.query.request){case"timerange":if(null==page.query.start||null==page.query.end){a=50,page.query.title="Latest by date (error)";break}r=function(e){return!e.deleted&&e.timestamp>=page.query.start&&e.timestamp<page.query.end&&(0==t||e.category==t)};break;case"deleted":r.deleted=!0,i=[["lastupdate","DESC"]],a=50,o=!1,s=!0,page.query.title="Last deleted";break;case"lastupdate":i=[["lastupdate","DESC"]],a=50,o=!1,page.query.title="Last updated";break;case"latest":default:a=50,o=!1,page.query.title="Latest by date"}$(page.navbarInnerContainer).find("#expenses-list-title").html(page.query.title.replace("+"," ")),console.debug("updateItemList query",r),createItemListElements($(page.container).find("#expenses-list-items"),r,i,a,o,s,e,n)}function openCategoryPopup(t){var e=db.query("category",{uniqueid:t})[0];$(".popup-edit-category").attr("data-uniqueid",t),$(".popup-edit-category #form-category-description").val(e.description),$(".popup-edit-category #form-category-icon").empty();for(var n=getIcons(),r=0;r<n.length;r++){var i="";r==e.icon&&(i=' class="icon-selected"'),$(".popup-edit-category #form-category-icon").append('<li data-id="'+r+'"'+i+'><i class="'+n[r]+'"></i></li>')}$(".popup-edit-category #form-category-icon li").on("click",function(t){$(t.delegateTarget).addClass("icon-selected"),$(t.delegateTarget).siblings().removeClass("icon-selected")}),$(".popup-edit-category-save").on("click",function(t){t.preventDefault();var e=$(".popup-edit-category").attr("data-uniqueid");if(e.length>1){var n=$(".popup-edit-category #form-category-description").val(),r=$(".popup-edit-category #form-category-icon li.icon-selected").attr("data-id");n.length>0&&r.length>0?(db.update("category",{uniqueid:e},function(t){return t.description=n,t.icon=r,t.synchronized=!1,t.lastupdate=Date.now(),t}),createCategoryListElements("#settings-categories-list"),expApp.closeModal(".popup-edit-category")):expApp.alert("Please fill in a description and choose an icon.")}else expApp.alert("Could not save: no ID found. Please cancel and try again.")}),expApp.popup(".popup-edit-category")}function openAccountPopup(t){var e=db.query("account",{uniqueid:t})[0];$(".popup-edit-account").attr("data-uniqueid",t),$(".popup-edit-account #form-account-description").val(e.description),$(".popup-edit-account #form-account-balance").val(e.initial_balance),$(".popup-edit-account-save").on("click",function(t){t.preventDefault();var e=$(".popup-edit-account").attr("data-uniqueid");if(e.length>1){var n=$(".popup-edit-account #form-account-description").val(),r=parseFloat($(".popup-edit-account #form-account-balance").val());n.length>0&&(""+r).length>0&&NaN!=r?(db.update("account",{uniqueid:e},function(t){return t.description=n,t.initial_balance=r,t.synchronized=!1,t.lastupdate=Date.now(),t}),createAccountListElements("#settings-accounts-list"),pageIndex.trigger(),expApp.closeModal(".popup-edit-account")):expApp.alert("Please fill in a description and an initial balance.")}else expApp.alert("Could not save: no ID found. Please cancel and try again.")}),expApp.popup(".popup-edit-account")}function createDatetimePicker(t,e){var n=new Date;t||(t=n);var r=expApp.picker({input:e,toolbar:!1,inputReadOnly:!0,rotateEffect:!1,value:[t.getMonth(),t.getDate(),t.getFullYear(),t.getHours(),t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes()],onChange:function(t,e,n){var r=new Date(t.value[2],1*t.value[0]+1,0).getDate();e[1]>r&&t.cols[1].setValue(r)},formatValue:function(t,e,n){var r=parseInt(e[1])+1;return e[2]+"-"+(r<10?"0"+r:r)+"-"+(e[0]<10?"0"+e[0]:e[0])+"T"+e[3]+":"+e[4]},cols:[{values:[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31],textAlign:"right",cssClass:"smaller"},{divider:!0,content:".",cssClass:"smaller"},{values:[0,1,2,3,4,5,6,7,8,9,10,11],displayValues:[1,2,3,4,5,6,7,8,9,10,11,12],textAlign:"right",cssClass:"smaller"},{divider:!0,content:".",cssClass:"smaller"},{values:function(){for(var e=[],r=(t.getFullYear()<n.getFullYear()?t.getFullYear():n.getFullYear())-5;r<=(t.getFullYear()>n.getFullYear()?t.getFullYear():n.getFullYear())+5;r++)e.push(r);return e}(),cssClass:"smaller"},{divider:!0,content:" ",cssClass:"smaller"},{values:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23],cssClass:"smaller"},{divider:!0,content:":",cssClass:"smaller"},{values:function(){for(var t=[],e=0;e<=59;e++)t.push(e<10?"0"+e:e);return t}(),cssClass:"smaller"}]});return r}function initApp(){pageIndexLeft=expApp.onPageInit("index-left",function(t){var e=(new Date).getMonth(),n=(new Date).getFullYear(),r=new Date(n,e,1,0,0,0,0),i=new Date(n,e,1,0,0,0,0);$("#menu-list").empty();for(var a=!1,o=15;o>=0;o--){r.setFullYear(n,e),i.setFullYear(n,e+1);var s=window.i18n.month[e]+" "+n,l={request:"timerange",start:r.getTime(),end:i.getTime(),title:s},u=0,c=getItemsFromTimerange(r.getTime(),i.getTime());if(c.length>0){a=!0;for(var f=0;f<c.length;f++)u+=c[f].price;$("#menu-list").append('<li><a href="expenses-list.html?'+$.param(l)+'" data-view=".view-main" class="item-link close-panel item-content">\t<div class="item-inner">\t\t<div class="item-title">'+s+'</div>\t\t<div class="item-after">'+formatPrice(u)+"</div></div></a></li>")}e--,e==-1&&(e=11,n--)}a?$("#menu-list").append('<li><a href="expenses-list.html?request=lastupdate" data-view=".view-main" class="item-link close-panel item-content">\t<div class="item-inner">\t\tLast updated</div></a></li><li><a href="expenses-list.html?request=latest" data-view=".view-main" class="item-link close-panel item-content">\t<div class="item-inner">\t\tLatest by date</div></a></li><li><a href="expenses-list.html?request=deleted" data-view=".view-main" class="item-link close-panel item-content">\t<div class="item-inner">\t\tLast deleted</div></a></li>'):$("#menu-list").append('<li><div class="item-content">\t<div class="item-inner">\t\tNo expenses added yet.</div></div></li>')}),pageIndex=expApp.onPageInit("index index-1",function(t){t=t||{container:".view-main"},createCategoryOptions($(t.container).find("#form-add-category")),createAccountOptions($(t.container).find("#form-add-account"),!1,!1,!0);var e=new Date;$(t.container).find("#form-add-submit").on("click",function(e){if(e.preventDefault(),!window.globals.state.blockedInput){that=$(e.target),that.addClass("disabled"),window.globals.state.blockedInput=!0,window.setTimeout(function(){that.removeClass("disabled"),window.globals.state.blockedInput=!1},1e3);var n=$(t.container).find("#form-add-price").val(),r=$(t.container).find("#form-add-category").val(),i=$(t.container).find("#form-add-description").val(),a=$(t.container).find("#form-add-date").val(),o=$(t.container).find("#form-add-account").val(),s=validateItemForm(n,r,i,a,o,!1);if(s){$(t.container).find("#form-add-price").val(""),$(t.container).find("#form-add-description").val(""),$(t.container).find("#form-add-date").val("");var l=(db.insert("item",{uniqueid:createUniqueid(Date.now(),a+i+n+r+o),timestamp:s.date,lastupdate:Date.now(),synchronized:!1,account:s.account,category:s.category,price:s.price,description:s.description,deleted:!1,version:window.globals.properties.version}),db.query("category",{uniqueid:r})),u="";null!=i&&0!=i.length&&(u=": "+i),expApp.addNotification({title:"Expense added",message:formatPrice(n)+' for <span class="color-blue">'+l[0].description+"</span>"+u,hold:1e3}),pageIndexLeft.trigger(),pageIndex.trigger()}}});var n=getTotalBalance();$(t.container).find("#total-balance").html(formatPrice(n));var r=e.getMonth(),i=e.getFullYear(),a=new Date(i,r,1,0,0,0,0),o=new Date(i,r+1,1,0,0,0,0),s=getBalanceFromTimerange(a,o);$(t.container).find("#total-balance-month").html(formatPrice(s));var l=n-s;$(t.container).find("#total-balance-lastmonth").html(formatPrice(l));var u=getAccounts();$(t.container).find("#index-account-balance").empty();for(var c=0;c<u.length;c++){var f=getAccountBalance(u[c].uniqueid);$(t.container).find("#index-account-balance").append('<li><div class="item-content">\t<div class="item-inner">\t\t<div class="item-title">'+u[c].description+'</div>\t\t<div class="item-after">'+formatPrice(f)+"</div>\t</div></div></li>")}}),expApp.onPageInit("expenses-list",function(t){console.debug("in expenses list");var e=createUniqueid(Date.now(),t.query.request);window.globals.temp[e]=t,$(t.container).find("#expenses-list-category").attr("data-temppage",e),createCategoryOptions($(t.container).find("#expenses-list-category"),!1,!0),$(t.container).find("#expenses-list-category").on("change",function(t){var e=$(t.delegateTarget).val(),n=$(t.delegateTarget).attr("data-temppage");updateItemList(e,n,!0),console.debug("change list category",t,e,n)}),$(t.container).find(".page-content").addClass("infinite-scroll-"+e),expApp.attachInfiniteScroll(".infinite-scroll-"+e),$(".infinite-scroll-"+e).on("infinite",function(){window.globals.state.infiniteScrollLoading||(window.globals.state.infiniteScrollLoading=!0,setTimeout(function(){window.globals.state.infiniteScrollLoading=!1;var t=window.globals.temp[e];return t.infiniteScroll.endReached?(expApp.detachInfiniteScroll(".infinite-scroll-"+e),void $(".infinite-scroll-"+e+" .infinite-scroll-preloader").remove()):void updateItemList($(t.container).find("#expenses-list-category").val(),e,!1)},100))}),updateItemList(0,e,!0)}),expApp.onPageInit("settings",function(t){var e=getSettings();console.log(e),$("#settings-ui_money_format").find('option[value="'+e.ui_money_format+'"]').attr("selected","selected"),e.sync_enabled&&$("#settings-sync_enabled").prop("checked","checked"),e.sync_startup&&$("#settings-sync_startup").prop("checked","checked"),$("#settings-ui_money_format").on("change",function(){setSettings("ui_money_format",$("#settings-ui_money_format").val()),console.log(getSettings("ui_money_format"))}),$("#settings-sync_enabled").on("change",function(){setSettings("sync_enabled",$("#settings-sync_enabled").is(":checked")),console.log(getSettings("sync_enabled"))}),$("#settings-sync_startup").on("change",function(){setSettings("sync_startup",$("#settings-sync_startup").is(":checked")),console.log(getSettings("sync_startup"))})}),expApp.onPageInit("settings-categories",function(t){createCategoryListElements("#settings-categories-list"),$$(".list-block.sortable").on("open",function(t){$(t.target).hasClass("sortable")&&($$(".toggle-sortable i").addClass("icon-ion-ios7-checkmark-outline").removeClass("icon-ion-ios7-drag"),$("#settings-categories-list label.label-checkbox").removeClass("disabled"))}),$$(".list-block.sortable").on("close",function(t){$(t.target).hasClass("sortable")&&($$(".toggle-sortable i").addClass("icon-ion-ios7-drag").removeClass("icon-ion-ios7-checkmark-outline"),$("#settings-categories-list label.label-checkbox").addClass("disabled"),$("#settings-categories-list li").each(function(t){if($(this).is("[data-uniqueid]")){var e=$(this).attr("data-uniqueid"),n=!$(this).find("#cat-"+e).is(":checked"),r=t+1;db.update("category",{uniqueid:e},function(t){return t.disabled=n,t.order=r,t.synchronized=!1,t.lastupdate=Date.now(),t})}}))})}),expApp.onPageInit("settings-accounts",function(t){createAccountListElements("#settings-accounts-list"),$$(".list-block.sortable").on("open",function(t){$(t.target).hasClass("sortable")&&($$(".toggle-sortable i").addClass("icon-ion-ios7-checkmark-outline").removeClass("icon-ion-ios7-drag"),
$("#settings-accounts-list label.label-checkbox").removeClass("disabled"))}),$$(".list-block.sortable").on("close",function(t){$(t.target).hasClass("sortable")&&($$(".toggle-sortable i").addClass("icon-ion-ios7-drag").removeClass("icon-ion-ios7-checkmark-outline"),$("#settings-accounts-list label.label-checkbox").addClass("disabled"),$("#settings-accounts-list li").each(function(t){if($(this).is("[data-uniqueid]")){var e=$(this).attr("data-uniqueid"),n=!$(this).find("#cat-"+e).is(":checked"),r=t+1;db.update("account",{uniqueid:e},function(t){return t.disabled=n,t.order=r,t.synchronized=!1,t.lastupdate=Date.now(),t})}}),pageIndex.trigger())})}),expApp.onPageInit("backup",function(t){t=t||{container:".view-main"},$(t.container).find("a#export-csv").on("click",function(){var e=$(t.container).find("#export-table").val(),n=createCSVDataLink(e,db.query(e),"ExpenSync CSV Export "+Date.now());if(n){var r=document.createElement("a");r.setAttribute("href",n),r.setAttribute("download","expensync_export_"+Date.now()+".csv"),r.setAttribute("class","external"),document.body.appendChild(r),r.click()}else expApp.alert("No data was found for export.")}),$(t.container).find("a#export-text-csv").on("click",function(){var e=$(t.container).find("#export-table").val();$(".popup-general .popup-title").html("CSV Export"),$(".popup-general .page-content").html('<div class="content-block-title">Text content</div><div class="list-block"><ul><li class="align-top"><div class="item-content"><div class="item-inner"><div class="item-input"><textarea style="height: 300px">'+createCSVDataLink(e,db.query(e),"ExpenSync CSV Export "+Date.now(),!0)+"</textarea></div></div></div></li></ul></div>"),expApp.popup(".popup-general")}),$(t.container).find("a#export-text-json").on("click",function(){var e=$(t.container).find("#export-table").val();$(".popup-general .popup-title").html("JSON Export"),$(".popup-general .page-content").html('<div class="content-block-title">Text content</div><div class="list-block"><ul><li class="align-top"><div class="item-content"><div class="item-inner"><div class="item-input"><textarea style="height: 300px">'+JSON.stringify(db.query(e))+"</textarea></div></div></div></li></ul></div>"),expApp.popup(".popup-general")}),$(t.container).find("a#form-import-json-submit").on("click",function(e){if(e.preventDefault(),!window.globals.state.blockedInput){that=$(e.target),that.addClass("disabled"),window.globals.state.blockedInput=!0,window.setTimeout(function(){that.removeClass("disabled"),window.globals.state.blockedInput=!1},1e3);var n=JSON.parse($(t.container).find("#form-import-json-data").val()),r=$(t.container).find("#form-import-table").val(),i={updated:0,created:0};n&&Array.isArray(n)&&n.forEach(function(t){delete t.ID;var e=db.queryAll(r,{query:{uniqueid:t.uniqueid}});console.debug("rowExists",e,t.uniqueid,t.description),e=1===e.length,e?(db.update(r,{uniqueid:t.uniqueid},function(e){return $.extend(e,t)}),i.updated+=1):(db.insert(r,t),i.created+=1)}),expApp.alert("The data import into <strong>"+r+"</strong> was completed. Updated <strong>"+i.updated+"</strong> existing entries, created <strong>"+i.created+"</strong> new entries.","Import completed")}})}),expApp.onPageInit("stats-chartist",function(t){if($("#form-stats-date-start").on("change",onStatsDateChange),$("#form-stats-date-end").on("change",onStatsDateChange),Charts.draw(),window.globals.properties.debug)for(var e=db.query("item"),n=0;n<e.length;n++)row=e[n],$("#stats-item-list").append("<tr>  <td>"+row.uniqueid+"</td>  <td>"+row.timestamp+"</td>  <td>"+row.lastupdate+"</td>  <td>"+row.synchronized+"</td>  <td>"+row.account+"</td>  <td>"+row.category+"</td>  <td>"+row.price+"</td>  <td>"+row.description+"</td>  <td>"+row.deleted+"</td>  <td>"+row.version+"</td></tr>")}),expApp.onPageInit("stats",function(t){function e(t,e){return t.total+=e.price,t.count++,t.average=t.total/t.count,t}function n(t,e){return t.total-=e.price,t.count--,t.average=t.total/t.count,t}function r(){return{total:0,count:0,average:0}}var i=[],a=[],o=[],s=getAccounts(),l=0;s.forEach(function(t){o[t.uniqueid]=t.description,t.disabled?i.push(t.uniqueid):l+=t.initial_balance});var u=db.queryAll("item",{query:function(t){return!t.deleted&&i.indexOf(t.account)===-1}}),c=db.query("category");c.forEach(function(t){a[t.uniqueid]=t.description});var f=l;u.sort(function(t,e){return t.date<e.date?-1:t.date>e.date?1:0}),u.forEach(function(t){t.timestamp=new Date(t.timestamp),t.monthYear=d3.time.format("%Y/%m").parse(t.timestamp.getFullYear()+"/"+(t.timestamp.getMonth()+1)),f+=t.price,t.runningTotal=f});var d=crossfilter(u),h=d.groupAll(),p=d.dimension(dc.pluck("monthYear")),g=p.group().reduceSum(dc.pluck("price")),m=p.bottom(1)[0].timestamp,v=p.top(1)[0].timestamp,y=d.dimension(dc.pluck("timestamp")),_=y.group().reduce(e,n,r),b=y.group().reduceSum(dc.pluck("runningTotal"));d.groupAll();var x=d.dimension(dc.pluck("category")),w=x.group().reduceSum(function(t){return t.price<0?t.price:0}),C=x.group().reduceSum(function(t){return t.price>0?t.price:0}),k=x.groupAll().reduceSum(function(t){return t.price<0?t.price:0}),S=x.groupAll().reduceSum(function(t){return t.price>0?t.price:0});d.groupAll();var T=d.dimension(dc.pluck("account")),A=T.group().reduceSum(function(t){return t.price<0?t.price:0}),E=T.group().reduceSum(function(t){return t.price>0?t.price:0}),M=T.groupAll().reduceSum(function(t){return t.price<0?t.price:0}),D=T.groupAll().reduceSum(function(t){return t.price>0?t.price:0});dc.dataCount(".dc-data-count").dimension(d).group(h);var P=dc.barChart("#dc-month-chart"),O=dc.compositeChart("#dc-trend-chart"),N=dc.rowChart("#dc-category-minus-chart"),L=dc.rowChart("#dc-category-plus-chart"),I=dc.pieChart("#dc-category-minus-pie-chart"),R=dc.pieChart("#dc-category-plus-pie-chart"),B=dc.pieChart("#dc-account-minus-pie-chart"),z=dc.pieChart("#dc-account-plus-pie-chart"),F=dc.dataTable("#dc-data-table"),q=d3.time.scale();q.domain([m,v]);var H=function(t){var e=t.value>0?S:k;return a[t.key]+": "+getFormattedPrice(Math.round(100*t.value)/100)+" ("+Math.round(t.value/e.value()*1e3)/10+" %)"},U=function(t){var e=t.value>0?D:M;return o[t.key]+": "+getFormattedPrice(Math.round(100*t.value)/100)+" ("+Math.round(t.value/e.value()*1e3)/10+" %)"},j=function(){$(".dc-category-total-minus-sum").text(getFormattedPrice(k.value())),$(".dc-category-total-plus-sum").text(getFormattedPrice(S.value())),$("#dc-account-total-minus-sum").text(getFormattedPrice(M.value())),$("#dc-account-total-plus-sum").text(getFormattedPrice(D.value()))};P.width(function(){return $("#dc-month-chart").width()}).height(200).margins({left:35,right:30,top:20,bottom:20}).dimension(p).group(g).x(q).xUnits(d3.time.months).elasticX(!0).elasticY(!0).colors(d3.scale.ordinal().domain(["positive","negative"]).range(["#4cd964","#ff3b30"])).colorAccessor(function(t){return t.value>0?"positive":"negative"}).brushOn(!0).round(d3.time.month.round).title(function(t){return t.key.getMonth()+1+"/"+t.key.getFullYear()+": "+getFormattedPrice(Math.round(100*t.value)/100)}).on("renderlet",function(t){j()}).yAxis().ticks(4),O.width(function(){return $("#dc-trend-chart").width()}).height(200).margins({left:35,right:30,top:20,bottom:20}).dimension(y).brushOn(!1).elasticX(!0).elasticY(!0).title(function(t){var e=t.key.getDay()+"."+(t.key.getMonth()+1)+"."+t.key.getFullYear()+":";return e+="object"===_typeof(t.value)?" expense for this day "+parseFloat(t.value.total).toFixed(2):" overall total balance "+parseFloat(t.value).toFixed(2)}).renderHorizontalGridLines(!0).x(d3.time.scale()).legend(dc.legend().x(40).y(20).gap(10)).compose([dc.lineChart(O).ordinalColors(["#ff9500"]).group(_,"Daily expense").valueAccessor(function(t){return t.value.average}),dc.lineChart(O).ordinalColors(["#4cd964"]).group(b,"Total balance")]).yAxis().ticks(4),N.width(function(){return $("#dc-category-minus-chart").width()}).height(500).margins({left:30,right:30,top:20,bottom:20}).dimension(x).group(w).label(function(t){return a[t.key]}).title(H).elasticX(!0).xAxis().ticks(4),L.width(function(){return $("#dc-category-plus-chart").width()}).height(500).margins({left:30,right:30,top:20,bottom:20}).dimension(x).group(C).label(function(t){return a[t.key]}).title(H).elasticX(!0).xAxis().ticks(4),I.width(function(){return $("#dc-category-minus-pie-chart").width()}).height(300).radius(115).dimension(x).group(w).label(function(t){return""}).title(H),I.onClick=function(){},R.width(function(){return $("#dc-category-plus-pie-chart").width()}).height(300).radius(115).dimension(x).group(C).label(function(t){return""}).title(H),R.onClick=function(){},B.width(function(){return $("#dc-account-minus-pie-chart").width()}).height(300).radius(115).dimension(T).group(A).label(function(t){return""}).title(U),z.width(function(){return $("#dc-account-plus-pie-chart").width()}).height(300).radius(115).dimension(T).group(E).label(function(t){return""}).title(U),F.dimension(p).group(function(t){return t.timestamp.getFullYear()+" / "+("0"+(t.timestamp.getMonth()+1)).slice(-2)}).size(25).order(d3.descending).columns([{label:"Date",format:function(t){var e=("0"+t.timestamp.getDate()).slice(-2)+"."+("0"+(t.timestamp.getMonth()+1)).slice(-2)+"."+t.timestamp.getFullYear()+" "+("0"+t.timestamp.getHours()).slice(-2)+":"+("0"+t.timestamp.getMinutes()).slice(-2);return e}},{label:"Category",format:function(t){return a[t.category]}},{label:"Description",format:function(t){return t.description}},{label:"Price",format:function(t){return parseFloat(t.price).toFixed(2)}}]),dc.renderAll()}),expApp.init(),window.globals.properties.debug&&console.debug("DB content: ",JSON.parse(db.serialize()));var t=document.getElementById("button-install-firefox");if(navigator&&navigator.mozApps){var e,n;!function(){var r=function(t){t.preventDefault();var n=navigator.mozApps.install(e);n.onsuccess=function(t){expApp.alert("ExpenSync was successfully installed!")},n.onerror=function(){expApp.alert(n.error.name)}};e=location.href+"manifest.webapp",n=navigator.mozApps.checkInstalled(e),n.onsuccess=function(){n.result?t.style.display="none":t.addEventListener("click",r,!1)}}()}else t.style.display="none"}!function(t,e){"object"==typeof module&&"object"==typeof module.exports?module.exports=t.document?e(t,!0):function(t){if(!t.document)throw new Error("jQuery requires a window with a document");return e(t)}:e(t)}("undefined"!=typeof window?window:this,function(t,e){function n(t){var e=!!t&&"length"in t&&t.length,n=at.type(t);return"function"!==n&&!at.isWindow(t)&&("array"===n||0===e||"number"==typeof e&&e>0&&e-1 in t)}function r(t,e,n){if(at.isFunction(e))return at.grep(t,function(t,r){return!!e.call(t,r,t)!==n});if(e.nodeType)return at.grep(t,function(t){return t===e!==n});if("string"==typeof e){if(gt.test(e))return at.filter(e,t,n);e=at.filter(e,t)}return at.grep(t,function(t){return Q.call(e,t)>-1!==n})}function i(t,e){for(;(t=t[e])&&1!==t.nodeType;);return t}function a(t){var e={};return at.each(t.match(xt)||[],function(t,n){e[n]=!0}),e}function o(){Y.removeEventListener("DOMContentLoaded",o),t.removeEventListener("load",o),at.ready()}function s(){this.expando=at.expando+s.uid++}function l(t,e,n){var r;if(void 0===n&&1===t.nodeType)if(r="data-"+e.replace(Et,"-$&").toLowerCase(),n=t.getAttribute(r),"string"==typeof n){try{n="true"===n||"false"!==n&&("null"===n?null:+n+""===n?+n:At.test(n)?at.parseJSON(n):n)}catch(t){}Tt.set(t,e,n)}else n=void 0;return n}function u(t,e,n,r){var i,a=1,o=20,s=r?function(){return r.cur()}:function(){return at.css(t,e,"")},l=s(),u=n&&n[3]||(at.cssNumber[e]?"":"px"),c=(at.cssNumber[e]||"px"!==u&&+l)&&Dt.exec(at.css(t,e));if(c&&c[3]!==u){u=u||c[3],n=n||[],c=+l||1;do a=a||".5",c/=a,at.style(t,e,c+u);while(a!==(a=s()/l)&&1!==a&&--o)}return n&&(c=+c||+l||0,i=n[1]?c+(n[1]+1)*n[2]:+n[2],r&&(r.unit=u,r.start=c,r.end=i)),i}function c(t,e){var n="undefined"!=typeof t.getElementsByTagName?t.getElementsByTagName(e||"*"):"undefined"!=typeof t.querySelectorAll?t.querySelectorAll(e||"*"):[];return void 0===e||e&&at.nodeName(t,e)?at.merge([t],n):n}function f(t,e){for(var n=0,r=t.length;r>n;n++)St.set(t[n],"globalEval",!e||St.get(e[n],"globalEval"))}function d(t,e,n,r,i){for(var a,o,s,l,u,d,h=e.createDocumentFragment(),p=[],g=0,m=t.length;m>g;g++)if(a=t[g],a||0===a)if("object"===at.type(a))at.merge(p,a.nodeType?[a]:a);else if(Bt.test(a)){for(o=o||h.appendChild(e.createElement("div")),s=(Lt.exec(a)||["",""])[1].toLowerCase(),l=Rt[s]||Rt._default,o.innerHTML=l[1]+at.htmlPrefilter(a)+l[2],d=l[0];d--;)o=o.lastChild;at.merge(p,o.childNodes),o=h.firstChild,o.textContent=""}else p.push(e.createTextNode(a));for(h.textContent="",g=0;a=p[g++];)if(r&&at.inArray(a,r)>-1)i&&i.push(a);else if(u=at.contains(a.ownerDocument,a),o=c(h.appendChild(a),"script"),u&&f(o),n)for(d=0;a=o[d++];)It.test(a.type||"")&&n.push(a);return h}function h(){return!0}function p(){return!1}function g(){try{return Y.activeElement}catch(t){}}function m(t,e,n,r,i,a){var o,s;if("object"==typeof e){"string"!=typeof n&&(r=r||n,n=void 0);for(s in e)m(t,s,n,r,e[s],a);return t}if(null==r&&null==i?(i=n,r=n=void 0):null==i&&("string"==typeof n?(i=r,r=void 0):(i=r,r=n,n=void 0)),i===!1)i=p;else if(!i)return t;return 1===a&&(o=i,i=function(t){return at().off(t),o.apply(this,arguments)},i.guid=o.guid||(o.guid=at.guid++)),t.each(function(){at.event.add(this,e,i,r,n)})}function v(t,e){return at.nodeName(t,"table")&&at.nodeName(11!==e.nodeType?e:e.firstChild,"tr")?t.getElementsByTagName("tbody")[0]||t.appendChild(t.ownerDocument.createElement("tbody")):t}function y(t){return t.type=(null!==t.getAttribute("type"))+"/"+t.type,t}function _(t){var e=Vt.exec(t.type);return e?t.type=e[1]:t.removeAttribute("type"),t}function b(t,e){var n,r,i,a,o,s,l,u;if(1===e.nodeType){if(St.hasData(t)&&(a=St.access(t),o=St.set(e,a),u=a.events)){delete o.handle,o.events={};for(i in u)for(n=0,r=u[i].length;r>n;n++)at.event.add(e,i,u[i][n])}Tt.hasData(t)&&(s=Tt.access(t),l=at.extend({},s),Tt.set(e,l))}}function x(t,e){var n=e.nodeName.toLowerCase();"input"===n&&Nt.test(t.type)?e.checked=t.checked:"input"!==n&&"textarea"!==n||(e.defaultValue=t.defaultValue)}function w(t,e,n,r){e=K.apply([],e);var i,a,o,s,l,u,f=0,h=t.length,p=h-1,g=e[0],m=at.isFunction(g);if(m||h>1&&"string"==typeof g&&!rt.checkClone&&jt.test(g))return t.each(function(i){var a=t.eq(i);m&&(e[0]=g.call(this,i,a.html())),w(a,e,n,r)});if(h&&(i=d(e,t[0].ownerDocument,!1,t,r),a=i.firstChild,1===i.childNodes.length&&(i=a),a||r)){for(o=at.map(c(i,"script"),y),s=o.length;h>f;f++)l=i,f!==p&&(l=at.clone(l,!0,!0),s&&at.merge(o,c(l,"script"))),n.call(t[f],l,f);if(s)for(u=o[o.length-1].ownerDocument,at.map(o,_),f=0;s>f;f++)l=o[f],It.test(l.type||"")&&!St.access(l,"globalEval")&&at.contains(u,l)&&(l.src?at._evalUrl&&at._evalUrl(l.src):at.globalEval(l.textContent.replace($t,"")))}return t}function C(t,e,n){for(var r,i=e?at.filter(e,t):t,a=0;null!=(r=i[a]);a++)n||1!==r.nodeType||at.cleanData(c(r)),r.parentNode&&(n&&at.contains(r.ownerDocument,r)&&f(c(r,"script")),r.parentNode.removeChild(r));return t}function k(t,e){var n=at(e.createElement(t)).appendTo(e.body),r=at.css(n[0],"display");return n.detach(),r}function S(t){var e=Y,n=Gt[t];return n||(n=k(t,e),"none"!==n&&n||(Wt=(Wt||at("<iframe frameborder='0' width='0' height='0'/>")).appendTo(e.documentElement),e=Wt[0].contentDocument,e.write(),e.close(),n=k(t,e),Wt.detach()),Gt[t]=n),n}function T(t,e,n){var r,i,a,o,s=t.style;return n=n||Jt(t),o=n?n.getPropertyValue(e)||n[e]:void 0,""!==o&&void 0!==o||at.contains(t.ownerDocument,t)||(o=at.style(t,e)),n&&!rt.pixelMarginRight()&&Yt.test(o)&&Xt.test(e)&&(r=s.width,i=s.minWidth,a=s.maxWidth,s.minWidth=s.maxWidth=s.width=o,o=n.width,s.width=r,s.minWidth=i,s.maxWidth=a),void 0!==o?o+"":o}function A(t,e){return{get:function(){return t()?void delete this.get:(this.get=e).apply(this,arguments)}}}function E(t){if(t in re)return t;for(var e=t[0].toUpperCase()+t.slice(1),n=ne.length;n--;)if(t=ne[n]+e,t in re)return t}function M(t,e,n){var r=Dt.exec(e);return r?Math.max(0,r[2]-(n||0))+(r[3]||"px"):e}function D(t,e,n,r,i){for(var a=n===(r?"border":"content")?4:"width"===e?1:0,o=0;4>a;a+=2)"margin"===n&&(o+=at.css(t,n+Pt[a],!0,i)),r?("content"===n&&(o-=at.css(t,"padding"+Pt[a],!0,i)),"margin"!==n&&(o-=at.css(t,"border"+Pt[a]+"Width",!0,i))):(o+=at.css(t,"padding"+Pt[a],!0,i),"padding"!==n&&(o+=at.css(t,"border"+Pt[a]+"Width",!0,i)));return o}function P(t,e,n){var r=!0,i="width"===e?t.offsetWidth:t.offsetHeight,a=Jt(t),o="border-box"===at.css(t,"boxSizing",!1,a);if(0>=i||null==i){if(i=T(t,e,a),(0>i||null==i)&&(i=t.style[e]),Yt.test(i))return i;r=o&&(rt.boxSizingReliable()||i===t.style[e]),i=parseFloat(i)||0}return i+D(t,e,n||(o?"border":"content"),r,a)+"px"}function O(t,e){for(var n,r,i,a=[],o=0,s=t.length;s>o;o++)r=t[o],r.style&&(a[o]=St.get(r,"olddisplay"),n=r.style.display,e?(a[o]||"none"!==n||(r.style.display=""),""===r.style.display&&Ot(r)&&(a[o]=St.access(r,"olddisplay",S(r.nodeName)))):(i=Ot(r),"none"===n&&i||St.set(r,"olddisplay",i?n:at.css(r,"display"))));for(o=0;s>o;o++)r=t[o],r.style&&(e&&"none"!==r.style.display&&""!==r.style.display||(r.style.display=e?a[o]||"":"none"));return t}function N(t,e,n,r,i){return new N.prototype.init(t,e,n,r,i)}function L(){return t.setTimeout(function(){ie=void 0}),ie=at.now()}function I(t,e){var n,r=0,i={height:t};for(e=e?1:0;4>r;r+=2-e)n=Pt[r],i["margin"+n]=i["padding"+n]=t;return e&&(i.opacity=i.width=t),i}function R(t,e,n){for(var r,i=(F.tweeners[e]||[]).concat(F.tweeners["*"]),a=0,o=i.length;o>a;a++)if(r=i[a].call(n,e,t))return r}function B(t,e,n){var r,i,a,o,s,l,u,c,f=this,d={},h=t.style,p=t.nodeType&&Ot(t),g=St.get(t,"fxshow");n.queue||(s=at._queueHooks(t,"fx"),null==s.unqueued&&(s.unqueued=0,l=s.empty.fire,s.empty.fire=function(){s.unqueued||l()}),s.unqueued++,f.always(function(){f.always(function(){s.unqueued--,at.queue(t,"fx").length||s.empty.fire()})})),1===t.nodeType&&("height"in e||"width"in e)&&(n.overflow=[h.overflow,h.overflowX,h.overflowY],u=at.css(t,"display"),c="none"===u?St.get(t,"olddisplay")||S(t.nodeName):u,"inline"===c&&"none"===at.css(t,"float")&&(h.display="inline-block")),n.overflow&&(h.overflow="hidden",f.always(function(){h.overflow=n.overflow[0],h.overflowX=n.overflow[1],h.overflowY=n.overflow[2]}));for(r in e)if(i=e[r],oe.exec(i)){if(delete e[r],a=a||"toggle"===i,i===(p?"hide":"show")){if("show"!==i||!g||void 0===g[r])continue;p=!0}d[r]=g&&g[r]||at.style(t,r)}else u=void 0;if(at.isEmptyObject(d))"inline"===("none"===u?S(t.nodeName):u)&&(h.display=u);else{g?"hidden"in g&&(p=g.hidden):g=St.access(t,"fxshow",{}),a&&(g.hidden=!p),p?at(t).show():f.done(function(){at(t).hide()}),f.done(function(){var e;St.remove(t,"fxshow");for(e in d)at.style(t,e,d[e])});for(r in d)o=R(p?g[r]:0,r,f),r in g||(g[r]=o.start,p&&(o.end=o.start,o.start="width"===r||"height"===r?1:0))}}function z(t,e){var n,r,i,a,o;for(n in t)if(r=at.camelCase(n),i=e[r],a=t[n],at.isArray(a)&&(i=a[1],a=t[n]=a[0]),n!==r&&(t[r]=a,delete t[n]),o=at.cssHooks[r],o&&"expand"in o){a=o.expand(a),delete t[r];for(n in a)n in t||(t[n]=a[n],e[n]=i)}else e[r]=i}function F(t,e,n){var r,i,a=0,o=F.prefilters.length,s=at.Deferred().always(function(){delete l.elem}),l=function(){if(i)return!1;for(var e=ie||L(),n=Math.max(0,u.startTime+u.duration-e),r=n/u.duration||0,a=1-r,o=0,l=u.tweens.length;l>o;o++)u.tweens[o].run(a);return s.notifyWith(t,[u,a,n]),1>a&&l?n:(s.resolveWith(t,[u]),!1)},u=s.promise({elem:t,props:at.extend({},e),opts:at.extend(!0,{specialEasing:{},easing:at.easing._default},n),originalProperties:e,originalOptions:n,startTime:ie||L(),duration:n.duration,tweens:[],createTween:function(e,n){var r=at.Tween(t,u.opts,e,n,u.opts.specialEasing[e]||u.opts.easing);return u.tweens.push(r),r},stop:function(e){var n=0,r=e?u.tweens.length:0;if(i)return this;for(i=!0;r>n;n++)u.tweens[n].run(1);return e?(s.notifyWith(t,[u,1,0]),s.resolveWith(t,[u,e])):s.rejectWith(t,[u,e]),this}}),c=u.props;for(z(c,u.opts.specialEasing);o>a;a++)if(r=F.prefilters[a].call(u,t,c,u.opts))return at.isFunction(r.stop)&&(at._queueHooks(u.elem,u.opts.queue).stop=at.proxy(r.stop,r)),r;return at.map(c,R,u),at.isFunction(u.opts.start)&&u.opts.start.call(t,u),at.fx.timer(at.extend(l,{elem:t,anim:u,queue:u.opts.queue})),u.progress(u.opts.progress).done(u.opts.done,u.opts.complete).fail(u.opts.fail).always(u.opts.always)}function q(t){return t.getAttribute&&t.getAttribute("class")||""}function H(t){return function(e,n){"string"!=typeof e&&(n=e,e="*");var r,i=0,a=e.toLowerCase().match(xt)||[];if(at.isFunction(n))for(;r=a[i++];)"+"===r[0]?(r=r.slice(1)||"*",(t[r]=t[r]||[]).unshift(n)):(t[r]=t[r]||[]).push(n)}}function U(t,e,n,r){function i(s){var l;return a[s]=!0,at.each(t[s]||[],function(t,s){var u=s(e,n,r);return"string"!=typeof u||o||a[u]?o?!(l=u):void 0:(e.dataTypes.unshift(u),i(u),!1)}),l}var a={},o=t===Te;return i(e.dataTypes[0])||!a["*"]&&i("*")}function j(t,e){var n,r,i=at.ajaxSettings.flatOptions||{};for(n in e)void 0!==e[n]&&((i[n]?t:r||(r={}))[n]=e[n]);return r&&at.extend(!0,t,r),t}function V(t,e,n){for(var r,i,a,o,s=t.contents,l=t.dataTypes;"*"===l[0];)l.shift(),void 0===r&&(r=t.mimeType||e.getResponseHeader("Content-Type"));if(r)for(i in s)if(s[i]&&s[i].test(r)){l.unshift(i);break}if(l[0]in n)a=l[0];else{for(i in n){if(!l[0]||t.converters[i+" "+l[0]]){a=i;break}o||(o=i)}a=a||o}return a?(a!==l[0]&&l.unshift(a),n[a]):void 0}function $(t,e,n,r){var i,a,o,s,l,u={},c=t.dataTypes.slice();if(c[1])for(o in t.converters)u[o.toLowerCase()]=t.converters[o];for(a=c.shift();a;)if(t.responseFields[a]&&(n[t.responseFields[a]]=e),!l&&r&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),l=a,a=c.shift())if("*"===a)a=l;else if("*"!==l&&l!==a){if(o=u[l+" "+a]||u["* "+a],!o)for(i in u)if(s=i.split(" "),s[1]===a&&(o=u[l+" "+s[0]]||u["* "+s[0]])){o===!0?o=u[i]:u[i]!==!0&&(a=s[0],c.unshift(s[1]));break}if(o!==!0)if(o&&t.throws)e=o(e);else try{e=o(e)}catch(t){return{state:"parsererror",error:o?t:"No conversion from "+l+" to "+a}}}return{state:"success",data:e}}function W(t,e,n,r){var i;if(at.isArray(e))at.each(e,function(e,i){n||De.test(t)?r(t,i):W(t+"["+("object"==typeof i&&null!=i?e:"")+"]",i,n,r)});else if(n||"object"!==at.type(e))r(t,e);else for(i in e)W(t+"["+i+"]",e[i],n,r)}function G(t){return at.isWindow(t)?t:9===t.nodeType&&t.defaultView}var X=[],Y=t.document,J=X.slice,K=X.concat,Z=X.push,Q=X.indexOf,tt={},et=tt.toString,nt=tt.hasOwnProperty,rt={},it="2.2.4",at=function(t,e){return new at.fn.init(t,e)},ot=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,st=/^-ms-/,lt=/-([\da-z])/gi,ut=function(t,e){return e.toUpperCase()};at.fn=at.prototype={jquery:it,constructor:at,selector:"",length:0,toArray:function(){return J.call(this)},get:function(t){return null!=t?0>t?this[t+this.length]:this[t]:J.call(this)},pushStack:function(t){var e=at.merge(this.constructor(),t);return e.prevObject=this,e.context=this.context,e},each:function(t){return at.each(this,t)},map:function(t){return this.pushStack(at.map(this,function(e,n){return t.call(e,n,e)}))},slice:function(){return this.pushStack(J.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(t){var e=this.length,n=+t+(0>t?e:0);return this.pushStack(n>=0&&e>n?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:Z,sort:X.sort,splice:X.splice},at.extend=at.fn.extend=function(){var t,e,n,r,i,a,o=arguments[0]||{},s=1,l=arguments.length,u=!1;for("boolean"==typeof o&&(u=o,o=arguments[s]||{},s++),"object"==typeof o||at.isFunction(o)||(o={}),s===l&&(o=this,s--);l>s;s++)if(null!=(t=arguments[s]))for(e in t)n=o[e],r=t[e],o!==r&&(u&&r&&(at.isPlainObject(r)||(i=at.isArray(r)))?(i?(i=!1,a=n&&at.isArray(n)?n:[]):a=n&&at.isPlainObject(n)?n:{},o[e]=at.extend(u,a,r)):void 0!==r&&(o[e]=r));return o},at.extend({expando:"jQuery"+(it+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isFunction:function(t){return"function"===at.type(t)},isArray:Array.isArray,isWindow:function(t){return null!=t&&t===t.window},isNumeric:function(t){var e=t&&t.toString();return!at.isArray(t)&&e-parseFloat(e)+1>=0},isPlainObject:function(t){var e;if("object"!==at.type(t)||t.nodeType||at.isWindow(t))return!1;if(t.constructor&&!nt.call(t,"constructor")&&!nt.call(t.constructor.prototype||{},"isPrototypeOf"))return!1;for(e in t);return void 0===e||nt.call(t,e)},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},type:function(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?tt[et.call(t)]||"object":typeof t},globalEval:function(t){var e,n=eval;t=at.trim(t),t&&(1===t.indexOf("use strict")?(e=Y.createElement("script"),e.text=t,Y.head.appendChild(e).parentNode.removeChild(e)):n(t))},camelCase:function(t){return t.replace(st,"ms-").replace(lt,ut)},nodeName:function(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()},each:function(t,e){var r,i=0;if(n(t))for(r=t.length;r>i&&e.call(t[i],i,t[i])!==!1;i++);else for(i in t)if(e.call(t[i],i,t[i])===!1)break;return t},trim:function(t){return null==t?"":(t+"").replace(ot,"")},makeArray:function(t,e){var r=e||[];return null!=t&&(n(Object(t))?at.merge(r,"string"==typeof t?[t]:t):Z.call(r,t)),r},inArray:function(t,e,n){return null==e?-1:Q.call(e,t,n)},merge:function(t,e){for(var n=+e.length,r=0,i=t.length;n>r;r++)t[i++]=e[r];return t.length=i,t},grep:function(t,e,n){for(var r,i=[],a=0,o=t.length,s=!n;o>a;a++)r=!e(t[a],a),r!==s&&i.push(t[a]);return i},map:function(t,e,r){var i,a,o=0,s=[];if(n(t))for(i=t.length;i>o;o++)a=e(t[o],o,r),null!=a&&s.push(a);else for(o in t)a=e(t[o],o,r),null!=a&&s.push(a);return K.apply([],s)},guid:1,proxy:function(t,e){var n,r,i;return"string"==typeof e&&(n=t[e],e=t,t=n),at.isFunction(t)?(r=J.call(arguments,2),i=function(){return t.apply(e||this,r.concat(J.call(arguments)))},i.guid=t.guid=t.guid||at.guid++,i):void 0},now:Date.now,support:rt}),"function"==typeof Symbol&&(at.fn[Symbol.iterator]=X[Symbol.iterator]),at.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(t,e){tt["[object "+e+"]"]=e.toLowerCase()});var ct=function(t){function e(t,e,n,r){var i,a,o,s,l,u,f,h,p=e&&e.ownerDocument,g=e?e.nodeType:9;if(n=n||[],"string"!=typeof t||!t||1!==g&&9!==g&&11!==g)return n;if(!r&&((e?e.ownerDocument||e:q)!==O&&P(e),e=e||O,L)){if(11!==g&&(u=vt.exec(t)))if(i=u[1]){if(9===g){if(!(o=e.getElementById(i)))return n;if(o.id===i)return n.push(o),n}else if(p&&(o=p.getElementById(i))&&z(e,o)&&o.id===i)return n.push(o),n}else{if(u[2])return Z.apply(n,e.getElementsByTagName(t)),n;if((i=u[3])&&x.getElementsByClassName&&e.getElementsByClassName)return Z.apply(n,e.getElementsByClassName(i)),n}if(x.qsa&&!$[t+" "]&&(!I||!I.test(t))){if(1!==g)p=e,h=t;else if("object"!==e.nodeName.toLowerCase()){for((s=e.getAttribute("id"))?s=s.replace(_t,"\\$&"):e.setAttribute("id",s=F),f=S(t),a=f.length,l=dt.test(s)?"#"+s:"[id='"+s+"']";a--;)f[a]=l+" "+d(f[a]);h=f.join(","),p=yt.test(t)&&c(e.parentNode)||e}if(h)try{return Z.apply(n,p.querySelectorAll(h)),n}catch(t){}finally{s===F&&e.removeAttribute("id")}}}return A(t.replace(st,"$1"),e,n,r)}function n(){function t(n,r){return e.push(n+" ")>w.cacheLength&&delete t[e.shift()],t[n+" "]=r}var e=[];return t}function r(t){return t[F]=!0,t}function i(t){var e=O.createElement("div");try{return!!t(e)}catch(t){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function a(t,e){for(var n=t.split("|"),r=n.length;r--;)w.attrHandle[n[r]]=e}function o(t,e){var n=e&&t,r=n&&1===t.nodeType&&1===e.nodeType&&(~e.sourceIndex||G)-(~t.sourceIndex||G);if(r)return r;if(n)for(;n=n.nextSibling;)if(n===e)return-1;return t?1:-1}function s(t){return function(e){var n=e.nodeName.toLowerCase();return"input"===n&&e.type===t}}function l(t){return function(e){var n=e.nodeName.toLowerCase();return("input"===n||"button"===n)&&e.type===t}}function u(t){return r(function(e){return e=+e,r(function(n,r){for(var i,a=t([],n.length,e),o=a.length;o--;)n[i=a[o]]&&(n[i]=!(r[i]=n[i]))})})}function c(t){return t&&"undefined"!=typeof t.getElementsByTagName&&t}function f(){}function d(t){for(var e=0,n=t.length,r="";n>e;e++)r+=t[e].value;return r}function h(t,e,n){var r=e.dir,i=n&&"parentNode"===r,a=U++;return e.first?function(e,n,a){for(;e=e[r];)if(1===e.nodeType||i)return t(e,n,a)}:function(e,n,o){var s,l,u,c=[H,a];if(o){for(;e=e[r];)if((1===e.nodeType||i)&&t(e,n,o))return!0}else for(;e=e[r];)if(1===e.nodeType||i){if(u=e[F]||(e[F]={}),l=u[e.uniqueID]||(u[e.uniqueID]={}),(s=l[r])&&s[0]===H&&s[1]===a)return c[2]=s[2];if(l[r]=c,c[2]=t(e,n,o))return!0}}}function p(t){return t.length>1?function(e,n,r){for(var i=t.length;i--;)if(!t[i](e,n,r))return!1;return!0}:t[0]}function g(t,n,r){for(var i=0,a=n.length;a>i;i++)e(t,n[i],r);return r}function m(t,e,n,r,i){for(var a,o=[],s=0,l=t.length,u=null!=e;l>s;s++)(a=t[s])&&(n&&!n(a,r,i)||(o.push(a),u&&e.push(s)));return o}function v(t,e,n,i,a,o){return i&&!i[F]&&(i=v(i)),a&&!a[F]&&(a=v(a,o)),r(function(r,o,s,l){var u,c,f,d=[],h=[],p=o.length,v=r||g(e||"*",s.nodeType?[s]:s,[]),y=!t||!r&&e?v:m(v,d,t,s,l),_=n?a||(r?t:p||i)?[]:o:y;if(n&&n(y,_,s,l),i)for(u=m(_,h),i(u,[],s,l),c=u.length;c--;)(f=u[c])&&(_[h[c]]=!(y[h[c]]=f));if(r){if(a||t){if(a){for(u=[],c=_.length;c--;)(f=_[c])&&u.push(y[c]=f);a(null,_=[],u,l)}for(c=_.length;c--;)(f=_[c])&&(u=a?tt(r,f):d[c])>-1&&(r[u]=!(o[u]=f))}}else _=m(_===o?_.splice(p,_.length):_),a?a(null,o,_,l):Z.apply(o,_)})}function y(t){for(var e,n,r,i=t.length,a=w.relative[t[0].type],o=a||w.relative[" "],s=a?1:0,l=h(function(t){return t===e},o,!0),u=h(function(t){return tt(e,t)>-1},o,!0),c=[function(t,n,r){var i=!a&&(r||n!==E)||((e=n).nodeType?l(t,n,r):u(t,n,r));return e=null,i}];i>s;s++)if(n=w.relative[t[s].type])c=[h(p(c),n)];else{if(n=w.filter[t[s].type].apply(null,t[s].matches),n[F]){for(r=++s;i>r&&!w.relative[t[r].type];r++);return v(s>1&&p(c),s>1&&d(t.slice(0,s-1).concat({value:" "===t[s-2].type?"*":""})).replace(st,"$1"),n,r>s&&y(t.slice(s,r)),i>r&&y(t=t.slice(r)),i>r&&d(t))}c.push(n)}return p(c)}function _(t,n){var i=n.length>0,a=t.length>0,o=function(r,o,s,l,u){var c,f,d,h=0,p="0",g=r&&[],v=[],y=E,_=r||a&&w.find.TAG("*",u),b=H+=null==y?1:Math.random()||.1,x=_.length;for(u&&(E=o===O||o||u);p!==x&&null!=(c=_[p]);p++){if(a&&c){for(f=0,o||c.ownerDocument===O||(P(c),s=!L);d=t[f++];)if(d(c,o||O,s)){l.push(c);break}u&&(H=b)}i&&((c=!d&&c)&&h--,r&&g.push(c))}if(h+=p,i&&p!==h){for(f=0;d=n[f++];)d(g,v,o,s);if(r){if(h>0)for(;p--;)g[p]||v[p]||(v[p]=J.call(l));v=m(v)}Z.apply(l,v),u&&!r&&v.length>0&&h+n.length>1&&e.uniqueSort(l)}return u&&(H=b,E=y),g};return i?r(o):o}var b,x,w,C,k,S,T,A,E,M,D,P,O,N,L,I,R,B,z,F="sizzle"+1*new Date,q=t.document,H=0,U=0,j=n(),V=n(),$=n(),W=function(t,e){return t===e&&(D=!0),0},G=1<<31,X={}.hasOwnProperty,Y=[],J=Y.pop,K=Y.push,Z=Y.push,Q=Y.slice,tt=function(t,e){for(var n=0,r=t.length;r>n;n++)if(t[n]===e)return n;return-1},et="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",nt="[\\x20\\t\\r\\n\\f]",rt="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",it="\\["+nt+"*("+rt+")(?:"+nt+"*([*^$|!~]?=)"+nt+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+rt+"))|)"+nt+"*\\]",at=":("+rt+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+it+")*)|.*)\\)|)",ot=new RegExp(nt+"+","g"),st=new RegExp("^"+nt+"+|((?:^|[^\\\\])(?:\\\\.)*)"+nt+"+$","g"),lt=new RegExp("^"+nt+"*,"+nt+"*"),ut=new RegExp("^"+nt+"*([>+~]|"+nt+")"+nt+"*"),ct=new RegExp("="+nt+"*([^\\]'\"]*?)"+nt+"*\\]","g"),ft=new RegExp(at),dt=new RegExp("^"+rt+"$"),ht={ID:new RegExp("^#("+rt+")"),CLASS:new RegExp("^\\.("+rt+")"),TAG:new RegExp("^("+rt+"|[*])"),ATTR:new RegExp("^"+it),PSEUDO:new RegExp("^"+at),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+nt+"*(even|odd|(([+-]|)(\\d*)n|)"+nt+"*(?:([+-]|)"+nt+"*(\\d+)|))"+nt+"*\\)|)","i"),bool:new RegExp("^(?:"+et+")$","i"),needsContext:new RegExp("^"+nt+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+nt+"*((?:-\\d)?\\d*)"+nt+"*\\)|)(?=[^-]|$)","i")},pt=/^(?:input|select|textarea|button)$/i,gt=/^h\d$/i,mt=/^[^{]+\{\s*\[native \w/,vt=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,yt=/[+~]/,_t=/'|\\/g,bt=new RegExp("\\\\([\\da-f]{1,6}"+nt+"?|("+nt+")|.)","ig"),xt=function(t,e,n){
var r="0x"+e-65536;return r!==r||n?e:0>r?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,1023&r|56320)},wt=function(){P()};try{Z.apply(Y=Q.call(q.childNodes),q.childNodes),Y[q.childNodes.length].nodeType}catch(t){Z={apply:Y.length?function(t,e){K.apply(t,Q.call(e))}:function(t,e){for(var n=t.length,r=0;t[n++]=e[r++];);t.length=n-1}}}x=e.support={},k=e.isXML=function(t){var e=t&&(t.ownerDocument||t).documentElement;return!!e&&"HTML"!==e.nodeName},P=e.setDocument=function(t){var e,n,r=t?t.ownerDocument||t:q;return r!==O&&9===r.nodeType&&r.documentElement?(O=r,N=O.documentElement,L=!k(O),(n=O.defaultView)&&n.top!==n&&(n.addEventListener?n.addEventListener("unload",wt,!1):n.attachEvent&&n.attachEvent("onunload",wt)),x.attributes=i(function(t){return t.className="i",!t.getAttribute("className")}),x.getElementsByTagName=i(function(t){return t.appendChild(O.createComment("")),!t.getElementsByTagName("*").length}),x.getElementsByClassName=mt.test(O.getElementsByClassName),x.getById=i(function(t){return N.appendChild(t).id=F,!O.getElementsByName||!O.getElementsByName(F).length}),x.getById?(w.find.ID=function(t,e){if("undefined"!=typeof e.getElementById&&L){var n=e.getElementById(t);return n?[n]:[]}},w.filter.ID=function(t){var e=t.replace(bt,xt);return function(t){return t.getAttribute("id")===e}}):(delete w.find.ID,w.filter.ID=function(t){var e=t.replace(bt,xt);return function(t){var n="undefined"!=typeof t.getAttributeNode&&t.getAttributeNode("id");return n&&n.value===e}}),w.find.TAG=x.getElementsByTagName?function(t,e){return"undefined"!=typeof e.getElementsByTagName?e.getElementsByTagName(t):x.qsa?e.querySelectorAll(t):void 0}:function(t,e){var n,r=[],i=0,a=e.getElementsByTagName(t);if("*"===t){for(;n=a[i++];)1===n.nodeType&&r.push(n);return r}return a},w.find.CLASS=x.getElementsByClassName&&function(t,e){return"undefined"!=typeof e.getElementsByClassName&&L?e.getElementsByClassName(t):void 0},R=[],I=[],(x.qsa=mt.test(O.querySelectorAll))&&(i(function(t){N.appendChild(t).innerHTML="<a id='"+F+"'></a><select id='"+F+"-\r\\' msallowcapture=''><option selected=''></option></select>",t.querySelectorAll("[msallowcapture^='']").length&&I.push("[*^$]="+nt+"*(?:''|\"\")"),t.querySelectorAll("[selected]").length||I.push("\\["+nt+"*(?:value|"+et+")"),t.querySelectorAll("[id~="+F+"-]").length||I.push("~="),t.querySelectorAll(":checked").length||I.push(":checked"),t.querySelectorAll("a#"+F+"+*").length||I.push(".#.+[+~]")}),i(function(t){var e=O.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),t.querySelectorAll("[name=d]").length&&I.push("name"+nt+"*[*^$|!~]?="),t.querySelectorAll(":enabled").length||I.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),I.push(",.*:")})),(x.matchesSelector=mt.test(B=N.matches||N.webkitMatchesSelector||N.mozMatchesSelector||N.oMatchesSelector||N.msMatchesSelector))&&i(function(t){x.disconnectedMatch=B.call(t,"div"),B.call(t,"[s!='']:x"),R.push("!=",at)}),I=I.length&&new RegExp(I.join("|")),R=R.length&&new RegExp(R.join("|")),e=mt.test(N.compareDocumentPosition),z=e||mt.test(N.contains)?function(t,e){var n=9===t.nodeType?t.documentElement:t,r=e&&e.parentNode;return t===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):t.compareDocumentPosition&&16&t.compareDocumentPosition(r)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},W=e?function(t,e){if(t===e)return D=!0,0;var n=!t.compareDocumentPosition-!e.compareDocumentPosition;return n?n:(n=(t.ownerDocument||t)===(e.ownerDocument||e)?t.compareDocumentPosition(e):1,1&n||!x.sortDetached&&e.compareDocumentPosition(t)===n?t===O||t.ownerDocument===q&&z(q,t)?-1:e===O||e.ownerDocument===q&&z(q,e)?1:M?tt(M,t)-tt(M,e):0:4&n?-1:1)}:function(t,e){if(t===e)return D=!0,0;var n,r=0,i=t.parentNode,a=e.parentNode,s=[t],l=[e];if(!i||!a)return t===O?-1:e===O?1:i?-1:a?1:M?tt(M,t)-tt(M,e):0;if(i===a)return o(t,e);for(n=t;n=n.parentNode;)s.unshift(n);for(n=e;n=n.parentNode;)l.unshift(n);for(;s[r]===l[r];)r++;return r?o(s[r],l[r]):s[r]===q?-1:l[r]===q?1:0},O):O},e.matches=function(t,n){return e(t,null,null,n)},e.matchesSelector=function(t,n){if((t.ownerDocument||t)!==O&&P(t),n=n.replace(ct,"='$1']"),x.matchesSelector&&L&&!$[n+" "]&&(!R||!R.test(n))&&(!I||!I.test(n)))try{var r=B.call(t,n);if(r||x.disconnectedMatch||t.document&&11!==t.document.nodeType)return r}catch(t){}return e(n,O,null,[t]).length>0},e.contains=function(t,e){return(t.ownerDocument||t)!==O&&P(t),z(t,e)},e.attr=function(t,e){(t.ownerDocument||t)!==O&&P(t);var n=w.attrHandle[e.toLowerCase()],r=n&&X.call(w.attrHandle,e.toLowerCase())?n(t,e,!L):void 0;return void 0!==r?r:x.attributes||!L?t.getAttribute(e):(r=t.getAttributeNode(e))&&r.specified?r.value:null},e.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},e.uniqueSort=function(t){var e,n=[],r=0,i=0;if(D=!x.detectDuplicates,M=!x.sortStable&&t.slice(0),t.sort(W),D){for(;e=t[i++];)e===t[i]&&(r=n.push(i));for(;r--;)t.splice(n[r],1)}return M=null,t},C=e.getText=function(t){var e,n="",r=0,i=t.nodeType;if(i){if(1===i||9===i||11===i){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)n+=C(t)}else if(3===i||4===i)return t.nodeValue}else for(;e=t[r++];)n+=C(e);return n},w=e.selectors={cacheLength:50,createPseudo:r,match:ht,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(bt,xt),t[3]=(t[3]||t[4]||t[5]||"").replace(bt,xt),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||e.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&e.error(t[0]),t},PSEUDO:function(t){var e,n=!t[6]&&t[2];return ht.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":n&&ft.test(n)&&(e=S(n,!0))&&(e=n.indexOf(")",n.length-e)-n.length)&&(t[0]=t[0].slice(0,e),t[2]=n.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(bt,xt).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=j[t+" "];return e||(e=new RegExp("(^|"+nt+")"+t+"("+nt+"|$)"))&&j(t,function(t){return e.test("string"==typeof t.className&&t.className||"undefined"!=typeof t.getAttribute&&t.getAttribute("class")||"")})},ATTR:function(t,n,r){return function(i){var a=e.attr(i,t);return null==a?"!="===n:!n||(a+="","="===n?a===r:"!="===n?a!==r:"^="===n?r&&0===a.indexOf(r):"*="===n?r&&a.indexOf(r)>-1:"$="===n?r&&a.slice(-r.length)===r:"~="===n?(" "+a.replace(ot," ")+" ").indexOf(r)>-1:"|="===n&&(a===r||a.slice(0,r.length+1)===r+"-"))}},CHILD:function(t,e,n,r,i){var a="nth"!==t.slice(0,3),o="last"!==t.slice(-4),s="of-type"===e;return 1===r&&0===i?function(t){return!!t.parentNode}:function(e,n,l){var u,c,f,d,h,p,g=a!==o?"nextSibling":"previousSibling",m=e.parentNode,v=s&&e.nodeName.toLowerCase(),y=!l&&!s,_=!1;if(m){if(a){for(;g;){for(d=e;d=d[g];)if(s?d.nodeName.toLowerCase()===v:1===d.nodeType)return!1;p=g="only"===t&&!p&&"nextSibling"}return!0}if(p=[o?m.firstChild:m.lastChild],o&&y){for(d=m,f=d[F]||(d[F]={}),c=f[d.uniqueID]||(f[d.uniqueID]={}),u=c[t]||[],h=u[0]===H&&u[1],_=h&&u[2],d=h&&m.childNodes[h];d=++h&&d&&d[g]||(_=h=0)||p.pop();)if(1===d.nodeType&&++_&&d===e){c[t]=[H,h,_];break}}else if(y&&(d=e,f=d[F]||(d[F]={}),c=f[d.uniqueID]||(f[d.uniqueID]={}),u=c[t]||[],h=u[0]===H&&u[1],_=h),_===!1)for(;(d=++h&&d&&d[g]||(_=h=0)||p.pop())&&((s?d.nodeName.toLowerCase()!==v:1!==d.nodeType)||!++_||(y&&(f=d[F]||(d[F]={}),c=f[d.uniqueID]||(f[d.uniqueID]={}),c[t]=[H,_]),d!==e)););return _-=i,_===r||_%r===0&&_/r>=0}}},PSEUDO:function(t,n){var i,a=w.pseudos[t]||w.setFilters[t.toLowerCase()]||e.error("unsupported pseudo: "+t);return a[F]?a(n):a.length>1?(i=[t,t,"",n],w.setFilters.hasOwnProperty(t.toLowerCase())?r(function(t,e){for(var r,i=a(t,n),o=i.length;o--;)r=tt(t,i[o]),t[r]=!(e[r]=i[o])}):function(t){return a(t,0,i)}):a}},pseudos:{not:r(function(t){var e=[],n=[],i=T(t.replace(st,"$1"));return i[F]?r(function(t,e,n,r){for(var a,o=i(t,null,r,[]),s=t.length;s--;)(a=o[s])&&(t[s]=!(e[s]=a))}):function(t,r,a){return e[0]=t,i(e,null,a,n),e[0]=null,!n.pop()}}),has:r(function(t){return function(n){return e(t,n).length>0}}),contains:r(function(t){return t=t.replace(bt,xt),function(e){return(e.textContent||e.innerText||C(e)).indexOf(t)>-1}}),lang:r(function(t){return dt.test(t||"")||e.error("unsupported lang: "+t),t=t.replace(bt,xt).toLowerCase(),function(e){var n;do if(n=L?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return n=n.toLowerCase(),n===t||0===n.indexOf(t+"-");while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var n=t.location&&t.location.hash;return n&&n.slice(1)===e.id},root:function(t){return t===N},focus:function(t){return t===O.activeElement&&(!O.hasFocus||O.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:function(t){return t.disabled===!1},disabled:function(t){return t.disabled===!0},checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,t.selected===!0},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!w.pseudos.empty(t)},header:function(t){return gt.test(t.nodeName)},input:function(t){return pt.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:u(function(){return[0]}),last:u(function(t,e){return[e-1]}),eq:u(function(t,e,n){return[0>n?n+e:n]}),even:u(function(t,e){for(var n=0;e>n;n+=2)t.push(n);return t}),odd:u(function(t,e){for(var n=1;e>n;n+=2)t.push(n);return t}),lt:u(function(t,e,n){for(var r=0>n?n+e:n;--r>=0;)t.push(r);return t}),gt:u(function(t,e,n){for(var r=0>n?n+e:n;++r<e;)t.push(r);return t})}},w.pseudos.nth=w.pseudos.eq;for(b in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})w.pseudos[b]=s(b);for(b in{submit:!0,reset:!0})w.pseudos[b]=l(b);return f.prototype=w.filters=w.pseudos,w.setFilters=new f,S=e.tokenize=function(t,n){var r,i,a,o,s,l,u,c=V[t+" "];if(c)return n?0:c.slice(0);for(s=t,l=[],u=w.preFilter;s;){r&&!(i=lt.exec(s))||(i&&(s=s.slice(i[0].length)||s),l.push(a=[])),r=!1,(i=ut.exec(s))&&(r=i.shift(),a.push({value:r,type:i[0].replace(st," ")}),s=s.slice(r.length));for(o in w.filter)!(i=ht[o].exec(s))||u[o]&&!(i=u[o](i))||(r=i.shift(),a.push({value:r,type:o,matches:i}),s=s.slice(r.length));if(!r)break}return n?s.length:s?e.error(t):V(t,l).slice(0)},T=e.compile=function(t,e){var n,r=[],i=[],a=$[t+" "];if(!a){for(e||(e=S(t)),n=e.length;n--;)a=y(e[n]),a[F]?r.push(a):i.push(a);a=$(t,_(i,r)),a.selector=t}return a},A=e.select=function(t,e,n,r){var i,a,o,s,l,u="function"==typeof t&&t,f=!r&&S(t=u.selector||t);if(n=n||[],1===f.length){if(a=f[0]=f[0].slice(0),a.length>2&&"ID"===(o=a[0]).type&&x.getById&&9===e.nodeType&&L&&w.relative[a[1].type]){if(e=(w.find.ID(o.matches[0].replace(bt,xt),e)||[])[0],!e)return n;u&&(e=e.parentNode),t=t.slice(a.shift().value.length)}for(i=ht.needsContext.test(t)?0:a.length;i--&&(o=a[i],!w.relative[s=o.type]);)if((l=w.find[s])&&(r=l(o.matches[0].replace(bt,xt),yt.test(a[0].type)&&c(e.parentNode)||e))){if(a.splice(i,1),t=r.length&&d(a),!t)return Z.apply(n,r),n;break}}return(u||T(t,f))(r,e,!L,n,!e||yt.test(t)&&c(e.parentNode)||e),n},x.sortStable=F.split("").sort(W).join("")===F,x.detectDuplicates=!!D,P(),x.sortDetached=i(function(t){return 1&t.compareDocumentPosition(O.createElement("div"))}),i(function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")})||a("type|href|height|width",function(t,e,n){return n?void 0:t.getAttribute(e,"type"===e.toLowerCase()?1:2)}),x.attributes&&i(function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")})||a("value",function(t,e,n){return n||"input"!==t.nodeName.toLowerCase()?void 0:t.defaultValue}),i(function(t){return null==t.getAttribute("disabled")})||a(et,function(t,e,n){var r;return n?void 0:t[e]===!0?e.toLowerCase():(r=t.getAttributeNode(e))&&r.specified?r.value:null}),e}(t);at.find=ct,at.expr=ct.selectors,at.expr[":"]=at.expr.pseudos,at.uniqueSort=at.unique=ct.uniqueSort,at.text=ct.getText,at.isXMLDoc=ct.isXML,at.contains=ct.contains;var ft=function(t,e,n){for(var r=[],i=void 0!==n;(t=t[e])&&9!==t.nodeType;)if(1===t.nodeType){if(i&&at(t).is(n))break;r.push(t)}return r},dt=function(t,e){for(var n=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&n.push(t);return n},ht=at.expr.match.needsContext,pt=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,gt=/^.[^:#\[\.,]*$/;at.filter=function(t,e,n){var r=e[0];return n&&(t=":not("+t+")"),1===e.length&&1===r.nodeType?at.find.matchesSelector(r,t)?[r]:[]:at.find.matches(t,at.grep(e,function(t){return 1===t.nodeType}))},at.fn.extend({find:function(t){var e,n=this.length,r=[],i=this;if("string"!=typeof t)return this.pushStack(at(t).filter(function(){for(e=0;n>e;e++)if(at.contains(i[e],this))return!0}));for(e=0;n>e;e++)at.find(t,i[e],r);return r=this.pushStack(n>1?at.unique(r):r),r.selector=this.selector?this.selector+" "+t:t,r},filter:function(t){return this.pushStack(r(this,t||[],!1))},not:function(t){return this.pushStack(r(this,t||[],!0))},is:function(t){return!!r(this,"string"==typeof t&&ht.test(t)?at(t):t||[],!1).length}});var mt,vt=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,yt=at.fn.init=function(t,e,n){var r,i;if(!t)return this;if(n=n||mt,"string"==typeof t){if(r="<"===t[0]&&">"===t[t.length-1]&&t.length>=3?[null,t,null]:vt.exec(t),!r||!r[1]&&e)return!e||e.jquery?(e||n).find(t):this.constructor(e).find(t);if(r[1]){if(e=e instanceof at?e[0]:e,at.merge(this,at.parseHTML(r[1],e&&e.nodeType?e.ownerDocument||e:Y,!0)),pt.test(r[1])&&at.isPlainObject(e))for(r in e)at.isFunction(this[r])?this[r](e[r]):this.attr(r,e[r]);return this}return i=Y.getElementById(r[2]),i&&i.parentNode&&(this.length=1,this[0]=i),this.context=Y,this.selector=t,this}return t.nodeType?(this.context=this[0]=t,this.length=1,this):at.isFunction(t)?void 0!==n.ready?n.ready(t):t(at):(void 0!==t.selector&&(this.selector=t.selector,this.context=t.context),at.makeArray(t,this))};yt.prototype=at.fn,mt=at(Y);var _t=/^(?:parents|prev(?:Until|All))/,bt={children:!0,contents:!0,next:!0,prev:!0};at.fn.extend({has:function(t){var e=at(t,this),n=e.length;return this.filter(function(){for(var t=0;n>t;t++)if(at.contains(this,e[t]))return!0})},closest:function(t,e){for(var n,r=0,i=this.length,a=[],o=ht.test(t)||"string"!=typeof t?at(t,e||this.context):0;i>r;r++)for(n=this[r];n&&n!==e;n=n.parentNode)if(n.nodeType<11&&(o?o.index(n)>-1:1===n.nodeType&&at.find.matchesSelector(n,t))){a.push(n);break}return this.pushStack(a.length>1?at.uniqueSort(a):a)},index:function(t){return t?"string"==typeof t?Q.call(at(t),this[0]):Q.call(this,t.jquery?t[0]:t):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(at.uniqueSort(at.merge(this.get(),at(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),at.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return ft(t,"parentNode")},parentsUntil:function(t,e,n){return ft(t,"parentNode",n)},next:function(t){return i(t,"nextSibling")},prev:function(t){return i(t,"previousSibling")},nextAll:function(t){return ft(t,"nextSibling")},prevAll:function(t){return ft(t,"previousSibling")},nextUntil:function(t,e,n){return ft(t,"nextSibling",n)},prevUntil:function(t,e,n){return ft(t,"previousSibling",n)},siblings:function(t){return dt((t.parentNode||{}).firstChild,t)},children:function(t){return dt(t.firstChild)},contents:function(t){return t.contentDocument||at.merge([],t.childNodes)}},function(t,e){at.fn[t]=function(n,r){var i=at.map(this,e,n);return"Until"!==t.slice(-5)&&(r=n),r&&"string"==typeof r&&(i=at.filter(r,i)),this.length>1&&(bt[t]||at.uniqueSort(i),_t.test(t)&&i.reverse()),this.pushStack(i)}});var xt=/\S+/g;at.Callbacks=function(t){t="string"==typeof t?a(t):at.extend({},t);var e,n,r,i,o=[],s=[],l=-1,u=function(){for(i=t.once,r=e=!0;s.length;l=-1)for(n=s.shift();++l<o.length;)o[l].apply(n[0],n[1])===!1&&t.stopOnFalse&&(l=o.length,n=!1);t.memory||(n=!1),e=!1,i&&(o=n?[]:"")},c={add:function(){return o&&(n&&!e&&(l=o.length-1,s.push(n)),function e(n){at.each(n,function(n,r){at.isFunction(r)?t.unique&&c.has(r)||o.push(r):r&&r.length&&"string"!==at.type(r)&&e(r)})}(arguments),n&&!e&&u()),this},remove:function(){return at.each(arguments,function(t,e){for(var n;(n=at.inArray(e,o,n))>-1;)o.splice(n,1),l>=n&&l--}),this},has:function(t){return t?at.inArray(t,o)>-1:o.length>0},empty:function(){return o&&(o=[]),this},disable:function(){return i=s=[],o=n="",this},disabled:function(){return!o},lock:function(){return i=s=[],n||(o=n=""),this},locked:function(){return!!i},fireWith:function(t,n){return i||(n=n||[],n=[t,n.slice?n.slice():n],s.push(n),e||u()),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!r}};return c},at.extend({Deferred:function(t){var e=[["resolve","done",at.Callbacks("once memory"),"resolved"],["reject","fail",at.Callbacks("once memory"),"rejected"],["notify","progress",at.Callbacks("memory")]],n="pending",r={state:function(){return n},always:function(){return i.done(arguments).fail(arguments),this},then:function(){var t=arguments;return at.Deferred(function(n){at.each(e,function(e,a){var o=at.isFunction(t[e])&&t[e];i[a[1]](function(){var t=o&&o.apply(this,arguments);t&&at.isFunction(t.promise)?t.promise().progress(n.notify).done(n.resolve).fail(n.reject):n[a[0]+"With"](this===r?n.promise():this,o?[t]:arguments)})}),t=null}).promise()},promise:function(t){return null!=t?at.extend(t,r):r}},i={};return r.pipe=r.then,at.each(e,function(t,a){var o=a[2],s=a[3];r[a[1]]=o.add,s&&o.add(function(){n=s},e[1^t][2].disable,e[2][2].lock),i[a[0]]=function(){return i[a[0]+"With"](this===i?r:this,arguments),this},i[a[0]+"With"]=o.fireWith}),r.promise(i),t&&t.call(i,i),i},when:function(t){var e,n,r,i=0,a=J.call(arguments),o=a.length,s=1!==o||t&&at.isFunction(t.promise)?o:0,l=1===s?t:at.Deferred(),u=function(t,n,r){return function(i){n[t]=this,r[t]=arguments.length>1?J.call(arguments):i,r===e?l.notifyWith(n,r):--s||l.resolveWith(n,r)}};if(o>1)for(e=new Array(o),n=new Array(o),r=new Array(o);o>i;i++)a[i]&&at.isFunction(a[i].promise)?a[i].promise().progress(u(i,n,e)).done(u(i,r,a)).fail(l.reject):--s;return s||l.resolveWith(r,a),l.promise()}});var wt;at.fn.ready=function(t){return at.ready.promise().done(t),this},at.extend({isReady:!1,readyWait:1,holdReady:function(t){t?at.readyWait++:at.ready(!0)},ready:function(t){(t===!0?--at.readyWait:at.isReady)||(at.isReady=!0,t!==!0&&--at.readyWait>0||(wt.resolveWith(Y,[at]),at.fn.triggerHandler&&(at(Y).triggerHandler("ready"),at(Y).off("ready"))))}}),at.ready.promise=function(e){return wt||(wt=at.Deferred(),"complete"===Y.readyState||"loading"!==Y.readyState&&!Y.documentElement.doScroll?t.setTimeout(at.ready):(Y.addEventListener("DOMContentLoaded",o),t.addEventListener("load",o))),wt.promise(e)},at.ready.promise();var Ct=function(t,e,n,r,i,a,o){var s=0,l=t.length,u=null==n;if("object"===at.type(n)){i=!0;for(s in n)Ct(t,e,s,n[s],!0,a,o)}else if(void 0!==r&&(i=!0,at.isFunction(r)||(o=!0),u&&(o?(e.call(t,r),e=null):(u=e,e=function(t,e,n){return u.call(at(t),n)})),e))for(;l>s;s++)e(t[s],n,o?r:r.call(t[s],s,e(t[s],n)));return i?t:u?e.call(t):l?e(t[0],n):a},kt=function(t){return 1===t.nodeType||9===t.nodeType||!+t.nodeType};s.uid=1,s.prototype={register:function(t,e){var n=e||{};return t.nodeType?t[this.expando]=n:Object.defineProperty(t,this.expando,{value:n,writable:!0,configurable:!0}),t[this.expando]},cache:function(t){if(!kt(t))return{};var e=t[this.expando];return e||(e={},kt(t)&&(t.nodeType?t[this.expando]=e:Object.defineProperty(t,this.expando,{value:e,configurable:!0}))),e},set:function(t,e,n){var r,i=this.cache(t);if("string"==typeof e)i[e]=n;else for(r in e)i[r]=e[r];return i},get:function(t,e){return void 0===e?this.cache(t):t[this.expando]&&t[this.expando][e]},access:function(t,e,n){var r;return void 0===e||e&&"string"==typeof e&&void 0===n?(r=this.get(t,e),void 0!==r?r:this.get(t,at.camelCase(e))):(this.set(t,e,n),void 0!==n?n:e)},remove:function(t,e){var n,r,i,a=t[this.expando];if(void 0!==a){if(void 0===e)this.register(t);else{at.isArray(e)?r=e.concat(e.map(at.camelCase)):(i=at.camelCase(e),e in a?r=[e,i]:(r=i,r=r in a?[r]:r.match(xt)||[])),n=r.length;for(;n--;)delete a[r[n]]}(void 0===e||at.isEmptyObject(a))&&(t.nodeType?t[this.expando]=void 0:delete t[this.expando])}},hasData:function(t){var e=t[this.expando];return void 0!==e&&!at.isEmptyObject(e)}};var St=new s,Tt=new s,At=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Et=/[A-Z]/g;at.extend({hasData:function(t){return Tt.hasData(t)||St.hasData(t)},data:function(t,e,n){return Tt.access(t,e,n)},removeData:function(t,e){Tt.remove(t,e)},_data:function(t,e,n){return St.access(t,e,n)},_removeData:function(t,e){St.remove(t,e)}}),at.fn.extend({data:function(t,e){var n,r,i,a=this[0],o=a&&a.attributes;if(void 0===t){if(this.length&&(i=Tt.get(a),1===a.nodeType&&!St.get(a,"hasDataAttrs"))){for(n=o.length;n--;)o[n]&&(r=o[n].name,0===r.indexOf("data-")&&(r=at.camelCase(r.slice(5)),l(a,r,i[r])));St.set(a,"hasDataAttrs",!0)}return i}return"object"==typeof t?this.each(function(){Tt.set(this,t)}):Ct(this,function(e){var n,r;if(a&&void 0===e){if(n=Tt.get(a,t)||Tt.get(a,t.replace(Et,"-$&").toLowerCase()),void 0!==n)return n;if(r=at.camelCase(t),n=Tt.get(a,r),void 0!==n)return n;if(n=l(a,r,void 0),void 0!==n)return n}else r=at.camelCase(t),this.each(function(){var n=Tt.get(this,r);Tt.set(this,r,e),t.indexOf("-")>-1&&void 0!==n&&Tt.set(this,t,e)})},null,e,arguments.length>1,null,!0)},removeData:function(t){return this.each(function(){Tt.remove(this,t)})}}),at.extend({queue:function(t,e,n){var r;return t?(e=(e||"fx")+"queue",r=St.get(t,e),n&&(!r||at.isArray(n)?r=St.access(t,e,at.makeArray(n)):r.push(n)),r||[]):void 0},dequeue:function(t,e){e=e||"fx";var n=at.queue(t,e),r=n.length,i=n.shift(),a=at._queueHooks(t,e),o=function(){at.dequeue(t,e)};"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===e&&n.unshift("inprogress"),delete a.stop,i.call(t,o,a)),!r&&a&&a.empty.fire()},_queueHooks:function(t,e){var n=e+"queueHooks";return St.get(t,n)||St.access(t,n,{empty:at.Callbacks("once memory").add(function(){St.remove(t,[e+"queue",n])})})}}),at.fn.extend({queue:function(t,e){var n=2;return"string"!=typeof t&&(e=t,t="fx",n--),arguments.length<n?at.queue(this[0],t):void 0===e?this:this.each(function(){var n=at.queue(this,t,e);at._queueHooks(this,t),"fx"===t&&"inprogress"!==n[0]&&at.dequeue(this,t)})},dequeue:function(t){return this.each(function(){at.dequeue(this,t)})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){var n,r=1,i=at.Deferred(),a=this,o=this.length,s=function(){--r||i.resolveWith(a,[a])};for("string"!=typeof t&&(e=t,t=void 0),t=t||"fx";o--;)n=St.get(a[o],t+"queueHooks"),n&&n.empty&&(r++,n.empty.add(s));return s(),i.promise(e)}});var Mt=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Dt=new RegExp("^(?:([+-])=|)("+Mt+")([a-z%]*)$","i"),Pt=["Top","Right","Bottom","Left"],Ot=function(t,e){return t=e||t,"none"===at.css(t,"display")||!at.contains(t.ownerDocument,t)},Nt=/^(?:checkbox|radio)$/i,Lt=/<([\w:-]+)/,It=/^$|\/(?:java|ecma)script/i,Rt={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Rt.optgroup=Rt.option,Rt.tbody=Rt.tfoot=Rt.colgroup=Rt.caption=Rt.thead,Rt.th=Rt.td;var Bt=/<|&#?\w+;/;!function(){var t=Y.createDocumentFragment(),e=t.appendChild(Y.createElement("div")),n=Y.createElement("input");n.setAttribute("type","radio"),n.setAttribute("checked","checked"),n.setAttribute("name","t"),e.appendChild(n),rt.checkClone=e.cloneNode(!0).cloneNode(!0).lastChild.checked,e.innerHTML="<textarea>x</textarea>",rt.noCloneChecked=!!e.cloneNode(!0).lastChild.defaultValue}();var zt=/^key/,Ft=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,qt=/^([^.]*)(?:\.(.+)|)/;at.event={global:{},add:function(t,e,n,r,i){var a,o,s,l,u,c,f,d,h,p,g,m=St.get(t);if(m)for(n.handler&&(a=n,n=a.handler,i=a.selector),n.guid||(n.guid=at.guid++),(l=m.events)||(l=m.events={}),(o=m.handle)||(o=m.handle=function(e){return"undefined"!=typeof at&&at.event.triggered!==e.type?at.event.dispatch.apply(t,arguments):void 0}),e=(e||"").match(xt)||[""],u=e.length;u--;)s=qt.exec(e[u])||[],h=g=s[1],p=(s[2]||"").split(".").sort(),h&&(f=at.event.special[h]||{},h=(i?f.delegateType:f.bindType)||h,f=at.event.special[h]||{},c=at.extend({type:h,origType:g,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&at.expr.match.needsContext.test(i),namespace:p.join(".")},a),(d=l[h])||(d=l[h]=[],d.delegateCount=0,f.setup&&f.setup.call(t,r,p,o)!==!1||t.addEventListener&&t.addEventListener(h,o)),f.add&&(f.add.call(t,c),c.handler.guid||(c.handler.guid=n.guid)),i?d.splice(d.delegateCount++,0,c):d.push(c),at.event.global[h]=!0)},remove:function(t,e,n,r,i){var a,o,s,l,u,c,f,d,h,p,g,m=St.hasData(t)&&St.get(t);if(m&&(l=m.events)){for(e=(e||"").match(xt)||[""],u=e.length;u--;)if(s=qt.exec(e[u])||[],h=g=s[1],p=(s[2]||"").split(".").sort(),h){for(f=at.event.special[h]||{},h=(r?f.delegateType:f.bindType)||h,d=l[h]||[],s=s[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),o=a=d.length;a--;)c=d[a],!i&&g!==c.origType||n&&n.guid!==c.guid||s&&!s.test(c.namespace)||r&&r!==c.selector&&("**"!==r||!c.selector)||(d.splice(a,1),c.selector&&d.delegateCount--,f.remove&&f.remove.call(t,c));o&&!d.length&&(f.teardown&&f.teardown.call(t,p,m.handle)!==!1||at.removeEvent(t,h,m.handle),delete l[h])}else for(h in l)at.event.remove(t,h+e[u],n,r,!0);at.isEmptyObject(l)&&St.remove(t,"handle events")}},dispatch:function(t){t=at.event.fix(t);var e,n,r,i,a,o=[],s=J.call(arguments),l=(St.get(this,"events")||{})[t.type]||[],u=at.event.special[t.type]||{};if(s[0]=t,t.delegateTarget=this,!u.preDispatch||u.preDispatch.call(this,t)!==!1){for(o=at.event.handlers.call(this,t,l),e=0;(i=o[e++])&&!t.isPropagationStopped();)for(t.currentTarget=i.elem,n=0;(a=i.handlers[n++])&&!t.isImmediatePropagationStopped();)t.rnamespace&&!t.rnamespace.test(a.namespace)||(t.handleObj=a,t.data=a.data,r=((at.event.special[a.origType]||{}).handle||a.handler).apply(i.elem,s),void 0!==r&&(t.result=r)===!1&&(t.preventDefault(),t.stopPropagation()));return u.postDispatch&&u.postDispatch.call(this,t),t.result}},handlers:function(t,e){var n,r,i,a,o=[],s=e.delegateCount,l=t.target;if(s&&l.nodeType&&("click"!==t.type||isNaN(t.button)||t.button<1))for(;l!==this;l=l.parentNode||this)if(1===l.nodeType&&(l.disabled!==!0||"click"!==t.type)){for(r=[],n=0;s>n;n++)a=e[n],i=a.selector+" ",void 0===r[i]&&(r[i]=a.needsContext?at(i,this).index(l)>-1:at.find(i,this,null,[l]).length),r[i]&&r.push(a);r.length&&o.push({elem:l,handlers:r})}return s<e.length&&o.push({elem:this,handlers:e.slice(s)}),o},props:"altKey bubbles cancelable ctrlKey currentTarget detail eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(t,e){return null==t.which&&(t.which=null!=e.charCode?e.charCode:e.keyCode),t}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(t,e){var n,r,i,a=e.button;return null==t.pageX&&null!=e.clientX&&(n=t.target.ownerDocument||Y,r=n.documentElement,i=n.body,t.pageX=e.clientX+(r&&r.scrollLeft||i&&i.scrollLeft||0)-(r&&r.clientLeft||i&&i.clientLeft||0),t.pageY=e.clientY+(r&&r.scrollTop||i&&i.scrollTop||0)-(r&&r.clientTop||i&&i.clientTop||0)),t.which||void 0===a||(t.which=1&a?1:2&a?3:4&a?2:0),t}},fix:function(t){if(t[at.expando])return t;var e,n,r,i=t.type,a=t,o=this.fixHooks[i];for(o||(this.fixHooks[i]=o=Ft.test(i)?this.mouseHooks:zt.test(i)?this.keyHooks:{}),r=o.props?this.props.concat(o.props):this.props,t=new at.Event(a),e=r.length;e--;)n=r[e],t[n]=a[n];return t.target||(t.target=Y),3===t.target.nodeType&&(t.target=t.target.parentNode),o.filter?o.filter(t,a):t},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==g()&&this.focus?(this.focus(),!1):void 0},delegateType:"focusin"},blur:{trigger:function(){return this===g()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&at.nodeName(this,"input")?(this.click(),!1):void 0},_default:function(t){return at.nodeName(t.target,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}}},at.removeEvent=function(t,e,n){t.removeEventListener&&t.removeEventListener(e,n)},at.Event=function(t,e){return this instanceof at.Event?(t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&t.returnValue===!1?h:p):this.type=t,e&&at.extend(this,e),this.timeStamp=t&&t.timeStamp||at.now(),void(this[at.expando]=!0)):new at.Event(t,e)},at.Event.prototype={constructor:at.Event,isDefaultPrevented:p,isPropagationStopped:p,isImmediatePropagationStopped:p,isSimulated:!1,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=h,t&&!this.isSimulated&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=h,t&&!this.isSimulated&&t.stopPropagation()},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=h,t&&!this.isSimulated&&t.stopImmediatePropagation(),this.stopPropagation()}},at.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(t,e){at.event.special[t]={delegateType:e,bindType:e,handle:function(t){var n,r=this,i=t.relatedTarget,a=t.handleObj;return i&&(i===r||at.contains(r,i))||(t.type=a.origType,n=a.handler.apply(this,arguments),t.type=e),n}}}),at.fn.extend({on:function(t,e,n,r){return m(this,t,e,n,r)},one:function(t,e,n,r){return m(this,t,e,n,r,1)},off:function(t,e,n){var r,i;if(t&&t.preventDefault&&t.handleObj)return r=t.handleObj,at(t.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof t){for(i in t)this.off(i,e,t[i]);return this}return e!==!1&&"function"!=typeof e||(n=e,e=void 0),n===!1&&(n=p),this.each(function(){at.event.remove(this,t,n,e)})}});var Ht=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,Ut=/<script|<style|<link/i,jt=/checked\s*(?:[^=]|=\s*.checked.)/i,Vt=/^true\/(.*)/,$t=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;at.extend({htmlPrefilter:function(t){return t.replace(Ht,"<$1></$2>")},clone:function(t,e,n){var r,i,a,o,s=t.cloneNode(!0),l=at.contains(t.ownerDocument,t);if(!(rt.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||at.isXMLDoc(t)))for(o=c(s),a=c(t),r=0,i=a.length;i>r;r++)x(a[r],o[r]);if(e)if(n)for(a=a||c(t),o=o||c(s),r=0,i=a.length;i>r;r++)b(a[r],o[r]);else b(t,s);return o=c(s,"script"),o.length>0&&f(o,!l&&c(t,"script")),s},cleanData:function(t){for(var e,n,r,i=at.event.special,a=0;void 0!==(n=t[a]);a++)if(kt(n)){if(e=n[St.expando]){if(e.events)for(r in e.events)i[r]?at.event.remove(n,r):at.removeEvent(n,r,e.handle);n[St.expando]=void 0}n[Tt.expando]&&(n[Tt.expando]=void 0)}}}),at.fn.extend({domManip:w,detach:function(t){return C(this,t,!0)},remove:function(t){return C(this,t)},text:function(t){return Ct(this,function(t){return void 0===t?at.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=t)})},null,t,arguments.length);
},append:function(){return w(this,arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=v(this,t);e.appendChild(t)}})},prepend:function(){return w(this,arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=v(this,t);e.insertBefore(t,e.firstChild)}})},before:function(){return w(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this)})},after:function(){return w(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)})},empty:function(){for(var t,e=0;null!=(t=this[e]);e++)1===t.nodeType&&(at.cleanData(c(t,!1)),t.textContent="");return this},clone:function(t,e){return t=null!=t&&t,e=null==e?t:e,this.map(function(){return at.clone(this,t,e)})},html:function(t){return Ct(this,function(t){var e=this[0]||{},n=0,r=this.length;if(void 0===t&&1===e.nodeType)return e.innerHTML;if("string"==typeof t&&!Ut.test(t)&&!Rt[(Lt.exec(t)||["",""])[1].toLowerCase()]){t=at.htmlPrefilter(t);try{for(;r>n;n++)e=this[n]||{},1===e.nodeType&&(at.cleanData(c(e,!1)),e.innerHTML=t);e=0}catch(t){}}e&&this.empty().append(t)},null,t,arguments.length)},replaceWith:function(){var t=[];return w(this,arguments,function(e){var n=this.parentNode;at.inArray(this,t)<0&&(at.cleanData(c(this)),n&&n.replaceChild(e,this))},t)}}),at.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,e){at.fn[t]=function(t){for(var n,r=[],i=at(t),a=i.length-1,o=0;a>=o;o++)n=o===a?this:this.clone(!0),at(i[o])[e](n),Z.apply(r,n.get());return this.pushStack(r)}});var Wt,Gt={HTML:"block",BODY:"block"},Xt=/^margin/,Yt=new RegExp("^("+Mt+")(?!px)[a-z%]+$","i"),Jt=function(e){var n=e.ownerDocument.defaultView;return n&&n.opener||(n=t),n.getComputedStyle(e)},Kt=function(t,e,n,r){var i,a,o={};for(a in e)o[a]=t.style[a],t.style[a]=e[a];i=n.apply(t,r||[]);for(a in e)t.style[a]=o[a];return i},Zt=Y.documentElement;!function(){function e(){s.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",s.innerHTML="",Zt.appendChild(o);var e=t.getComputedStyle(s);n="1%"!==e.top,a="2px"===e.marginLeft,r="4px"===e.width,s.style.marginRight="50%",i="4px"===e.marginRight,Zt.removeChild(o)}var n,r,i,a,o=Y.createElement("div"),s=Y.createElement("div");s.style&&(s.style.backgroundClip="content-box",s.cloneNode(!0).style.backgroundClip="",rt.clearCloneStyle="content-box"===s.style.backgroundClip,o.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",o.appendChild(s),at.extend(rt,{pixelPosition:function(){return e(),n},boxSizingReliable:function(){return null==r&&e(),r},pixelMarginRight:function(){return null==r&&e(),i},reliableMarginLeft:function(){return null==r&&e(),a},reliableMarginRight:function(){var e,n=s.appendChild(Y.createElement("div"));return n.style.cssText=s.style.cssText="-webkit-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",n.style.marginRight=n.style.width="0",s.style.width="1px",Zt.appendChild(o),e=!parseFloat(t.getComputedStyle(n).marginRight),Zt.removeChild(o),s.removeChild(n),e}}))}();var Qt=/^(none|table(?!-c[ea]).+)/,te={position:"absolute",visibility:"hidden",display:"block"},ee={letterSpacing:"0",fontWeight:"400"},ne=["Webkit","O","Moz","ms"],re=Y.createElement("div").style;at.extend({cssHooks:{opacity:{get:function(t,e){if(e){var n=T(t,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:"cssFloat"},style:function(t,e,n,r){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var i,a,o,s=at.camelCase(e),l=t.style;return e=at.cssProps[s]||(at.cssProps[s]=E(s)||s),o=at.cssHooks[e]||at.cssHooks[s],void 0===n?o&&"get"in o&&void 0!==(i=o.get(t,!1,r))?i:l[e]:(a=typeof n,"string"===a&&(i=Dt.exec(n))&&i[1]&&(n=u(t,e,i),a="number"),void(null!=n&&n===n&&("number"===a&&(n+=i&&i[3]||(at.cssNumber[s]?"":"px")),rt.clearCloneStyle||""!==n||0!==e.indexOf("background")||(l[e]="inherit"),o&&"set"in o&&void 0===(n=o.set(t,n,r))||(l[e]=n))))}},css:function(t,e,n,r){var i,a,o,s=at.camelCase(e);return e=at.cssProps[s]||(at.cssProps[s]=E(s)||s),o=at.cssHooks[e]||at.cssHooks[s],o&&"get"in o&&(i=o.get(t,!0,n)),void 0===i&&(i=T(t,e,r)),"normal"===i&&e in ee&&(i=ee[e]),""===n||n?(a=parseFloat(i),n===!0||isFinite(a)?a||0:i):i}}),at.each(["height","width"],function(t,e){at.cssHooks[e]={get:function(t,n,r){return n?Qt.test(at.css(t,"display"))&&0===t.offsetWidth?Kt(t,te,function(){return P(t,e,r)}):P(t,e,r):void 0},set:function(t,n,r){var i,a=r&&Jt(t),o=r&&D(t,e,r,"border-box"===at.css(t,"boxSizing",!1,a),a);return o&&(i=Dt.exec(n))&&"px"!==(i[3]||"px")&&(t.style[e]=n,n=at.css(t,e)),M(t,n,o)}}}),at.cssHooks.marginLeft=A(rt.reliableMarginLeft,function(t,e){return e?(parseFloat(T(t,"marginLeft"))||t.getBoundingClientRect().left-Kt(t,{marginLeft:0},function(){return t.getBoundingClientRect().left}))+"px":void 0}),at.cssHooks.marginRight=A(rt.reliableMarginRight,function(t,e){return e?Kt(t,{display:"inline-block"},T,[t,"marginRight"]):void 0}),at.each({margin:"",padding:"",border:"Width"},function(t,e){at.cssHooks[t+e]={expand:function(n){for(var r=0,i={},a="string"==typeof n?n.split(" "):[n];4>r;r++)i[t+Pt[r]+e]=a[r]||a[r-2]||a[0];return i}},Xt.test(t)||(at.cssHooks[t+e].set=M)}),at.fn.extend({css:function(t,e){return Ct(this,function(t,e,n){var r,i,a={},o=0;if(at.isArray(e)){for(r=Jt(t),i=e.length;i>o;o++)a[e[o]]=at.css(t,e[o],!1,r);return a}return void 0!==n?at.style(t,e,n):at.css(t,e)},t,e,arguments.length>1)},show:function(){return O(this,!0)},hide:function(){return O(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each(function(){Ot(this)?at(this).show():at(this).hide()})}}),at.Tween=N,N.prototype={constructor:N,init:function(t,e,n,r,i,a){this.elem=t,this.prop=n,this.easing=i||at.easing._default,this.options=e,this.start=this.now=this.cur(),this.end=r,this.unit=a||(at.cssNumber[n]?"":"px")},cur:function(){var t=N.propHooks[this.prop];return t&&t.get?t.get(this):N.propHooks._default.get(this)},run:function(t){var e,n=N.propHooks[this.prop];return this.options.duration?this.pos=e=at.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):this.pos=e=t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):N.propHooks._default.set(this),this}},N.prototype.init.prototype=N.prototype,N.propHooks={_default:{get:function(t){var e;return 1!==t.elem.nodeType||null!=t.elem[t.prop]&&null==t.elem.style[t.prop]?t.elem[t.prop]:(e=at.css(t.elem,t.prop,""),e&&"auto"!==e?e:0)},set:function(t){at.fx.step[t.prop]?at.fx.step[t.prop](t):1!==t.elem.nodeType||null==t.elem.style[at.cssProps[t.prop]]&&!at.cssHooks[t.prop]?t.elem[t.prop]=t.now:at.style(t.elem,t.prop,t.now+t.unit)}}},N.propHooks.scrollTop=N.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},at.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2},_default:"swing"},at.fx=N.prototype.init,at.fx.step={};var ie,ae,oe=/^(?:toggle|show|hide)$/,se=/queueHooks$/;at.Animation=at.extend(F,{tweeners:{"*":[function(t,e){var n=this.createTween(t,e);return u(n.elem,t,Dt.exec(e),n),n}]},tweener:function(t,e){at.isFunction(t)?(e=t,t=["*"]):t=t.match(xt);for(var n,r=0,i=t.length;i>r;r++)n=t[r],F.tweeners[n]=F.tweeners[n]||[],F.tweeners[n].unshift(e)},prefilters:[B],prefilter:function(t,e){e?F.prefilters.unshift(t):F.prefilters.push(t)}}),at.speed=function(t,e,n){var r=t&&"object"==typeof t?at.extend({},t):{complete:n||!n&&e||at.isFunction(t)&&t,duration:t,easing:n&&e||e&&!at.isFunction(e)&&e};return r.duration=at.fx.off?0:"number"==typeof r.duration?r.duration:r.duration in at.fx.speeds?at.fx.speeds[r.duration]:at.fx.speeds._default,null!=r.queue&&r.queue!==!0||(r.queue="fx"),r.old=r.complete,r.complete=function(){at.isFunction(r.old)&&r.old.call(this),r.queue&&at.dequeue(this,r.queue)},r},at.fn.extend({fadeTo:function(t,e,n,r){return this.filter(Ot).css("opacity",0).show().end().animate({opacity:e},t,n,r)},animate:function(t,e,n,r){var i=at.isEmptyObject(t),a=at.speed(e,n,r),o=function(){var e=F(this,at.extend({},t),a);(i||St.get(this,"finish"))&&e.stop(!0)};return o.finish=o,i||a.queue===!1?this.each(o):this.queue(a.queue,o)},stop:function(t,e,n){var r=function(t){var e=t.stop;delete t.stop,e(n)};return"string"!=typeof t&&(n=e,e=t,t=void 0),e&&t!==!1&&this.queue(t||"fx",[]),this.each(function(){var e=!0,i=null!=t&&t+"queueHooks",a=at.timers,o=St.get(this);if(i)o[i]&&o[i].stop&&r(o[i]);else for(i in o)o[i]&&o[i].stop&&se.test(i)&&r(o[i]);for(i=a.length;i--;)a[i].elem!==this||null!=t&&a[i].queue!==t||(a[i].anim.stop(n),e=!1,a.splice(i,1));!e&&n||at.dequeue(this,t)})},finish:function(t){return t!==!1&&(t=t||"fx"),this.each(function(){var e,n=St.get(this),r=n[t+"queue"],i=n[t+"queueHooks"],a=at.timers,o=r?r.length:0;for(n.finish=!0,at.queue(this,t,[]),i&&i.stop&&i.stop.call(this,!0),e=a.length;e--;)a[e].elem===this&&a[e].queue===t&&(a[e].anim.stop(!0),a.splice(e,1));for(e=0;o>e;e++)r[e]&&r[e].finish&&r[e].finish.call(this);delete n.finish})}}),at.each(["toggle","show","hide"],function(t,e){var n=at.fn[e];at.fn[e]=function(t,r,i){return null==t||"boolean"==typeof t?n.apply(this,arguments):this.animate(I(e,!0),t,r,i)}}),at.each({slideDown:I("show"),slideUp:I("hide"),slideToggle:I("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,e){at.fn[t]=function(t,n,r){return this.animate(e,t,n,r)}}),at.timers=[],at.fx.tick=function(){var t,e=0,n=at.timers;for(ie=at.now();e<n.length;e++)t=n[e],t()||n[e]!==t||n.splice(e--,1);n.length||at.fx.stop(),ie=void 0},at.fx.timer=function(t){at.timers.push(t),t()?at.fx.start():at.timers.pop()},at.fx.interval=13,at.fx.start=function(){ae||(ae=t.setInterval(at.fx.tick,at.fx.interval))},at.fx.stop=function(){t.clearInterval(ae),ae=null},at.fx.speeds={slow:600,fast:200,_default:400},at.fn.delay=function(e,n){return e=at.fx?at.fx.speeds[e]||e:e,n=n||"fx",this.queue(n,function(n,r){var i=t.setTimeout(n,e);r.stop=function(){t.clearTimeout(i)}})},function(){var t=Y.createElement("input"),e=Y.createElement("select"),n=e.appendChild(Y.createElement("option"));t.type="checkbox",rt.checkOn=""!==t.value,rt.optSelected=n.selected,e.disabled=!0,rt.optDisabled=!n.disabled,t=Y.createElement("input"),t.value="t",t.type="radio",rt.radioValue="t"===t.value}();var le,ue=at.expr.attrHandle;at.fn.extend({attr:function(t,e){return Ct(this,at.attr,t,e,arguments.length>1)},removeAttr:function(t){return this.each(function(){at.removeAttr(this,t)})}}),at.extend({attr:function(t,e,n){var r,i,a=t.nodeType;if(3!==a&&8!==a&&2!==a)return"undefined"==typeof t.getAttribute?at.prop(t,e,n):(1===a&&at.isXMLDoc(t)||(e=e.toLowerCase(),i=at.attrHooks[e]||(at.expr.match.bool.test(e)?le:void 0)),void 0!==n?null===n?void at.removeAttr(t,e):i&&"set"in i&&void 0!==(r=i.set(t,n,e))?r:(t.setAttribute(e,n+""),n):i&&"get"in i&&null!==(r=i.get(t,e))?r:(r=at.find.attr(t,e),null==r?void 0:r))},attrHooks:{type:{set:function(t,e){if(!rt.radioValue&&"radio"===e&&at.nodeName(t,"input")){var n=t.value;return t.setAttribute("type",e),n&&(t.value=n),e}}}},removeAttr:function(t,e){var n,r,i=0,a=e&&e.match(xt);if(a&&1===t.nodeType)for(;n=a[i++];)r=at.propFix[n]||n,at.expr.match.bool.test(n)&&(t[r]=!1),t.removeAttribute(n)}}),le={set:function(t,e,n){return e===!1?at.removeAttr(t,n):t.setAttribute(n,n),n}},at.each(at.expr.match.bool.source.match(/\w+/g),function(t,e){var n=ue[e]||at.find.attr;ue[e]=function(t,e,r){var i,a;return r||(a=ue[e],ue[e]=i,i=null!=n(t,e,r)?e.toLowerCase():null,ue[e]=a),i}});var ce=/^(?:input|select|textarea|button)$/i,fe=/^(?:a|area)$/i;at.fn.extend({prop:function(t,e){return Ct(this,at.prop,t,e,arguments.length>1)},removeProp:function(t){return this.each(function(){delete this[at.propFix[t]||t]})}}),at.extend({prop:function(t,e,n){var r,i,a=t.nodeType;if(3!==a&&8!==a&&2!==a)return 1===a&&at.isXMLDoc(t)||(e=at.propFix[e]||e,i=at.propHooks[e]),void 0!==n?i&&"set"in i&&void 0!==(r=i.set(t,n,e))?r:t[e]=n:i&&"get"in i&&null!==(r=i.get(t,e))?r:t[e]},propHooks:{tabIndex:{get:function(t){var e=at.find.attr(t,"tabindex");return e?parseInt(e,10):ce.test(t.nodeName)||fe.test(t.nodeName)&&t.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),rt.optSelected||(at.propHooks.selected={get:function(t){var e=t.parentNode;return e&&e.parentNode&&e.parentNode.selectedIndex,null},set:function(t){var e=t.parentNode;e&&(e.selectedIndex,e.parentNode&&e.parentNode.selectedIndex)}}),at.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){at.propFix[this.toLowerCase()]=this});var de=/[\t\r\n\f]/g;at.fn.extend({addClass:function(t){var e,n,r,i,a,o,s,l=0;if(at.isFunction(t))return this.each(function(e){at(this).addClass(t.call(this,e,q(this)))});if("string"==typeof t&&t)for(e=t.match(xt)||[];n=this[l++];)if(i=q(n),r=1===n.nodeType&&(" "+i+" ").replace(de," ")){for(o=0;a=e[o++];)r.indexOf(" "+a+" ")<0&&(r+=a+" ");s=at.trim(r),i!==s&&n.setAttribute("class",s)}return this},removeClass:function(t){var e,n,r,i,a,o,s,l=0;if(at.isFunction(t))return this.each(function(e){at(this).removeClass(t.call(this,e,q(this)))});if(!arguments.length)return this.attr("class","");if("string"==typeof t&&t)for(e=t.match(xt)||[];n=this[l++];)if(i=q(n),r=1===n.nodeType&&(" "+i+" ").replace(de," ")){for(o=0;a=e[o++];)for(;r.indexOf(" "+a+" ")>-1;)r=r.replace(" "+a+" "," ");s=at.trim(r),i!==s&&n.setAttribute("class",s)}return this},toggleClass:function(t,e){var n=typeof t;return"boolean"==typeof e&&"string"===n?e?this.addClass(t):this.removeClass(t):at.isFunction(t)?this.each(function(n){at(this).toggleClass(t.call(this,n,q(this),e),e)}):this.each(function(){var e,r,i,a;if("string"===n)for(r=0,i=at(this),a=t.match(xt)||[];e=a[r++];)i.hasClass(e)?i.removeClass(e):i.addClass(e);else void 0!==t&&"boolean"!==n||(e=q(this),e&&St.set(this,"__className__",e),this.setAttribute&&this.setAttribute("class",e||t===!1?"":St.get(this,"__className__")||""))})},hasClass:function(t){var e,n,r=0;for(e=" "+t+" ";n=this[r++];)if(1===n.nodeType&&(" "+q(n)+" ").replace(de," ").indexOf(e)>-1)return!0;return!1}});var he=/\r/g,pe=/[\x20\t\r\n\f]+/g;at.fn.extend({val:function(t){var e,n,r,i=this[0];return arguments.length?(r=at.isFunction(t),this.each(function(n){var i;1===this.nodeType&&(i=r?t.call(this,n,at(this).val()):t,null==i?i="":"number"==typeof i?i+="":at.isArray(i)&&(i=at.map(i,function(t){return null==t?"":t+""})),e=at.valHooks[this.type]||at.valHooks[this.nodeName.toLowerCase()],e&&"set"in e&&void 0!==e.set(this,i,"value")||(this.value=i))})):i?(e=at.valHooks[i.type]||at.valHooks[i.nodeName.toLowerCase()],e&&"get"in e&&void 0!==(n=e.get(i,"value"))?n:(n=i.value,"string"==typeof n?n.replace(he,""):null==n?"":n)):void 0}}),at.extend({valHooks:{option:{get:function(t){var e=at.find.attr(t,"value");return null!=e?e:at.trim(at.text(t)).replace(pe," ")}},select:{get:function(t){for(var e,n,r=t.options,i=t.selectedIndex,a="select-one"===t.type||0>i,o=a?null:[],s=a?i+1:r.length,l=0>i?s:a?i:0;s>l;l++)if(n=r[l],(n.selected||l===i)&&(rt.optDisabled?!n.disabled:null===n.getAttribute("disabled"))&&(!n.parentNode.disabled||!at.nodeName(n.parentNode,"optgroup"))){if(e=at(n).val(),a)return e;o.push(e)}return o},set:function(t,e){for(var n,r,i=t.options,a=at.makeArray(e),o=i.length;o--;)r=i[o],(r.selected=at.inArray(at.valHooks.option.get(r),a)>-1)&&(n=!0);return n||(t.selectedIndex=-1),a}}}}),at.each(["radio","checkbox"],function(){at.valHooks[this]={set:function(t,e){return at.isArray(e)?t.checked=at.inArray(at(t).val(),e)>-1:void 0}},rt.checkOn||(at.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})});var ge=/^(?:focusinfocus|focusoutblur)$/;at.extend(at.event,{trigger:function(e,n,r,i){var a,o,s,l,u,c,f,d=[r||Y],h=nt.call(e,"type")?e.type:e,p=nt.call(e,"namespace")?e.namespace.split("."):[];if(o=s=r=r||Y,3!==r.nodeType&&8!==r.nodeType&&!ge.test(h+at.event.triggered)&&(h.indexOf(".")>-1&&(p=h.split("."),h=p.shift(),p.sort()),u=h.indexOf(":")<0&&"on"+h,e=e[at.expando]?e:new at.Event(h,"object"==typeof e&&e),e.isTrigger=i?2:3,e.namespace=p.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=r),n=null==n?[e]:at.makeArray(n,[e]),f=at.event.special[h]||{},i||!f.trigger||f.trigger.apply(r,n)!==!1)){if(!i&&!f.noBubble&&!at.isWindow(r)){for(l=f.delegateType||h,ge.test(l+h)||(o=o.parentNode);o;o=o.parentNode)d.push(o),s=o;s===(r.ownerDocument||Y)&&d.push(s.defaultView||s.parentWindow||t)}for(a=0;(o=d[a++])&&!e.isPropagationStopped();)e.type=a>1?l:f.bindType||h,c=(St.get(o,"events")||{})[e.type]&&St.get(o,"handle"),c&&c.apply(o,n),c=u&&o[u],c&&c.apply&&kt(o)&&(e.result=c.apply(o,n),e.result===!1&&e.preventDefault());return e.type=h,i||e.isDefaultPrevented()||f._default&&f._default.apply(d.pop(),n)!==!1||!kt(r)||u&&at.isFunction(r[h])&&!at.isWindow(r)&&(s=r[u],s&&(r[u]=null),at.event.triggered=h,r[h](),at.event.triggered=void 0,s&&(r[u]=s)),e.result}},simulate:function(t,e,n){var r=at.extend(new at.Event,n,{type:t,isSimulated:!0});at.event.trigger(r,null,e)}}),at.fn.extend({trigger:function(t,e){return this.each(function(){at.event.trigger(t,e,this)})},triggerHandler:function(t,e){var n=this[0];return n?at.event.trigger(t,e,n,!0):void 0}}),at.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(t,e){at.fn[e]=function(t,n){return arguments.length>0?this.on(e,null,t,n):this.trigger(e)}}),at.fn.extend({hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)}}),rt.focusin="onfocusin"in t,rt.focusin||at.each({focus:"focusin",blur:"focusout"},function(t,e){var n=function(t){at.event.simulate(e,t.target,at.event.fix(t))};at.event.special[e]={setup:function(){var r=this.ownerDocument||this,i=St.access(r,e);i||r.addEventListener(t,n,!0),St.access(r,e,(i||0)+1)},teardown:function(){var r=this.ownerDocument||this,i=St.access(r,e)-1;i?St.access(r,e,i):(r.removeEventListener(t,n,!0),St.remove(r,e))}}});var me=t.location,ve=at.now(),ye=/\?/;at.parseJSON=function(t){return JSON.parse(t+"")},at.parseXML=function(e){var n;if(!e||"string"!=typeof e)return null;try{n=(new t.DOMParser).parseFromString(e,"text/xml")}catch(t){n=void 0}return n&&!n.getElementsByTagName("parsererror").length||at.error("Invalid XML: "+e),n};var _e=/#.*$/,be=/([?&])_=[^&]*/,xe=/^(.*?):[ \t]*([^\r\n]*)$/gm,we=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Ce=/^(?:GET|HEAD)$/,ke=/^\/\//,Se={},Te={},Ae="*/".concat("*"),Ee=Y.createElement("a");Ee.href=me.href,at.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:me.href,type:"GET",isLocal:we.test(me.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Ae,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":at.parseJSON,"text xml":at.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?j(j(t,at.ajaxSettings),e):j(at.ajaxSettings,t)},ajaxPrefilter:H(Se),ajaxTransport:H(Te),ajax:function(e,n){function r(e,n,r,s){var u,f,y,_,x,C=n;2!==b&&(b=2,l&&t.clearTimeout(l),i=void 0,o=s||"",w.readyState=e>0?4:0,u=e>=200&&300>e||304===e,r&&(_=V(d,w,r)),_=$(d,_,w,u),u?(d.ifModified&&(x=w.getResponseHeader("Last-Modified"),x&&(at.lastModified[a]=x),x=w.getResponseHeader("etag"),x&&(at.etag[a]=x)),204===e||"HEAD"===d.type?C="nocontent":304===e?C="notmodified":(C=_.state,f=_.data,y=_.error,u=!y)):(y=C,!e&&C||(C="error",0>e&&(e=0))),w.status=e,w.statusText=(n||C)+"",u?g.resolveWith(h,[f,C,w]):g.rejectWith(h,[w,C,y]),w.statusCode(v),v=void 0,c&&p.trigger(u?"ajaxSuccess":"ajaxError",[w,d,u?f:y]),m.fireWith(h,[w,C]),c&&(p.trigger("ajaxComplete",[w,d]),--at.active||at.event.trigger("ajaxStop")))}"object"==typeof e&&(n=e,e=void 0),n=n||{};var i,a,o,s,l,u,c,f,d=at.ajaxSetup({},n),h=d.context||d,p=d.context&&(h.nodeType||h.jquery)?at(h):at.event,g=at.Deferred(),m=at.Callbacks("once memory"),v=d.statusCode||{},y={},_={},b=0,x="canceled",w={readyState:0,getResponseHeader:function(t){var e;if(2===b){if(!s)for(s={};e=xe.exec(o);)s[e[1].toLowerCase()]=e[2];e=s[t.toLowerCase()]}return null==e?null:e},getAllResponseHeaders:function(){return 2===b?o:null},setRequestHeader:function(t,e){var n=t.toLowerCase();return b||(t=_[n]=_[n]||t,y[t]=e),this},overrideMimeType:function(t){return b||(d.mimeType=t),this},statusCode:function(t){var e;if(t)if(2>b)for(e in t)v[e]=[v[e],t[e]];else w.always(t[w.status]);return this},abort:function(t){var e=t||x;return i&&i.abort(e),r(0,e),this}};if(g.promise(w).complete=m.add,w.success=w.done,w.error=w.fail,d.url=((e||d.url||me.href)+"").replace(_e,"").replace(ke,me.protocol+"//"),d.type=n.method||n.type||d.method||d.type,d.dataTypes=at.trim(d.dataType||"*").toLowerCase().match(xt)||[""],null==d.crossDomain){u=Y.createElement("a");try{u.href=d.url,u.href=u.href,d.crossDomain=Ee.protocol+"//"+Ee.host!=u.protocol+"//"+u.host}catch(t){d.crossDomain=!0}}if(d.data&&d.processData&&"string"!=typeof d.data&&(d.data=at.param(d.data,d.traditional)),U(Se,d,n,w),2===b)return w;c=at.event&&d.global,c&&0===at.active++&&at.event.trigger("ajaxStart"),d.type=d.type.toUpperCase(),d.hasContent=!Ce.test(d.type),a=d.url,d.hasContent||(d.data&&(a=d.url+=(ye.test(a)?"&":"?")+d.data,delete d.data),d.cache===!1&&(d.url=be.test(a)?a.replace(be,"$1_="+ve++):a+(ye.test(a)?"&":"?")+"_="+ve++)),d.ifModified&&(at.lastModified[a]&&w.setRequestHeader("If-Modified-Since",at.lastModified[a]),at.etag[a]&&w.setRequestHeader("If-None-Match",at.etag[a])),(d.data&&d.hasContent&&d.contentType!==!1||n.contentType)&&w.setRequestHeader("Content-Type",d.contentType),w.setRequestHeader("Accept",d.dataTypes[0]&&d.accepts[d.dataTypes[0]]?d.accepts[d.dataTypes[0]]+("*"!==d.dataTypes[0]?", "+Ae+"; q=0.01":""):d.accepts["*"]);for(f in d.headers)w.setRequestHeader(f,d.headers[f]);if(d.beforeSend&&(d.beforeSend.call(h,w,d)===!1||2===b))return w.abort();x="abort";for(f in{success:1,error:1,complete:1})w[f](d[f]);if(i=U(Te,d,n,w)){if(w.readyState=1,c&&p.trigger("ajaxSend",[w,d]),2===b)return w;d.async&&d.timeout>0&&(l=t.setTimeout(function(){w.abort("timeout")},d.timeout));try{b=1,i.send(y,r)}catch(t){if(!(2>b))throw t;r(-1,t)}}else r(-1,"No Transport");return w},getJSON:function(t,e,n){return at.get(t,e,n,"json")},getScript:function(t,e){return at.get(t,void 0,e,"script")}}),at.each(["get","post"],function(t,e){at[e]=function(t,n,r,i){return at.isFunction(n)&&(i=i||r,r=n,n=void 0),at.ajax(at.extend({url:t,type:e,dataType:i,data:n,success:r},at.isPlainObject(t)&&t))}}),at._evalUrl=function(t){return at.ajax({url:t,type:"GET",dataType:"script",async:!1,global:!1,throws:!0})},at.fn.extend({wrapAll:function(t){var e;return at.isFunction(t)?this.each(function(e){at(this).wrapAll(t.call(this,e))}):(this[0]&&(e=at(t,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var t=this;t.firstElementChild;)t=t.firstElementChild;return t}).append(this)),this)},wrapInner:function(t){return at.isFunction(t)?this.each(function(e){at(this).wrapInner(t.call(this,e))}):this.each(function(){var e=at(this),n=e.contents();n.length?n.wrapAll(t):e.append(t)})},wrap:function(t){var e=at.isFunction(t);return this.each(function(n){at(this).wrapAll(e?t.call(this,n):t)})},unwrap:function(){return this.parent().each(function(){at.nodeName(this,"body")||at(this).replaceWith(this.childNodes)}).end()}}),at.expr.filters.hidden=function(t){return!at.expr.filters.visible(t)},at.expr.filters.visible=function(t){return t.offsetWidth>0||t.offsetHeight>0||t.getClientRects().length>0};var Me=/%20/g,De=/\[\]$/,Pe=/\r?\n/g,Oe=/^(?:submit|button|image|reset|file)$/i,Ne=/^(?:input|select|textarea|keygen)/i;at.param=function(t,e){var n,r=[],i=function(t,e){e=at.isFunction(e)?e():null==e?"":e,r[r.length]=encodeURIComponent(t)+"="+encodeURIComponent(e)};if(void 0===e&&(e=at.ajaxSettings&&at.ajaxSettings.traditional),at.isArray(t)||t.jquery&&!at.isPlainObject(t))at.each(t,function(){i(this.name,this.value)});else for(n in t)W(n,t[n],e,i);return r.join("&").replace(Me,"+")},at.fn.extend({serialize:function(){return at.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var t=at.prop(this,"elements");return t?at.makeArray(t):this}).filter(function(){var t=this.type;return this.name&&!at(this).is(":disabled")&&Ne.test(this.nodeName)&&!Oe.test(t)&&(this.checked||!Nt.test(t))}).map(function(t,e){var n=at(this).val();return null==n?null:at.isArray(n)?at.map(n,function(t){return{name:e.name,value:t.replace(Pe,"\r\n")}}):{name:e.name,value:n.replace(Pe,"\r\n")}}).get()}}),at.ajaxSettings.xhr=function(){try{return new t.XMLHttpRequest}catch(t){}};var Le={0:200,1223:204},Ie=at.ajaxSettings.xhr();rt.cors=!!Ie&&"withCredentials"in Ie,rt.ajax=Ie=!!Ie,at.ajaxTransport(function(e){var n,r;return rt.cors||Ie&&!e.crossDomain?{send:function(i,a){var o,s=e.xhr();if(s.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(o in e.xhrFields)s[o]=e.xhrFields[o];e.mimeType&&s.overrideMimeType&&s.overrideMimeType(e.mimeType),e.crossDomain||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest");for(o in i)s.setRequestHeader(o,i[o]);n=function(t){return function(){n&&(n=r=s.onload=s.onerror=s.onabort=s.onreadystatechange=null,"abort"===t?s.abort():"error"===t?"number"!=typeof s.status?a(0,"error"):a(s.status,s.statusText):a(Le[s.status]||s.status,s.statusText,"text"!==(s.responseType||"text")||"string"!=typeof s.responseText?{binary:s.response}:{text:s.responseText},s.getAllResponseHeaders()))}},s.onload=n(),r=s.onerror=n("error"),void 0!==s.onabort?s.onabort=r:s.onreadystatechange=function(){4===s.readyState&&t.setTimeout(function(){n&&r()})},n=n("abort");try{s.send(e.hasContent&&e.data||null)}catch(t){if(n)throw t}},abort:function(){n&&n()}}:void 0}),at.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(t){return at.globalEval(t),t}}}),at.ajaxPrefilter("script",function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET")}),at.ajaxTransport("script",function(t){if(t.crossDomain){var e,n;return{send:function(r,i){e=at("<script>").prop({charset:t.scriptCharset,src:t.url}).on("load error",n=function(t){e.remove(),n=null,t&&i("error"===t.type?404:200,t.type)}),Y.head.appendChild(e[0])},abort:function(){n&&n()}}}});var Re=[],Be=/(=)\?(?=&|$)|\?\?/;at.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=Re.pop()||at.expando+"_"+ve++;return this[t]=!0,t}}),at.ajaxPrefilter("json jsonp",function(e,n,r){var i,a,o,s=e.jsonp!==!1&&(Be.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&Be.test(e.data)&&"data");return s||"jsonp"===e.dataTypes[0]?(i=e.jsonpCallback=at.isFunction(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,s?e[s]=e[s].replace(Be,"$1"+i):e.jsonp!==!1&&(e.url+=(ye.test(e.url)?"&":"?")+e.jsonp+"="+i),e.converters["script json"]=function(){return o||at.error(i+" was not called"),o[0]},e.dataTypes[0]="json",a=t[i],t[i]=function(){o=arguments},r.always(function(){void 0===a?at(t).removeProp(i):t[i]=a,e[i]&&(e.jsonpCallback=n.jsonpCallback,Re.push(i)),o&&at.isFunction(a)&&a(o[0]),o=a=void 0}),"script"):void 0}),at.parseHTML=function(t,e,n){if(!t||"string"!=typeof t)return null;"boolean"==typeof e&&(n=e,e=!1),e=e||Y;var r=pt.exec(t),i=!n&&[];return r?[e.createElement(r[1])]:(r=d([t],e,i),i&&i.length&&at(i).remove(),at.merge([],r.childNodes))};var ze=at.fn.load;at.fn.load=function(t,e,n){if("string"!=typeof t&&ze)return ze.apply(this,arguments);var r,i,a,o=this,s=t.indexOf(" ");return s>-1&&(r=at.trim(t.slice(s)),t=t.slice(0,s)),at.isFunction(e)?(n=e,e=void 0):e&&"object"==typeof e&&(i="POST"),o.length>0&&at.ajax({url:t,type:i||"GET",dataType:"html",data:e}).done(function(t){a=arguments,o.html(r?at("<div>").append(at.parseHTML(t)).find(r):t)}).always(n&&function(t,e){o.each(function(){n.apply(this,a||[t.responseText,e,t])})}),this},at.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(t,e){at.fn[e]=function(t){return this.on(e,t)}}),at.expr.filters.animated=function(t){return at.grep(at.timers,function(e){return t===e.elem}).length},at.offset={setOffset:function(t,e,n){var r,i,a,o,s,l,u,c=at.css(t,"position"),f=at(t),d={};"static"===c&&(t.style.position="relative"),s=f.offset(),a=at.css(t,"top"),l=at.css(t,"left"),u=("absolute"===c||"fixed"===c)&&(a+l).indexOf("auto")>-1,u?(r=f.position(),o=r.top,i=r.left):(o=parseFloat(a)||0,i=parseFloat(l)||0),at.isFunction(e)&&(e=e.call(t,n,at.extend({},s))),null!=e.top&&(d.top=e.top-s.top+o),null!=e.left&&(d.left=e.left-s.left+i),"using"in e?e.using.call(t,d):f.css(d)}},at.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(e){at.offset.setOffset(this,t,e)});var e,n,r=this[0],i={top:0,left:0},a=r&&r.ownerDocument;return a?(e=a.documentElement,at.contains(e,r)?(i=r.getBoundingClientRect(),n=G(a),{top:i.top+n.pageYOffset-e.clientTop,left:i.left+n.pageXOffset-e.clientLeft}):i):void 0},position:function(){if(this[0]){var t,e,n=this[0],r={top:0,left:0};return"fixed"===at.css(n,"position")?e=n.getBoundingClientRect():(t=this.offsetParent(),e=this.offset(),at.nodeName(t[0],"html")||(r=t.offset()),r.top+=at.css(t[0],"borderTopWidth",!0),r.left+=at.css(t[0],"borderLeftWidth",!0)),{top:e.top-r.top-at.css(n,"marginTop",!0),left:e.left-r.left-at.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent;t&&"static"===at.css(t,"position");)t=t.offsetParent;return t||Zt})}}),at.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,e){var n="pageYOffset"===e;at.fn[t]=function(r){return Ct(this,function(t,r,i){var a=G(t);return void 0===i?a?a[e]:t[r]:void(a?a.scrollTo(n?a.pageXOffset:i,n?i:a.pageYOffset):t[r]=i)},t,r,arguments.length)}}),at.each(["top","left"],function(t,e){at.cssHooks[e]=A(rt.pixelPosition,function(t,n){return n?(n=T(t,e),Yt.test(n)?at(t).position()[e]+"px":n):void 0})}),at.each({Height:"height",Width:"width"},function(t,e){at.each({padding:"inner"+t,content:e,"":"outer"+t},function(n,r){at.fn[r]=function(r,i){var a=arguments.length&&(n||"boolean"!=typeof r),o=n||(r===!0||i===!0?"margin":"border");return Ct(this,function(e,n,r){var i;return at.isWindow(e)?e.document.documentElement["client"+t]:9===e.nodeType?(i=e.documentElement,Math.max(e.body["scroll"+t],i["scroll"+t],e.body["offset"+t],i["offset"+t],i["client"+t])):void 0===r?at.css(e,n,o):at.style(e,n,r,o)},e,a?r:void 0,a,null)}})}),at.fn.extend({bind:function(t,e,n){return this.on(t,null,e,n)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,n,r){return this.on(e,t,n,r)},undelegate:function(t,e,n){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",n)},size:function(){return this.length}}),at.fn.andSelf=at.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return at});var Fe=t.jQuery,qe=t.$;return at.noConflict=function(e){return t.$===at&&(t.$=qe),e&&t.jQuery===at&&(t.jQuery=Fe),at},e||(t.jQuery=t.$=at),at}),!function(){
"use strict";window.Framework7=function(e){function n(t){var e=t.replace(/^./,function(t){return t.toUpperCase()});a["onPage"+e]=function(e,n){return a.onPage(t,e,n)}}function r(){var t,e=s(this),n=e[0].scrollTop,r=e[0].scrollHeight,i=e[0].offsetHeight,a=e[0].getAttribute("data-distance"),o=e.find(".virtual-list"),l=e.hasClass("infinite-scroll-top");if(a||(a=50),"string"==typeof a&&a.indexOf("%")>=0&&(a=parseInt(a,10)/100*i),a>i&&(a=i),l)a>n&&e.trigger("infinite");else if(n+i>=r-a){if(o.length>0&&(t=o[0].f7VirtualList,t&&!t.reachEnd))return;e.trigger("infinite")}}function i(){a.device.ipad&&(document.body.scrollLeft=0,setTimeout(function(){document.body.scrollLeft=0},0))}var a=this;a.version="1.0.1",a.params={cache:!0,cacheIgnore:[],cacheIgnoreGetParameters:!1,cacheDuration:6e5,preloadPreviousPage:!0,uniqueHistory:!1,uniqueHistoryIgnoreGetParameters:!1,dynamicPageUrl:"content-{{index}}",allowDuplicateUrls:!1,router:!0,pushState:!1,pushStateRoot:void 0,pushStateNoAnimation:!1,pushStateSeparator:"#!/",fastClicks:!0,fastClicksDistanceThreshold:0,fastClicksDelayBetweenClicks:50,activeState:!0,activeStateElements:"a, button, label, span",animateNavBackIcon:!1,swipeBackPage:!0,swipeBackPageThreshold:0,swipeBackPageActiveArea:30,swipeBackPageAnimateShadow:!0,swipeBackPageAnimateOpacity:!0,ajaxLinks:void 0,externalLinks:".external",sortable:!0,hideNavbarOnPageScroll:!1,hideToolbarOnPageScroll:!1,hideTabbarOnPageScroll:!1,showBarsOnPageScrollEnd:!0,swipeout:!0,swipeoutActionsNoFold:!1,swipeoutNoFollow:!1,smartSelectBackTemplate:'<div class="left sliding"><a href="#" class="back link"><i class="icon icon-back"></i><span>{{backText}}</span></a></div>',smartSelectBackText:"Back",smartSelectInPopup:!1,smartSelectPopupCloseTemplate:'<div class="left"><a href="#" class="link close-popup"><i class="icon icon-back"></i><span>{{closeText}}</span></a></div>',smartSelectPopupCloseText:"Close",smartSelectSearchbar:!1,smartSelectBackOnSelect:!1,searchbarHideDividers:!0,searchbarHideGroups:!0,scrollTopOnNavbarClick:!1,scrollTopOnStatusbarClick:!1,swipePanel:!1,swipePanelActiveArea:0,swipePanelCloseOpposite:!0,swipePanelOnlyClose:!1,swipePanelNoFollow:!1,swipePanelThreshold:0,panelsCloseByOutside:!0,modalButtonOk:"OK",modalButtonCancel:"Cancel",modalUsernamePlaceholder:"Username",modalPasswordPlaceholder:"Password",modalTitle:"Framework7",modalCloseByOutside:!1,actionsCloseByOutside:!0,popupCloseByOutside:!0,modalPreloaderTitle:"Loading... ",modalStack:!0,imagesLazyLoadThreshold:0,imagesLazyLoadSequential:!0,viewClass:"view",viewMainClass:"view-main",viewsClass:"views",notificationCloseOnClick:!1,notificationCloseIcon:!0,animatePages:!0,templates:{},template7Data:{},template7Pages:!1,precompileTemplates:!1,init:!0};for(var o in e)a.params[o]=e[o];var s=t,l=Template7;a._compiledTemplates={},a.touchEvents={start:a.support.touch?"touchstart":"mousedown",move:a.support.touch?"touchmove":"mousemove",end:a.support.touch?"touchend":"mouseup"},a.ls=localStorage,a.rtl="rtl"===s("body").css("direction"),a.rtl&&s("html").attr("dir","rtl"),"undefined"!=typeof a.params.statusbarOverlay&&(a.params.statusbarOverlay?s("html").addClass("with-statusbar-overlay"):s("html").removeClass("with-statusbar-overlay")),a.views=[];var u=function(t,e){var n,r={dynamicNavbar:!1,domCache:!1,linksView:void 0,reloadPages:!1,uniqueHistory:a.params.uniqueHistory,uniqueHistoryIgnoreGetParameters:a.params.uniqueHistoryIgnoreGetParameters,allowDuplicateUrls:a.params.allowDuplicateUrls,swipeBackPage:a.params.swipeBackPage,swipeBackPageAnimateShadow:a.params.swipeBackPageAnimateShadow,swipeBackPageAnimateOpacity:a.params.swipeBackPageAnimateOpacity,swipeBackPageActiveArea:a.params.swipeBackPageActiveArea,swipeBackPageThreshold:a.params.swipeBackPageThreshold,animatePages:a.params.animatePages,preloadPreviousPage:a.params.preloadPreviousPage};e=e||{};for(var i in r)"undefined"==typeof e[i]&&(e[i]=r[i]);var o=this;o.params=e,o.selector=t;var l=s(t);if(o.container=l[0],o.contentCache={},o.pagesCache={},l[0].f7View=o,o.pagesContainer=l.find(".pages")[0],o.initialPages=[],o.initialNavbars=[],o.params.domCache){var u=l.find(".page");for(n=0;n<u.length;n++)o.initialPages.push(u[n]);if(o.params.dynamicNavbar){var c=l.find(".navbar-inner");for(n=0;n<c.length;n++)o.initialNavbars.push(c[n])}}o.allowPageChange=!0;var f=document.location.href;o.history=[];var d=f,h=a.params.pushStateSeparator,p=a.params.pushStateRoot;a.params.pushState&&(p?d=p:d.indexOf(h)>=0&&d.indexOf(h+"#")<0&&(d=d.split(h)[0]));var g,m;o.activePage||(g=s(o.pagesContainer).find(".page-on-center"),0===g.length&&(g=s(o.pagesContainer).find(".page:not(.cached)"),g=g.eq(g.length-1)),g.length>0&&(m=g[0].f7PageData)),o.params.domCache&&g?(o.url=l.attr("data-url")||o.params.url||"#"+g.attr("data-page"),o.pagesCache[o.url]=g.attr("data-page")):o.url=l.attr("data-url")||o.params.url||d,m&&(m.view=o,m.url=o.url,o.activePage=m,g[0].f7PageData=m),o.url&&o.history.push(o.url),o.main=l.hasClass(a.params.viewMainClass);var v,y,_,b,x,w,C,k,S,T,A=!1,E=!1,M={},D=[],P=[],O=!0,N=[],L=[];if(o.handleTouchStart=function(t){O&&o.params.swipeBackPage&&!A&&!a.swipeoutOpenedEl&&(E=!1,A=!0,v=void 0,M.x="touchstart"===t.type?t.targetTouches[0].pageX:t.pageX,M.y="touchstart"===t.type?t.targetTouches[0].pageY:t.pageY,b=(new Date).getTime(),S=o.params.dynamicNavbar&&l.find(".navbar-inner").length>1)},o.handleTouchMove=function(t){if(A){var e="touchmove"===t.type?t.targetTouches[0].pageX:t.pageX,n="touchmove"===t.type?t.targetTouches[0].pageY:t.pageY;if("undefined"==typeof v&&(v=!!(v||Math.abs(n-M.y)>Math.abs(e-M.x))),v||t.f7PreventSwipeBack||a.preventSwipeBack)return void(A=!1);if(!E){var r=!1;y=l.width();var i=s(t.target),u=i.hasClass("swipeout")?i:i.parents(".swipeout");u.length>0&&(!a.rtl&&u.find(".swipeout-actions-left").length>0&&(r=!0),a.rtl&&u.find(".swipeout-actions-right").length>0&&(r=!0)),D=i.is(".page")?i:i.parents(".page"),D.hasClass("no-swipeback")&&(r=!0),P=l.find(".page-on-left:not(.cached)");var c=M.x-l.offset().left>o.params.swipeBackPageActiveArea;if(c=a.rtl?M.x<l.offset().left-l[0].scrollLeft+y-o.params.swipeBackPageActiveArea:M.x-l.offset().left>o.params.swipeBackPageActiveArea,c&&(r=!0),(0===P.length||0===D.length)&&(r=!0),r)return void(A=!1);S&&(N=l.find(".navbar-on-center:not(.cached)"),L=l.find(".navbar-on-left:not(.cached)"),x=N.find(".left, .center, .right, .subnavbar, .fading"),w=L.find(".left, .center, .right, .subnavbar, .fading"),a.params.animateNavBackIcon&&(C=N.find(".left.sliding .back .icon"),k=L.find(".left.sliding .back .icon")))}t.f7PreventPanelSwipe=!0,E=!0,t.preventDefault();var f=a.rtl?-1:1;_=(e-M.x-o.params.swipeBackPageThreshold)*f,0>_&&(_=0);var d=_/y,h={percentage:d,activePage:D[0],previousPage:P[0],activeNavbar:N[0],previousNavbar:L[0]};o.params.onSwipeBackMove&&o.params.onSwipeBackMove(h),l.trigger("swipebackmove",h);var p=_*f,g=(_/5-y/5)*f;if(1===a.device.pixelRatio&&(p=Math.round(p),g=Math.round(g)),D.transform("translate3d("+p+"px,0,0)"),o.params.swipeBackPageAnimateShadow&&"android"!==a.device.os&&(D[0].style.boxShadow="0px 0px 12px rgba(0,0,0,"+(.5-.5*d)+")"),P.transform("translate3d("+g+"px,0,0)"),o.params.swipeBackPageAnimateOpacity&&(P[0].style.opacity=.9+.1*d),S){var m;for(m=0;m<x.length;m++)if(T=s(x[m]),T.is(".subnavbar.sliding")||(T[0].style.opacity=1-1.3*d),T[0].className.indexOf("sliding")>=0){var b=d*T[0].f7NavbarRightOffset;1===a.device.pixelRatio&&(b=Math.round(b)),T.transform("translate3d("+b+"px,0,0)"),a.params.animateNavBackIcon&&T[0].className.indexOf("left")>=0&&C.length>0&&C.transform("translate3d("+-b+"px,0,0)")}for(m=0;m<w.length;m++)if(T=s(w[m]),T.is(".subnavbar.sliding")||(T[0].style.opacity=1.3*d-.3),T[0].className.indexOf("sliding")>=0){var O=T[0].f7NavbarLeftOffset*(1-d);1===a.device.pixelRatio&&(O=Math.round(O)),T.transform("translate3d("+O+"px,0,0)"),a.params.animateNavBackIcon&&T[0].className.indexOf("left")>=0&&k.length>0&&k.transform("translate3d("+-O+"px,0,0)")}}}},o.handleTouchEnd=function(){if(!A||!E)return A=!1,void(E=!1);if(A=!1,E=!1,0===_)return s([D[0],P[0]]).transform("").css({opacity:"",boxShadow:""}),void(S&&(x.transform("").css({opacity:""}),w.transform("").css({opacity:""}),C&&C.length>0&&C.transform(""),k&&C.length>0&&k.transform("")));var t=(new Date).getTime()-b,e=!1;if((300>t&&_>10||t>=300&&_>y/2)&&(D.removeClass("page-on-center").addClass("page-on-right"),P.removeClass("page-on-left").addClass("page-on-center"),S&&(N.removeClass("navbar-on-center").addClass("navbar-on-right"),L.removeClass("navbar-on-left").addClass("navbar-on-center")),e=!0),s([D[0],P[0]]).transform("").css({opacity:"",boxShadow:""}).addClass("page-transitioning"),S&&(x.css({opacity:""}).each(function(){var t=e?this.f7NavbarRightOffset:0,n=s(this);n.transform("translate3d("+t+"px,0,0)"),a.params.animateNavBackIcon&&n.hasClass("left")&&C.length>0&&C.addClass("page-transitioning").transform("translate3d("+-t+"px,0,0)")}).addClass("page-transitioning"),w.transform("").css({opacity:""}).each(function(){var t=e?0:this.f7NavbarLeftOffset,n=s(this);n.transform("translate3d("+t+"px,0,0)"),a.params.animateNavBackIcon&&n.hasClass("left")&&k.length>0&&k.addClass("page-transitioning").transform("translate3d("+-t+"px,0,0)")}).addClass("page-transitioning")),O=!1,o.allowPageChange=!1,e){var n=o.history[o.history.length-2];o.url=n,a.pageBackCallbacks("before",o,{pageContainer:D[0],url:n,position:"center",newPage:P,oldPage:D,swipeBack:!0}),a.pageAnimCallbacks("before",o,{pageContainer:P[0],url:n,position:"left",newPage:P,oldPage:D,swipeBack:!0})}D.transitionEnd(function(){s([D[0],P[0]]).removeClass("page-transitioning"),S&&(x.removeClass("page-transitioning").css({opacity:""}),w.removeClass("page-transitioning").css({opacity:""}),C&&C.length>0&&C.removeClass("page-transitioning"),k&&k.length>0&&k.removeClass("page-transitioning")),O=!0,o.allowPageChange=!0,e&&(a.params.pushState&&history.back(),a.pageBackCallbacks("after",o,{pageContainer:D[0],url:n,position:"center",newPage:P,oldPage:D,swipeBack:!0}),a.pageAnimCallbacks("after",o,{pageContainer:P[0],url:n,position:"left",newPage:P,oldPage:D,swipeBack:!0}),a.router.afterBack(o,D,P))})},o.attachEvents=function(t){var e=t?"off":"on";l[e](a.touchEvents.start,o.handleTouchStart),l[e](a.touchEvents.move,o.handleTouchMove),l[e](a.touchEvents.end,o.handleTouchEnd)},o.detachEvents=function(){o.attachEvents(!0)},o.params.swipeBackPage&&o.attachEvents(),a.views.push(o),o.main&&(a.mainView=o),o.router={load:function(t){return a.router.load(o,t)},back:function(t){return a.router.back(o,t)},loadPage:function(t){if(t=t||{},"string"==typeof t){var e=t;t={},e&&0===e.indexOf("#")&&o.params.domCache?t.pageName=e.split("#")[1]:t.url=e}return a.router.load(o,t)},loadContent:function(t){return a.router.load(o,{content:t})},reloadPage:function(t){return a.router.load(o,{url:t,reload:!0})},reloadContent:function(t){return a.router.load(o,{content:t,reload:!0})},reloadPreviousPage:function(t){return a.router.load(o,{url:t,reloadPrevious:!0,reload:!0})},reloadPreviousContent:function(t){return a.router.load(o,{content:t,reloadPrevious:!0,reload:!0})},refreshPage:function(){var t={url:o.url,reload:!0,ignoreCache:!0};return t.url&&0===t.url.indexOf("#")&&(o.params.domCache&&o.pagesCache[t.url]?(t.pageName=o.pagesCache[t.url],t.url=void 0,delete t.url):o.contentCache[t.url]&&(t.content=o.contentCache[t.url],t.url=void 0,delete t.url)),a.router.load(o,t)},refreshPreviousPage:function(){var t={url:o.history[o.history.length-2],reload:!0,reloadPrevious:!0,ignoreCache:!0};return t.url&&0===t.url.indexOf("#")&&o.params.domCache&&o.pagesCache[t.url]&&(t.pageName=o.pagesCache[t.url],t.url=void 0,delete t.url),a.router.load(o,t)}},o.loadPage=o.router.loadPage,o.loadContent=o.router.loadContent,o.reloadPage=o.router.reloadPage,o.reloadContent=o.router.reloadContent,o.reloadPreviousPage=o.router.reloadPreviousPage,o.reloadPreviousContent=o.router.reloadPreviousContent,o.refreshPage=o.router.refreshPage,o.refreshPreviousPage=o.router.refreshPreviousPage,o.back=o.router.back,o.hideNavbar=function(){return a.hideNavbar(l.find(".navbar"))},o.showNavbar=function(){return a.showNavbar(l.find(".navbar"))},o.hideToolbar=function(){return a.hideToolbar(l.find(".toolbar"))},o.showToolbar=function(){return a.showToolbar(l.find(".toolbar"))},a.params.pushState&&o.main){var I;p?I=f.split(a.params.pushStateRoot+h)[1]:f.indexOf(h)>=0&&f.indexOf(h+"#")<0&&(I=f.split(h)[1]);var R=!a.params.pushStateNoAnimation&&void 0;if(I)a.router.load(o,{url:I,animatePages:R,pushState:!1});else if(f.indexOf(h+"#")>=0){var B=history.state;B.pageName&&"viewIndex"in B&&a.router.load(o,{pageName:B.pageName,pushState:!1})}}return o.destroy=function(){o.detachEvents(),o=void 0},a.pluginHook("addView",o),o};a.addView=function(t,e){return new u(t,e)},a.navbarInitCallback=function(t,e,n,r,i,o){var l={container:n,innerContainer:r},u={url:i,query:s.parseUrlQuery(i||""),container:e,name:s(e).attr("data-page"),view:t,from:o},c={navbar:l,page:u};a.pluginHook("navbarInit",l,u),s(r).trigger("navbarInit",c)},a.sizeNavbars=function(t){var e=t?s(t).find(".navbar .navbar-inner:not(.cached)"):s(".navbar .navbar-inner:not(.cached)");e.each(function(){var t=s(this);if(!t.hasClass("cached")){var e,n,r=t.find(a.rtl?".right":".left"),i=t.find(a.rtl?".left":".right"),o=t.find(".center"),l=t.find(".subnavbar"),u=0===r.length,c=0===i.length,f=u?0:r.outerWidth(!0),d=c?0:i.outerWidth(!0),h=o.outerWidth(!0),p=t[0].offsetWidth-parseInt(t.css("padding-left"),10)-parseInt(t.css("padding-right"),10),g=t.hasClass("navbar-on-left");c&&(e=p-h),u&&(e=0),u||c||(e=(p-d-h+f)/2);var m=(p-h)/2;p-f-d>h?(f>m&&(m=f),m+h>p-d&&(m=p-d-h),n=m-e):n=0;var v=a.rtl?-1:1,y=n;a.rtl&&u&&c&&o.length>0&&(y=-y),o.css({left:y+"px"}),o.hasClass("sliding")&&(o[0].f7NavbarLeftOffset=-(e+n)*v,o[0].f7NavbarRightOffset=(p-e-n-h)*v,g&&o.transform("translate3d("+o[0].f7NavbarLeftOffset+"px, 0, 0)")),!u&&r.hasClass("sliding")&&(a.rtl?(r[0].f7NavbarLeftOffset=-(p-r.outerWidth())/2*v,r[0].f7NavbarRightOffset=f*v):(r[0].f7NavbarLeftOffset=-f,r[0].f7NavbarRightOffset=(p-r.outerWidth())/2),g&&r.transform("translate3d("+r[0].f7NavbarLeftOffset+"px, 0, 0)")),!c&&i.hasClass("sliding")&&(a.rtl?(i[0].f7NavbarLeftOffset=-d*v,i[0].f7NavbarRightOffset=(p-i.outerWidth())/2*v):(i[0].f7NavbarLeftOffset=-(p-i.outerWidth())/2,i[0].f7NavbarRightOffset=d),g&&i.transform("translate3d("+i[0].f7NavbarLeftOffset+"px, 0, 0)")),l.length&&l.hasClass("sliding")&&(l[0].f7NavbarLeftOffset=a.rtl?l[0].offsetWidth:-l[0].offsetWidth,l[0].f7NavbarRightOffset=-l[0].f7NavbarLeftOffset)}})},a.hideNavbar=function(t){return s(t).addClass("navbar-hidden"),!0},a.showNavbar=function(t){var e=s(t);return e.addClass("navbar-hiding").removeClass("navbar-hidden").transitionEnd(function(){e.removeClass("navbar-hiding")}),!0},a.hideToolbar=function(t){return s(t).addClass("toolbar-hidden"),!0},a.showToolbar=function(t){var e=s(t);e.addClass("toolbar-hiding").removeClass("toolbar-hidden").transitionEnd(function(){e.removeClass("toolbar-hiding")})},a.initSearchbar=function(t){function e(){g.val("").trigger("change"),d.removeClass("searchbar-active searchbar-not-empty"),v.length>0&&v.css(C,-v[0].offsetWidth+"px"),y&&p.removeClass("searchbar-overlay-active"),a.device.ios?setTimeout(function(){g.blur(),y.trigger("disableSearch")},400):(g.blur(),y.trigger("disableSearch"))}function n(){a.device.ios?setTimeout(function(){y&&!d.hasClass("searchbar-active")&&p.addClass("searchbar-overlay-active"),d.addClass("searchbar-active"),v.length>0&&v.css(C,"0px"),y.trigger("enableSearch")},400):(y&&!d.hasClass("searchbar-active")&&p.addClass("searchbar-overlay-active"),d.addClass("searchbar-active"),v.length>0&&v.css(C,"0px"),y.trigger("enableSearch"))}function r(){g.val("").trigger("change").focus(),y.trigger("clearSearch")}function i(){setTimeout(function(){var t=g.val().trim();0===t.length?(d.removeClass("searchbar-not-empty"),y&&d.hasClass("searchbar-active")&&p.addClass("searchbar-overlay-active")):(d.addClass("searchbar-not-empty"),y&&d.hasClass("searchbar-active")&&p.removeClass("searchbar-overlay-active")),y.length>0&&(b||_)&&c(t)},0)}function o(t){t.preventDefault()}function l(t){var a=t?"off":"on";d[a]("submit",o),v[a]("click",e),p[a]("click",e),g[a]("focus",n),g[a]("change keydown keypress keyup",i),m[a]("click",r)}function u(){l(!0)}function c(t){if(t.trim()!==k){k=t.trim();var e=t.trim().toLowerCase().split(" "),n=[];if(_){if(h=y[0].f7VirtualList,""===t.trim())return h.resetFilter(),w.hide(),void x.show();if(h.params.searchAll)n=h.params.searchAll(t,h.items)||[];else if(h.params.searchByItem)for(var r=0;r<h.items.length;r++)h.params.searchByItem(t,r,h.params.items[r])&&n.push(r)}else b=d.attr("data-search-in"),y.find("li").removeClass("hidden-by-searchbar").each(function(t,r){r=s(r);var i=r.find(b);if(0!==i.length){var a;a=i.text().trim().toLowerCase();for(var o=0,l=0;l<e.length;l++)a.indexOf(e[l])>=0&&o++;o!==e.length?r.addClass("hidden-by-searchbar"):n.push(r[0])}}),a.params.searchbarHideDividers&&y.find(".item-divider, .list-group-title").each(function(){for(var t=s(this),e=t.nextAll("li"),n=!0,r=0;r<e.length;r++){var i=s(e[r]);if(i.hasClass("list-group-title")||i.hasClass("item-divider"))break;i.hasClass("hidden-by-searchbar")||(n=!1)}n?t.addClass("hidden-by-searchbar"):t.removeClass("hidden-by-searchbar")}),a.params.searchbarHideGroups&&y.find(".list-group").each(function(){var t=s(this),e=t.find("li:not(.hidden-by-searchbar)");0===e.length?t.addClass("hidden-by-searchbar"):t.removeClass("hidden-by-searchbar")});y.trigger("search",{query:t,foundItems:n}),0===n.length?(w.show(),x.hide()):(w.hide(),x.show()),_&&h.filterItems(n)}}function f(){u(),t.off("pageBeforeRemove",f)}t=s(t);var d=t.hasClass("searchbar")?t:t.find(".searchbar");if(0!==d.length){t.hasClass("page")||(t=d.parents(".page").eq(0));var h,p=t.hasClass("page")?t.find(".searchbar-overlay"):s(".searchbar-overlay"),g=d.find('input[type="search"]'),m=d.find(".searchbar-clear"),v=d.find(".searchbar-cancel"),y=s(d.attr("data-search-list")),_=y.hasClass("virtual-list"),b=d.attr("data-search-in"),x=(d.attr("data-search-by"),d.attr("data-searchbar-found"));x?x=s(x):(x=t.find(".searchbar-found"),0===x.length&&(x=s(".searchbar-found")));var w=d.attr("data-searchbar-not-found");w?w=s(w):(w=t.find(".searchbar-not-found"),0===w.length&&(w=s(".searchbar-not-found")));var C=a.rtl?"margin-left":"margin-right";v.length>0&&(v.show(),v.css(C,-v[0].offsetWidth+"px")),d[0].f7DestroySearchbar=u,l();var k;t.hasClass("page")&&t.on("pageBeforeRemove",f)}},a.destroySearchbar=function(t){t=s(t);var e=t.hasClass("searchbar")?t:t.find(".searchbar");0!==e.length&&e[0].f7DestroySearchbar&&e[0].f7DestroySearchbar()},a.initMessagebar=function(t){function e(t){t.preventDefault()}function n(){c.css({height:""});var t=c[0].offsetHeight,e=t-c[0].clientHeight,n=c[0].scrollHeight,r=parseInt(l.attr("data-keyboard-height")||0,10);if(n+e>t){var i=n+e,a=h+(i-p),o=l.attr("data-max-height")||l.parents(".view")[0].offsetHeight-88;a>o&&(a=parseInt(o,10),i=a-h+p),c.css("height",i+"px"),l.css("height",a+"px"),f.length>0&&(f.css("padding-bottom",a+r+"px"),f.scrollTop(f[0].scrollHeight-f[0].offsetHeight))}else f.length>0&&(l.css({height:""}),f.css({"padding-bottom":r?d+r+"px":""}))}function r(){clearTimeout(u),u=setTimeout(function(){n()},0)}function i(t){var n=t?"off":"on";l[n]("submit",e),c[n]("change keydown keypress keyup paste cut",r)}function a(){i(!0)}function o(){a(),t.off("pageBeforeRemove",o)}t=s(t);var l=t.hasClass("messagebar")?t:t.find(".messagebar");if(0!==l.length){var u,c=l.find("textarea"),f=l.parents(".page").find(".page-content"),d=parseInt(f.css("padding-bottom")),h=l[0].offsetHeight,p=c[0].offsetHeight;l[0].f7DestroyMessagebar=a,i(),t.hasClass("page")&&t.on("pageBeforeRemove",o)}},a.destroyMessagebar=function(t){t=s(t);var e=t.hasClass("messagebar")?t:t.find(".messagebar");0!==e.length&&e[0].f7DestroyMessagebar&&e[0].f7DestroyMessagebar()},a.cache=[],a.removeFromCache=function(t){for(var e=!1,n=0;n<a.cache.length;n++)a.cache[n].url===t&&(e=n);e!==!1&&a.cache.splice(e,1)},a.xhr=!1,a.get=function(t,e,n,r){var i=t;if(a.params.cacheIgnoreGetParameters&&t.indexOf("?")>=0&&(i=t.split("?")[0]),a.params.cache&&!n&&t.indexOf("nocache")<0&&a.params.cacheIgnore.indexOf(i)<0)for(var o=0;o<a.cache.length;o++)if(a.cache[o].url===i&&(new Date).getTime()-a.cache[o].time<a.params.cacheDuration)return r(a.cache[o].content),!1;return a.xhr=s.ajax({url:t,method:"GET",beforeSend:a.params.onAjaxStart,complete:function(t){200===t.status||0===t.status?(a.params.cache&&!n&&(a.removeFromCache(i),a.cache.push({url:i,time:(new Date).getTime(),content:t.responseText})),r(t.responseText,!1)):r(t.responseText,!0),a.params.onAjaxComplete&&a.params.onAjaxComplete(t)},error:function(t){r(t.responseText,!0),a.params.onAjaxError&&a.params.onAjaxonAjaxError(t)}}),e&&(e.xhr=a.xhr),a.xhr},a.pageCallbacks={},a.onPage=function(t,e,n){if(e&&e.split(" ").length>1){for(var r=e.split(" "),i=[],o=0;o<r.length;o++)i.push(a.onPage(t,r[o],n));return i.remove=function(){for(var t=0;t<i.length;t++)i[t].remove()},i.trigger=function(){for(var t=0;t<i.length;t++)i[t].trigger()},i}var s=a.pageCallbacks[t][e];return s||(s=a.pageCallbacks[t][e]=[]),a.pageCallbacks[t][e].push(n),{remove:function(){for(var t,e=0;e<s.length;e++)s[e].toString()===n.toString()&&(t=e);"undefined"!=typeof t&&s.splice(t,1)},trigger:n}};for(var c="beforeInit init reinit beforeAnimation afterAnimation back afterBack beforeRemove".split(" "),f=0;f<c.length;f++)a.pageCallbacks[c[f]]={},n(c[f]);a.triggerPageCallbacks=function(t,e,n){var r=a.pageCallbacks[t]["*"];if(r)for(var i=0;i<r.length;i++)r[i](n);var o=a.pageCallbacks[t][e];if(o&&0!==o.length)for(var s=0;s<o.length;s++)o[s](n)},a.pageInitCallback=function(t,e){var n=e.pageContainer;if(!n.f7PageInitialized||t.params.domCache){var r={container:n,url:e.url,query:e.query||s.parseUrlQuery(e.url||""),name:s(n).attr("data-page"),view:t,from:e.position,context:e.context,navbarInnerContainer:e.navbarInnerContainer,fromPage:e.fromPage};if(n.f7PageInitialized&&t.params.domCache)return a.reinitPage(n),a.pluginHook("pageReinit",r),a.params.onPageReinit&&a.params.onPageBeforeInit(a,r),a.triggerPageCallbacks("reinit",r.name,r),void s(r.container).trigger("pageReinit",{page:r});n.f7PageInitialized=!0,n.f7PageData=r,t&&!e.preloadOnly&&(t.activePage=r),a.pluginHook("pageBeforeInit",r),a.params.onPageBeforeInit&&a.params.onPageBeforeInit(a,r),a.triggerPageCallbacks("beforeInit",r.name,r),s(r.container).trigger("pageBeforeInit",{page:r}),a.initPage(n),a.pluginHook("pageInit",r),a.params.onPageInit&&a.params.onPageInit(a,r),a.triggerPageCallbacks("init",r.name,r),s(r.container).trigger("pageInit",{page:r})}},a.pageRemoveCallback=function(t,e,n){var r;e.f7PageData&&(r=e.f7PageData.context);var i={container:e,name:s(e).attr("data-page"),view:t,url:e.f7PageData&&e.f7PageData.url,query:e.f7PageData&&e.f7PageData.query,from:n,context:r};a.pluginHook("pageBeforeRemove",i),a.params.onPageBeforeRemove&&a.params.onPageBeforeRemove(a,i),a.triggerPageCallbacks("beforeRemove",i.name,i),s(i.container).trigger("pageBeforeRemove",{page:i})},a.pageBackCallbacks=function(t,e,n){var r,i=n.pageContainer;i.f7PageData&&(r=i.f7PageData.context);var o={container:i,name:s(i).attr("data-page"),url:i.f7PageData&&i.f7PageData.url,query:i.f7PageData&&i.f7PageData.query,view:e,from:n.position,context:r,swipeBack:n.swipeBack};"after"===t&&(a.pluginHook("pageAfterBack",o),a.params.onPageAfterBack&&a.params.onPageAfterBack(a,o),a.triggerPageCallbacks("afterBack",o.name,o),s(i).trigger("pageAfterBack",{page:o})),"before"===t&&(a.pluginHook("pageBack",o),a.params.onPageBack&&a.params.onPageBack(a,o),a.triggerPageCallbacks("back",o.name,o),s(o.container).trigger("pageBack",{page:o}))},a.pageAnimCallbacks=function(t,e,n){var r,i=n.pageContainer;i.f7PageData&&(r=i.f7PageData.context);var o={container:i,url:n.url,query:n.query||s.parseUrlQuery(n.url||""),name:s(i).attr("data-page"),view:e,from:n.position,context:r,swipeBack:n.swipeBack,fromPage:n.fromPage},l=n.oldPage,u=n.newPage;if(i.f7PageData=o,"after"===t&&(a.pluginHook("pageAfterAnimation",o),a.params.onPageAfterAnimation&&a.params.onPageAfterAnimation(a,o),a.triggerPageCallbacks("afterAnimation",o.name,o),s(o.container).trigger("pageAfterAnimation",{page:o})),"before"===t){s(e.container).attr("data-page",o.name),e&&(e.activePage=o),u.hasClass("no-navbar")&&!l.hasClass("no-navbar")&&e.hideNavbar(),u.hasClass("no-navbar")||!l.hasClass("no-navbar")&&!l.hasClass("no-navbar-by-scroll")||e.showNavbar(),u.hasClass("no-toolbar")&&!l.hasClass("no-toolbar")&&e.hideToolbar(),u.hasClass("no-toolbar")||!l.hasClass("no-toolbar")&&!l.hasClass("no-toolbar-by-scroll")||e.showToolbar();var c;u.hasClass("no-tabbar")&&!l.hasClass("no-tabbar")&&(c=s(e.container).find(".tabbar"),0===c.length&&(c=s(e.container).parents("."+a.params.viewsClass).find(".tabbar")),a.hideToolbar(c)),u.hasClass("no-tabbar")||!l.hasClass("no-tabbar")&&!l.hasClass("no-tabbar-by-scroll")||(c=s(e.container).find(".tabbar"),0===c.length&&(c=s(e.container).parents("."+a.params.viewsClass).find(".tabbar")),a.showToolbar(c)),l.removeClass("no-navbar-by-scroll no-toolbar-by-scroll"),a.pluginHook("pageBeforeAnimation",o),a.params.onPageBeforeAnimation&&a.params.onPageBeforeAnimation(a,o),a.triggerPageCallbacks("beforeAnimation",o.name,o),s(o.container).trigger("pageBeforeAnimation",{page:o})}},a.initPage=function(t){a.sizeNavbars&&a.sizeNavbars(s(t).parents("."+a.params.viewClass)[0]),a.initMessages&&a.initMessages(t),a.initFormsStorage&&a.initFormsStorage(t),a.initSmartSelects&&a.initSmartSelects(t),a.initSlider&&a.initSlider(t),a.initSwiper&&a.initSwiper(t),a.initPullToRefresh&&a.initPullToRefresh(t),a.initInfiniteScroll&&a.initInfiniteScroll(t),a.initSearchbar&&a.initSearchbar(t),a.initMessagebar&&a.initMessagebar(t),a.initScrollToolbars&&a.initScrollToolbars(t),a.initImagesLazyLoad&&a.initImagesLazyLoad(t)},a.reinitPage=function(t){a.sizeNavbars&&a.sizeNavbars(s(t).parents("."+a.params.viewClass)[0]),a.reinitSlider&&a.reinitSlider(t),a.reinitSwiper&&a.reinitSwiper(t),a.reinitLazyLoad&&a.reinitLazyLoad(t)},a.initPageWithCallback=function(t){t=s(t);var e=t.parents("."+a.params.viewClass);if(0!==e.length){var n=e[0].f7View||!1,r=!(!n||!n.url)&&n.url;e&&e.attr("data-page",t.attr("data-page")||void 0),a.pageInitCallback(n,{pageContainer:t[0],url:r,position:"center"})}},a.router={temporaryDom:document.createElement("div"),findElement:function(t,e,n,r){e=s(e),r&&(t+=":not(.cached)");var i=e.find(t);return i.length>1&&("string"==typeof n.selector&&(i=e.find(n.selector+" "+t)),i.length>1&&(i=e.find("."+a.params.viewMainClass+" "+t))),1===i.length?i:(r||(i=a.router.findElement(t,e,n,!0)),i&&1===i.length?i:void 0)},animatePages:function(t,e,n){var r="page-on-center page-on-right page-on-left";"to-left"===n&&(t.removeClass(r).addClass("page-from-center-to-left"),e.removeClass(r).addClass("page-from-right-to-center")),"to-right"===n&&(t.removeClass(r).addClass("page-from-left-to-center"),e.removeClass(r).addClass("page-from-center-to-right"))},prepareNavbar:function(t,e,n){s(t).find(".sliding").each(function(){var t=s(this),r="right"===n?this.f7NavbarRightOffset:this.f7NavbarLeftOffset;a.params.animateNavBackIcon&&(t.hasClass("left")&&t.find(".back .icon").length>0&&t.find(".back .icon").transform("translate3d("+-r+"px,0,0)"),"left"===n&&t.hasClass("center")&&s(e).find(".left .back .icon ~ span").length>0&&(r+=s(e).find(".left .back span")[0].offsetLeft)),t.transform("translate3d("+r+"px,0,0)")})},animateNavbars:function(t,e,n){var r="navbar-on-right navbar-on-center navbar-on-left";"to-left"===n&&(e.removeClass(r).addClass("navbar-from-right-to-center"),e.find(".sliding").each(function(){var t=s(this);t.transform("translate3d(0px,0,0)"),a.params.animateNavBackIcon&&t.hasClass("left")&&t.find(".back .icon").length>0&&t.find(".back .icon").transform("translate3d(0px,0,0)")}),t.removeClass(r).addClass("navbar-from-center-to-left"),t.find(".sliding").each(function(){var t=s(this);a.params.animateNavBackIcon&&(t.hasClass("center")&&e.find(".sliding.left .back .icon").length>0&&(this.f7NavbarLeftOffset+=e.find(".sliding.left .back span")[0].offsetLeft),t.hasClass("left")&&t.find(".back .icon").length>0&&t.find(".back .icon").transform("translate3d("+-this.f7NavbarLeftOffset+"px,0,0)")),t.transform("translate3d("+this.f7NavbarLeftOffset+"px,0,0)")})),"to-right"===n&&(t.removeClass(r).addClass("navbar-from-left-to-center"),t.find(".sliding").each(function(){var t=s(this);t.transform("translate3d(0px,0,0)"),a.params.animateNavBackIcon&&t.hasClass("left")&&t.find(".back .icon").length>0&&t.find(".back .icon").transform("translate3d(0px,0,0)")}),e.removeClass(r).addClass("navbar-from-center-to-right"),e.find(".sliding").each(function(){var t=s(this);a.params.animateNavBackIcon&&t.hasClass("left")&&t.find(".back .icon").length>0&&t.find(".back .icon").transform("translate3d("+-this.f7NavbarRightOffset+"px,0,0)"),t.transform("translate3d("+this.f7NavbarRightOffset+"px,0,0)")}))},preprocess:function(t,e,n){a.pluginHook("routerPreprocess",t,e,n),t=a.pluginProcess("preprocess",t),a.params.preprocess?(t=a.params.preprocess(t,e,n),"undefined"!=typeof t&&n(t)):n(t)},template7Render:function(t,e){var n,r,i=e.url,o=e.content,u=e.content,c=e.context,f=e.contextName,d=e.template;if(e.pageName,"string"==typeof o?i?a.template7Cache[i]?r=l.cache[i]:(r=l.compile(o),l.cache[i]=r):r=l.compile(o):d&&(r=d),c)n=c;else{if(f)if(f.indexOf(".")>=0){for(var h=f.split("."),p=l.data[h[0]],g=1;g<h.length;g++)h[g]&&(p=p[h[g]]);n=p}else n=l.data[f];if(!n&&i&&(n=l.data["url:"+i]),!n&&"string"==typeof o&&!d){var m=o.match(/(data-page=["'][^"^']*["'])/);if(m){var v=m[0].split("data-page=")[1].replace(/['"]/g,"");v&&(n=l.data["page:"+v])}}if(!n&&d&&l.templates)for(var y in l.templates)l.templates[y]===d&&(n=l.data[y]);n||(n={})}if(r&&n){if("function"==typeof n&&(n=n()),i){var _=s.parseUrlQuery(i);n.url_query={};for(var b in _)n.url_query[b]=_[b]}u=r(n)}return{content:u,context:n}}},a.router._load=function(t,e){function n(){t.allowPageChange=!0,r.removeClass("page-from-right-to-center page-on-right").addClass("page-on-center"),i.removeClass("page-from-center-to-left page-on-center").addClass("page-on-left"),d&&(c.removeClass("navbar-from-right-to-center navbar-on-left navbar-on-right").addClass("navbar-on-center"),u.removeClass("navbar-from-center-to-left navbar-on-center").addClass("navbar-on-left")),a.pageAnimCallbacks("after",t,{pageContainer:r[0],url:p,position:"right",oldPage:i,newPage:r,query:e.query,fromPage:i&&i.length&&i[0].f7PageData}),a.params.pushState&&a.pushStateClearQueue(),t.params.swipeBackPage||t.params.preloadPreviousPage||(t.params.domCache?(i.addClass("cached"),u.addClass("cached")):(0!==p.indexOf("#")||0!==r.attr("data-page").indexOf("smart-select-"))&&(a.pageRemoveCallback(t,i[0],"left"),i.remove(),d&&u.remove())),t.params.uniqueHistory&&M&&t.refreshPreviousPage()}e=e||{};var r,i,o,l,u,c,f,d,h,p=e.url,g=e.content,m={content:e.content},v=e.template,y=e.pageName,_=s(t.container),b=s(t.pagesContainer),x=e.animatePages,w="undefined"==typeof p&&g||v,C=e.pushState;if("undefined"==typeof x&&(x=t.params.animatePages),a.pluginHook("routerLoad",t,e),(a.params.template7Pages&&"string"==typeof g||v)&&(m=a.router.template7Render(t,e),m.content&&!g&&(g=m.content)),a.router.temporaryDom.innerHTML="",!y)if(p||"string"==typeof g)a.router.temporaryDom.innerHTML=m.content;else if("length"in g&&g.length>1)for(var k=0;k<g.length;k++)s(a.router.temporaryDom).append(g[k]);else s(a.router.temporaryDom).append(g);if(h=e.reload&&(e.reloadPrevious?"left":"center"),r=y?b.find('.page[data-page="'+y+'"]'):a.router.findElement(".page",a.router.temporaryDom,t),!r||0===r.length||y&&t.activePage&&t.activePage.name===y)return void(t.allowPageChange=!0);if(r.addClass(e.reload?"page-on-"+h:"page-on-right"),o=b.children(".page:not(.cached)"),e.reload&&e.reloadPrevious&&1===o.length)return void(t.allowPageChange=!0);if(e.reload)i=o.eq(o.length-1);else{
if(o.length>1){for(l=0;l<o.length-2;l++)t.params.domCache?s(o[l]).addClass("cached"):(a.pageRemoveCallback(t,o[l],"left"),s(o[l]).remove());t.params.domCache?s(o[l]).addClass("cached"):(a.pageRemoveCallback(t,o[l],"left"),s(o[l]).remove())}i=b.children(".page:not(.cached)")}if(t.params.domCache&&r.removeClass("cached"),t.params.dynamicNavbar)if(d=!0,c=y?_.find('.navbar-inner[data-page="'+y+'"]'):a.router.findElement(".navbar-inner",a.router.temporaryDom,t),c&&0!==c.length||(d=!1),f=_.find(".navbar"),e.reload)u=f.find(".navbar-inner:not(.cached):last-child");else if(u=f.find(".navbar-inner:not(.cached)"),u.length>0){for(l=0;l<u.length-1;l++)t.params.domCache?s(u[l]).addClass("cached"):s(u[l]).remove();c||1!==u.length||(t.params.domCache?s(u[0]).addClass("cached"):s(u[0]).remove()),u=f.find(".navbar-inner:not(.cached)")}if(d&&(c.addClass(e.reload?"navbar-on-"+h:"navbar-on-right"),t.params.domCache&&c.removeClass("cached"),r[0].f7RelatedNavbar=c[0],c[0].f7RelatedPage=r[0]),!p){var S=y||r.attr("data-page");p=w?"#"+a.params.dynamicPageUrl.replace(/{{name}}/g,S).replace(/{{index}}/g,t.history.length-(e.reload?1:0)):"#"+S,t.params.domCache||(t.contentCache[p]=g),t.params.domCache&&y&&(t.pagesCache[p]=y)}if(a.params.pushState&&!e.reloadPrevious&&t.main){"undefined"==typeof C&&(C=!0);var T=a.params.pushStateRoot||"",A=e.reload?"replaceState":"pushState";C&&(w||y?w&&g?history[A]({content:g,url:p,viewIndex:a.views.indexOf(t)},"",T+a.params.pushStateSeparator+p):y&&history[A]({pageName:y,url:p,viewIndex:a.views.indexOf(t)},"",T+a.params.pushStateSeparator+p):history[A]({url:p,viewIndex:a.views.indexOf(t)},"",T+a.params.pushStateSeparator+p))}if(t.url=p,e.reload){var E=t.history[t.history.length-(e.reloadPrevious?2:1)];E&&0===E.indexOf("#")&&E in t.contentCache&&E!==p&&(t.contentCache[E]=null,delete t.contentCache[E]),t.history[t.history.length-(e.reloadPrevious?2:1)]=p}else t.history.push(p);var M=!1;if(t.params.uniqueHistory){var D=t.history,P=p;if(t.params.uniqueHistoryIgnoreGetParameters)for(D=[],P=p.split("?")[0],l=0;l<t.history.length;l++)D.push(t.history[l].split("?")[0]);D.indexOf(P)!==D.lastIndexOf(P)&&(t.history=t.history.slice(0,D.indexOf(P)),t.history.push(p),M=!0)}return e.reloadPrevious?(i=i.prev(".page"),r.insertBefore(i),d&&(u=u.prev(".navbar-inner"),c.insertAfter(u))):(b.append(r[0]),d&&f.append(c[0])),e.reload&&(t.params.domCache&&t.initialPages.indexOf(i[0])>=0?(i.addClass("cached"),d&&u.addClass("cached")):(a.pageRemoveCallback(t,i[0],h),i.remove(),d&&u.remove())),a.pageInitCallback(t,{pageContainer:r[0],url:p,position:e.reload?h:"right",navbarInnerContainer:d?c[0]:void 0,context:m.context,query:e.query,fromPage:i&&i.length&&i[0].f7PageData}),d&&a.navbarInitCallback(t,r[0],f[0],c[0],p,e.reload?h:"right"),e.reload?(t.allowPageChange=!0,void(M&&t.refreshPreviousPage())):(d&&x&&a.router.prepareNavbar(c,u,"right"),r[0].clientLeft,a.pageAnimCallbacks("before",t,{pageContainer:r[0],url:p,position:"right",oldPage:i,newPage:r,query:e.query,fromPage:i&&i.length&&i[0].f7PageData}),x?(a.router.animatePages(i,r,"to-left",t),d&&setTimeout(function(){a.router.animateNavbars(u,c,"to-left",t)},0),r.animationEnd(function(){n()})):(c.find(".sliding, .sliding .back .icon").transform(""),n()),void 0)},a.router.load=function(t,e){function n(n){a.router.preprocess(n,r,function(n){e.content=n,a.router._load(t,e)})}e=e||{};var r=e.url,i=e.content,o=e.pageName;o&&o.indexOf("?")>0&&(e.query=s.parseUrlQuery(o),e.pageName=o=o.split("?")[0]);var l=e.template;return t.params.reloadPages===!0&&(e.reload=!0),!(!t.allowPageChange||r&&t.url===r&&!e.reload&&!t.params.allowDuplicateUrls)&&(t.allowPageChange=!1,a.xhr&&t.xhr&&t.xhr===a.xhr&&(a.xhr.abort(),a.xhr=!1),i||o?void n(i):l?void a.router._load(t,e):e.url&&"#"!==e.url?void a.get(e.url,t,e.ignoreCache,function(e,r){return r?void(t.allowPageChange=!0):void n(e)}):void(t.allowPageChange=!0))},a.router._back=function(t,e){function n(){a.pageBackCallbacks("after",t,{pageContainer:l[0],url:g,position:"center",oldPage:l,newPage:u}),a.pageAnimCallbacks("after",t,{pageContainer:u[0],url:g,position:"left",oldPage:l,newPage:u,query:e.query,fromPage:l&&l.length&&l[0].f7PageData}),a.router.afterBack(t,l[0],u[0])}function r(){a.pageBackCallbacks("before",t,{pageContainer:l[0],url:g,position:"center",oldPage:l,newPage:u}),a.pageAnimCallbacks("before",t,{pageContainer:u[0],url:g,position:"left",oldPage:l,newPage:u,query:e.query,fromPage:l&&l.length&&l[0].f7PageData}),_?(a.router.animatePages(u,l,"to-right",t),p&&setTimeout(function(){a.router.animateNavbars(f,c,"to-right",t)},0),u.animationEnd(function(){n()})):(f.find(".sliding, .sliding .back .icon").transform(""),n())}function i(){if(a.router.temporaryDom.innerHTML="",g||"string"==typeof m)a.router.temporaryDom.innerHTML=v.content;else if("length"in m&&m.length>1)for(var e=0;e<m.length;e++)s(a.router.temporaryDom).append(m[e]);else s(a.router.temporaryDom).append(m);u=a.router.findElement(".page",a.router.temporaryDom,t),t.params.dynamicNavbar&&(f=a.router.findElement(".navbar-inner",a.router.temporaryDom,t))}function o(){if(!u||0===u.length)return void(t.allowPageChange=!0);if(t.params.dynamicNavbar&&"undefined"==typeof p&&(p=!(!f||0===f.length)),u.addClass("page-on-left").removeClass("cached"),p&&(d=k.find(".navbar"),h=k.find(".navbar-inner:not(.cached)"),f.addClass("navbar-on-left").removeClass("cached")),w){var n,i;n=s(T[T.length-2]),p&&(i=s(n[0]&&n[0].f7RelatedNavbar||h[h.length-2])),t.params.domCache&&t.initialPages.indexOf(n[0])>=0?(n.length&&n[0]!==u[0]&&n.addClass("cached"),p&&i.length&&i[0]!==f[0]&&i.addClass("cached")):(n.length&&n.remove(),p&&i.length&&i.remove()),T=S.children(".page:not(.cached)"),p&&(h=k.find(".navbar-inner:not(.cached)")),t.history.indexOf(g)>=0?t.history=t.history.slice(0,t.history.indexOf(g)+2):t.history[[t.history.length-2]]?t.history[t.history.length-2]=g:t.history.unshift(g)}return l=s(T[T.length-1]),t.params.domCache&&l[0]===u[0]&&(l=S.children(".page.page-on-center"),0===l.length&&t.activePage&&(l=s(t.activePage.container))),p&&!c&&(c=s(h[h.length-1]),t.params.domCache&&(c[0]===f[0]&&(c=d.children(".navbar-inner.navbar-on-center:not(.cached)")),0===c.length&&(c=d.children('.navbar-inner[data-page="'+l.attr("data-page")+'"]'))),(0===c.length||f[0]===c[0])&&(p=!1)),p&&(A&&f.insertBefore(c),f[0].f7RelatedPage=u[0],u[0].f7RelatedNavbar=f[0]),A&&u.insertBefore(l),a.pageInitCallback(t,{pageContainer:u[0],url:g,position:"left",navbarInnerContainer:p?f[0]:void 0,context:v.context,query:e.query,fromPage:l&&l.length&&l[0].f7PageData,preloadOnly:b}),p&&a.navbarInitCallback(t,u[0],d[0],f[0],g,"right"),p&&f.hasClass("navbar-on-left")&&_&&a.router.prepareNavbar(f,c,"left"),b?void(t.allowPageChange=!0):(t.url=g,u[0].clientLeft,void r())}e=e||{};var l,u,c,f,d,h,p,g=e.url,m=e.content,v={content:e.content},y=e.template,_=e.animatePages,b=e.preloadOnly,x=e.pushState,w=(e.ignoreCache,e.force),C=e.pageName,k=s(t.container),S=s(t.pagesContainer),T=S.children(".page:not(.cached)"),A=!0;return"undefined"==typeof _&&(_=t.params.animatePages),a.pluginHook("routerBack",t,e),(a.params.template7Pages&&"string"==typeof m||y)&&(v=a.router.template7Render(t,e),v.content&&!m&&(m=v.content)),a.params.pushState&&("undefined"==typeof x&&(x=!0),!b&&history.state&&x&&history.back()),T.length>1&&!w?b?void(t.allowPageChange=!0):(t.url=t.history[t.history.length-2],g=t.url,u=s(T[T.length-2]),l=s(T[T.length-1]),t.params.dynamicNavbar&&(p=!0,h=k.find(".navbar-inner:not(.cached)"),f=s(h[0]),c=s(h[1]),(0===f.length||0===c.length||c[0]===f[0])&&(p=!1)),A=!1,void o()):w?g&&g===t.url||C&&t.activePage&&t.activePage.name===C?void(t.allowPageChange=!0):m?(i(),void o()):C&&t.params.domCache?(C&&(g="#"+C),u=s(k).find('.page[data-page="'+C+'"]'),u[0].f7PageData&&u[0].f7PageData.url&&(g=u[0].f7PageData.url),t.params.dynamicNavbar&&(f=s(k).find('.navbar-inner[data-page="'+C+'"]'),0===f.length&&(f=s(u[0].f7RelatedNavbar))),void o()):void(t.allowPageChange=!0):(b||(t.url=t.history[t.history.length-2],g=t.url),m?(i(),void o()):C?(u=s(k).find('.page[data-page="'+C+'"]'),t.params.dynamicNavbar&&(f=s(k).find('.navbar-inner[data-page="'+C+'"]')),void o()):void(t.allowPageChange=!0))},a.router.back=function(t,e){function n(n){a.router.preprocess(n,r,function(n){e.content=n,a.router._back(t,e)})}e=e||{};var r=e.url,i=e.content,o=e.pageName;o&&o.indexOf("?")>0&&(e.query=s.parseUrlQuery(o),e.pageName=o=o.split("?")[0]);var l=e.force;if(!t.allowPageChange)return!1;t.allowPageChange=!1,a.xhr&&t.xhr&&t.xhr===a.xhr&&(a.xhr.abort(),a.xhr=!1);var u=s(t.pagesContainer).find(".page:not(.cached)");if(u.length>1&&!l)return void a.router._back(t,e);if(l){if(!r&&i)return void n(i);if(!r&&o)return o&&(r="#"+o),void n();if(r)return void a.get(e.url,t,e.ignoreCache,function(e,r){return r?void(t.allowPageChange=!0):void n(e)})}else{if(r=e.url=t.history[t.history.length-2],!r)return void(t.allowPageChange=!0);if(0===r.indexOf("#")&&t.contentCache[r])return void n(t.contentCache[r]);if(0===r.indexOf("#")&&t.params.domCache)return o||(e.pageName=r.split("#")[1]),void n();if(0!==r.indexOf("#"))return void a.get(e.url,t,e.ignoreCache,function(e,r){return r?void(t.allowPageChange=!0):void n(e)})}t.allowPageChange=!0},a.router.afterBack=function(t,e,n){e=s(e),n=s(n),t.params.domCache&&t.initialPages.indexOf(e[0])>=0?e.removeClass("page-from-center-to-right").addClass("cached"):(e.remove(),a.pageRemoveCallback(t,e[0],"right")),n.removeClass("page-from-left-to-center page-on-left").addClass("page-on-center"),t.allowPageChange=!0;var r,i=t.history.pop();if(t.params.dynamicNavbar){var o=s(t.container).find(".navbar-inner:not(.cached)"),l=s(e[0].f7RelatedNavbar||o[1]);t.params.domCache&&t.initialNavbars.indexOf(l[0])>=0?l.removeClass("navbar-from-center-to-right").addClass("cached"):l.remove(),r=s(o[0]).removeClass("navbar-on-left navbar-from-left-to-center").addClass("navbar-on-center")}if(t.params.domCache&&s(t.container).find(".page.cached").each(function(){var e=s(this),n=(e.index(),e[0].f7PageData&&e[0].f7PageData.url);n&&t.history.indexOf(n)<0&&t.initialPages.indexOf(this)<0&&(e[0].f7RelatedNavbar&&s(e[0].f7RelatedNavbar).remove(),e.remove())}),!t.params.domCache&&i&&i.indexOf("#")>-1&&i in t.contentCache&&(t.contentCache[i]=null,delete t.contentCache[i]),a.params.pushState&&a.pushStateClearQueue(),t.params.preloadPreviousPage)if(t.params.domCache&&t.history.length>1){var u,c,f=t.history[t.history.length-2];f&&t.pagesCache[f]?(u=s(t.container).find('.page[data-page="'+t.pagesCache[f]+'"]'),u.insertBefore(n),r&&(c=s(t.container).find('.navbar-inner[data-page="'+t.pagesCache[f]+'"]'),c.insertBefore(r),c&&0!==c.length||(c=r.prev(".navbar-inner.cached")))):(u=n.prev(".page.cached"),r&&(c=r.prev(".navbar-inner.cached"))),u&&u.length>0&&u.removeClass("cached page-on-right page-on-center").addClass("page-on-left"),c&&c.length>0&&c.removeClass("cached navbar-on-right navbar-on-center").addClass("navbar-on-left")}else a.router.back(t,{preloadOnly:!0})};var d=document.createElement("div");a.modalStack=[],a.modalStackClearQueue=function(){a.modalStack.length&&a.modalStack.shift()()},a.modal=function(t){t=t||{};var e="";if(a.params.modalTemplate)a._compiledTemplates.modal||(a._compiledTemplates.modal=l.compile(a.params.modalTemplate)),e=a._compiledTemplates.modal(t);else{var n="";if(t.buttons&&t.buttons.length>0)for(var r=0;r<t.buttons.length;r++)n+='<span class="modal-button'+(t.buttons[r].bold?" modal-button-bold":"")+'">'+t.buttons[r].text+"</span>";var i=t.title?'<div class="modal-title">'+t.title+"</div>":"",o=t.text?'<div class="modal-text">'+t.text+"</div>":"",u=t.afterText?t.afterText:"",c=t.buttons&&0!==t.buttons.length?"":"modal-no-buttons",f=t.verticalButtons?"modal-buttons-vertical":"";e='<div class="modal '+c+'"><div class="modal-inner">'+(i+o+u)+'</div><div class="modal-buttons '+f+'">'+n+"</div></div>"}d.innerHTML=e;var h=s(d).children();return s("body").append(h[0]),h.find(".modal-button").each(function(e,n){s(n).on("click",function(n){t.buttons[e].close!==!1&&a.closeModal(h),t.buttons[e].onClick&&t.buttons[e].onClick(h,n),t.onClick&&t.onClick(h,e)})}),a.openModal(h),h[0]},a.alert=function(t,e,n){return"function"==typeof e&&(n=arguments[1],e=void 0),a.modal({text:t||"",title:"undefined"==typeof e?a.params.modalTitle:e,buttons:[{text:a.params.modalButtonOk,bold:!0,onClick:n}]})},a.confirm=function(t,e,n,r){return"function"==typeof e&&(r=arguments[2],n=arguments[1],e=void 0),a.modal({text:t||"",title:"undefined"==typeof e?a.params.modalTitle:e,buttons:[{text:a.params.modalButtonCancel,onClick:r},{text:a.params.modalButtonOk,bold:!0,onClick:n}]})},a.prompt=function(t,e,n,r){return"function"==typeof e&&(r=arguments[2],n=arguments[1],e=void 0),a.modal({text:t||"",title:"undefined"==typeof e?a.params.modalTitle:e,afterText:'<input type="text" class="modal-text-input">',buttons:[{text:a.params.modalButtonCancel},{text:a.params.modalButtonOk,bold:!0}],onClick:function(t,e){0===e&&r&&r(s(t).find(".modal-text-input").val()),1===e&&n&&n(s(t).find(".modal-text-input").val())}})},a.modalLogin=function(t,e,n,r){return"function"==typeof e&&(r=arguments[2],n=arguments[1],e=void 0),a.modal({text:t||"",title:"undefined"==typeof e?a.params.modalTitle:e,afterText:'<input type="text" name="modal-username" placeholder="'+a.params.modalUsernamePlaceholder+'" class="modal-text-input modal-text-input-double"><input type="password" name="modal-password" placeholder="'+a.params.modalPasswordPlaceholder+'" class="modal-text-input modal-text-input-double">',buttons:[{text:a.params.modalButtonCancel},{text:a.params.modalButtonOk,bold:!0}],onClick:function(t,e){var i=s(t).find('.modal-text-input[name="modal-username"]').val(),a=s(t).find('.modal-text-input[name="modal-password"]').val();0===e&&r&&r(i,a),1===e&&n&&n(i,a)}})},a.modalPassword=function(t,e,n,r){return"function"==typeof e&&(r=arguments[2],n=arguments[1],e=void 0),a.modal({text:t||"",title:"undefined"==typeof e?a.params.modalTitle:e,afterText:'<input type="password" name="modal-password" placeholder="'+a.params.modalPasswordPlaceholder+'" class="modal-text-input">',buttons:[{text:a.params.modalButtonCancel},{text:a.params.modalButtonOk,bold:!0}],onClick:function(t,e){var i=s(t).find('.modal-text-input[name="modal-password"]').val();0===e&&r&&r(i),1===e&&n&&n(i)}})},a.showPreloader=function(t){return a.modal({title:t||a.params.modalPreloaderTitle,text:'<div class="preloader"></div>'})},a.hidePreloader=function(){a.closeModal(".modal.modal-in")},a.showIndicator=function(){s("body").append('<div class="preloader-indicator-overlay"></div><div class="preloader-indicator-modal"><span class="preloader preloader-white"></span></div>')},a.hideIndicator=function(){s(".preloader-indicator-overlay, .preloader-indicator-modal").remove()},a.actions=function(t,e){var n,r,i,o=!1;1===arguments.length?e=t:a.device.ios?a.device.ipad&&(o=!0):s(window).width()>=768&&(o=!0),e=e||[],e.length>0&&!s.isArray(e[0])&&(e=[e]);var u;if(o){var c='<div class="popover actions-popover"><div class="popover-inner">{{#each this}}<div class="list-block"><ul>{{#each this}}{{#if label}}<li class="actions-popover-label {{#if color}}color-{{color}}{{/if}} {{#if bold}}actions-popover-bold{{/if}}">{{text}}</li>{{else}}<li><a href="#" class="item-link list-button {{#if color}}color-{{color}}{{/if}} {{#if bg}}bg-{{bg}}{{/if}} {{#if bold}}actions-popover-bold{{/if}}">{{text}}</a></li>{{/if}}{{/each}}</ul></div>{{/each}}</div></div>';a._compiledTemplates.actionsPopover||(a._compiledTemplates.actionsPopover=l.compile(c));var f=a._compiledTemplates.actionsPopover(e);n=s(a.popover(f,t,!0)),r=".list-block ul",i=".list-button"}else{if(a.params.modalActionsTemplate)a._compiledTemplates.actions||(a._compiledTemplates.actions=l.compile(a.params.modalActionsTemplate)),u=a._compiledTemplates.actions(e);else{for(var h="",p=0;p<e.length;p++)for(var g=0;g<e[p].length;g++){0===g&&(h+='<div class="actions-modal-group">');var m=e[p][g],v=m.label?"actions-modal-label":"actions-modal-button";m.bold&&(v+=" actions-modal-button-bold"),m.color&&(v+=" color-"+m.color),m.bg&&(v+=" bg-"+m.bg),h+='<span class="'+v+'">'+m.text+"</span>",g===e[p].length-1&&(h+="</div>")}u='<div class="actions-modal">'+h+"</div>"}d.innerHTML=u,n=s(d).children(),s("body").append(n[0]),r=".actions-modal-group",i=".actions-modal-button"}var y=n.find(r);return y.each(function(t,r){var l=t;s(r).children().each(function(t,r){var u,c=t,f=e[l][c];!o&&s(r).is(i)&&(u=s(r)),o&&s(r).find(i).length>0&&(u=s(r).find(i)),u&&u.on("click",function(t){f.close!==!1&&a.closeModal(n),f.onClick&&f.onClick(n,t)})})}),o||a.openModal(n),n[0]},a.popover=function(t,e,n){function r(){t.css({left:"",top:""});var n,r,i=t.width(),a=t.height(),o=t.find(".popover-angle"),l=o.width()/2;o.removeClass("on-left on-right on-top on-bottom").css({left:"",top:""});var u=e.outerWidth(),c=e.outerHeight(),f=e.offset(),d=e.parents(".page");d.length>0&&(f.top=f.top-d[0].scrollTop);var h=s(window).height(),p=s(window).width(),g=0,m=0,v=0,y="top";a+l<f.top?g=f.top-a-l:a+l<h-f.top-c?(y="bottom",g=f.top+c+l):(y="middle",g=c/2+f.top-a/2,v=g,0>g?g=5:g+a>h&&(g=h-a-5),v-=g),"top"===y||"bottom"===y?(m=u/2+f.left-i/2,v=m,5>m&&(m=5),m+i>p&&(m=p-i-5),"top"===y&&o.addClass("on-bottom"),"bottom"===y&&o.addClass("on-top"),v-=m,n=i/2-l+v,n=Math.max(Math.min(n,i-2*l-6),6),o.css({left:n+"px"})):"middle"===y&&(m=f.left-i-l,o.addClass("on-right"),5>m&&(m=f.left+u+l,o.removeClass("on-right").addClass("on-left")),m+i>p&&(m=p-i-5,o.removeClass("on-right").addClass("on-left")),r=a/2-l+v,r=Math.max(Math.min(r,a-2*l-6),6),o.css({top:r+"px"})),t.css({top:g+"px",left:m+"px"})}if("undefined"==typeof n&&(n=!0),"string"==typeof t&&t.indexOf("<")>=0){var i=document.createElement("div");if(i.innerHTML=t.trim(),!(i.childNodes.length>0))return!1;t=i.childNodes[0],n&&t.classList.add("remove-on-close"),s("body").append(t)}return t=s(t),e=s(e),0!==t.length&&0!==e.length&&(0===t.find(".popover-angle").length&&t.append('<div class="popover-angle"></div>'),t.show(),r(),s(window).on("resize",r),t.on("close",function(){s(window).off("resize",r)}),t.find("."+a.params.viewClass).length>0&&a.sizeNavbars(t.find("."+a.params.viewClass)[0]),a.openModal(t),t[0])},a.popup=function(t,e){if("undefined"==typeof e&&(e=!0),"string"==typeof t&&t.indexOf("<")>=0){var n=document.createElement("div");if(n.innerHTML=t.trim(),!(n.childNodes.length>0))return!1;t=n.childNodes[0],e&&t.classList.add("remove-on-close"),s("body").append(t)}return t=s(t),0!==t.length&&(t.show(),t.find("."+a.params.viewClass).length>0&&a.sizeNavbars(t.find("."+a.params.viewClass)[0]),a.openModal(t),t[0])},a.pickerModal=function(t,e){if("undefined"==typeof e&&(e=!0),"string"==typeof t&&t.indexOf("<")>=0){if(t=s(t),!(t.length>0))return!1;e&&t.addClass("remove-on-close"),s("body").append(t[0])}return t=s(t),0!==t.length&&(t.show(),a.openModal(t),t[0])},a.loginScreen=function(t){return t||(t=".login-screen"),t=s(t),0!==t.length&&(t.show(),t.find("."+a.params.viewClass).length>0&&a.sizeNavbars(t.find("."+a.params.viewClass)[0]),a.openModal(t),t[0])},a.openModal=function(t){t=s(t);var e=t.hasClass("modal");if(s(".modal.modal-in:not(.modal-out)").length&&a.params.modalStack&&e)return void a.modalStack.push(function(){a.openModal(t)});var n=(t.hasClass("popover"),t.hasClass("popup")),r=t.hasClass("login-screen"),i=t.hasClass("picker-modal");e&&(t.show(),t.css({marginTop:-Math.round(t.outerHeight()/2)+"px"}));var o;return r||i||(0!==s(".modal-overlay").length||n||s("body").append('<div class="modal-overlay"></div>'),0===s(".popup-overlay").length&&n&&s("body").append('<div class="popup-overlay"></div>'),o=s(n?".popup-overlay":".modal-overlay")),t[0].clientLeft,t.trigger("open"),i&&s("body").addClass("with-picker-modal"),r||i||o.addClass("modal-overlay-visible"),t.removeClass("modal-out").addClass("modal-in").transitionEnd(function(){t.trigger(t.hasClass("modal-out")?"closed":"opened")}),!0},a.closeModal=function(t){if(t=s(t||".modal-in"),"undefined"==typeof t||0!==t.length){var e=t.hasClass("modal"),n=t.hasClass("popover"),r=t.hasClass("popup"),i=t.hasClass("login-screen"),o=t.hasClass("picker-modal"),l=t.hasClass("remove-on-close"),u=s(r?".popup-overlay":".modal-overlay");return r?t.length===s(".popup.modal-in").length&&u.removeClass("modal-overlay-visible"):o||u.removeClass("modal-overlay-visible"),t.trigger("close"),o&&(s("body").removeClass("with-picker-modal"),s("body").addClass("picker-modal-closing")),n?(t.removeClass("modal-in modal-out").trigger("closed").hide(),l&&t.remove()):(t.removeClass("modal-in").addClass("modal-out").transitionEnd(function(){t.trigger(t.hasClass("modal-out")?"closed":"opened"),o&&s("body").removeClass("picker-modal-closing"),r||i||o?(t.removeClass("modal-out").hide(),l&&t.length>0&&t.remove()):t.remove()}),e&&a.params.modalStack&&a.modalStackClearQueue()),!0}},a.allowPanelOpen=!0,a.openPanel=function(t){function e(){i.transitionEnd(function(t){s(t.target).is(i)?(n.trigger(n.hasClass("active")?"opened":"closed"),a.allowPanelOpen=!0):e()})}if(!a.allowPanelOpen)return!1;var n=s(".panel-"+t);if(0===n.length||n.hasClass("active"))return!1;a.closePanel(),a.allowPanelOpen=!1;var r=n.hasClass("panel-reveal")?"reveal":"cover";n.css({display:"block"}).addClass("active"),n.trigger("open"),n.find("."+a.params.viewClass).length>0&&a.sizeNavbars&&a.sizeNavbars(n.find("."+a.params.viewClass)[0]);var i=(n[0].clientLeft,"reveal"===r?s("."+a.params.viewsClass):n);return e(),s("body").addClass("with-panel-"+t+"-"+r),!0},a.closePanel=function(){var t=s(".panel.active");if(0===t.length)return!1;var e=t.hasClass("panel-reveal")?"reveal":"cover",n=t.hasClass("panel-left")?"left":"right";t.removeClass("active");var r="reveal"===e?s("."+a.params.viewsClass):t;t.trigger("close"),a.allowPanelOpen=!1,r.transitionEnd(function(){t.hasClass("active")||(t.css({display:""}),t.trigger("closed"),s("body").removeClass("panel-closing"),a.allowPanelOpen=!0)}),s("body").addClass("panel-closing").removeClass("with-panel-"+n+"-"+e)},a.initSwipePanels=function(){function t(t){if(a.allowPanelOpen&&(a.params.swipePanel||a.params.swipePanelOnlyClose)&&!o&&!(s(".modal-in, .photo-browser-in").length>0||!a.params.swipePanelCloseOpposite&&!a.params.swipePanelOnlyClose&&s(".panel.active").length>0&&!r.hasClass("active"))){if(y.x="touchstart"===t.type?t.targetTouches[0].pageX:t.pageX,y.y="touchstart"===t.type?t.targetTouches[0].pageY:t.pageY,(a.params.swipePanelCloseOpposite||a.params.swipePanelOnlyClose)&&(i=s(".panel.active").length>0?s(".panel.active").hasClass("panel-left")?"left":"right":a.params.swipePanel),r=s(".panel.panel-"+i),h=r.hasClass("active"),a.params.swipePanelActiveArea&&!h){if("left"===i&&y.x>a.params.swipePanelActiveArea)return;if("right"===i&&y.x<window.innerWidth-a.params.swipePanelActiveArea)return}l=!1,o=!0,u=void 0,c=(new Date).getTime(),m=void 0}}function e(t){if(o&&!t.f7PreventPanelSwipe){var e="touchmove"===t.type?t.targetTouches[0].pageX:t.pageX,n="touchmove"===t.type?t.targetTouches[0].pageY:t.pageY;if("undefined"==typeof u&&(u=!!(u||Math.abs(n-y.y)>Math.abs(e-y.x))),u)return void(o=!1);if(!m&&(m=e>y.x?"to-right":"to-left","left"===i&&"to-left"===m&&!r.hasClass("active")||"right"===i&&"to-right"===m&&!r.hasClass("active")))return void(o=!1);if(a.params.swipePanelNoFollow){var s=(new Date).getTime()-c;return 300>s&&("to-left"===m&&("right"===i&&a.openPanel(i),"left"===i&&r.hasClass("active")&&a.closePanel()),"to-right"===m&&("left"===i&&a.openPanel(i),"right"===i&&r.hasClass("active")&&a.closePanel())),o=!1,void(l=!1)}l||(g=r.hasClass("panel-cover")?"cover":"reveal",h||(r.show(),v.show()),p=r[0].offsetWidth,r.transition(0),r.find("."+a.params.viewClass).length>0&&a.sizeNavbars&&a.sizeNavbars(r.find("."+a.params.viewClass)[0])),l=!0,t.preventDefault();var b=h?0:-a.params.swipePanelThreshold;"right"===i&&(b=-b),f=e-y.x+b,"right"===i?(d=f-(h?p:0),d>0&&(d=0),-p>d&&(d=-p)):(d=f+(h?p:0),0>d&&(d=0),d>p&&(d=p)),"reveal"===g?(_.transform("translate3d("+d+"px,0,0)").transition(0),v.transform("translate3d("+d+"px,0,0)"),a.pluginHook("swipePanelSetTransform",_[0],r[0],Math.abs(d/p))):(r.transform("translate3d("+d+"px,0,0)").transition(0),a.pluginHook("swipePanelSetTransform",_[0],r[0],Math.abs(d/p)))}}function n(){if(!o||!l)return o=!1,void(l=!1);o=!1,l=!1;var t,e=(new Date).getTime()-c,n=0===d||Math.abs(d)===p;if(t=h?d===-p?"reset":300>e&&Math.abs(d)>=0||e>=300&&Math.abs(d)<=p/2?"left"===i&&d===p?"reset":"swap":"reset":0===d?"reset":300>e&&Math.abs(d)>0||e>=300&&Math.abs(d)>=p/2?"swap":"reset","swap"===t&&(a.allowPanelOpen=!0,h?(a.closePanel(),n&&(r.css({display:""}),s("body").removeClass("panel-closing"))):a.openPanel(i),n&&(a.allowPanelOpen=!0)),"reset"===t)if(h)a.allowPanelOpen=!0,a.openPanel(i);else if(a.closePanel(),n)a.allowPanelOpen=!0,r.css({display:""});else{var u="reveal"===g?_:r;s("body").addClass("panel-closing"),u.transitionEnd(function(){a.allowPanelOpen=!0,r.css({display:""}),s("body").removeClass("panel-closing")})}"reveal"===g&&(_.transition(""),_.transform("")),r.transition("").transform(""),v.css({display:""}).transform("")}var r,i;if(a.params.swipePanel){if(r=s(".panel.panel-"+a.params.swipePanel),i=a.params.swipePanel,0===r.length)return}else{if(!a.params.swipePanelOnlyClose)return;if(0===s(".panel").length)return}var o,l,u,c,f,d,h,p,g,m,v=s(".panel-overlay"),y={},_=s("."+a.params.viewsClass);s(document).on(a.touchEvents.start,t),s(document).on(a.touchEvents.move,e),s(document).on(a.touchEvents.end,n)},a.initImagesLazyLoad=function(t){function e(t){function n(){t.removeClass("lazy").addClass("lazy-loaded"),r?t.css("background-image","url("+i+")"):t.attr("src",i),a.params.imagesLazyLoadSequential&&(d=!1,f.length>0&&e(f.shift()))}t=s(t);var r=t.attr("data-background"),i=r?r:t.attr("data-src");if(i){if(!a.params.imagesLazyLoadSequential)return void n();if(d)return void(f.indexOf(t[0])<0&&f.push(t[0]));d=!0;var o=new Image;o.onload=n,o.onerror=n,o.src=i}}function n(){l=t.find(".lazy"),l.each(function(t,n){n=s(n),r(n[0])&&e(n)})}function r(t){var e=t.getBoundingClientRect(),n=a.params.imagesLazyLoadThreshold||0;return e.top>=0-n&&e.left>=0-n&&e.top<=window.innerHeight+n&&e.left<=window.innerWidth+n}function i(t){var e=t?"off":"on";l[e]("lazy",n),u[e]("lazy",n),u[e]("scroll",n),s(window)[e]("resize",n)}function o(){i(!0)}t=s(t);var l;if(t.hasClass("lazy")?(l=t,t=l.parents(".page")):l=t.find(".lazy"),0!==l.length){var u;if(t.hasClass("page-content")?(u=t,t=t.parents(".page")):u=t.find(".page-content"),0!==u.length){var c="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABAQMAAAAl21bKAAAAA1BMVEXCwsK592mkAAAACklEQVQI12NgAAAAAgAB4iG8MwAAAABJRU5ErkJggg==";"string"==typeof a.params.imagesLazyLoadPlaceholder&&(c=a.params.imagesLazyLoadPlaceholder),a.params.imagesLazyLoadPlaceholder!==!1&&l.attr("src",c);var f=[],d=!1;t[0].f7DestroyImagesLazyLoad=o,i(),t.hasClass("page")&&t.once("pageBeforeRemove",o),n(),t.once("pageAfterAnimation",n)}}},a.destroyImagesLazyLoad=function(t){t=s(t),t.length>0&&t[0].f7DestroyImagesLazyLoad&&t[0].f7DestroyLazyLoad()},a.reinitImagesLazyLoad=function(t){t=s(t),t.length>0&&t.trigger("lazy")},a.initMessages=function(t){var e=s(t),n=e.find(".messages");if(0!==n.length){var r=e.find(".page-content");n.hasClass("messages-auto-layout")&&a.updateMessagesLayout(n),n.hasClass("new-messages-first")||(r[0].scrollTop=r[0].scrollHeight-r[0].offsetHeight)}},a.addMessage=function(t,e,n){if(t=t||{},t.type=t.type||"sent",!t.text||0===t.length)return!1;if(e=s(e||".messages-content"),0===e.length)return!1;var r=e.find(".messages"),i=r.hasClass("new-messages-first");"undefined"==typeof n&&(n=!!i);var o=n?"prepend":"append",l="";t.day&&(l+='<div class="messages-date">'+t.day+(t.time?",":"")+(t.time?" <span>"+t.time+"</span>":"")+"</div>");var u=t.text.indexOf("<img")>=0?"message-pic":"",c=t.avatar?"message-with-avatar":"",f="message message-"+t.type+" "+u+" "+c+" message-appear-from-"+("append"===o?"bottom":"top");l+='<div class="'+f+'">'+(t.name?'<div class="message-name">'+t.name+"</div>":"")+'<div class="message-text">'+t.text+"</div>"+(t.avatar?'<div class="message-avatar" style="background-image:url('+t.avatar+')"></div>':"")+(t.label?'<div class="message-label">'+t.label+"</div>":"")+"</div>",r[o](l),r.hasClass("messages-auto-layout")&&a.updateMessagesLayout(r),("append"===o&&!i||"prepend"===o&&i)&&a.scrollMessagesContainer(e)},a.updateMessagesLayout=function(t){t.find(".message").each(function(){var t=s(this);t.find(".message-text img").length>0&&t.addClass("message-pic"),t.find(".message-avatar").length>0&&t.addClass("message-with-avatar")}),t.find(".message-sent").each(function(){var t=s(this),e=t.next(".message-sent"),n=t.prev(".message-sent");0===e.length?t.addClass("message-last message-with-tail"):t.removeClass("message-last message-with-tail"),0===n.length?t.addClass("message-first"):t.removeClass("message-first"),n.length>0&&n.find(".message-name").length>0&&t.find(".message-name").length>0&&n.find(".message-name").text()!==t.find(".message-name").text()&&(n.addClass("message-last message-with-tail"),t.addClass("message-first"))}),t.find(".message-received").each(function(){var t=s(this),e=t.next(".message-received"),n=t.prev(".message-received");0===e.length?t.addClass("message-last message-with-tail"):t.removeClass("message-last message-with-tail"),0===n.length?t.addClass("message-first"):t.removeClass("message-first"),n.length>0&&n.find(".message-name").length>0&&t.find(".message-name").length>0&&n.find(".message-name").text()!==t.find(".message-name").text()&&(n.addClass("message-last message-with-tail"),t.addClass("message-first"))})},a.scrollMessagesContainer=function(t){if(t=s(t||".messages-content"),0!==t.length){var e=t.find(".messages"),n=e.hasClass("new-messages-first"),r=t[0].scrollTop,i=n?0:t[0].scrollHeight-t[0].offsetHeight;i!==r&&t.scrollTop(i,400)}},a.swipeoutOpenedEl=void 0,a.allowSwipeout=!0,a.initSwipeout=function(t){function e(t){a.allowSwipeout&&(o=!1,i=!0,l=void 0,M.x="touchstart"===t.type?t.targetTouches[0].pageX:t.pageX,M.y="touchstart"===t.type?t.targetTouches[0].pageY:t.pageY,u=(new Date).getTime())}function n(t){if(i){var e="touchmove"===t.type?t.targetTouches[0].pageX:t.pageX,n="touchmove"===t.type?t.targetTouches[0].pageY:t.pageY;if("undefined"==typeof l&&(l=!!(l||Math.abs(n-M.y)>Math.abs(e-M.x))),l)return void(i=!1);if(!o){if(s(".list-block.sortable-opened").length>0)return;f=s(this),d=f.find(".swipeout-content"),h=f.find(".swipeout-actions-right"),p=f.find(".swipeout-actions-left"),g=m=b=x=k=C=null,A=p.hasClass("swipeout-actions-no-fold")||a.params.swipeoutActionsNoFold,E=h.hasClass("swipeout-actions-no-fold")||a.params.swipeoutActionsNoFold,p.length>0&&(g=p.outerWidth(),b=p.children("a"),C=p.find(".swipeout-overswipe")),h.length>0&&(m=h.outerWidth(),x=h.children("a"),k=h.find(".swipeout-overswipe")),y=f.hasClass("swipeout-opened"),y&&(_=f.find(".swipeout-actions-left.swipeout-actions-opened").length>0?"left":"right"),f.removeClass("transitioning"),a.params.swipeoutNoFollow||(f.find(".swipeout-actions-opened").removeClass("swipeout-actions-opened"),f.removeClass("swipeout-opened"))}if(o=!0,t.preventDefault(),c=e-M.x,v=c,y&&("right"===_?v-=m:v+=g),v>0&&0===p.length||0>v&&0===h.length){if(!y)return void(i=o=!1);v=0}w=0>v?"to-left":v>0?"to-right":w?w:"to-left";var r,u,D;if(t.f7PreventPanelSwipe=!0,a.params.swipeoutNoFollow)return y?("right"===_&&c>0&&a.swipeoutClose(f),"left"===_&&0>c&&a.swipeoutClose(f)):(0>c&&h.length>0&&a.swipeoutOpen(f,"right"),c>0&&p.length>0&&a.swipeoutOpen(f,"left")),i=!1,void(o=!1);S=!1,T=!1;var P;if(h.length>0)for(D=v/m,-m>v&&(v=-m-Math.pow(-v-m,.8),k.length>0&&(T=!0)),r=0;r<x.length;r++)"undefined"==typeof x[r]._buttonOffset&&(x[r]._buttonOffset=x[r].offsetLeft),u=x[r]._buttonOffset,P=s(x[r]),k.length>0&&P.hasClass("swipeout-overswipe")&&P.css({left:(T?-u:0)+"px"}),P.transform("translate3d("+(v-u*(1+Math.max(D,-1)))+"px,0,0)");if(p.length>0)for(D=v/g,v>g&&(v=g+Math.pow(v-g,.8),C.length>0&&(S=!0)),r=0;r<b.length;r++)"undefined"==typeof b[r]._buttonOffset&&(b[r]._buttonOffset=g-b[r].offsetLeft-b[r].offsetWidth),
u=b[r]._buttonOffset,P=s(b[r]),C.length>0&&P.hasClass("swipeout-overswipe")&&P.css({left:(S?u:0)+"px"}),b.length>1&&P.css("z-index",b.length-r),P.transform("translate3d("+(v+u*(1-Math.min(D,1)))+"px,0,0)");d.transform("translate3d("+v+"px,0,0)")}}function r(){if(!i||!o)return i=!1,void(o=!1);i=!1,o=!1;var t,e,n,r,l,_,C=(new Date).getTime()-u;if(_="to-left"===w?E:A,n="to-left"===w?h:p,e="to-left"===w?m:g,t=300>C&&(-10>c&&"to-left"===w||c>10&&"to-right"===w)||C>=300&&Math.abs(v)>e/2?"open":"close",300>C&&(0===Math.abs(v)&&(t="close"),Math.abs(v)===e&&(t="open")),"open"===t){a.swipeoutOpenedEl=f,f.trigger("open"),f.addClass("swipeout-opened transitioning");var k="to-left"===w?-e:e;if(d.transform("translate3d("+k+"px,0,0)"),n.addClass("swipeout-actions-opened"),r="to-left"===w?x:b)for(l=0;l<r.length;l++)s(r[l]).transform("translate3d("+k+"px,0,0)");T&&h.find(".swipeout-overswipe")[0].click(),S&&p.find(".swipeout-overswipe")[0].click()}else f.trigger("close"),a.swipeoutOpenedEl=void 0,f.addClass("transitioning").removeClass("swipeout-opened"),d.transform(""),n.removeClass("swipeout-actions-opened");var M;if(b&&b.length>0&&b!==r)for(l=0;l<b.length;l++)M=b[l]._buttonOffset,"undefined"==typeof M&&(b[l]._buttonOffset=g-b[l].offsetLeft-b[l].offsetWidth),s(b[l]).transform("translate3d("+M+"px,0,0)");if(x&&x.length>0&&x!==r)for(l=0;l<x.length;l++)M=x[l]._buttonOffset,"undefined"==typeof M&&(x[l]._buttonOffset=x[l].offsetLeft),s(x[l]).transform("translate3d("+-M+"px,0,0)");d.transitionEnd(function(){y&&"open"===t||closed&&"close"===t||(f.trigger("open"===t?"opened":"closed"),y&&"close"===t&&(h.length>0&&x.transform(""),p.length>0&&b.transform("")))})}var i,o,l,u,c,f,d,h,p,g,m,v,y,_,b,x,w,C,k,S,T,A,E,M={};s(document).on(a.touchEvents.start,function(t){if(a.swipeoutOpenedEl){var e=s(t.target);a.swipeoutOpenedEl.is(e[0])||e.parents(".swipeout").is(a.swipeoutOpenedEl)||e.hasClass("modal-in")||e.parents(".modal.modal-in").length>0||e.hasClass("modal-overlay")||a.swipeoutClose(a.swipeoutOpenedEl)}}),t?(s(t).on(a.touchEvents.start,e),s(t).on(a.touchEvents.move,n),s(t).on(a.touchEvents.end,r)):(s(document).on(a.touchEvents.start,".list-block li.swipeout",e),s(document).on(a.touchEvents.move,".list-block li.swipeout",n),s(document).on(a.touchEvents.end,".list-block li.swipeout",r))},a.swipeoutOpen=function(t,e,n){if(t=s(t),2===arguments.length&&"function"==typeof arguments[1]&&(n=e),0!==t.length&&(t.length>1&&(t=s(t[0])),t.hasClass("swipeout")&&!t.hasClass("swipeout-opened"))){e||(e=t.find(".swipeout-actions-right").length>0?"right":"left");var r=t.find(".swipeout-actions-"+e);if(0!==r.length){r.hasClass("swipeout-actions-no-fold")||a.params.swipeoutActionsNoFold,t.trigger("open").addClass("swipeout-opened").removeClass("transitioning"),r.addClass("swipeout-actions-opened");var i,o=r.children("a"),l=r.outerWidth(),u="right"===e?-l:l;if(o.length>1){for(i=0;i<o.length;i++)"right"===e?s(o[i]).transform("translate3d("+-o[i].offsetLeft+"px,0,0)"):s(o[i]).css("z-index",o.length-i).transform("translate3d("+(l-o[i].offsetWidth-o[i].offsetLeft)+"px,0,0)");o[1].clientLeft}for(t.addClass("transitioning"),i=0;i<o.length;i++)s(o[i]).transform("translate3d("+u+"px,0,0)");t.find(".swipeout-content").transform("translate3d("+u+"px,0,0)").transitionEnd(function(){t.trigger("opened"),n&&n.call(t[0])}),a.swipeoutOpenedEl=t}}},a.swipeoutClose=function(t,e){if(t=s(t),0!==t.length&&t.hasClass("swipeout-opened")){var n=t.find(".swipeout-actions-opened").hasClass("swipeout-actions-right")?"right":"left",r=t.find(".swipeout-actions-opened").removeClass("swipeout-actions-opened"),i=(r.hasClass("swipeout-actions-no-fold")||a.params.swipeoutActionsNoFold,r.children("a")),o=r.outerWidth();a.allowSwipeout=!1,t.trigger("close"),t.removeClass("swipeout-opened").addClass("transitioning"),t.find(".swipeout-content").transform("translate3d(0px,0,0)").transitionEnd(function(){a.allowSwipeout=!0,i.transform(""),t.trigger("closed"),e&&e.call(t[0])});for(var l=0;l<i.length;l++)s(i[l]).transform("right"===n?"translate3d("+-i[l].offsetLeft+"px,0,0)":"translate3d("+(o-i[l].offsetWidth-i[l].offsetLeft)+"px,0,0)"),s(i[l]).css({left:"0px"});a.swipeoutOpenedEl&&a.swipeoutOpenedEl[0]===t[0]&&(a.swipeoutOpenedEl=void 0)}},a.swipeoutDelete=function(t,e){if(t=s(t),0!==t.length){t.length>1&&(t=s(t[0])),a.swipeoutOpenedEl=void 0,t.trigger("delete"),t.css({height:t.outerHeight()+"px"}),t[0].clientLeft,t.css({height:"0px"}).addClass("deleting transitioning").transitionEnd(function(){if(t.trigger("deleted"),e&&e.call(t[0]),t.parents(".virtual-list").length>0){var n=t.parents(".virtual-list")[0].f7VirtualList,r=t[0].f7VirtualListIndex;n&&"undefined"!=typeof r&&n.deleteItem(r)}else t.remove()});var n="-100%";t.find(".swipeout-content").transform("translate3d("+n+",0,0)")}},a.sortableToggle=function(t){return t=s(t),0===t.length&&(t=s(".list-block.sortable")),t.toggleClass("sortable-opened"),t.trigger(t.hasClass("sortable-opened")?"open":"close"),t},a.sortableOpen=function(t){return t=s(t),0===t.length&&(t=s(".list-block.sortable")),t.addClass("sortable-opened"),t.trigger("open"),t},a.sortableClose=function(t){return t=s(t),0===t.length&&(t=s(".list-block.sortable")),t.removeClass("sortable-opened"),t.trigger("close"),t},a.initSortable=function(){function t(t){i=!1,r=!0,o="touchstart"===t.type?t.targetTouches[0].pageY:t.pageY,u=s(this).parent(),f=u.parent().find("li"),m=u.parents(".sortable"),t.preventDefault(),a.allowPanelOpen=a.allowSwipeout=!1}function e(t){if(r&&u){var e=("touchmove"===t.type?t.targetTouches[0].pageX:t.pageX,"touchmove"===t.type?t.targetTouches[0].pageY:t.pageY);i||(u.addClass("sorting"),m.addClass("sortable-sorting"),d=u[0].offsetTop,h=u.parent().height()-u[0].offsetTop-u.height(),c=u[0].offsetHeight),i=!0,t.preventDefault(),t.f7PreventPanelSwipe=!0,l=e-o;var n=l;-d>n&&(n=-d),n>h&&(n=h),u.transform("translate3d(0,"+n+"px,0)"),g=p=void 0,f.each(function(){var t=s(this);if(t[0]!==u[0]){var e=t[0].offsetTop,r=t.height(),i=u[0].offsetTop+n;i>=e-r/2&&u.index()<t.index()?(t.transform("translate3d(0, "+-c+"px,0)"),p=t,g=void 0):e+r/2>=i&&u.index()>t.index()?(t.transform("translate3d(0, "+c+"px,0)"),p=void 0,g||(g=t)):s(this).transform("translate3d(0, 0%,0)")}})}}function n(t){if(a.allowPanelOpen=a.allowSwipeout=!0,!r||!i)return r=!1,void(i=!1);t.preventDefault(),f.transform(""),u.removeClass("sorting"),m.removeClass("sortable-sorting");var e,n,o;p&&(u.insertAfter(p),u.trigger("sort")),g&&(u.insertBefore(g),u.trigger("sort")),(p||g)&&m.hasClass("virtual-list")&&(e=m[0].f7VirtualList,n=u[0].f7VirtualListIndex,o=g?g[0].f7VirtualListIndex:p[0].f7VirtualListIndex,e&&e.moveItem(n,o)),p=g=void 0,r=!1,i=!1}var r,i,o,l,u,c,f,d,h,p,g,m;s(document).on(a.touchEvents.start,".list-block.sortable .sortable-handler",t),a.support.touch?(s(document).on(a.touchEvents.move,".list-block.sortable .sortable-handler",e),s(document).on(a.touchEvents.end,".list-block.sortable .sortable-handler",n)):(s(document).on(a.touchEvents.move,e),s(document).on(a.touchEvents.end,n))},a.initSmartSelects=function(t){var e=s(t);if(0!==e.length){var n=e.find(".smart-select");0!==n.length&&n.each(function(){var t=s(this),e=t.find("select");if(0!==e.length){var n=e[0];if(0!==n.length){for(var r=[],i=0;i<n.length;i++)n[i].selected&&r.push(n[i].textContent.trim());var a=t.find(".item-after");if(0===a.length)t.find(".item-inner").append('<div class="item-after">'+r.join(", ")+"</div>");else{var o=a.text();if(a.hasClass("smart-select-value"))for(i=0;i<n.length;i++)n[i].selected=n[i].textContent.trim()===o.trim();else a.text(r)}}}})}},a.smartSelectOpen=function(t){function e(e){if(p){var n=a.virtualList(s(e).find(".virtual-list"),{items:T,template:P,height:g||void 0,searchByItem:function(t,e,n){return n.text.toLowerCase().indexOf(t.trim())>=0}});s(e).once("popup"===i?"closed":"pageBeforeRemove",function(){n&&n.destroy&&n.destroy()})}s(e).on("change",'input[name="'+M+'"]',function(){var e=this,n=e.value,o=[];if("checkbox"===e.type)for(var s=0;s<m.options.length;s++){var l=m.options[s];l.value===n&&(l.selected=e.checked),l.selected&&o.push(l.textContent.trim())}else o=[t.find('option[value="'+n+'"]').text()],m.value=n;v.trigger("change"),t.find(".item-after").text(o.join(", ")),f&&"radio"===E&&("popup"===i?a.closeModal(U):r.router.back())})}function n(t){var r=t.detail.page;r.name===q&&(s(document).off("pageInit",n),e(r.container))}if(t=s(t),0!==t.length){var r=t.parents("."+a.params.viewClass);if(0!==r.length&&(r=r[0].f7View)){var i=t.attr("data-open-in");i||(i=a.params.smartSelectInPopup?"popup":"page");var o=t.attr("data-page-title")||t.find(".item-title").text(),u=t.attr("data-back-text")||a.params.smartSelectBackText,c=t.attr("data-popup-close-text")||t.attr("data-back-text")||a.params.smartSelectPopupCloseText,f=t.attr("data-back-onselect")?"true"===t.attr("data-back-onselect"):a.params.smartSelectBackOnSelect,d=t.attr("data-form-theme")||a.params.smartSelectFormTheme,h=t.attr("data-navbar-theme")||a.params.smartSelectNavbarTheme,p="true"===t.attr("data-virtual-list"),g=t.attr("data-virtual-list-height"),m=t.find("select")[0],v=s(m);if(!(m.disabled||t.hasClass("disabled")||v.hasClass("disabled"))){for(var y,_,b,x,w,C,k,S,T=[],A=(new Date).getTime(),E=m.multiple?"checkbox":"radio",M=E+"-"+A,D=0;D<m.length;D++)y=s(m[D]),y[0].disabled||(b=y.attr("data-option-image")||v.attr("data-option-image"),x=y.attr("data-option-icon")||v.attr("data-option-icon"),_=b||x||"checkbox"===E,w=y.parent("optgroup")[0],C=w&&w.label,k=!1,w&&w!==S&&(k=!0,S=w),T.push({value:y[0].value,text:y[0].textContent.trim(),selected:y[0].selected,group:w,groupLabel:C,showGroupLabel:k,image:b,icon:x,disabled:y[0].disabled,inputType:E,id:A,hasMedia:_,checkbox:"checkbox"===E,inputName:M,test:this}));a._compiledTemplates.smartSelectItem||(a._compiledTemplates.smartSelectItem=l.compile(a.params.smartSelectItemTemplate||'{{#if showGroupLabel}}<li class="item-divider">{{groupLabel}}</li>{{/if}}<li><label class="label-{{inputType}} item-content"><input type="{{inputType}}" name="{{inputName}}" value="{{value}}" {{#if selected}}checked{{/if}}>{{#if hasMedia}}<div class="item-media">{{#if checkbox}}<i class="icon icon-form-checkbox"></i>{{/if}}{{#if icon}}<i class="icon {{icon}}"></i>{{/if}}{{#if image}}<img src="{{image}}">{{/if}}</div>{{/if}}<div class="item-inner"><div class="item-title">{{text}}</div></div></label></li>'));var P=a._compiledTemplates.smartSelectItem,O="";if(!p)for(var N=0;N<T.length;N++)O+=P(T[N]);a._compiledTemplates.smartSelectNavbar||(a._compiledTemplates.smartSelectNavbar=l.compile(a.params.smartSelectNavbarTemplate||'<div class="navbar {{#if navbarTheme}}theme-{{navbarTheme}}{{/if}}"><div class="navbar-inner">{{leftTemplate}}<div class="center sliding">{{pageTitle}}</div></div></div>'));var L,I=a._compiledTemplates.smartSelectNavbar({pageTitle:o,backText:u,closeText:c,openIn:i,navbarTheme:h,inPopup:"popup"===i,inPage:"page"===i,leftTemplate:"popup"===i?a.params.smartSelectPopupCloseTemplate.replace(/{{closeText}}/g,c):a.params.smartSelectBackTemplate.replace(/{{backText}}/g,u)}),R="",B="";"page"===i?(L="static",t.parents(".navbar-through").length>0&&(L="through"),t.parents(".navbar-fixed").length>0&&(L="fixed"),B=t.parents(".page").hasClass("no-toolbar")?"no-toolbar":"",R=t.parents(".page").hasClass("no-navbar")?"no-navbar":"navbar-"+L):L="fixed";var z,F,q="smart-select-"+M,H="undefined"==typeof t.data("searchbar")?a.params.smartSelectSearchbar:"true"===t.data("searchbar");H&&(z=t.data("searchbar-placeholder")||"Search",F=t.data("searchbar-cancel")||"Cancel");var U,j='<form class="searchbar" data-search-list=".smart-select-list-'+A+'" data-search-in=".item-title"><div class="searchbar-input"><input type="search" placeholder="'+z+'"><a href="#" class="searchbar-clear"></a></div><a href="#" class="searchbar-cancel">'+F+'</a></form><div class="searchbar-overlay"></div>',V=("through"===L?I:"")+'<div class="pages">  <div data-page="'+q+'" class="page smart-select-page '+R+" "+B+'">'+("fixed"===L?I:"")+(H?j:"")+'    <div class="page-content">'+("static"===L?I:"")+'      <div class="list-block '+(p?"virtual-list":"")+" smart-select-list-"+A+" "+(d?"theme-"+d:"")+'">        <ul>'+(p?"":O)+"        </ul>      </div>    </div>  </div></div>";"popup"===i?(U=a.popup('<div class="popup smart-select-popup smart-select-popup-'+M+'"><div class="view navbar-fixed">'+V+"</div></div>"),a.initPage(s(U).find(".page")),e(U)):(s(document).on("pageInit",n),r.router.load({content:V}))}}}};var h=function(t,e){var n={cols:1,height:44,cache:!0,dynamicHeightBufferSize:1};e=e||{};for(var r in n)"undefined"==typeof e[r]&&(e[r]=n[r]);var i=this;i.listBlock=s(t),i.params=e,i.items=e.items,e.template&&("string"==typeof e.template?i.template=l.compile(e.template):"function"==typeof e.template&&(i.template=e.template)),i.pageContent=i.listBlock.parents(".page-content");var o;"undefined"!=typeof i.params.updatableScroll?o=i.params.updatableScroll:(o=!0,a.device.ios&&a.device.osVersion.split(".")[0]<8&&(o=!1)),i.ul=i.params.ul?s(i.params.ul):i.listBlock.children("ul"),0===i.ul.length&&(i.listBlock.append("<ul></ul>"),i.ul=i.listBlock.children("ul")),i.domCache={},i.displayDomCache={},i.tempDomElement=document.createElement("ul"),i.lastRepaintY=null,i.fragment=document.createDocumentFragment(),i.filterItems=function(t,e){i.filteredItems=[];for(var n=(t[0],t[t.length-1],0);n<t.length;n++)i.filteredItems.push(i.items[t[n]]);"undefined"==typeof e&&(e=!0),e&&(i.pageContent[0].scrollTop=0),i.update()},i.resetFilter=function(){i.filteredItems=null,delete i.filteredItems,i.update()};var u,c,f,d,h,p,g=0,m="function"==typeof i.params.height;return i.setListSize=function(){var t=i.filteredItems||i.items;if(u=i.pageContent[0].offsetHeight,m){p=0,i.heights=[];for(var e=0;e<t.length;e++){var n=i.params.height(t[e]);p+=n,i.heights.push(n)}}else p=t.length*i.params.height/i.params.cols,c=Math.ceil(u/i.params.height),f=i.params.rowsBefore||2*c,d=i.params.rowsAfter||c,h=c+f+d,g=f/2*i.params.height;o&&i.ul.css({height:p+"px"})},i.render=function(t,e){t&&(i.lastRepaintY=null);var n=-(i.listBlock[0].getBoundingClientRect().top+i.pageContent[0].getBoundingClientRect().top);if("undefined"!=typeof e&&(n=e),null===i.lastRepaintY||Math.abs(n-i.lastRepaintY)>g||!o&&i.pageContent[0].scrollTop+u>=i.pageContent[0].scrollHeight){i.lastRepaintY=n;var r,a,s=i.filteredItems||i.items,l=0,c=0;if(m){var d,p,v=0;for(g=u,d=0;d<i.heights.length;d++)p=i.heights[d],"undefined"==typeof r&&(v+p>=n-2*u*i.params.dynamicHeightBufferSize?r=d:l+=p),"undefined"==typeof a&&((v+p>=n+2*u*i.params.dynamicHeightBufferSize||d===i.heights.length-1)&&(a=d+1),c+=p),v+=p;a=Math.min(a,s.length)}else r=(parseInt(n/i.params.height)-f)*i.params.cols,0>r&&(r=0),a=Math.min(r+h*i.params.cols,s.length);var y;i.reachEnd=!1;for(var _=r;a>_;_++){var b,x;x=i.items.indexOf(s[_]),_===r&&(i.currentFromIndex=x),_===a-1&&(i.currentToIndex=x),x===i.items.length-1&&(i.reachEnd=!0),i.domCache[x]?b=i.domCache[x]:(i.tempDomElement.innerHTML=i.template?i.template(s[_],{index:x}):i.params.renderItem?i.params.renderItem(x,s[_]):s[_],b=i.tempDomElement.childNodes[0],i.params.cache&&(i.domCache[x]=b)),b.f7VirtualListIndex=x,_===r&&(y=m?l:_*i.params.height/i.params.cols),b.style.top=y+"px",i.params.onItemBeforeInsert&&i.params.onItemBeforeInsert(i,b),i.fragment.appendChild(b)}o||(i.ul[0].style.height=m?c+"px":_*i.params.height/i.params.cols+"px"),i.params.onBeforeClear&&i.params.onBeforeClear(i,i.fragment),i.ul[0].innerHTML="",i.params.onItemsBeforeInsert&&i.params.onItemsBeforeInsert(i,i.fragment),i.ul[0].appendChild(i.fragment),i.params.onItemsAfterInsert&&i.params.onFragmentAfterInsert(i,i.fragment),"undefined"!=typeof e&&t&&i.pageContent.scrollTop(e,0)}},i.scrollToItem=function(t){if(t>i.items.length)return!1;var e,n=0;if(m)for(var r=0;t>r;r++)n+=i.heights[r];else n=t*i.params.height;return e=i.listBlock[0].offsetTop,i.render(!0,e+n-parseInt(i.pageContent.css("padding-top"),10)),!0},i.handleScroll=function(){i.render()},i.handleResize=function(){i.setListSize(),i.render(!0)},i.attachEvents=function(t){var e=t?"off":"on";i.pageContent[e]("scroll",i.handleScroll),s(window)[e]("resize",i.handleResize)},i.init=function(){i.attachEvents(),i.setListSize(),i.render()},i.appendItems=function(t){for(var e=0;e<t.length;e++)i.items.push(t[e]);i.update()},i.appendItem=function(t){i.appendItems([t])},i.replaceAllItems=function(t){i.items=t,delete i.filteredItems,i.domCache={},i.update()},i.replaceItem=function(t,e){i.items[t]=e,i.params.cache&&delete i.domCache[t],i.update()},i.prependItems=function(t){for(var e=t.length-1;e>=0;e--)i.items.unshift(t[e]);if(i.params.cache){var n={};for(var r in i.domCache)n[parseInt(r,10)+t.length]=i.domCache[r];i.domCache=n}i.update()},i.prependItem=function(t){i.prependItems([t])},i.moveItem=function(t,e){if(t!==e){var n=i.items.splice(t,1)[0];if(e>=i.items.length?(i.items.push(n),e=i.items.length-1):i.items.splice(e,0,n),i.params.cache){var r={};for(var a in i.domCache){var o=parseInt(a,10),s=e>t?t:e,l=e>t?e:t,u=e>t?-1:1;(s>o||o>l)&&(r[o]=i.domCache[o]),o===s&&(r[l]=i.domCache[o]),o>s&&l>=o&&(r[o+u]=i.domCache[o])}i.domCache=r}i.update()}},i.insertItemBefore=function(t,e){if(0===t)return void i.prependItem(e);if(t>=i.items.length)return void i.appendItem(e);if(i.items.splice(t,0,e),i.params.cache){var n={};for(var r in i.domCache){var a=parseInt(r,10);a>=t&&(n[a+1]=i.domCache[a])}i.domCache=n}i.update()},i.deleteItems=function(t){for(var e,n=0,r=0;r<t.length;r++){var a=t[r];"undefined"!=typeof e&&a>e&&(n=-r),a+=n,e=t[r];var o=i.items.splice(a,1)[0];if(i.filteredItems&&i.filteredItems.indexOf(o)>=0&&i.filteredItems.splice(i.filteredItems.indexOf(o),1),i.params.cache){var s={};for(var l in i.domCache){var u=parseInt(l,10);u===a?delete i.domCache[a]:parseInt(l,10)>a?s[u-1]=i.domCache[l]:s[u]=i.domCache[l]}i.domCache=s}}i.update()},i.deleteAllItems=function(){i.items=[],delete i.filteredItems,i.params.cache&&(i.domCache={}),i.update()},i.deleteItem=function(t){i.deleteItems([t])},i.clearCache=function(){i.domCache={}},i.update=function(){i.setListSize(),i.render(!0)},i.destroy=function(){i.attachEvents(!0),delete i.items,delete i.domCache},i.init(),i.listBlock[0].f7VirtualList=i,i};a.virtualList=function(t,e){return new h(t,e)},a.reinitVirtualList=function(t){var e=s(t),n=e.find(".virtual-list");if(0!==n.length)for(var r=0;r<n.length;r++){var i=i[0].f7VirtualList;i&&i.update()}},a.initPullToRefresh=function(t){function e(t){if(u){if("android"!==a.device.os)return;if("targetTouches"in t&&t.targetTouches.length>1)return}c=!1,u=!0,f=void 0,v=void 0,b.x="touchstart"===t.type?t.targetTouches[0].pageX:t.pageX,b.y="touchstart"===t.type?t.targetTouches[0].pageY:t.pageY,h=(new Date).getTime(),p=s(this)}function n(t){if(u){var e="touchmove"===t.type?t.targetTouches[0].pageX:t.pageX,n="touchmove"===t.type?t.targetTouches[0].pageY:t.pageY;if("undefined"==typeof f&&(f=!!(f||Math.abs(n-b.y)>Math.abs(e-b.x))),!f)return void(u=!1);if(m=p[0].scrollTop,"undefined"==typeof v&&0!==m&&(v=!0),!c){if(p.removeClass("transitioning"),m>p[0].offsetHeight)return void(u=!1);_&&(y=p.attr("data-ptr-distance"),y.indexOf("%")>=0&&(y=p[0].offsetHeight*parseInt(y,10)/100)),C=p.hasClass("refreshing")?y:0,w=p[0].scrollHeight===p[0].offsetHeight||"ios"!==a.device.os}return c=!0,d=n-b.y,d>0&&0>=m||0>m?("ios"===a.device.os&&parseInt(a.device.osVersion.split(".")[0],10)>7&&0===m&&!v&&(w=!0),w&&(t.preventDefault(),g=Math.pow(d,.85)+C,p.transform("translate3d(0,"+g+"px,0)")),void(w&&Math.pow(d,.85)>y||!w&&d>=2*y?(x=!0,p.addClass("pull-up").removeClass("pull-down")):(x=!1,p.removeClass("pull-up").addClass("pull-down")))):(p.removeClass("pull-up pull-down"),void(x=!1))}}function r(){return u&&c?(g&&(p.addClass("transitioning"),g=0),p.transform(""),x?(p.addClass("refreshing"),p.trigger("refresh",{done:function(){a.pullToRefreshDone(p)}})):p.removeClass("pull-down"),u=!1,void(c=!1)):(u=!1,void(c=!1))}function i(){l.off(a.touchEvents.start,e),l.off(a.touchEvents.move,n),l.off(a.touchEvents.end,r)}function o(){i(),k.off("pageBeforeRemove",o)}var l=s(t);if(l.hasClass("pull-to-refresh-content")||(l=l.find(".pull-to-refresh-content")),l&&0!==l.length){var u,c,f,d,h,p,g,m,v,y,_,b={},x=!1,w=!1,C=0,k=l.hasClass("page")?l:l.parents(".page"),S=!1;(k.find(".navbar").length>0||k.parents(".navbar-fixed, .navbar-through").length>0||k.hasClass("navbar-fixed")||k.hasClass("navbar-through"))&&(S=!0),k.hasClass("no-navbar")&&(S=!1),S||l.addClass("pull-to-refresh-no-navbar"),p=l,p.attr("data-ptr-distance")?_=!0:y=44,l.on(a.touchEvents.start,e),l.on(a.touchEvents.move,n),l.on(a.touchEvents.end,r),0!==k.length&&(l[0].f7DestroyPullToRefresh=i,k.on("pageBeforeRemove",o))}},a.pullToRefreshDone=function(t){t=s(t),0===t.length&&(t=s(".pull-to-refresh-content.refreshing")),t.removeClass("refreshing").addClass("transitioning"),t.transitionEnd(function(){t.removeClass("transitioning pull-up pull-down")})},a.pullToRefreshTrigger=function(t){t=s(t),0===t.length&&(t=s(".pull-to-refresh-content")),t.hasClass("refreshing")||(t.addClass("transitioning refreshing"),t.trigger("refresh",{done:function(){a.pullToRefreshDone(t)}}))},a.destroyPullToRefresh=function(t){t=s(t);var e=t.hasClass("pull-to-refresh-content")?t:t.find(".pull-to-refresh-content");0!==e.length&&e[0].f7DestroyPullToRefresh&&e[0].f7DestroyPullToRefresh()},a.attachInfiniteScroll=function(t){s(t).on("scroll",r)},a.detachInfiniteScroll=function(t){s(t).off("scroll",r)},a.initInfiniteScroll=function(t){function e(){a.detachInfiniteScroll(n),t.off("pageBeforeRemove",e)}t=s(t);var n=t.find(".infinite-scroll");0!==n.length&&(a.attachInfiniteScroll(n),t.on("pageBeforeRemove",e))},a.initScrollToolbars=function(t){function e(){t.hasClass("page-on-left")||(h=n[0].scrollTop,v=n[0].scrollHeight,y=n[0].offsetHeight,_=a.params.showBarsOnPageScrollEnd&&h+y>=v-T,x=c.hasClass("navbar-hidden"),w=f.hasClass("toolbar-hidden"),C=u&&u.hasClass("toolbar-hidden"),b=d>h||_?"show":h>44?"hide":"show","show"===b?(p&&r&&x&&(a.showNavbar(c),t.removeClass("no-navbar-by-scroll"),x=!1),g&&i&&w&&(a.showToolbar(f),t.removeClass("no-toolbar-by-scroll"),w=!1),m&&o&&C&&(a.showToolbar(u),t.removeClass("no-tabbar-by-scroll"),C=!1)):(p&&r&&!x&&(a.hideNavbar(c),t.addClass("no-navbar-by-scroll"),x=!0),g&&i&&!w&&(a.hideToolbar(f),t.addClass("no-toolbar-by-scroll"),w=!0),m&&o&&!C&&(a.hideToolbar(u),t.addClass("no-tabbar-by-scroll"),C=!0)),d=h)}t=s(t);var n=t.find(".page-content");if(0!==n.length){var r=(a.params.hideNavbarOnPageScroll||n.hasClass("hide-navbar-on-scroll")||n.hasClass("hide-bars-on-scroll"))&&!(n.hasClass("keep-navbar-on-scroll")||n.hasClass("keep-bars-on-scroll")),i=(a.params.hideToolbarOnPageScroll||n.hasClass("hide-toolbar-on-scroll")||n.hasClass("hide-bars-on-scroll"))&&!(n.hasClass("keep-toolbar-on-scroll")||n.hasClass("keep-bars-on-scroll")),o=(a.params.hideTabbarOnPageScroll||n.hasClass("hide-tabbar-on-scroll"))&&!n.hasClass("keep-tabbar-on-scroll");if(r||i||o){var l=n.parents("."+a.params.viewClass);if(0!==l.length){var u,c=l.find(".navbar"),f=l.find(".toolbar");o&&(u=l.find(".tabbar"),0===u.length&&(u=l.parents("."+a.params.viewsClass).find(".tabbar")));var d,h,p=c.length>0,g=f.length>0,m=u&&u.length>0;d=h=n[0].scrollTop;var v,y,_,b,x,w,C,k=g&&i?f[0].offsetHeight:0,S=m&&o?u[0].offsetHeight:0,T=S||k;n.on("scroll",e),n[0].f7ScrollToolbarsHandler=e}}}},a.destroyScrollToolbars=function(t){t=s(t);var e=t.find(".page-content");if(0!==e.length){var n=e[0].f7ScrollToolbarsHandler;n&&e.off("scroll",e[0].f7ScrollToolbarsHandler)}},a.showTab=function(t,e,n){var r=s(t);if(2===arguments.length&&"boolean"==typeof e&&(n=e),0===r.length)return!1;if(r.hasClass("active"))return n&&r.trigger("show"),!1;var i=r.parent(".tabs");if(0===i.length)return!1;a.allowSwipeout=!0;var o=i.parent().hasClass("tabs-animated-wrap");o&&i.transform("translate3d("+100*-r.index()+"%,0,0)");var l=i.children(".tab.active").removeClass("active");if(r.addClass("active"),r.trigger("show"),!o&&r.find(".navbar").length>0){var u;u=r.hasClass(a.params.viewClass)?r[0]:r.parents("."+a.params.viewClass)[0],a.sizeNavbars(u)}if(e?e=s(e):(e=s("string"==typeof t?'.tab-link[href="'+t+'"]':'.tab-link[href="#'+r.attr("id")+'"]'),(!e||e&&0===e.length)&&s("[data-tab]").each(function(){r.is(s(this).attr("data-tab"))&&(e=s(this))})),0!==e.length){var c;if(l&&l.length>0){var f=l.attr("id");f&&(c=s('.tab-link[href="#'+f+'"]')),(!c||c&&0===c.length)&&s("[data-tab]").each(function(){l.is(s(this).attr("data-tab"))&&(c=s(this))})}return e&&e.length>0&&e.addClass("active"),c&&c.length>0&&c.removeClass("active"),!0}},a.accordionToggle=function(t){t=s(t),0!==t.length&&(t.hasClass("accordion-item-expanded")?a.accordionClose(t):a.accordionOpen(t))},a.accordionOpen=function(t){t=s(t);var e=t.parents(".accordion-list").eq(0),n=t.children(".accordion-item-content");0===n.length&&(n=t.find(".accordion-item-content"));var r=e.length>0&&t.parent().children(".accordion-item-expanded");r.length>0&&a.accordionClose(r),n.css("height",n[0].scrollHeight+"px").transitionEnd(function(){t.hasClass("accordion-item-expanded")?(n.transition(0),n.css("height","auto"),n[0].clientLeft,n.transition(""),t.trigger("opened")):(n.css("height",""),t.trigger("closed"))}),t.trigger("open"),t.addClass("accordion-item-expanded")},a.accordionClose=function(t){t=s(t);var e=t.children(".accordion-item-content");0===e.length&&(e=t.find(".accordion-item-content")),t.removeClass("accordion-item-expanded"),e.transition(0),e.css("height",e[0].scrollHeight+"px"),e[0].clientLeft,e.transition(""),e.css("height","").transitionEnd(function(){t.hasClass("accordion-item-expanded")?(e.transition(0),e.css("height","auto"),e[0].clientLeft,e.transition(""),t.trigger("opened")):(e.css("height",""),t.trigger("closed"))}),t.trigger("close")},a.initFastClicks=function(){function t(t){var e,n=s(t.target),r=n.parents(a.params.activeStateElements);return n.is(a.params.activeStateElements)&&(e=n),r.length>0&&(e=e?e.add(r):r),e?e:n}function e(){var t=A.parents(".page-content, .panel");return 0!==t.length&&("yes"!==t.prop("scrollHandlerSet")&&(t.on("scroll",function(){clearTimeout(E)}),t.prop("scrollHandlerSet","yes")),!0)}function n(){A.addClass("active-state")}function r(){A.removeClass("active-state")}function i(t){var e="button checkbox file image radio submit input textarea".split(" ");return!(!document.activeElement||t===document.activeElement||document.activeElement===document.body)&&!(e.indexOf(t.nodeName.toLowerCase())>=0)}function o(t){var e=s(t);return("input"!==t.nodeName.toLowerCase()||"file"!==t.type)&&!(e.hasClass("no-fastclick")||e.parents(".no-fastclick").length>0)}function l(t){if(document.activeElement===t)return!1;var e=t.nodeName.toLowerCase(),n="button checkbox file image radio submit".split(" ");return!t.disabled&&!t.readOnly&&("textarea"===e||("select"===e?!a.device.android:"input"===e&&n.indexOf(t.type)<0||void 0))}function u(t){if(t=s(t),t.is("label")||t.parents("label").length>0){if(a.device.android){var e=a.device.osVersion.split(".");return!(1*e[0]>4||1*e[0]===4&&1*e[1]>=4)}return!1}return!0}function c(e){t(e).addClass("active-state"),"which"in e&&3===e.which&&setTimeout(function(){s(".active-state").removeClass("active-state")},0)}function f(){s(".active-state").removeClass("active-state")}function d(){s(".active-state").removeClass("active-state")}function h(r){if(T=!1,r.targetTouches.length>1)return!0;if(M=o(r.target),!M)return w=!1,!0;if(a.device.ios){var l=window.getSelection();if(l.rangeCount&&l.focusNode!==document.body&&(!l.isCollapsed||document.activeElement===l.focusNode))return C=!0,!0;C=!1}a.device.android&&i(r.target)&&document.activeElement.blur(),w=!0,x=r.target,b=(new Date).getTime(),y=r.targetTouches[0].pageX,_=r.targetTouches[0].pageY,a.device.ios&&(k=void 0,s(x).parents().each(function(){var t=this;t.scrollHeight>t.offsetHeight&&!k&&(k=t,k.f7ScrollTop=k.scrollTop)})),r.timeStamp-S<a.params.fastClicksDelayBetweenClicks&&r.preventDefault(),a.params.activeState&&(A=t(r),e(r)?E=setTimeout(n,80):n())}function p(t){if(w){var e=!1,n=a.params.fastClicksDistanceThreshold;if(n){var i=t.targetTouches[0].pageX,o=t.targetTouches[0].pageY;(Math.abs(i-y)>n||Math.abs(o-_)>n)&&(e=!0)}else e=!0;e&&(w=!1,x=null,T=!0),a.params.activeState&&(clearTimeout(E),r())}}function g(t){if(clearTimeout(E),!w)return!C&&M&&(!a.device.android||t.cancelable)&&t.preventDefault(),!0;if(document.activeElement===t.target)return!0;if(C||t.preventDefault(),t.timeStamp-S<a.params.fastClicksDelayBetweenClicks)return setTimeout(r,0),!0;if(S=t.timeStamp,w=!1,a.device.ios&&k&&k.scrollTop!==k.f7ScrollTop)return!1;a.params.activeState&&(n(),setTimeout(r,0)),l(x)&&x.focus(),document.activeElement&&x!==document.activeElement&&document.activeElement!==document.body&&"label"!==x.nodeName.toLowerCase()&&document.activeElement.blur(),t.preventDefault();var e=t.changedTouches[0],i=document.createEvent("MouseEvents"),o="click";return a.device.android&&"select"===x.nodeName.toLowerCase()&&(o="mousedown"),i.initMouseEvent(o,!0,!0,window,1,e.screenX,e.screenY,e.clientX,e.clientY,!1,!1,!1,!1,0,null),i.forwardedTouchEvent=!0,x.dispatchEvent(i),!1}function m(){w=!1,x=null}function v(t){var e=!1;return w?(x=null,w=!1,!0):"submit"===t.target.type&&0===t.detail||(x||(e=!0),document.activeElement===x&&(e=!0),t.forwardedTouchEvent&&(e=!0),t.cancelable||(e=!0),e||(t.stopImmediatePropagation(),t.stopPropagation(),x?(u(x)||T)&&t.preventDefault():t.preventDefault(),x=null),e)}a.params.activeState&&s("html").addClass("watch-active-state");var y,_,b,x,w,C,k,S,T,A,E,M;a.support.touch?(document.addEventListener("click",v,!0),document.addEventListener("touchstart",h),document.addEventListener("touchmove",p),document.addEventListener("touchend",g),document.addEventListener("touchcancel",m)):a.params.activeState&&(document.addEventListener("mousedown",c),document.addEventListener("mousemove",f),document.addEventListener("mouseup",d))},a.initClickEvents=function(){function t(t){var e=s(this),n=s(t.target),r="a"===e[0].nodeName.toLowerCase()||e.parents("a").length>0||"a"===n[0].nodeName.toLowerCase()||n.parents("a").length>0;if(!r){var i;if(a.params.scrollTopOnNavbarClick&&e.is(".navbar .center")){var o=e.parents(".navbar");i=o.parents(".page-content"),0===i.length&&(o.parents(".page").length>0&&(i=o.parents(".page").find(".page-content")),0===i.length&&o.nextAll(".pages").length>0&&(i=o.nextAll(".pages").find(".page:not(.page-on-left):not(.page-on-right):not(.cached)").find(".page-content")))}a.params.scrollTopOnStatusbarClick&&e.is(".statusbar-overlay")&&(i=s(".popup.modal-in").length>0?s(".popup.modal-in").find(".page:not(.page-on-left):not(.page-on-right):not(.cached)").find(".page-content"):s(".panel.active").length>0?s(".panel.active").find(".page:not(.page-on-left):not(.page-on-right):not(.cached)").find(".page-content"):s(".views > .view.active").length>0?s(".views > .view.active").find(".page:not(.page-on-left):not(.page-on-right):not(.cached)").find(".page-content"):s(".views").find(".page:not(.page-on-left):not(.page-on-right):not(.cached)").find(".page-content")),i&&i.length>0&&(i.hasClass("tab")&&(i=i.parent(".tabs").children(".page-content.active")),i.length>0&&i.scrollTop(0,300))}}function e(t){function e(t){return"false"!==t&&("true"===t||void 0)}var n=s(this),r=n.attr("href"),i="a"===n[0].nodeName.toLowerCase();if(i&&n.is(a.params.externalLinks))return void("_system"===n.attr("target")&&(t.preventDefault(),window.open(r,"_system")));if(n.hasClass("smart-select")&&a.smartSelectOpen&&a.smartSelectOpen(n),n.hasClass("open-panel")&&a.openPanel(1===s(".panel").length?s(".panel").hasClass("panel-left")?"left":"right":"right"===n.attr("data-panel")?"right":"left"),n.hasClass("close-panel")&&a.closePanel(),n.hasClass("panel-overlay")&&a.params.panelsCloseByOutside&&a.closePanel(),n.hasClass("open-popover")){var o;o=n.attr("data-popover")?n.attr("data-popover"):".popover",a.popover(o,n)}n.hasClass("close-popover")&&a.closeModal(".popover.modal-in");var c;n.hasClass("open-popup")&&(c=n.attr("data-popup")?n.attr("data-popup"):".popup",
a.popup(c)),n.hasClass("close-popup")&&(c=n.attr("data-popup")?n.attr("data-popup"):".popup.modal-in",a.closeModal(c));var f;if(n.hasClass("open-login-screen")&&(f=n.attr("data-login-screen")?n.attr("data-login-screen"):".login-screen",a.loginScreen(f)),n.hasClass("close-login-screen")&&a.closeModal(".login-screen.modal-in"),n.hasClass("modal-overlay")&&(s(".modal.modal-in").length>0&&a.params.modalCloseByOutside&&a.closeModal(".modal.modal-in"),s(".actions-modal.modal-in").length>0&&a.params.actionsCloseByOutside&&a.closeModal(".actions-modal.modal-in"),s(".popover.modal-in").length>0&&a.closeModal(".popover.modal-in")),n.hasClass("popup-overlay")&&s(".popup.modal-in").length>0&&a.params.popupCloseByOutside&&a.closeModal(".popup.modal-in"),n.hasClass("close-picker")){var d=s(".picker-modal.modal-in");d.length>0?a.closeModal(d):(d=s(".popover.modal-in .picker-modal"),d.length>0&&a.closeModal(d.parents(".popover")))}if(n.hasClass("open-picker")){var h;h=n.attr("data-picker")?n.attr("data-picker"):".picker-modal",a.pickerModal(h,n)}var p;if(n.hasClass("tab-link")&&(p=!0,a.showTab(n.attr("data-tab")||n.attr("href"),n)),n.hasClass("swipeout-close")&&a.swipeoutClose(n.parents(".swipeout-opened")),n.hasClass("swipeout-delete"))if(n.attr("data-confirm")){var g=n.attr("data-confirm"),m=n.attr("data-confirm-title");m?a.confirm(g,m,function(){a.swipeoutDelete(n.parents(".swipeout"))}):a.confirm(g,function(){a.swipeoutDelete(n.parents(".swipeout"))})}else a.swipeoutDelete(n.parents(".swipeout"));if(n.hasClass("toggle-sortable")&&a.sortableToggle(n.data("sortable")),n.hasClass("open-sortable")&&a.sortableOpen(n.data("sortable")),n.hasClass("close-sortable")&&a.sortableClose(n.data("sortable")),n.hasClass("accordion-item-toggle")||n.hasClass("item-link")&&n.parent().hasClass("accordion-item")){var v=n.parent(".accordion-item");0===v.length&&(v=n.parents(".accordion-item")),0===v.length&&(v=n.parents("li")),a.accordionToggle(v)}if((!a.params.ajaxLinks||n.is(a.params.ajaxLinks))&&i&&a.params.router){i&&t.preventDefault();var y=r&&r.length>0&&"#"!==r&&!p,_=n.attr("data-template");if(y||n.hasClass("back")||_){var b;if(n.attr("data-view")?b=s(n.attr("data-view"))[0].f7View:(b=n.parents("."+a.params.viewClass)[0]&&n.parents("."+a.params.viewClass)[0].f7View,b&&b.params.linksView&&("string"==typeof b.params.linksView?b=s(b.params.linksView)[0].f7View:b.params.linksView instanceof u&&(b=b.params.linksView))),b||a.mainView&&(b=a.mainView),!b)return;var x;if(_)r=void 0;else{if(0===r.indexOf("#")&&"#"!==r){if(!b.params.domCache)return;x=r.split("#")[1],r=void 0}if("#"===r&&!n.hasClass("back"))return}var w;n.attr("data-animatePages")?w=e(n.attr("data-animatePages")):(n.hasClass("with-animation")&&(w=!0),n.hasClass("no-animation")&&(w=!1));var C={animatePages:w,ignoreCache:e(n.attr("data-ignoreCache")),force:e(n.attr("data-force")),reload:e(n.attr("data-reload")),reloadPrevious:e(n.attr("data-reloadPrevious")),pageName:x,url:r};if(a.params.template7Pages){C.contextName=n.attr("data-contextName");var k=n.attr("data-context");k&&(C.context=JSON.parse(k))}_&&_ in l.templates&&(C.template=l.templates[_]),n.hasClass("back")?b.router.back(C):b.router.load(C)}}}function n(t){t.preventDefault()}s(document).on("click","a, .open-panel, .close-panel, .panel-overlay, .modal-overlay, .popup-overlay, .swipeout-delete, .swipeout-close, .close-popup, .open-popup, .open-popover, .open-login-screen, .close-login-screen .smart-select, .toggle-sortable, .open-sortable, .close-sortable, .accordion-item-toggle, .close-picker",e),(a.params.scrollTopOnNavbarClick||a.params.scrollTopOnStatusbarClick)&&s(document).on("click",".statusbar-overlay, .navbar .center",t),a.support.touch&&s(document).on("touchstart",".panel-overlay, .modal-overlay, .preloader-indicator-overlay, .popup-overlay, .searchbar-overlay",n)},a.initResize=function(){s(window).on("resize",a.resize),s(window).on("orientationchange",a.orientationchange)},a.resize=function(){a.sizeNavbars&&a.sizeNavbars(),i()},a.orientationchange=function(){a.device&&a.device.minimalUi&&(90===window.orientation||-90===window.orientation)&&(document.body.scrollTop=0),i()},a.formsData={},a.formStoreData=function(t,e){a.formsData[t]=e,a.ls["f7form-"+t]=JSON.stringify(e)},a.formDeleteData=function(t){a.formsData[t]&&(a.formsData[t]="",delete a.formsData[t]),a.ls["f7form-"+t]&&(a.ls["f7form-"+t]="",a.ls.removeItem("f7form-"+t))},a.formGetData=function(t){return a.ls["f7form-"+t]?JSON.parse(a.ls["f7form-"+t]):a.formsData[t]?a.formsData[t]:void 0},a.formToJSON=function(t){if(t=s(t),1!==t.length)return!1;var e={},n=["submit","image","button","file"],r=[];return t.find("input, select, textarea").each(function(){var i=s(this),a=i.attr("name"),o=i.attr("type"),l=this.nodeName.toLowerCase();if(!(n.indexOf(o)>=0||r.indexOf(a)>=0)&&a)if("select"===l&&i.attr("multiple"))r.push(a),e[a]=[],t.find('select[name="'+a+'"] option').each(function(){this.selected&&e[a].push(this.value)});else switch(o){case"checkbox":r.push(a),e[a]=[],t.find('input[name="'+a+'"]').each(function(){this.checked&&e[a].push(this.value)});break;case"radio":r.push(a),t.find('input[name="'+a+'"]').each(function(){this.checked&&(e[a]=this.value)});break;default:e[a]=i.val()}}),t.trigger("formToJSON",{formData:e}),e},a.formFromJSON=function(t,e){if(t=s(t),1!==t.length)return!1;var n=["submit","image","button","file"],r=[];t.find("input, select, textarea").each(function(){var i=s(this),a=i.attr("name"),o=i.attr("type"),l=this.nodeName.toLowerCase();if(e[a]&&!(n.indexOf(o)>=0||r.indexOf(a)>=0)&&a)if("select"===l&&i.attr("multiple"))r.push(a),t.find('select[name="'+a+'"] option').each(function(){this.selected=e[a].indexOf(this.value)>=0});else switch(o){case"checkbox":r.push(a),t.find('input[name="'+a+'"]').each(function(){this.checked=e[a].indexOf(this.value)>=0});break;case"radio":r.push(a),t.find('input[name="'+a+'"]').each(function(){this.checked=e[a]===this.value});break;default:i.val(e[a])}}),t.trigger("formFromJSON",{formData:e})},a.initFormsStorage=function(t){function e(){var t=s(this),e=t[0].id;if(e){var n=a.formToJSON(t);n&&(a.formStoreData(e,n),t.trigger("store",{data:n}))}}function n(){r.off("change submit",e),t.off("pageBeforeRemove",n)}if(t=s(t),0!==t.length){var r=t.find("form.store-data");0!==r.length&&(r.each(function(){var t=this.getAttribute("id");if(t){var e=a.formGetData(t);e&&a.formFromJSON(this,e)}}),r.on("change submit",e),t.on("pageBeforeRemove",n))}},s(document).on("submit change","form.ajax-submit, form.ajax-submit-onchange",function(t){var e=s(this);if("change"!==t.type||e.hasClass("ajax-submit-onchange")){"submit"===t.type&&t.preventDefault();var n=e.attr("method")||"GET",r=e.attr("enctype"),i=e.attr("action");if(i){var o;o="POST"===n?new FormData(e[0]):s.serializeObject(a.formToJSON(e[0]));var l=s.ajax({method:n,url:i,contentType:r,data:o,beforeSend:function(t){e.trigger("beforeSubmit",{data:o,xhr:t})},error:function(t){e.trigger("submitError",{data:o,xhr:t})},success:function(t){e.trigger("submitted",{data:t,xhr:l})}})}}}),a.pushStateQueue=[],a.pushStateClearQueue=function(){if(0!==a.pushStateQueue.length){var t,e=a.pushStateQueue.pop();a.params.pushStateNoAnimation===!0&&(t=!1),"back"===e.action&&a.router.back(e.view,{animatePages:t}),"loadPage"===e.action&&a.router.load(e.view,{url:e.stateUrl,animatePages:t,pushState:!1}),"loadContent"===e.action&&a.router.load(e.view,{content:e.stateContent,animatePages:t,pushState:!1}),"loadPageName"===e.action&&a.router.load(e.view,{pageName:e.statePageName,animatePages:t,pushState:!1})}},a.initPushState=function(){function t(t){if(!e){var n=a.mainView;if(n){var r=t.state;if(r||(r={viewIndex:a.views.indexOf(n),url:n.history[0]}),!(r.viewIndex<0)){var i,o=a.views[r.viewIndex],s=r&&r.url||void 0,l=r&&r.content||void 0,u=r&&r.pageName||void 0;a.params.pushStateNoAnimation===!0&&(i=!1),s!==o.url&&(o.history.indexOf(s)>=0?o.allowPageChange?a.router.back(o,{url:void 0,animatePages:i,pushState:!1,preloadOnly:!1}):a.pushStateQueue.push({action:"back",view:o}):l?o.allowPageChange?a.router.load(o,{content:l,animatePages:i,pushState:!1}):a.pushStateQueue.unshift({action:"loadContent",stateContent:l,view:o}):u?o.allowPageChange?a.router.load(o,{pageName:u,animatePages:i,pushState:!1}):a.pushStateQueue.unshift({action:"loadPageName",statePageName:u,view:o}):o.allowPageChange?a.router.load(o,{url:s,animatePages:i,pushState:!1}):a.pushStateQueue.unshift({action:"loadPage",stateUrl:s,view:o}))}}}}var e=!0;s(window).on("load",function(){setTimeout(function(){e=!1},0)}),s(window).on("popstate",t)},a.swiper=function(t,e){return new Swiper(t,e)},a.initSwiper=function(t){function e(t){function e(){t.destroy(),n.off("pageBeforeRemove",e)}n.on("pageBeforeRemove",e)}var n=s(t),r=n.find(".swiper-init");if(0!==r.length)for(var i=0;i<r.length;i++){var o,l=r.eq(i);o=l.data("swiper")?JSON.parse(l.data("swiper")):{initialSlide:parseInt(l.data("initialSlide"),10)||void 0,spaceBetween:parseInt(l.data("spaceBetween"),10)||void 0,speed:parseInt(l.data("speed"),10)||void 0,slidesPerView:l.data("slidesPerView")||void 0,slidesPerColumn:parseInt(l.data("slidesPerColumn"),10)||void 0,centeredSlides:l.data("centeredSlides")&&"true"===l.data("centeredSlides"),direction:l.data("direction"),pagination:l.data("pagination"),paginationHide:l.data("paginationHide")&&"true"===l.data("paginationHide"),paginationClickable:l.data("paginationClickable")&&"true"===l.data("paginationClickable"),scrollbar:l.data("scrollbar"),scrollbarHide:l.data("scrollbarHide")&&"true"===l.data("scrollbarHide"),loop:l.data("loop")&&"true"===l.data("loop"),effect:l.data("effect")||"slide",freeMode:l.data("freeMode")&&"true"===l.data("freeMode"),onlyExternal:l.data("onlyExternal")&&"true"===l.data("onlyExternal"),nextButton:l.data("nextButton"),prevButton:l.data("prevButton"),autoplay:l.data("autoplay")};var u=a.swiper(l[0],o);e(u)}},a.reinitSwiper=function(t){var e=s(t),n=e.find(".swiper-init");if(0!==n.length)for(var r=0;r<n.length;r++){var i=n[0].swiper;i&&i.onResize()}};var p=function(t){var e,n=this,r={photos:[],initialSlide:0,spaceBetween:20,speed:300,zoom:!0,maxZoom:3,minZoom:1,exposition:!0,expositionHideCaptions:!1,type:"standalone",navbar:!0,toolbar:!0,theme:"light",swipeToClose:!0,backLinkText:"Close",ofText:"of",loop:!1,lazyLoading:!1,lazyLoadingInPrevNext:!1,lazyLoadingOnTransitionStart:!1};t=t||{};for(var i in r)"undefined"==typeof t[i]&&(t[i]=r[i]);n.params=t;var o="dark"===n.params.theme?"color-white":"",l=n.params.navbarTemplate||'<div class="navbar"><div class="navbar-inner"><div class="left sliding"><a href="#" class="link '+("page"===n.params.type&&"back")+' close-popup photo-browser-close-link" data-popup=".photo-browser-popup"><i class="icon icon-back '+o+'"></i><span>'+n.params.backLinkText+'</span></a></div><div class="center sliding"><span class="photo-browser-current"></span> <span class="photo-browser-of">'+n.params.ofText+'</span> <span class="photo-browser-total"></span></div><div class="right"></div></div></div>',u=n.params.toolbarTemplate||'<div class="toolbar tabbar"><div class="toolbar-inner"><a href="#" class="link photo-browser-prev"><i class="icon icon-prev '+o+'"></i></a><a href="#" class="link photo-browser-next"><i class="icon icon-next '+o+'"></i></a></div></div>',c=n.params.template||'<div class="photo-browser photo-browser-'+n.params.theme+'"><div class="view navbar-fixed toolbar-fixed">{{navbar}}<div data-page="photo-browser-slides" class="page no-toolbar {{noNavbar}} toolbar-fixed navbar-fixed">{{toolbar}}{{captions}}<div class="photo-browser-swiper-container swiper-container"><div class="photo-browser-swiper-wrapper swiper-wrapper">{{photos}}</div></div></div></div></div>',f=n.params.lazyLoading?n.params.photoLazyTemplate||'<div class="photo-browser-slide photo-browser-slide-lazy swiper-slide"><div class="preloader'+("dark"===n.params.theme?" preloader-white":"")+'"></div><span class="photo-browser-zoom-container"><img data-src="{{url}}"></span></div>':n.params.photoTemplate||'<div class="photo-browser-slide swiper-slide"><span class="photo-browser-zoom-container"><img src="{{url}}"></span></div>',d=n.params.captionsTheme||n.params.theme,h=n.params.captionsTemplate||'<div class="photo-browser-captions photo-browser-captions-'+d+'">{{captions}}</div>',p=n.params.captionTemplate||'<div class="photo-browser-caption" data-caption-index="{{captionIndex}}">{{caption}}</div>',g=n.params.objectTemplate||'<div class="photo-browser-slide photo-browser-object-slide swiper-slide">{{html}}</div>',m="",v="";for(e=0;e<n.params.photos.length;e++){var y=n.params.photos[e],_="";"string"==typeof y||y instanceof String?_=y.indexOf("<")>=0||y.indexOf(">")>=0?g.replace(/{{html}}/g,y):f.replace(/{{url}}/g,y):"object"==typeof y&&(y.hasOwnProperty("html")&&y.html.length>0?_=g.replace(/{{html}}/g,y.html):y.hasOwnProperty("url")&&y.url.length>0&&(_=f.replace(/{{url}}/g,y.url)),y.hasOwnProperty("caption")&&y.caption.length>0?v+=p.replace(/{{caption}}/g,y.caption).replace(/{{captionIndex}}/g,e):_=_.replace(/{{caption}}/g,"")),m+=_}var b=c.replace("{{navbar}}",n.params.navbar?l:"").replace("{{noNavbar}}",n.params.navbar?"":"no-navbar").replace("{{photos}}",m).replace("{{captions}}",h.replace(/{{captions}}/g,v)).replace("{{toolbar}}",n.params.toolbar?u:"");n.activeIndex=n.params.initialSlide,n.openIndex=n.activeIndex,n.opened=!1,n.open=function(t){return"undefined"==typeof t&&(t=n.activeIndex),t=parseInt(t,10),n.opened&&n.swiper?void n.swiper.slideTo(t):(n.opened=!0,n.openIndex=t,n.initialLazyLoaded=!1,"standalone"===n.params.type&&s("body").append(b),"popup"===n.params.type&&(n.popup=a.popup('<div class="popup photo-browser-popup">'+b+"</div>"),s(n.popup).on("closed",n.onPopupClose)),"page"===n.params.type?(s(document).on("pageBeforeInit",n.onPageBeforeInit),s(document).on("pageBeforeRemove",n.onPageBeforeRemove),n.params.view||(n.params.view=a.mainView),void n.params.view.loadContent(b)):(n.layout(n.openIndex),void(n.params.onOpen&&n.params.onOpen(n))))},n.close=function(){n.opened=!1,n.swiperContainer&&0!==n.swiperContainer.length&&(n.params.onClose&&n.params.onClose(n),n.attachEvents(!0),"standalone"===n.params.type&&n.container.removeClass("photo-browser-in").addClass("photo-browser-out").animationEnd(function(){n.container.remove()}),n.swiper.destroy(),n.swiper=n.swiperContainer=n.swiperWrapper=n.slides=x=w=C=void 0)},n.onPopupClose=function(){n.close(),s(n.popup).off("pageBeforeInit",n.onPopupClose)},n.onPageBeforeInit=function(t){"photo-browser-slides"===t.detail.page.name&&n.layout(n.openIndex),s(document).off("pageBeforeInit",n.onPageBeforeInit)},n.onPageBeforeRemove=function(t){"photo-browser-slides"===t.detail.page.name&&n.close(),s(document).off("pageBeforeRemove",n.onPageBeforeRemove)},n.loadImageInSlide=function(t,e){if(t&&"undefined"!=typeof e&&0!==t.slides.length){var r=t.slides.eq(e);if(r.hasClass("photo-browser-slide-lazy")){var i=r.find("img");if(0!==i.length){var a=new Image,o=i.attr("data-src");a.onload=function(){i.attr("src",o),i.removeAttr("data-src"),r.removeClass("photo-browser-slide-lazy").find(".preloader").remove(),n.params.onImageLoaded&&n.params.onImageLoaded(n,r[0],i[0])},a.src=o,n.params.onImageLoad&&n.params.onImageLoad(n,r[0],i[0])}}}},n.lazyLoading=function(t,e){if(n.loadImageInSlide(t,e),n.params.lazyLoadingInPrevNext){var r=t.wrapper.find(".swiper-slide-next.photo-browser-slide-lazy");r.length>0&&n.loadImageInSlide(t,r.index());var i=t.wrapper.find(".swiper-slide-prev.photo-browser-slide-lazy");i.length>0&&n.loadImageInSlide(t,i.index())}},n.onSliderTransitionStart=function(t){n.activeIndex=t.activeIndex;var e=t.activeIndex+1,r=t.slides.length;if(n.params.loop&&(r-=2,e-=t.loopedSlides,1>e&&(e=r+e),e>r&&(e-=r)),n.container.find(".photo-browser-current").text(e),n.container.find(".photo-browser-total").text(r),s(".photo-browser-prev, .photo-browser-next").removeClass("photo-browser-link-inactive"),t.isBeginning&&!n.params.loop&&s(".photo-browser-prev").addClass("photo-browser-link-inactive"),t.isEnd&&!n.params.loop&&s(".photo-browser-next").addClass("photo-browser-link-inactive"),n.captions.length>0){n.captionsContainer.find(".photo-browser-caption-active").removeClass("photo-browser-caption-active");var i=n.params.loop?t.slides.eq(t.activeIndex).attr("data-swiper-slide-index"):n.activeIndex;n.captionsContainer.find('[data-caption-index="'+i+'"]').addClass("photo-browser-caption-active")}n.params.lazyLoading&&(n.params.lazyLoadingOnTransitionStart||!n.params.lazyLoadingOnTransitionStart&&!n.initialLazyLoaded)&&(n.initialLazyLoaded=!0,n.lazyLoading(t,n.activeIndex));var a=t.slides.eq(t.previousIndex).find("video");a.length>0&&"pause"in a[0]&&a[0].pause(),n.params.onSlideChangeStart&&n.params.onSlideChangeStart(t)},n.onSliderTransitionEnd=function(t){n.params.lazyLoading&&!n.params.lazyLoadingOnTransitionStart&&n.lazyLoading(t,n.activeIndex),n.params.zoom&&x&&t.previousIndex!==t.activeIndex&&(w.transform("translate3d(0,0,0) scale(1)"),C.transform("translate3d(0,0,0)"),x=w=C=void 0,k=S=1),n.params.onSlideChangeEnd&&n.params.onSlideChangeEnd(t)},n.layout=function(t){n.container="page"===n.params.type?s(".photo-browser-swiper-container").parents(".view"):s(".photo-browser"),"standalone"===n.params.type&&(n.container.addClass("photo-browser-in"),a.sizeNavbars(n.container)),n.swiperContainer=n.container.find(".photo-browser-swiper-container"),n.swiperWrapper=n.container.find(".photo-browser-swiper-wrapper"),n.slides=n.container.find(".photo-browser-slide"),n.captionsContainer=n.container.find(".photo-browser-captions"),n.captions=n.container.find(".photo-browser-caption");var e={nextButton:n.params.nextButton||".photo-browser-next",prevButton:n.params.prevButton||".photo-browser-prev",indexButton:n.params.indexButton,initialSlide:t,spaceBetween:n.params.spaceBetween,speed:n.params.speed,loop:n.params.loop,onTap:function(t,e){n.params.onTap&&n.params.onTap(t,e)},onClick:function(t,e){n.params.exposition&&n.toggleExposition(),n.params.onClick&&n.params.onClick(t,e)},onDoubleTap:function(t,e){n.toggleZoom(s(e.target).parents(".photo-browser-slide")),n.params.onDoubleTap&&n.params.onDoubleTap(t,e)},onTransitionStart:function(t){n.onSliderTransitionStart(t)},onTransitionEnd:function(t){n.onSliderTransitionEnd(t)}};n.params.swipeToClose&&"page"!==n.params.type&&(e.onTouchStart=n.swipeCloseTouchStart,e.onOppositeTouchMove=n.swipeCloseTouchMove,e.onTouchEnd=n.swipeCloseTouchEnd),n.swiper=a.swiper(n.swiperContainer,e),0===t&&n.onSliderTransitionStart(n.swiper),n.attachEvents()},n.attachEvents=function(t){var e=t?"off":"on";if(n.params.zoom){var r=n.params.loop?n.swiper.slides:n.slides;r[e]("gesturestart",n.onSlideGestureStart),r[e]("gesturechange",n.onSlideGestureChange),r[e]("gestureend",n.onSlideGestureEnd),r[e](a.touchEvents.start,n.onSlideTouchStart),r[e](a.touchEvents.move,n.onSlideTouchMove),r[e](a.touchEvents.end,n.onSlideTouchEnd)}n.container.find(".photo-browser-close-link")[e]("click",n.close)},n.exposed=!1,n.toggleExposition=function(){n.container&&n.container.toggleClass("photo-browser-exposed"),n.params.expositionHideCaptions&&n.captionsContainer.toggleClass("photo-browser-captions-exposed"),n.exposed=!n.exposed},n.enableExposition=function(){n.container&&n.container.addClass("photo-browser-exposed"),n.params.expositionHideCaptions&&n.captionsContainer.addClass("photo-browser-captions-exposed"),n.exposed=!0},n.disableExposition=function(){n.container&&n.container.removeClass("photo-browser-exposed"),n.params.expositionHideCaptions&&n.captionsContainer.removeClass("photo-browser-captions-exposed"),n.exposed=!1};var x,w,C,k=1,S=1,T=!1;n.onSlideGestureStart=function(){return x||(x=s(this),w=x.find("img, svg, canvas"),C=w.parent(".photo-browser-zoom-container"),0!==C.length)?(w.transition(0),void(T=!0)):void(w=void 0)},n.onSlideGestureChange=function(t){w&&0!==w.length&&(k=t.scale*S,k>n.params.maxZoom&&(k=n.params.maxZoom-1+Math.pow(k-n.params.maxZoom+1,.5)),k<n.params.minZoom&&(k=n.params.minZoom+1-Math.pow(n.params.minZoom-k+1,.5)),w.transform("translate3d(0,0,0) scale("+k+")"))},n.onSlideGestureEnd=function(){w&&0!==w.length&&(k=Math.max(Math.min(k,n.params.maxZoom),n.params.minZoom),w.transition(n.params.speed).transform("translate3d(0,0,0) scale("+k+")"),S=k,T=!1,1===k&&(x=void 0))},n.toggleZoom=function(){x||(x=n.swiper.slides.eq(n.swiper.activeIndex),w=x.find("img, svg, canvas"),C=w.parent(".photo-browser-zoom-container")),w&&0!==w.length&&(C.transition(300).transform("translate3d(0,0,0)"),k&&1!==k?(k=S=1,w.transition(300).transform("translate3d(0,0,0) scale(1)"),x=void 0):(k=S=n.params.maxZoom,w.transition(300).transform("translate3d(0,0,0) scale("+k+")")))};var A,E,M,D,P,O,N,L,I,R,B,z,F,q,H,U,j,V={},$={};n.onSlideTouchStart=function(t){w&&0!==w.length&&(A||("android"===a.device.os&&t.preventDefault(),A=!0,V.x="touchstart"===t.type?t.targetTouches[0].pageX:t.pageX,V.y="touchstart"===t.type?t.targetTouches[0].pageY:t.pageY))},n.onSlideTouchMove=function(t){if(w&&0!==w.length&&(n.swiper.allowClick=!1,A&&x)){E||(I=w[0].offsetWidth,R=w[0].offsetHeight,B=s.getTranslate(C[0],"x")||0,z=s.getTranslate(C[0],"y")||0,C.transition(0));var e=I*k,r=R*k;if(!(e<n.swiper.width&&r<n.swiper.height)){if(P=Math.min(n.swiper.width/2-e/2,0),N=-P,O=Math.min(n.swiper.height/2-r/2,0),L=-O,$.x="touchmove"===t.type?t.targetTouches[0].pageX:t.pageX,$.y="touchmove"===t.type?t.targetTouches[0].pageY:t.pageY,!E&&!T&&(Math.floor(P)===Math.floor(B)&&$.x<V.x||Math.floor(N)===Math.floor(B)&&$.x>V.x))return void(A=!1);t.preventDefault(),t.stopPropagation(),E=!0,M=$.x-V.x+B,D=$.y-V.y+z,P>M&&(M=P+1-Math.pow(P-M+1,.8)),M>N&&(M=N-1+Math.pow(M-N+1,.8)),O>D&&(D=O+1-Math.pow(O-D+1,.8)),D>L&&(D=L-1+Math.pow(D-L+1,.8)),F||(F=$.x),U||(U=$.y),q||(q=Date.now()),H=($.x-F)/(Date.now()-q)/2,j=($.y-U)/(Date.now()-q)/2,Math.abs($.x-F)<2&&(H=0),Math.abs($.y-U)<2&&(j=0),F=$.x,U=$.y,q=Date.now(),C.transform("translate3d("+M+"px, "+D+"px,0)")}}},n.onSlideTouchEnd=function(){if(w&&0!==w.length){if(!A||!E)return A=!1,void(E=!1);A=!1,E=!1;var t=300,e=300,r=H*t,i=M+r,a=j*e,o=D+a;0!==H&&(t=Math.abs((i-M)/H)),0!==j&&(e=Math.abs((o-D)/j));var s=Math.max(t,e);M=i,D=o;var l=I*k,u=R*k;P=Math.min(n.swiper.width/2-l/2,0),N=-P,O=Math.min(n.swiper.height/2-u/2,0),L=-O,M=Math.max(Math.min(M,N),P),D=Math.max(Math.min(D,L),O),C.transition(s).transform("translate3d("+M+"px, "+D+"px,0)")}};var W,G,X,Y,J,K=!1,Z=!0,Q=!1;return n.swipeCloseTouchStart=function(){Z&&(K=!0)},n.swipeCloseTouchMove=function(t,e){if(K){Q||(Q=!0,G="touchmove"===e.type?e.targetTouches[0].pageY:e.pageY,Y=n.swiper.slides.eq(n.swiper.activeIndex),J=(new Date).getTime()),e.preventDefault(),X="touchmove"===e.type?e.targetTouches[0].pageY:e.pageY,W=G-X;var r=1-Math.abs(W)/300;Y.transform("translate3d(0,"+-W+"px,0)"),n.swiper.container.css("opacity",r).transition(0)}},n.swipeCloseTouchEnd=function(){if(K=!1,!Q)return void(Q=!1);Q=!1,Z=!1;var t=Math.abs(W),e=(new Date).getTime()-J;return 300>e&&t>20||e>=300&&t>100?void setTimeout(function(){"standalone"===n.params.type&&n.close(),"popup"===n.params.type&&a.closeModal(n.popup),n.params.onSwipeToClose&&n.params.onSwipeToClose(n),Z=!0},0):(0!==t?Y.addClass("transitioning").transitionEnd(function(){Z=!0,Y.removeClass("transitioning")}):Z=!0,n.swiper.container.css("opacity","").transition(""),void Y.transform(""))},n};a.photoBrowser=function(t){return new p(t)};var g=function(t){function e(){var t=!1;return u.params.convertToPopover?(!u.inline&&u.params.input&&(a.device.ios?t=!!a.device.ipad:s(window).width()>=768&&(t=!0)),t):t}function n(){return!!(u.opened&&u.container&&u.container.length>0&&u.container.parents(".popover").length>0)}function r(){if(u.opened)for(var t=0;t<u.cols.length;t++)u.cols[t].divider||(u.cols[t].calcSize(),u.cols[t].setValue(u.cols[t].value,0,!1))}function i(t){if(t.preventDefault(),!u.opened&&(u.open(),u.params.scrollToInput&&!e())){var n=u.input.parents(".page-content");if(0===n.length)return;var r,i=parseInt(n.css("padding-top"),10),a=parseInt(n.css("padding-bottom"),10),o=n[0].offsetHeight-i-u.container.height(),s=n[0].scrollHeight-i-u.container.height(),l=u.input.offset().top-i+u.input[0].offsetHeight;if(l>o){var c=n.scrollTop()+l-o;c+o>s&&(r=c+o-s+a,o===s&&(r=u.container.height()),n.css({"padding-bottom":r+"px"})),n.scrollTop(c,300)}}}function o(t){n()||(u.input&&u.input.length>0?t.target!==u.input[0]&&0===s(t.target).parents(".picker-modal").length&&u.close():0===s(t.target).parents(".picker-modal").length&&u.close())}function l(){u.opened=!1,u.input.parents(".page-content").css({"padding-bottom":""}),u.params.onClose&&u.params.onClose(u),u.container.find(".picker-items-col").each(function(){u.destroyPickerCol(this)})}var u=this,c={updateValuesOnMomentum:!1,updateValuesOnTouchmove:!0,rotateEffect:!1,momentumRatio:7,freeMode:!1,scrollToInput:!0,inputReadOnly:!0,convertToPopover:!0,toolbar:!0,toolbarCloseText:"Done",toolbarTemplate:'<div class="toolbar"><div class="toolbar-inner"><div class="left"></div><div class="right"><a href="#" class="link close-picker">{{closeText}}</a></div></div></div>'};t=t||{};for(var f in c)"undefined"==typeof t[f]&&(t[f]=c[f]);u.params=t,u.cols=[],u.initialized=!1,u.inline=!!u.params.container;var d=a.device.ios||navigator.userAgent.toLowerCase().indexOf("safari")>=0&&navigator.userAgent.toLowerCase().indexOf("chrome")<0&&!a.device.android;return u.setValue=function(t,e){for(var n=0,r=0;r<u.cols.length;r++)u.cols[r]&&!u.cols[r].divider&&(u.cols[r].setValue(t[n],e),n++)},u.updateValue=function(){for(var t=[],e=[],n=0;n<u.cols.length;n++)u.cols[n].divider||(t.push(u.cols[n].value),e.push(u.cols[n].displayValue));t.indexOf(void 0)>=0||(u.value=t,u.displayValue=e,u.params.onChange&&u.params.onChange(u,u.value,u.displayValue),u.input&&u.input.length>0&&(s(u.input).val(u.params.formatValue?u.params.formatValue(u,u.value,u.displayValue):u.value.join(" ")),s(u.input).trigger("change")))},u.initPickerCol=function(t,e){function n(){_=s.requestAnimationFrame(function(){h.updateItems(void 0,void 0,0),n()})}function r(t){x||b||(t.preventDefault(),b=!0,w=C="touchstart"===t.type?t.targetTouches[0].pageY:t.pageY,k=(new Date).getTime(),O=!0,T=E=s.getTranslate(h.wrapper[0],"y"))}function i(t){if(b){t.preventDefault(),O=!1,C="touchmove"===t.type?t.targetTouches[0].pageY:t.pageY,x||(s.cancelAnimationFrame(_),x=!0,T=E=s.getTranslate(h.wrapper[0],"y"),h.wrapper.transition(0)),t.preventDefault();var e=C-w;E=T+e,A=void 0,v>E&&(E=v-Math.pow(v-E,.8),A="min"),E>y&&(E=y+Math.pow(E-y,.8),A="max"),h.wrapper.transform("translate3d(0,"+E+"px,0)"),h.updateItems(void 0,E,0,u.params.updateValuesOnTouchmove),D=E-M||E,P=(new Date).getTime(),M=E}}function o(){if(!b||!x)return void(b=x=!1);b=x=!1,h.wrapper.transition(""),A&&h.wrapper.transform("min"===A?"translate3d(0,"+v+"px,0)":"translate3d(0,"+y+"px,0)"),S=(new Date).getTime();var t,e;S-k>300?e=E:(t=Math.abs(D/(S-P)),e=E+D*u.params.momentumRatio),e=Math.max(Math.min(e,y),v);var r=-Math.floor((e-y)/g);u.params.freeMode||(e=-r*g+y),h.wrapper.transform("translate3d(0,"+parseInt(e,10)+"px,0)"),h.updateItems(r,e,"",!0),u.params.updateValuesOnMomentum&&(n(),h.wrapper.transitionEnd(function(){s.cancelAnimationFrame(_)})),setTimeout(function(){O=!0},100)}function l(){if(O){s.cancelAnimationFrame(_);var t=s(this).attr("data-picker-value");h.setValue(t)}}var c=s(t),f=c.index(),h=u.cols[f];if(!h.divider){h.container=c,h.wrapper=h.container.find(".picker-items-col-wrapper"),h.items=h.wrapper.find(".picker-item");var p,g,m,v,y;h.replaceValues=function(t,e){h.values=t,h.displayValues=e;var n=u.columnHTML(h,!0);h.wrapper.html(n),h.items=h.wrapper.find(".picker-item"),h.calcSize(),h.setValue(h.values[0],0,!0)},h.calcSize=function(){u.params.rotateEffect&&(h.container.removeClass("picker-items-col-absolute"),h.width||h.container.css({width:""}));var t,e;t=0,e=h.container[0].offsetHeight,p=h.wrapper[0].offsetHeight,g=h.items[0].offsetHeight,m=g*h.items.length,v=e/2-m+g/2,y=e/2-g/2,h.width&&(t=h.width,parseInt(t,10)===t&&(t+="px"),h.container.css({width:t})),u.params.rotateEffect&&(h.width||(h.items.each(function(){var e=s(this);e.css({width:"auto"}),t=Math.max(t,e[0].offsetWidth),e.css({width:""})}),h.container.css({width:t+2+"px"})),h.container.addClass("picker-items-col-absolute"))},h.calcSize(),h.wrapper.transform("translate3d(0,"+y+"px,0)").transition(0);var _;h.setValue=function(t,e,r){"undefined"==typeof e&&(e="");var i=h.wrapper.find('.picker-item[data-picker-value="'+t+'"]').index();if("undefined"!=typeof i&&-1!==i){var a=-i*g+y;h.wrapper.transition(e),h.wrapper.transform("translate3d(0,"+a+"px,0)"),u.params.updateValuesOnMomentum&&h.activeIndex&&h.activeIndex!==i&&(s.cancelAnimationFrame(_),h.wrapper.transitionEnd(function(){s.cancelAnimationFrame(_)}),n()),h.updateItems(i,a,e,r)}},h.updateItems=function(t,e,n,r){"undefined"==typeof e&&(e=s.getTranslate(h.wrapper[0],"y")),"undefined"==typeof t&&(t=-Math.round((e-y)/g)),0>t&&(t=0),t>=h.items.length&&(t=h.items.length-1);var i=h.activeIndex;h.activeIndex=t,h.wrapper.find(".picker-selected, .picker-after-selected, .picker-before-selected").removeClass("picker-selected picker-after-selected picker-before-selected"),h.items.transition(n);var a=h.items.eq(t).addClass("picker-selected").transform("");a.prevAll().addClass("picker-before-selected"),a.nextAll().addClass("picker-after-selected"),(r||"undefined"==typeof r)&&(h.value=a.attr("data-picker-value"),h.displayValue=h.displayValues?h.displayValues[t]:h.value,i!==t&&(h.onChange&&h.onChange(u,h.value,h.displayValue),u.updateValue())),u.params.rotateEffect&&((e-(Math.floor((e-y)/g)*g+y))/g,h.items.each(function(){var t=s(this),n=t.index()*g,r=y-e,i=n-r,a=i/g,o=Math.ceil(h.height/g/2)+1,l=-18*a;l>180&&(l=180),-180>l&&(l=-180),Math.abs(a)>o?t.addClass("picker-item-far"):t.removeClass("picker-item-far"),t.transform("translate3d(0, "+(-e+y)+"px, "+(d?-110:0)+"px) rotateX("+l+"deg)")}))},e&&h.updateItems(0,y,0);var b,x,w,C,k,S,T,A,E,M,D,P,O=!0;h.container.on(a.touchEvents.start,r),h.container.on(a.touchEvents.move,i),h.container.on(a.touchEvents.end,o),h.items.on("click",l),h.container[0].f7DestroyPickerCol=function(){h.container.off(a.touchEvents.start,r),h.container.off(a.touchEvents.move,i),h.container.off(a.touchEvents.end,o),h.items.off("click",l)}}},u.destroyPickerCol=function(t){t=s(t),"f7DestroyPickerCol"in t[0]&&t[0].f7DestroyPickerCol()},s(window).on("resize",r),u.columnHTML=function(t,e){var n="",r="";if(t.divider)r+='<div class="picker-items-col picker-items-col-divider '+(t.textAlign?"picker-items-col-"+t.textAlign:"")+" "+(t.cssClass||"")+'">'+t.content+"</div>";else{for(var i=0;i<t.values.length;i++)n+='<div class="picker-item" data-picker-value="'+t.values[i]+'">'+(t.displayValues?t.displayValues[i]:t.values[i])+"</div>";r+='<div class="picker-items-col '+(t.textAlign?"picker-items-col-"+t.textAlign:"")+" "+(t.cssClass||"")+'"><div class="picker-items-col-wrapper">'+n+"</div></div>"}return e?n:r},u.layout=function(){var t,e="",n="";u.cols=[];var r="";for(t=0;t<u.params.cols.length;t++){var i=u.params.cols[t];r+=u.columnHTML(u.params.cols[t]),u.cols.push(i)}n="picker-modal picker-columns "+(u.params.cssClass||"")+(u.params.rotateEffect?" picker-3d":""),e='<div class="'+n+'">'+(u.params.toolbar?u.params.toolbarTemplate.replace(/{{closeText}}/g,u.params.toolbarCloseText):"")+'<div class="picker-modal-inner picker-items">'+r+'<div class="picker-center-highlight"></div></div></div>',u.pickerHTML=e},u.params.input&&(u.input=s(u.params.input),u.params.inputReadOnly&&u.input.prop("readOnly",!0),u.inline||u.input.on("click",i),u.params.inputReadOnly&&u.input.on("focus mousedown",function(t){t.preventDefault()})),u.inline||s("html").on("click",o),u.opened=!1,u.open=function(){var t=e();u.opened||(u.layout(),t?(u.pickerHTML='<div class="popover popover-picker-columns"><div class="popover-inner">'+u.pickerHTML+"</div></div>",u.popover=a.popover(u.pickerHTML,u.params.input,!0),u.container=s(u.popover).find(".picker-modal"),s(u.popover).on("close",function(){l()})):u.inline?(u.container=s(u.pickerHTML),
u.container.addClass("picker-modal-inline"),s(u.params.container).append(u.container)):(u.container=s(a.pickerModal(u.pickerHTML)),s(u.container).on("close",function(){l()})),u.container[0].f7Picker=u,u.container.find(".picker-items-col").each(function(){var t=!0;(!u.initialized&&u.params.value||u.initialized&&u.value)&&(t=!1),u.initPickerCol(this,t)}),u.initialized?u.value&&u.setValue(u.value,0):u.params.value&&u.setValue(u.params.value,0)),u.opened=!0,u.initialized=!0,u.params.onOpen&&u.params.onOpen(u)},u.close=function(){return u.opened&&!u.inline?n()?void a.closeModal(u.popover):void a.closeModal(u.container):void 0},u.destroy=function(){u.close(),u.params.input&&u.input.off("click focus",i),s("html").off("click",o),s(window).off("resize",r)},u.inline&&u.open(),u};a.picker=function(t){return new g(t)};var m=function(t){function e(){var t=!1;return u.params.convertToPopover?(!u.inline&&u.params.input&&(a.device.ios?t=!!a.device.ipad:s(window).width()>=768&&(t=!0)),t):t}function n(){return!!(u.opened&&u.container&&u.container.length>0&&u.container.parents(".popover").length>0)}function r(t){t=new Date(t);var e=t.getFullYear(),n=t.getMonth(),r=n+1,i=t.getDate(),a=t.getDay();return u.params.dateFormat.replace(/yyyy/g,e).replace(/yy/g,(e+"").substring(2)).replace(/mm/g,10>r?"0"+r:r).replace(/m/g,r).replace(/MM/g,u.params.monthNames[n]).replace(/M/g,u.params.monthNamesShort[n]).replace(/dd/g,10>i?"0"+i:i).replace(/d/g,i).replace(/DD/g,u.params.dayNames[a]).replace(/D/g,u.params.dayNamesShort[a])}function i(t){if(t.preventDefault(),!u.opened&&(u.open(),u.params.scrollToInput&&!e())){var n=u.input.parents(".page-content");if(0===n.length)return;var r,i=parseInt(n.css("padding-top"),10),a=parseInt(n.css("padding-bottom"),10),o=n[0].offsetHeight-i-u.container.height(),s=n[0].scrollHeight-i-u.container.height(),l=u.input.offset().top-i+u.input[0].offsetHeight;if(l>o){var c=n.scrollTop()+l-o;c+o>s&&(r=c+o-s+a,o===s&&(r=u.container.height()),n.css({"padding-bottom":r+"px"})),n.scrollTop(c,300)}}}function o(t){n()||(u.input&&u.input.length>0?t.target!==u.input[0]&&0===s(t.target).parents(".picker-modal").length&&u.close():0===s(t.target).parents(".picker-modal").length&&u.close())}function l(){u.opened=!1,u.input.parents(".page-content").css({"padding-bottom":""}),u.params.onClose&&u.params.onClose(u),u.destroyCalendarEvents()}var u=this,c={monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],firstDay:1,weekendDays:[0,6],multiple:!1,dateFormat:"yyyy-mm-dd",direction:"horizontal",minDate:null,maxDate:null,touchMove:!0,animate:!0,closeOnSelect:!1,monthPicker:!0,monthPickerTemplate:'<div class="picker-calendar-month-picker"><a href="#" class="link icon-only picker-calendar-prev-month"><i class="icon icon-prev"></i></a><span class="current-month-value"></span><a href="#" class="link icon-only picker-calendar-next-month"><i class="icon icon-next"></i></a></div>',yearPicker:!0,yearPickerTemplate:'<div class="picker-calendar-year-picker"><a href="#" class="link icon-only picker-calendar-prev-year"><i class="icon icon-prev"></i></a><span class="current-year-value"></span><a href="#" class="link icon-only picker-calendar-next-year"><i class="icon icon-next"></i></a></div>',weekHeader:!0,scrollToInput:!0,inputReadOnly:!0,convertToPopover:!0,toolbar:!0,toolbarCloseText:"Done",toolbarTemplate:'<div class="toolbar"><div class="toolbar-inner">{{monthPicker}}{{yearPicker}}</div></div>'};t=t||{};for(var f in c)"undefined"==typeof t[f]&&(t[f]=c[f]);u.params=t,u.initialized=!1,u.inline=!!u.params.container,u.isH="horizontal"===u.params.direction;var d=u.isH&&a.rtl?-1:1;return u.animating=!1,u.addValue=function(t){if(u.params.multiple){u.value||(u.value=[]);for(var e,n=0;n<u.value.length;n++)new Date(t).getTime()===new Date(u.value[n]).getTime()&&(e=n);"undefined"==typeof e?u.value.push(t):u.value.splice(e,1),u.updateValue()}else u.value=[t],u.updateValue()},u.setValue=function(t){u.value=t,u.updateValue()},u.updateValue=function(){u.wrapper.find(".picker-calendar-day-selected").removeClass("picker-calendar-day-selected");var t,e;for(t=0;t<u.value.length;t++){var n=new Date(u.value[t]);u.wrapper.find('.picker-calendar-day[data-date="'+n.getFullYear()+"-"+n.getMonth()+"-"+n.getDate()+'"]').addClass("picker-calendar-day-selected")}if(u.params.onChange&&u.params.onChange(u,u.value),u.input&&u.input.length>0){if(u.params.formatValue)e=u.params.formatValue(u,u.value);else{for(e=[],t=0;t<u.value.length;t++)e.push(r(u.value[t]));e=e.join(", ")}s(u.input).val(e),s(u.input).trigger("change")}},u.initCalendarEvents=function(){function t(t){o||i||(i=!0,l=h="touchstart"===t.type?t.targetTouches[0].pageX:t.pageX,c=h="touchstart"===t.type?t.targetTouches[0].pageY:t.pageY,p=(new Date).getTime(),b=0,C=!0,w=void 0,m=v=u.monthsTranslate)}function e(t){if(i){if(f="touchmove"===t.type?t.targetTouches[0].pageX:t.pageX,h="touchmove"===t.type?t.targetTouches[0].pageY:t.pageY,"undefined"==typeof w&&(w=!!(w||Math.abs(h-c)>Math.abs(f-l))),u.isH&&w)return void(i=!1);if(t.preventDefault(),u.animating)return void(i=!1);C=!1,o||(o=!0,y=u.wrapper[0].offsetWidth,_=u.wrapper[0].offsetHeight,u.wrapper.transition(0)),t.preventDefault(),x=u.isH?f-l:h-c,b=x/(u.isH?y:_),v=100*(u.monthsTranslate*d+b),u.wrapper.transform("translate3d("+(u.isH?v:0)+"%, "+(u.isH?0:v)+"%, 0)")}}function n(){return i&&o?(i=o=!1,g=(new Date).getTime(),300>g-p?Math.abs(x)<10?u.resetMonth():x>=10?a.rtl?u.nextMonth():u.prevMonth():a.rtl?u.prevMonth():u.nextMonth():-.5>=b?a.rtl?u.prevMonth():u.nextMonth():b>=.5?a.rtl?u.nextMonth():u.prevMonth():u.resetMonth(),void setTimeout(function(){C=!0},100)):void(i=o=!1)}function r(t){if(C){var e=s(t.target).parents(".picker-calendar-day");if(0===e.length&&s(t.target).hasClass("picker-calendar-day")&&(e=s(t.target)),0!==e.length&&(!e.hasClass("picker-calendar-day-selected")||u.params.multiple)&&!e.hasClass("picker-calendar-day-disabled")){e.hasClass("picker-calendar-day-next")&&u.nextMonth(),e.hasClass("picker-calendar-day-prev")&&u.prevMonth();var n=e.attr("data-year"),r=e.attr("data-month"),i=e.attr("data-day");u.params.onDayClick&&u.params.onDayClick(u,e[0],n,r,i),u.addValue(new Date(n,r,i).getTime()),u.params.closeOnSelect&&u.close()}}}var i,o,l,c,f,h,p,g,m,v,y,_,b,x,w,C=!0;u.container.find(".picker-calendar-prev-month").on("click",u.prevMonth),u.container.find(".picker-calendar-next-month").on("click",u.nextMonth),u.container.find(".picker-calendar-prev-year").on("click",u.prevYear),u.container.find(".picker-calendar-next-year").on("click",u.nextYear),u.wrapper.on("click",r),u.params.touchMove&&(u.wrapper.on(a.touchEvents.start,t),u.wrapper.on(a.touchEvents.move,e),u.wrapper.on(a.touchEvents.end,n)),u.container[0].f7DestroyCalendarEvents=function(){u.container.find(".picker-calendar-prev-month").off("click",u.prevMonth),u.container.find(".picker-calendar-next-month").off("click",u.nextMonth),u.container.find(".picker-calendar-prev-year").off("click",u.prevYear),u.container.find(".picker-calendar-next-year").off("click",u.nextYear),u.wrapper.off("click",r),u.params.touchMove&&(u.wrapper.off(a.touchEvents.start,t),u.wrapper.off(a.touchEvents.move,e),u.wrapper.off(a.touchEvents.end,n))}},u.destroyCalendarEvents=function(){"f7DestroyCalendarEvents"in u.container[0]&&u.container[0].f7DestroyCalendarEvents()},u.daysInMonth=function(t){var e=new Date(t);return new Date(e.getFullYear(),e.getMonth()+1,0).getDate()},u.monthHTML=function(t,e){t=new Date(t);var n=t.getFullYear(),r=t.getMonth();t.getDate(),"next"===e&&(t=11===r?new Date(n+1,0):new Date(n,r+1,1)),"prev"===e&&(t=0===r?new Date(n-1,11):new Date(n,r-1,1)),("next"===e||"prev"===e)&&(r=t.getMonth(),n=t.getFullYear());var i=u.daysInMonth(new Date(t.getFullYear(),t.getMonth()).getTime()-864e6),a=u.daysInMonth(t),o=new Date(t.getFullYear(),t.getMonth()).getDay();0===o&&(o=7);var s,l,c,f=[],d=6,h=7,p="",g=0+(u.params.firstDay-1),m=(new Date).setHours(0,0,0,0),v=u.params.minDate?new Date(u.params.minDate).getTime():null,y=u.params.maxDate?new Date(u.params.maxDate).getTime():null;if(u.value&&u.value.length)for(l=0;l<u.value.length;l++)f.push(new Date(u.value[l]).setHours(0,0,0,0));for(l=1;d>=l;l++){var _="";for(c=1;h>=c;c++){var b=c;g++;var x=g-o,w="";0>x?(x=i+x+1,w+=" picker-calendar-day-prev",s=new Date(0>r-1?n-1:n,0>r-1?11:r-1,x).getTime()):(x+=1,x>a?(x-=a,w+=" picker-calendar-day-next",s=new Date(r+1>11?n+1:n,r+1>11?0:r+1,x).getTime()):s=new Date(n,r,x).getTime()),s===m&&(w+=" picker-calendar-day-today"),f.indexOf(s)>=0&&(w+=" picker-calendar-day-selected"),u.params.weekendDays.indexOf(b-1)>=0&&(w+=" picker-calendar-day-weekend"),(v&&v>s||y&&s>y)&&(w+=" picker-calendar-day-disabled"),s=new Date(s);var C=s.getFullYear(),k=s.getMonth();_+='<div data-year="'+C+'" data-month="'+k+'" data-day="'+x+'" class="picker-calendar-day'+w+'" data-date="'+(C+"-"+k+"-"+x)+'"><span>'+x+"</span></div>"}p+='<div class="picker-calendar-row">'+_+"</div>"}return p='<div class="picker-calendar-month" data-year="'+n+'" data-month="'+r+'">'+p+"</div>"},u.animating=!1,u.updateCurrentMonthYear=function(t){"undefined"==typeof t?(u.currentMonth=parseInt(u.months.eq(1).attr("data-month"),10),u.currentYear=parseInt(u.months.eq(1).attr("data-year"),10)):(u.currentMonth=parseInt(u.months.eq("next"===t?u.months.length-1:0).attr("data-month"),10),u.currentYear=parseInt(u.months.eq("next"===t?u.months.length-1:0).attr("data-year"),10)),u.container.find(".current-month-value").text(u.params.monthNames[u.currentMonth]),u.container.find(".current-year-value").text(u.currentYear)},u.onMonthChangeStart=function(t){u.updateCurrentMonthYear(t),u.months.removeClass("picker-calendar-month-current picker-calendar-month-prev picker-calendar-month-next");var e="next"===t?u.months.length-1:0;u.months.eq(e).addClass("picker-calendar-month-current"),u.months.eq("next"===t?e-1:e+1).addClass("next"===t?"picker-calendar-month-prev":"picker-calendar-month-next"),u.params.onMonthYearChangeStart&&u.params.onMonthYearChangeStart(u,u.currentYear,u.currentMonth)},u.onMonthChangeEnd=function(t,e){u.animating=!1;var n,r,i;u.wrapper.find(".picker-calendar-month:not(.picker-calendar-month-prev):not(.picker-calendar-month-current):not(.picker-calendar-month-next)").remove(),"undefined"==typeof t&&(t="next",e=!0),e?(u.wrapper.find(".picker-calendar-month-next, .picker-calendar-month-prev").remove(),r=u.monthHTML(new Date(u.currentYear,u.currentMonth),"prev"),n=u.monthHTML(new Date(u.currentYear,u.currentMonth),"next")):i=u.monthHTML(new Date(u.currentYear,u.currentMonth),t),("next"===t||e)&&u.wrapper.append(i||n),("prev"===t||e)&&u.wrapper.prepend(i||r),u.months=u.wrapper.find(".picker-calendar-month"),u.setMonthsTranslate(u.monthsTranslate),u.params.onMonthAdd&&u.params.onMonthAdd(u,"next"===t?u.months.eq(u.months.length-1)[0]:u.months.eq(0)[0]),u.params.onMonthYearChangeEnd&&u.params.onMonthYearChangeEnd(u,u.currentYear,u.currentMonth)},u.setMonthsTranslate=function(t){t=t||u.monthsTranslate||0,"undefined"==typeof u.monthsTranslate&&(u.monthsTranslate=t),u.months.removeClass("picker-calendar-month-current picker-calendar-month-prev picker-calendar-month-next");var e=100*-(t+1)*d,n=100*-t*d,r=100*-(t-1)*d;u.months.eq(0).transform("translate3d("+(u.isH?e:0)+"%, "+(u.isH?0:e)+"%, 0)").addClass("picker-calendar-month-prev"),u.months.eq(1).transform("translate3d("+(u.isH?n:0)+"%, "+(u.isH?0:n)+"%, 0)").addClass("picker-calendar-month-current"),u.months.eq(2).transform("translate3d("+(u.isH?r:0)+"%, "+(u.isH?0:r)+"%, 0)").addClass("picker-calendar-month-next")},u.nextMonth=function(t){("undefined"==typeof t||"object"==typeof t)&&(t="",u.params.animate||(t=0));var e=parseInt(u.months.eq(u.months.length-1).attr("data-month"),10),n=parseInt(u.months.eq(u.months.length-1).attr("data-year"),10),r=new Date(n,e),i=r.getTime(),a=!u.animating;if(u.params.maxDate&&i>new Date(u.params.maxDate).getTime())return u.resetMonth();if(u.monthsTranslate--,e===u.currentMonth){var o=100*-u.monthsTranslate*d,l=s(u.monthHTML(i,"next")).transform("translate3d("+(u.isH?o:0)+"%, "+(u.isH?0:o)+"%, 0)").addClass("picker-calendar-month-next");u.wrapper.append(l[0]),u.months=u.wrapper.find(".picker-calendar-month"),u.params.onMonthAdd&&u.params.onMonthAdd(u,u.months.eq(u.months.length-1)[0])}u.animating=!0,u.onMonthChangeStart("next");var c=100*u.monthsTranslate*d;u.wrapper.transition(t).transform("translate3d("+(u.isH?c:0)+"%, "+(u.isH?0:c)+"%, 0)"),a&&u.wrapper.transitionEnd(function(){u.onMonthChangeEnd("next")}),u.params.animate||u.onMonthChangeEnd("next")},u.prevMonth=function(t){("undefined"==typeof t||"object"==typeof t)&&(t="",u.params.animate||(t=0));var e=parseInt(u.months.eq(0).attr("data-month"),10),n=parseInt(u.months.eq(0).attr("data-year"),10),r=new Date(n,e+1,(-1)),i=r.getTime(),a=!u.animating;if(u.params.minDate&&i<new Date(u.params.minDate).getTime())return u.resetMonth();if(u.monthsTranslate++,e===u.currentMonth){var o=100*-u.monthsTranslate*d,l=s(u.monthHTML(i,"prev")).transform("translate3d("+(u.isH?o:0)+"%, "+(u.isH?0:o)+"%, 0)").addClass("picker-calendar-month-prev");u.wrapper.prepend(l[0]),u.months=u.wrapper.find(".picker-calendar-month"),u.params.onMonthAdd&&u.params.onMonthAdd(u,u.months.eq(0)[0])}u.animating=!0,u.onMonthChangeStart("prev");var c=100*u.monthsTranslate*d;u.wrapper.transition(t).transform("translate3d("+(u.isH?c:0)+"%, "+(u.isH?0:c)+"%, 0)"),a&&u.wrapper.transitionEnd(function(){u.onMonthChangeEnd("prev")}),u.params.animate||u.onMonthChangeEnd("prev")},u.resetMonth=function(t){"undefined"==typeof t&&(t="");var e=100*u.monthsTranslate*d;u.wrapper.transition(t).transform("translate3d("+(u.isH?e:0)+"%, "+(u.isH?0:e)+"%, 0)")},u.setYearMonth=function(t,e,n){"undefined"==typeof t&&(t=u.currentYear),"undefined"==typeof e&&(e=u.currentMonth),("undefined"==typeof n||"object"==typeof n)&&(n="",u.params.animate||(n=0));var r=new Date(t,e).getTime();if(u.params.maxDate&&r>new Date(u.params.maxDate).getTime())return!1;if(u.params.minDate&&r<new Date(u.params.minDate).getTime())return!1;var i,a=new Date(u.currentYear,u.currentMonth).getTime(),o=u.monthHTML(new Date(t,e));u.monthsTranslate=u.monthsTranslate||0;var s,l,c=u.monthsTranslate,f=!u.animating;r>a?(u.monthsTranslate--,i="next",u.animating||u.months.eq(u.months.length-1).remove(),u.wrapper.append(o),u.months=u.wrapper.find(".picker-calendar-month"),s=100*-(c-1)*d,u.months.eq(u.months.length-1).transform("translate3d("+(u.isH?s:0)+"%, "+(u.isH?0:s)+"%, 0)").addClass("picker-calendar-month-next")):(u.monthsTranslate++,i="prev",u.animating||u.months.eq(0).remove(),u.wrapper.prepend(o),u.months=u.wrapper.find(".picker-calendar-month"),s=100*-(c+1)*d,u.months.eq(0).transform("translate3d("+(u.isH?s:0)+"%, "+(u.isH?0:s)+"%, 0)").addClass("picker-calendar-month-prev")),u.params.onMonthAdd&&u.params.onMonthAdd(u,"next"===i?u.months.eq(u.months.length-1)[0]:u.months.eq(0)[0]),u.animating=!0,u.onMonthChangeStart(i),l=100*u.monthsTranslate*d,u.wrapper.transition(n).transform("translate3d("+(u.isH?l:0)+"%, "+(u.isH?0:l)+"%, 0)"),f&&u.wrapper.transitionEnd(function(){u.onMonthChangeEnd(i,!0)}),u.params.animate||u.onMonthChangeEnd(i)},u.nextYear=function(){u.setYearMonth(u.currentYear+1)},u.prevYear=function(){u.setYearMonth(u.currentYear-1)},u.layout=function(){var t,e="",n="",r=u.value&&u.value.length?u.value[0]:(new Date).setHours(0,0,0,0),i=u.monthHTML(r,"prev"),a=u.monthHTML(r),o=u.monthHTML(r,"next"),s='<div class="picker-calendar-months"><div class="picker-calendar-months-wrapper">'+(i+a+o)+"</div></div>",l="";if(u.params.weekHeader){for(t=0;7>t;t++){var c=t+u.params.firstDay>6?t-7+u.params.firstDay:t+u.params.firstDay,f=u.params.dayNamesShort[c];l+='<div class="picker-calendar-week-day '+(u.params.weekendDays.indexOf(c)>=0?"picker-calendar-week-day-weekend":"")+'"> '+f+"</div>"}l='<div class="picker-calendar-week-days">'+l+"</div>"}n="picker-modal picker-calendar "+(u.params.cssClass||"");var d=u.params.toolbar?u.params.toolbarTemplate.replace(/{{closeText}}/g,u.params.toolbarCloseText):"";u.params.toolbar&&(d=u.params.toolbarTemplate.replace(/{{closeText}}/g,u.params.toolbarCloseText).replace(/{{monthPicker}}/g,u.params.monthPicker?u.params.monthPickerTemplate:"").replace(/{{yearPicker}}/g,u.params.yearPicker?u.params.yearPickerTemplate:"")),e='<div class="'+n+'">'+d+'<div class="picker-modal-inner">'+l+s+"</div></div>",u.pickerHTML=e},u.params.input&&(u.input=s(u.params.input),u.params.inputReadOnly&&u.input.prop("readOnly",!0),u.inline||u.input.on("click",i),u.params.inputReadOnly&&u.input.on("focus mousedown",function(t){t.preventDefault()})),u.inline||s("html").on("click",o),u.opened=!1,u.open=function(){var t=e(),n=!1;u.opened||(u.value||u.params.value&&(u.value=u.params.value,n=!0),u.layout(),t?(u.pickerHTML='<div class="popover popover-picker-calendar"><div class="popover-inner">'+u.pickerHTML+"</div></div>",u.popover=a.popover(u.pickerHTML,u.params.input,!0),u.container=s(u.popover).find(".picker-modal"),s(u.popover).on("close",function(){l()})):u.inline?(u.container=s(u.pickerHTML),u.container.addClass("picker-modal-inline"),s(u.params.container).append(u.container)):(u.container=s(a.pickerModal(u.pickerHTML)),s(u.container).on("close",function(){l()})),u.container[0].f7Calendar=u,u.wrapper=u.container.find(".picker-calendar-months-wrapper"),u.months=u.wrapper.find(".picker-calendar-month"),u.updateCurrentMonthYear(),u.monthsTranslate=0,u.setMonthsTranslate(),u.initCalendarEvents(),n&&u.updateValue()),u.opened=!0,u.initialized=!0,u.params.onMonthAdd&&u.months.each(function(){u.params.onMonthAdd(u,this)}),u.params.onOpen&&u.params.onOpen(u)},u.close=function(){return u.opened&&!u.inline?n()?void a.closeModal(u.popover):void a.closeModal(u.container):void 0},u.destroy=function(){u.close(),u.params.input&&u.input.off("click focus",i),s("html").off("click",o)},u.inline&&u.open(),u};a.calendar=function(t){return new m(t)};var v;a.addNotification=function(t){if(t){"undefined"==typeof t.media&&(t.media=a.params.notificationMedia),"undefined"==typeof t.title&&(t.title=a.params.notificationTitle),"undefined"==typeof t.subtitle&&(t.subtitle=a.params.notificationSubtitle),"undefined"==typeof t.closeIcon&&(t.closeIcon=a.params.notificationCloseIcon),"undefined"==typeof t.hold&&(t.hold=a.params.notificationHold),"undefined"==typeof t.closeOnClick&&(t.closeOnClick=a.params.notificationCloseOnClick),v||(v=document.createElement("div"));var e=s(".notifications");0===e.length&&(s("body").append('<div class="notifications list-block media-list"><ul></ul></div>'),e=s(".notifications"));var n,r=e.children("ul");n=t.custom?"<li>"+t.custom+"</li>":'<li class="notification-item notification-hidden"><div class="item-content">'+(t.media?'<div class="item-media">'+t.media+"</div>":"")+'<div class="item-inner"><div class="item-title-row">'+(t.title?'<div class="item-title">'+t.title+"</div>":"")+(t.closeIcon?'<div class="item-after"><a href="#" class="close-notification"><span></span></a></div>':"")+"</div>"+(t.subtitle?'<div class="item-subtitle">'+t.subtitle+"</div>":"")+(t.message?'<div class="item-text">'+t.message+"</div>":"")+"</div></div></li>",v.innerHTML=n;var i=s(v).children();i.on("click",function(e){var n=!1;s(e.target).is(".close-notification")||s(e.target).parents(".close-notification").length>0?n=!0:(t.onClick&&t.onClick(e,i[0]),t.closeOnClick&&(n=!0)),n&&a.closeNotification(i[0])}),t.onClose&&i.data("f7NotificationOnClose",function(){t.onClose(i[0])}),t.additionalClass&&i.addClass(t.additionalClass),t.hold&&setTimeout(function(){i.length>0&&a.closeNotification(i[0])},t.hold),r.prepend(i[0]),e.show();var o=i.outerHeight();return i.css("marginTop",-o+"px"),i.transition(0),i[0].clientLeft,i.transition(""),i.css("marginTop","0px"),e.transform("translate3d(0, 0,0)"),i.removeClass("notification-hidden"),i[0]}},a.closeNotification=function(t){if(t=s(t),0!==t.length&&!t.hasClass("notification-item-removing")){var e=s(".notifications"),n=t.outerHeight();t.css("height",n+"px").transition(0),t[0].clientLeft,t.css("height","0px").transition("").addClass("notification-item-removing"),t.data("f7NotificationOnClose")&&t.data("f7NotificationOnClose")(),0===e.find(".notification-item:not(.notification-item-removing)").length&&e.transform(""),t.addClass("notification-hidden").transitionEnd(function(){t.remove(),0===e.find(".notification-item").length&&e.hide()})}},a.initTemplate7Templates=function(){window.Template7&&(Template7.templates=Template7.templates||a.params.templates||{},Template7.data=Template7.data||a.params.template7Data||{},Template7.cache=Template7.cache||{},a.templates=Template7.templates,a.template7Data=Template7.data,a.template7Cache=Template7.cache,a.params.precompileTemplates&&s('script[type="text/template7"]').each(function(){var t=s(this).attr("id");t&&(Template7.templates[t]=Template7.compile(s(this).html()))}))};var y=[];return a.initPlugins=function(){for(var t in a.plugins){var e=a.plugins[t](a,a.params[t]);e&&y.push(e)}},a.pluginHook=function(t){for(var e=0;e<y.length;e++)y[e].hooks&&t in y[e].hooks&&y[e].hooks[t](arguments[1],arguments[2],arguments[3],arguments[4],arguments[5])},a.pluginPrevent=function(t){for(var e=!1,n=0;n<y.length;n++)y[n].prevents&&t in y[n].prevents&&y[n].prevents[t](arguments[1],arguments[2],arguments[3],arguments[4],arguments[5])&&(e=!0);return e},a.pluginProcess=function(t,e){for(var n=e,r=0;r<y.length;r++)y[r].preprocess&&process in y[r].preprocess&&(n=y[r].preprocess[process](e,arguments[2],arguments[3],arguments[4],arguments[5],arguments[6]));return n},a.init=function(){a.initTemplate7Templates&&a.initTemplate7Templates(),a.initPlugins&&a.initPlugins(),a.getDeviceInfo&&a.getDeviceInfo(),a.initFastClicks&&a.params.fastClicks&&a.initFastClicks(),a.initClickEvents&&a.initClickEvents(),s(".page:not(.cached)").each(function(){a.initPageWithCallback(this)}),a.initResize&&a.initResize(),a.initPushState&&a.params.pushState&&a.initPushState(),a.initSwipeout&&a.params.swipeout&&a.initSwipeout(),a.initSortable&&a.params.sortable&&a.initSortable(),a.initSwipePanels&&(a.params.swipePanel||a.params.swipePanelOnlyClose)&&a.initSwipePanels(),a.params.onAppInit&&a.params.onAppInit(),a.pluginHook("appInit")},a.params.init&&a.init(),a};var t=function(){var t=function(t){var e=this,n=0;for(n=0;n<t.length;n++)e[n]=t[n];return e.length=t.length,this},e=function(e,n){var r=[],i=0;if(e&&!n&&e instanceof t)return e;if(e)if("string"==typeof e){var a,o,s=e.trim();if(s.indexOf("<")>=0&&s.indexOf(">")>=0){var l="div";for(0===s.indexOf("<li")&&(l="ul"),0===s.indexOf("<tr")&&(l="tbody"),(0===s.indexOf("<td")||0===s.indexOf("<th"))&&(l="tr"),0===s.indexOf("<tbody")&&(l="table"),0===s.indexOf("<option")&&(l="select"),o=document.createElement(l),o.innerHTML=e,i=0;i<o.childNodes.length;i++)r.push(o.childNodes[i])}else for(a=n||"#"!==e[0]||e.match(/[ .<>:~]/)?(n||document).querySelectorAll(e):[document.getElementById(e.split("#")[1])],i=0;i<a.length;i++)a[i]&&r.push(a[i])}else if(e.nodeType||e===window||e===document)r.push(e);else if(e.length>0&&e[0].nodeType)for(i=0;i<e.length;i++)r.push(e[i]);return new t(r)};t.prototype={addClass:function(t){if("undefined"==typeof t)return this;for(var e=t.split(" "),n=0;n<e.length;n++)for(var r=0;r<this.length;r++)"undefined"!=typeof this[r].classList&&this[r].classList.add(e[n]);return this},removeClass:function(t){for(var e=t.split(" "),n=0;n<e.length;n++)for(var r=0;r<this.length;r++)"undefined"!=typeof this[r].classList&&this[r].classList.remove(e[n]);return this},hasClass:function(t){return!!this[0]&&this[0].classList.contains(t)},toggleClass:function(t){for(var e=t.split(" "),n=0;n<e.length;n++)for(var r=0;r<this.length;r++)"undefined"!=typeof this[r].classList&&this[r].classList.toggle(e[n]);return this},attr:function(t,e){if(1===arguments.length&&"string"==typeof t)return this[0]?this[0].getAttribute(t):void 0;for(var n=0;n<this.length;n++)if(2===arguments.length)this[n].setAttribute(t,e);else for(var r in t)this[n][r]=t[r],this[n].setAttribute(r,t[r]);return this},removeAttr:function(t){for(var e=0;e<this.length;e++)this[e].removeAttribute(t)},prop:function(t,e){if(1===arguments.length&&"string"==typeof t)return this[0]?this[0][t]:void 0;for(var n=0;n<this.length;n++)if(2===arguments.length)this[n][t]=e;else for(var r in t)this[n][r]=t[r];return this},data:function(t,e){if("undefined"!=typeof e){for(var n=0;n<this.length;n++){var r=this[n];r.dom7ElementDataStorage||(r.dom7ElementDataStorage={}),r.dom7ElementDataStorage[t]=e}return this}if(this[0]){var i=this[0].getAttribute("data-"+t);return i?i:this[0].dom7ElementDataStorage&&t in this[0].dom7ElementDataStorage?this[0].dom7ElementDataStorage[t]:void 0}},val:function(t){if("undefined"==typeof t)return this[0]?this[0].value:void 0;for(var e=0;e<this.length;e++)this[e].value=t;return this},transform:function(t){for(var e=0;e<this.length;e++){var n=this[e].style;n.webkitTransform=n.MsTransform=n.msTransform=n.MozTransform=n.OTransform=n.transform=t}return this},transition:function(t){"string"!=typeof t&&(t+="ms");for(var e=0;e<this.length;e++){var n=this[e].style;n.webkitTransitionDuration=n.MsTransitionDuration=n.msTransitionDuration=n.MozTransitionDuration=n.OTransitionDuration=n.transitionDuration=t}return this},on:function(t,n,r,i){function a(t){var i=t.target;if(e(i).is(n))r.call(i,t);else for(var a=e(i).parents(),o=0;o<a.length;o++)e(a[o]).is(n)&&r.call(a[o],t)}var o,s,l=t.split(" ");for(o=0;o<this.length;o++)if("function"==typeof n||n===!1)for("function"==typeof n&&(r=arguments[1],i=arguments[2]||!1),s=0;s<l.length;s++)this[o].addEventListener(l[s],r,i);else for(s=0;s<l.length;s++)this[o].dom7LiveListeners||(this[o].dom7LiveListeners=[]),this[o].dom7LiveListeners.push({listener:r,liveListener:a}),this[o].addEventListener(l[s],a,i);return this},off:function(t,e,n,r){for(var i=t.split(" "),a=0;a<i.length;a++)for(var o=0;o<this.length;o++)if("function"==typeof e||e===!1)"function"==typeof e&&(n=arguments[1],r=arguments[2]||!1),this[o].removeEventListener(i[a],n,r);else if(this[o].dom7LiveListeners)for(var s=0;s<this[o].dom7LiveListeners.length;s++)this[o].dom7LiveListeners[s].listener===n&&this[o].removeEventListener(i[a],this[o].dom7LiveListeners[s].liveListener,r);return this},once:function(t,e,n,r){function i(o){n(o),a.off(t,e,i,r)}var a=this;"function"==typeof e&&(e=!1,n=arguments[1],r=arguments[2]),a.on(t,e,i,r)},trigger:function(t,e){for(var n=0;n<this.length;n++){var r;try{r=new CustomEvent(t,{detail:e,bubbles:!0,cancelable:!0})}catch(n){r=document.createEvent("Event"),r.initEvent(t,!0,!0),r.detail=e}this[n].dispatchEvent(r)}return this},transitionEnd:function(t){function e(a){if(a.target===this)for(t.call(this,a),n=0;n<r.length;n++)i.off(r[n],e)}var n,r=["webkitTransitionEnd","transitionend","oTransitionEnd","MSTransitionEnd","msTransitionEnd"],i=this;if(t)for(n=0;n<r.length;n++)i.on(r[n],e);return this},animationEnd:function(t){function e(a){for(t(a),n=0;n<r.length;n++)i.off(r[n],e)}var n,r=["webkitAnimationEnd","OAnimationEnd","MSAnimationEnd","animationend"],i=this;if(t)for(n=0;n<r.length;n++)i.on(r[n],e);return this},width:function(){return this[0]===window?window.innerWidth:this.length>0?parseFloat(this.css("width")):null},outerWidth:function(t){return this.length>0?t?this[0].offsetWidth+parseFloat(this.css("margin-right"))+parseFloat(this.css("margin-left")):this[0].offsetWidth:null},height:function(){return this[0]===window?window.innerHeight:this.length>0?parseFloat(this.css("height")):null},outerHeight:function(t){return this.length>0?t?this[0].offsetHeight+parseFloat(this.css("margin-top"))+parseFloat(this.css("margin-bottom")):this[0].offsetHeight:null},offset:function(){if(this.length>0){var t=this[0],e=t.getBoundingClientRect(),n=document.body,r=t.clientTop||n.clientTop||0,i=t.clientLeft||n.clientLeft||0,a=window.pageYOffset||t.scrollTop,o=window.pageXOffset||t.scrollLeft;return{top:e.top+a-r,left:e.left+o-i}}return null},hide:function(){for(var t=0;t<this.length;t++)this[t].style.display="none";return this},show:function(){for(var t=0;t<this.length;t++)this[t].style.display="block";return this},css:function(t,e){var n;if(1===arguments.length){if("string"!=typeof t){for(n=0;n<this.length;n++)for(var r in t)this[n].style[r]=t[r];return this}if(this[0])return window.getComputedStyle(this[0],null).getPropertyValue(t)}if(2===arguments.length&&"string"==typeof t){for(n=0;n<this.length;n++)this[n].style[t]=e;return this}return this},each:function(t){for(var e=0;e<this.length;e++)t.call(this[e],e,this[e]);return this},html:function(t){if("undefined"==typeof t)return this[0]?this[0].innerHTML:void 0;for(var e=0;e<this.length;e++)this[e].innerHTML=t;return this},text:function(t){if("undefined"==typeof t)return this[0]?this[0].textContent.trim():null;for(var e=0;e<this.length;e++)this[e].textContent=t},is:function(n){if(!this[0])return!1;var r,i;if("string"==typeof n){var a=this[0];if(a===document)return n===document;if(a===window)return n===window;if(a.matches)return a.matches(n);if(a.webkitMatchesSelector)return a.webkitMatchesSelector(n);if(a.mozMatchesSelector)return a.mozMatchesSelector(n);if(a.msMatchesSelector)return a.msMatchesSelector(n);for(r=e(n),i=0;i<r.length;i++)if(r[i]===this[0])return!0;return!1}if(n===document)return this[0]===document;if(n===window)return this[0]===window;if(n.nodeType||n instanceof t){for(r=n.nodeType?[n]:n,i=0;i<r.length;i++)if(r[i]===this[0])return!0;return!1}return!1},indexOf:function(t){for(var e=0;e<this.length;e++)if(this[e]===t)return e},index:function(){if(this[0]){for(var t=this[0],e=0;null!==(t=t.previousSibling);)1===t.nodeType&&e++;return e}},eq:function(e){if("undefined"==typeof e)return this;var n,r=this.length;return e>r-1?new t([]):0>e?(n=r+e,new t(0>n?[]:[this[n]])):new t([this[e]])},append:function(e){var n,r;for(n=0;n<this.length;n++)if("string"==typeof e){var i=document.createElement("div");for(i.innerHTML=e;i.firstChild;)this[n].appendChild(i.firstChild)}else if(e instanceof t)for(r=0;r<e.length;r++)this[n].appendChild(e[r]);else this[n].appendChild(e);return this},prepend:function(e){var n,r;for(n=0;n<this.length;n++)if("string"==typeof e){var i=document.createElement("div");for(i.innerHTML=e,r=i.childNodes.length-1;r>=0;r--)this[n].insertBefore(i.childNodes[r],this[n].childNodes[0])}else if(e instanceof t)for(r=0;r<e.length;r++)this[n].insertBefore(e[r],this[n].childNodes[0]);else this[n].insertBefore(e,this[n].childNodes[0]);return this},insertBefore:function(t){for(var n=e(t),r=0;r<this.length;r++)if(1===n.length)n[0].parentNode.insertBefore(this[r],n[0]);else if(n.length>1)for(var i=0;i<n.length;i++)n[i].parentNode.insertBefore(this[r].cloneNode(!0),n[i])},insertAfter:function(t){for(var n=e(t),r=0;r<this.length;r++)if(1===n.length)n[0].parentNode.insertBefore(this[r],n[0].nextSibling);else if(n.length>1)for(var i=0;i<n.length;i++)n[i].parentNode.insertBefore(this[r].cloneNode(!0),n[i].nextSibling)},next:function(n){return new t(this.length>0?n?this[0].nextElementSibling&&e(this[0].nextElementSibling).is(n)?[this[0].nextElementSibling]:[]:this[0].nextElementSibling?[this[0].nextElementSibling]:[]:[])},nextAll:function(n){var r=[],i=this[0];if(!i)return new t([]);for(;i.nextElementSibling;){var a=i.nextElementSibling;n?e(a).is(n)&&r.push(a):r.push(a),i=a}return new t(r)},prev:function(n){return new t(this.length>0?n?this[0].previousElementSibling&&e(this[0].previousElementSibling).is(n)?[this[0].previousElementSibling]:[]:this[0].previousElementSibling?[this[0].previousElementSibling]:[]:[])},prevAll:function(n){var r=[],i=this[0];if(!i)return new t([]);for(;i.previousElementSibling;){var a=i.previousElementSibling;n?e(a).is(n)&&r.push(a):r.push(a),i=a}return new t(r)},parent:function(t){for(var n=[],r=0;r<this.length;r++)t?e(this[r].parentNode).is(t)&&n.push(this[r].parentNode):n.push(this[r].parentNode);
return e(e.unique(n))},parents:function(t){for(var n=[],r=0;r<this.length;r++)for(var i=this[r].parentNode;i;)t?e(i).is(t)&&n.push(i):n.push(i),i=i.parentNode;return e(e.unique(n))},find:function(e){for(var n=[],r=0;r<this.length;r++)for(var i=this[r].querySelectorAll(e),a=0;a<i.length;a++)n.push(i[a]);return new t(n)},children:function(n){for(var r=[],i=0;i<this.length;i++)for(var a=this[i].childNodes,o=0;o<a.length;o++)n?1===a[o].nodeType&&e(a[o]).is(n)&&r.push(a[o]):1===a[o].nodeType&&r.push(a[o]);return new t(e.unique(r))},remove:function(){for(var t=0;t<this.length;t++)this[t].parentNode&&this[t].parentNode.removeChild(this[t]);return this},detach:function(){return this.remove()},add:function(){var t,n,r=this;for(t=0;t<arguments.length;t++){var i=e(arguments[t]);for(n=0;n<i.length;n++)r[r.length]=i[n],r.length++}return r}},function(){function n(n){t.prototype[n]=function(t){var r;if("undefined"==typeof t){for(r=0;r<this.length;r++)i.indexOf(n)<0&&(n in this[r]?this[r][n]():e(this[r]).trigger(n));return this}return this.on(n,t)}}for(var r="click blur focus focusin focusout keyup keydown keypress submit change mousedown mousemove mouseup mouseenter mouseleave mouseout mouseover touchstart touchend touchmove resize scroll".split(" "),i="resize scroll".split(" "),a=0;a<r.length;a++)n(r[a])}();var n={};e.ajaxSetup=function(t){t.type&&(t.method=t.type);for(var e in t)n[e]=t[e]};var r=0;return e.ajax=function(t){function i(r,i,a){var o=arguments;r&&e(document).trigger(r,i),a&&(a in n&&n[a](o[3],o[4],o[5],o[6]),t[a]&&t[a](o[3],o[4],o[5],o[6]))}var a={method:"GET",data:!1,async:!0,cache:!0,user:"",password:"",headers:{},xhrFields:{},statusCode:{},processData:!0,dataType:"text",contentType:"application/x-www-form-urlencoded",timeout:0},o=["beforeSend","error","complete","success","statusCode"];t.type&&(t.method=t.type);for(var s in n)o.indexOf(s)<0&&(a[s]=n[s]);for(var l in a)l in t||(t[l]=a[l]);t.url||(t.url=window.location.toString());var u=t.method.toUpperCase();if(("GET"===u||"HEAD"===u)&&t.data){var c;c="string"==typeof t.data?t.data.indexOf("?")>=0?t.data.split("?")[1]:t.data:e.serializeObject(t.data),t.url+=t.url.indexOf("?")>=0?"&"+c:"?"+c}if("json"===t.dataType&&t.url.indexOf("callback=")>=0){var f,d,h="f7jsonp_"+Date.now()+r++,p=t.url.split("callback=");if(p[1].indexOf("&")>=0){var g=p[1].split("&").filter(function(t){return t.indexOf("=")>0}).join("&");f=p[0]+"callback="+h+(g.length>0?"&"+g:"")}else f=p[0]+"callback="+h;var m=document.createElement("script");return m.type="text/javascript",m.onerror=function(){clearTimeout(d),i(void 0,void 0,"error",null,"scripterror")},m.src=f,window[h]=function(t){clearTimeout(d),i(void 0,void 0,"success",t),m.parentNode.removeChild(m),m=null,delete window[h]},document.querySelector("head").appendChild(m),void(t.timeout>0&&(d=setTimeout(function(){m.parentNode.removeChild(m),m=null,i(void 0,void 0,"error",null,"timeout")},t.timeout)))}("GET"===u||"HEAD"===u)&&t.cache===!1&&(t.url+=t.url.indexOf("?")>=0?"&_nocache="+Date.now():"?_nocache="+Date.now());var v=new XMLHttpRequest;v.requestUrl=t.url,v.open(u,t.url,t.async,t.user,t.password);var y=null;if(("POST"===u||"PUT"===u)&&t.data)if(t.processData){var _=[ArrayBuffer,Blob,Document,FormData];if(_.indexOf(t.data.constructor)>=0)y=t.data;else{var b="---------------------------"+Date.now().toString(16);"multipart/form-data"===t.contentType?v.setRequestHeader("Content-Type","multipart/form-data; boundary="+b):v.setRequestHeader("Content-Type",t.contentType),y="";var x=e.serializeObject(t.data);if("multipart/form-data"===t.contentType){b="---------------------------"+Date.now().toString(16),x=x.split("&");for(var w=[],C=0;C<x.length;C++)w.push('Content-Disposition: form-data; name="'+x[C].split("=")[0]+'"\r\n\r\n'+x[C].split("=")[1]+"\r\n");y="--"+b+"\r\n"+w.join("--"+b+"\r\n")+"--"+b+"--\r\n"}else y="application/x-www-form-urlencoded"===t.contentType?x:x.replace(/&/g,"\r\n")}}else y=t.data;if(t.headers)for(var k in t.headers)v.setRequestHeader(k,t.headers[k]);if("undefined"==typeof t.crossDomain&&(t.crossDomain=/^([\w-]+:)?\/\/([^\/]+)/.test(t.url)&&RegExp.$2!==window.location.host),t.crossDomain||v.setRequestHeader("X-Requested-With","XMLHttpRequest"),t.xhrFields)for(var S in t.xhrFields)v[S]=t.xhrFields[S];var T;return v.onload=function(){if(T&&clearTimeout(T),200===v.status||0===v.status){var e;if("json"===t.dataType)try{e=JSON.parse(v.responseText),i("ajaxSuccess",{xhr:v},"success",e,v.status,v)}catch(t){i("ajaxError",{xhr:v,parseerror:!0},"error",v,"parseerror")}else i("ajaxSuccess",{xhr:v},"success",v.responseText,v.status,v)}else i("ajaxError",{xhr:v},"error",v,v.status);t.statusCode&&(n.statusCode&&n.statusCode[v.status]&&n.statusCode[v.status](v),t.statusCode[v.status]&&t.statusCode[v.status](v)),i("ajaxComplete",{xhr:v},"complete",v,v.status)},v.onerror=function(){T&&clearTimeout(T),i("ajaxError",{xhr:v},"error",v,v.status)},i("ajaxStart",{xhr:v},"start",v),i(void 0,void 0,"beforeSend",v),v.send(y),t.timeout>0&&(T=setTimeout(function(){v.abort(),i("ajaxError",{xhr:v,timeout:!0},"error",v,"timeout"),i("ajaxComplete",{xhr:v,timeout:!0},"complete",v,"timeout")},t.timeout)),v},function(){function t(t){e[t]=function(n,r,i){return e.ajax({url:n,method:"post"===t?"POST":"GET",data:"function"==typeof r?void 0:r,success:"function"==typeof r?r:i,dataType:"getJSON"===t?"json":void 0})}}for(var n="get post getJSON".split(" "),r=0;r<n.length;r++)t(n[r])}(),e.parseUrlQuery=function(t){var e,n,r,i={};if(!(t.indexOf("?")>=0))return i;for(t=t.split("?")[1],n=t.split("&"),e=0;e<n.length;e++)r=n[e].split("="),i[r[0]]=r[1];return i},e.isArray=function(t){return"[object Array]"===Object.prototype.toString.apply(t)},e.unique=function(t){for(var e=[],n=0;n<t.length;n++)-1===e.indexOf(t[n])&&e.push(t[n]);return e},e.trim=function(t){return t.trim()},e.serializeObject=function(t){if("string"==typeof t)return t;var n=[],r="&";for(var i in t)if(e.isArray(t[i])){for(var a=[],o=0;o<t[i].length;o++)a.push(i+"="+t[i][o]);n.push(a.join(r))}else n.push(i+"="+t[i]);return n.join(r)},e.getTranslate=function(t,e){var n,r,i,a;return"undefined"==typeof e&&(e="x"),i=window.getComputedStyle(t,null),window.WebKitCSSMatrix?a=new WebKitCSSMatrix("none"===i.webkitTransform?"":i.webkitTransform):(a=i.MozTransform||i.OTransform||i.MsTransform||i.msTransform||i.transform||i.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,"),n=a.toString().split(",")),"x"===e&&(r=window.WebKitCSSMatrix?a.m41:parseFloat(16===n.length?n[12]:n[4])),"y"===e&&(r=window.WebKitCSSMatrix?a.m42:parseFloat(16===n.length?n[13]:n[5])),r||0},e.requestAnimationFrame=function(t){return window.requestAnimationFrame?window.requestAnimationFrame(t):window.webkitRequestAnimationFrame?window.webkitRequestAnimationFrame(t):window.mozRequestAnimationFrame?window.mozRequestAnimationFrame(t):window.setTimeout(t,1e3/60)},e.cancelAnimationFrame=function(t){return window.cancelAnimationFrame?window.cancelAnimationFrame(t):window.webkitCancelAnimationFrame?window.webkitCancelAnimationFrame(t):window.mozCancelAnimationFrame?window.mozCancelAnimationFrame(t):window.clearTimeout(t)},e.supportTouch=!!("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch),e.fn=t.prototype,e.fn.scrollTo=function(t,n,r,i){return this.each(function(){function a(t){void 0===t&&(t=(new Date).getTime()),null===v&&(v=t);var n,l=Math.max(Math.min((t-v)/r,1),0),u="linear"===i?l:.5-Math.cos(l*Math.PI)/2;g&&(d=o+u*(c-o)),m&&(h=s+u*(f-s)),g&&c>o&&d>=c&&(p.scrollTop=c,n=!0),g&&o>c&&c>=d&&(p.scrollTop=c,n=!0),m&&f>s&&h>=f&&(p.scrollLeft=f,n=!0),m&&s>f&&f>=h&&(p.scrollLeft=f,n=!0),n||(g&&(p.scrollTop=d),m&&(p.scrollLeft=h),e.requestAnimationFrame(a))}var o,s,l,u,c,f,d,h,p=this,g=n>0||0===n,m=t>0||0===t;if("undefined"==typeof i&&(i="swing"),g&&(o=p.scrollTop,r||(p.scrollTop=n)),m&&(s=p.scrollLeft,r||(p.scrollLeft=t)),r){g&&(l=p.scrollHeight-p.offsetHeight,c=Math.max(Math.min(n,l),0)),m&&(u=p.scrollWidth-p.offsetWidth,f=Math.max(Math.min(t,u),0));var v=null;g&&c===o&&(g=!1),m&&f===s&&(m=!1),e.requestAnimationFrame(a)}})},e.fn.scrollTop=function(t,e,n){var r=this;return"undefined"==typeof t?r.length>0?r[0].scrollTop:null:r.scrollTo(void 0,t,e,n)},e.fn.scrollLeft=function(t,e,n){var r=this;return"undefined"==typeof t?r.length>0?r[0].scrollLeft:null:r.scrollTo(t,void 0,e,n)},e}();Framework7.$=t,window.Dom7=t,Framework7.prototype.support=function(){var t={touch:!!("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch)};return t}(),Framework7.prototype.device=function(){var e={},n=navigator.userAgent,r=t,i=n.match(/(Android);?[\s\/]+([\d.]+)?/),a=n.match(/(iPad).*OS\s([\d_]+)/),o=n.match(/(iPod)(.*OS\s([\d_]+))?/),s=!a&&n.match(/(iPhone\sOS)\s([\d_]+)/);if(e.ios=e.android=e.iphone=e.ipad=!1,i&&(e.os="android",e.osVersion=i[2],e.android=!0),(a||s||o)&&(e.os="ios",e.ios=!0),s&&!o&&(e.osVersion=s[2].replace(/_/g,"."),e.iphone=!0),a&&(e.osVersion=a[2].replace(/_/g,"."),e.ipad=!0),o&&(e.osVersion=o[3]?o[3].replace(/_/g,"."):null,e.iphone=!0),e.ios&&e.osVersion&&n.indexOf("Version/")>=0&&"10"===e.osVersion.split(".")[0]&&(e.osVersion=n.toLowerCase().split("version/")[1].split(" ")[0]),e.webView=(s||a||o)&&n.match(/.*AppleWebKit(?!.*Safari)/i),e.os&&"ios"===e.os){var l=e.osVersion.split(".");e.minimalUi=!e.webView&&(o||s)&&(1*l[0]===7?1*l[1]>=1:1*l[0]>7)&&r('meta[name="viewport"]').length>0&&r('meta[name="viewport"]').attr("content").indexOf("minimal-ui")>=0}var u=r(window).width(),c=r(window).height();e.statusBar=!1,e.statusBar=!(!e.webView||u*c!==screen.width*screen.height);var f=[];if(e.pixelRatio=window.devicePixelRatio||1,f.push("pixel-ratio-"+Math.floor(e.pixelRatio)),e.pixelRatio>=2&&f.push("retina"),e.os&&(f.push(e.os,e.os+"-"+e.osVersion.split(".")[0],e.os+"-"+e.osVersion.replace(/\./g,"-")),"ios"===e.os))for(var d=parseInt(e.osVersion.split(".")[0],10),h=d-1;h>=6;h--)f.push("ios-gt-"+h);return e.statusBar?f.push("with-statusbar-overlay"):r("html").removeClass("with-statusbar-overlay"),f.length>0&&r("html").addClass(f.join(" ")),e}(),Framework7.prototype.plugins={},window.Template7=function(){function t(t){return"[object Array]"===Object.prototype.toString.apply(t)}function e(t){return"function"==typeof t}function n(t){var e,n,r,i=t.replace(/[{}#}]/g,"").split(" "),a=[];for(n=0;n<i.length;n++){var o=i[n];if(0===n)a.push(o);else if(0===o.indexOf('"'))if(2===o.match(/"/g).length)a.push(o);else{for(e=0,r=n+1;r<i.length;r++)if(o+=" "+i[r],i[r].indexOf('"')>=0){e=r,a.push(o);break}e&&(n=e)}else if(o.indexOf("=")>0){var s=o.split("="),l=s[0],u=s[1];if(2!==u.match(/"/g).length){for(e=0,r=n+1;r<i.length;r++)if(u+=" "+i[r],i[r].indexOf('"')>=0){e=r;break}e&&(n=e)}var c=[l,u.replace(/"/g,"")];a.push(c)}else a.push(o)}return a}function r(e){var r,i,a=[];if(!e)return[];var o=e.split(/({{[^{^}]*}})/);for(r=0;r<o.length;r++){var s=o[r];if(""!==s)if(s.indexOf("{{")<0)a.push({type:"plain",content:s});else{if(s.indexOf("{/")>=0)continue;if(s.indexOf("{#")<0&&s.indexOf(" ")<0&&s.indexOf("else")<0){a.push({type:"variable",contextName:s.replace(/[{}]/g,"")});continue}var l=n(s),u=l[0],c=[],f={};for(i=1;i<l.length;i++){var d=l[i];t(d)?f[d[0]]="false"!==d[1]&&d[1]:c.push(d)}if(s.indexOf("{#")>=0){var h,p="",g="",m=0,v=!1,y=!1,_=0;for(i=r+1;i<o.length;i++)if(o[i].indexOf("{{#")>=0&&_++,o[i].indexOf("{{/")>=0&&_--,o[i].indexOf("{{#"+u)>=0)p+=o[i],y&&(g+=o[i]),m++;else if(o[i].indexOf("{{/"+u)>=0){if(!(m>0)){h=i,v=!0;break}m--,p+=o[i],y&&(g+=o[i])}else o[i].indexOf("else")>=0&&0===_?y=!0:(y||(p+=o[i]),y&&(g+=o[i]));v&&(h&&(r=h),a.push({type:"helper",helperName:u,contextName:c,content:p,inverseContent:g,hash:f}))}else s.indexOf(" ")>0&&a.push({type:"helper",helperName:u,contextName:c,hash:f})}}return a}var i=function(t){function e(t,e){return t.content?o(t.content,e):function(){return""}}function n(t,e){return t.inverseContent?o(t.inverseContent,e):function(){return""}}function i(t,e){var n;if(t.indexOf("@global")>=0)n="(Template7.global && Template7.global."+t.split("@global.")[1]+")";else if(t.indexOf("@")>=0)n="(data && data."+t.replace("@","")+")";else if(t.indexOf(".")>0)n=0===t.indexOf("this")?t.replace("this",e):e+"."+t;else if(0===t.indexOf("../")){var r=t.split("../").length-1,i=t.split("../")[t.split("../").length-1],a=e.split("_")[1]-r;n="ctx_"+(a>=1?a:1)+"."+i}else n="this"===t?e:e+"."+t;return n}function a(t,e){for(var n=[],r=0;r<t.length;r++)n.push(0===t[r].indexOf('"')?t[r]:i(t[r],e));return n.join(", ")}function o(t,o){if(o=o||1,t=t||s.template,"string"!=typeof t)throw new Error("Template7: Template must be a string");var l=r(t);if(0===l.length)return function(){return""};var u="ctx_"+o,c="(function ("+u+", data) {\n";1===o&&(c+="function isArray(arr){return Object.prototype.toString.apply(arr) === '[object Array]';}\n",c+="function isFunction(func){return (typeof func === 'function');}\n",c+='function c(val, ctx) {if (typeof val !== "undefined") {if (isFunction(val)) {return val.call(ctx);} else return val;} else return "";}\n'),c+="var r = '';\n";var f;for(f=0;f<l.length;f++){var d=l[f];if("plain"!==d.type){var h,p;if("variable"===d.type&&(h=i(d.contextName,u),c+="r += c("+h+", "+u+");"),"helper"===d.type)if(d.helperName in s.helpers)p=a(d.contextName,u),c+="r += (Template7.helpers."+d.helperName+").call("+u+", "+(p&&p+",")+"{hash:"+JSON.stringify(d.hash)+", data: data || {}, fn: "+e(d,o+1)+", inverse: "+n(d,o+1)+"});";else{if(d.contextName.length>0)throw new Error('Template7: Missing helper: "'+d.helperName+'"');h=i(d.helperName,u),c+="if ("+h+") {",c+="if (isArray("+h+")) {",c+="r += (Template7.helpers.each).call("+u+", "+h+", {hash:"+JSON.stringify(d.hash)+", data: data || {}, fn: "+e(d,o+1)+", inverse: "+n(d,o+1)+"});",c+="}else {",c+="r += (Template7.helpers.with).call("+u+", "+h+", {hash:"+JSON.stringify(d.hash)+", data: data || {}, fn: "+e(d,o+1)+", inverse: "+n(d,o+1)+"});",c+="}}"}}else c+="r +='"+d.content.replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/'/g,"\\'")+"';"}return c+="\nreturn r;})",eval.call(window,c)}var s=this;s.template=t,s.compile=function(t){return s.compiled||(s.compiled=o(t)),s.compiled}};i.prototype={options:{},helpers:{if:function(t,n){return e(t)&&(t=t.call(this)),t?n.fn(this,n.data):n.inverse(this,n.data)},unless:function(t,n){return e(t)&&(t=t.call(this)),t?n.inverse(this,n.data):n.fn(this,n.data)},each:function(n,r){var i="",a=0;if(e(n)&&(n=n.call(this)),t(n)){for(r.hash.reverse&&(n=n.reverse()),a=0;a<n.length;a++)i+=r.fn(n[a],{first:0===a,last:a===n.length-1,index:a});r.hash.reverse&&(n=n.reverse())}else for(var o in n)a++,i+=r.fn(n[o],{key:o});return a>0?i:r.inverse(this)},with:function(t,n){return e(t)&&(t=t.call(this)),n.fn(t)},join:function(t,n){return e(t)&&(t=t.call(this)),t.join(n.hash.delimiter||n.hash.delimeter)}}};var a=function(t,e){if(2===arguments.length){var n=new i(t),r=n.compile()(e);return n=null,r}return new i(t)};return a.registerHelper=function(t,e){i.prototype.helpers[t]=e},a.unregisterHelper=function(t){i.prototype.helpers[t]=void 0,delete i.prototype.helpers[t]},a.compile=function(t,e){var n=new i(t,e);return n.compile()},a.options=i.prototype.options,a.helpers=i.prototype.helpers,a}(),window.Swiper=function(e,n){function r(){return"horizontal"===f.params.direction}function i(t){var e,n,r=function(){"undefined"!=typeof f&&null!==f&&(void 0!==f.imagesLoaded&&f.imagesLoaded++,f.imagesLoaded===f.imagesToLoad.length&&(f.update(),f.params.onImagesReady&&f.params.onImagesReady(f)))};t.complete?r():(n=t.currentSrc||t.getAttribute("src"),n?(e=new Image,e.onload=r,e.onerror=r,e.src=n):r())}function a(){f.autoplayTimeoutId=setTimeout(function(){f.params.loop?(f.fixLoop(),f._slideNext()):f.isEnd?n.autoplayStopOnLast?f.stopAutoplay():f._slideTo(0):f._slideNext()},f.params.autoplay)}function o(t,e){var n=d(t.target);if(!n.is(e))if("string"==typeof e)n=n.parents(e);else if(e.nodeType){var r;return n.parents().each(function(t,n){n===e&&(r=e)}),r?e:void 0}return 0===n.length?void 0:n[0]}function s(t,e){e=e||{};var n=window.MutationObserver||window.WebkitMutationObserver,r=new n(function(t){t.forEach(function(){f.onResize()})});r.observe(t,{attributes:"undefined"==typeof e.attributes||e.attributes,childList:"undefined"==typeof e.childList||e.childList,characterData:"undefined"==typeof e.characterData||e.characterData}),f.observers.push(r)}var l={direction:"horizontal",touchEventsTarget:"container",initialSlide:0,speed:300,autoplay:!1,autoplayDisableOnInteraction:!0,freeMode:!1,freeModeMomentum:!0,freeModeMomentumRatio:1,freeModeMomentumBounce:!0,freeModeMomentumBounceRatio:1,effect:"slide",coverflow:{rotate:50,stretch:0,depth:100,modifier:1,slideShadows:!0},cube:{slideShadows:!0,shadow:!0,shadowOffset:20,shadowScale:.94},scrollbar:null,scrollbarHide:!0,keyboardControl:!1,mousewheelControl:!1,mousewheelForceToAxis:!1,hashnav:!1,spaceBetween:0,slidesPerView:1,slidesPerColumn:1,slidesPerColumnFill:"column",slidesPerGroup:1,centeredSlides:!1,touchRatio:1,touchAngle:45,simulateTouch:!0,shortSwipes:!0,longSwipes:!0,longSwipesRatio:.5,longSwipesMs:300,followFinger:!0,onlyExternal:!1,threshold:0,touchMoveStopPropagation:!0,pagination:null,paginationClickable:!1,paginationHide:!1,resistance:!0,resistanceRatio:.85,nextButton:null,prevButton:null,watchSlidesProgress:!1,watchVisibility:!1,grabCursor:!1,preventClicks:!0,preventClicksPropagation:!0,releaseFormElements:!0,slideToClickedSlide:!1,updateOnImagesReady:!0,loop:!1,loopAdditionalSlides:0,loopedSlides:null,control:void 0,controlInverse:!1,allowSwipeToPrev:!0,allowSwipeToNext:!0,swipeHandler:null,noSwiping:!0,noSwipingClass:"swiper-no-swiping",slideClass:"swiper-slide",slideActiveClass:"swiper-slide-active",slideVisibleClass:"swiper-slide-visible",slideDuplicateClass:"swiper-slide-duplicate",slideNextClass:"swiper-slide-next",slidePrevClass:"swiper-slide-prev",wrapperClass:"swiper-wrapper",bulletClass:"swiper-pagination-bullet",bulletActiveClass:"swiper-pagination-bullet-active",buttonDisabledClass:"swiper-button-disabled",paginationHiddenClass:"swiper-pagination-hidden",observer:!1,observeParents:!1};n=n||{};for(var u in l)if("undefined"==typeof n[u])n[u]=l[u];else if("object"==typeof n[u])for(var c in l[u])"undefined"==typeof n[u][c]&&(n[u][c]=l[u][c]);var f=this;f.params=n;var d;if(d="undefined"==typeof t?window.Dom7||window.Zepto||window.jQuery:t,d&&(f.container=d(e),0!==f.container.length)){if(f.container.length>1)return void f.container.each(function(){new Swiper(this,n)});f.container[0].swiper=f,f.container.data("swiper",f),f.container.addClass("swiper-container-"+f.params.direction),f.params.freeMode&&f.container.addClass("swiper-container-free-mode"),["cube","coverflow"].indexOf(f.params.effect)>=0&&(f.support.transforms3d?(f.params.watchSlidesProgress=!0,f.container.addClass("swiper-container-3d")):f.params.effect="slide"),"slide"!==f.params.effect&&f.container.addClass("swiper-container-"+f.params.effect),"cube"===f.params.effect&&(f.params.resistanceRatio=0,f.params.slidesPerView=1,f.params.slidesPerColumn=1,f.params.slidesPerGroup=1,f.params.centeredSlides=!1,f.params.spaceBetween=0),"fade"===f.params.effect&&(f.params.watchSlidesProgress=!0,f.params.spaceBetween=0),f.params.grabCursor&&f.support.touch&&(f.params.grabCursor=!1),f.wrapper=f.container.children("."+f.params.wrapperClass),f.params.pagination&&(f.paginationContainer=d(f.params.pagination),f.params.paginationClickable&&f.paginationContainer.addClass("swiper-pagination-clickable")),f.rtl=r()&&("rtl"===f.container[0].dir.toLowerCase()||"rtl"===f.container.css("direction")),f.rtl&&f.container.addClass("swiper-container-rtl"),f.rtl&&(f.wrongRTL="-webkit-box"===f.wrapper.css("display")),f.translate=0,f.progress=0,f.velocity=0,f.lockSwipeToNext=function(){f.params.allowSwipeToNext=!1},f.lockSwipeToPrev=function(){f.params.allowSwipeToPrev=!1},f.lockSwipes=function(){f.params.allowSwipeToNext=f.params.allowSwipeToPrev=!1},f.unlockSwipeToNext=function(){f.params.allowSwipeToNext=!0},f.unlockSwipeToPrev=function(){f.params.allowSwipeToPrev=!0},f.unlockSwipes=function(){f.params.allowSwipeToNext=f.params.allowSwipeToPrev=!0},f.params.slidesPerColumn>1&&f.container.addClass("swiper-container-multirow"),f.params.grabCursor&&(f.container[0].style.cursor="move",f.container[0].style.cursor="-webkit-grab",f.container[0].style.cursor="-moz-grab",f.container[0].style.cursor="grab"),f.imagesToLoad=[],f.imagesLoaded=0,f.preloadImages=function(){f.imagesToLoad=f.container.find("img");for(var t=0;t<f.imagesToLoad.length;t++)i(f.imagesToLoad[t])},f.autoplayTimeoutId=void 0,f.autoplaying=!1,f.autoplayPaused=!1,f.startAutoplay=function(){return"undefined"==typeof f.autoplayTimeoutId&&void(f.params.autoplay&&(f.autoplaying||(f.autoplaying=!0,f.params.onAutoplayStart&&f.params.onAutoplayStart(f),a())))},f.stopAutoplay=function(){f.autoplayTimeoutId&&(f.autoplayTimeoutId&&clearTimeout(f.autoplayTimeoutId),f.autoplaying=!1,f.autoplayTimeoutId=void 0,f.params.onAutoplayStop&&f.params.onAutoplayStop(f))},f.pauseAutoplay=function(t){f.autoplayPaused||(f.autoplayTimeoutId&&clearTimeout(f.autoplayTimeoutId),f.autoplayPaused=!0,0===t?(f.autoplayPaused=!1,a()):f.wrapper.transitionEnd(function(){f.autoplayPaused=!1,a()}))},f.updateContainerSize=function(){f.width=f.container[0].clientWidth,f.height=f.container[0].clientHeight,f.size=r()?f.width:f.height},f.updateSlidesSize=function(){f.slides=f.wrapper.children("."+f.params.slideClass),f.snapGrid=[],f.slidesGrid=[],f.slidesSizesGrid=[];var t,e=f.params.spaceBetween,n=0,i=0,a=0;"string"==typeof e&&e.indexOf("%")>=0&&(e=parseFloat(e.replace("%",""))/100*f.size),f.virtualWidth=-e,f.slides.css(f.rtl?{marginLeft:"",marginTop:""}:{marginRight:"",marginBottom:""});var o;f.params.slidesPerColumn>1&&(o=Math.floor(f.slides.length/f.params.slidesPerColumn)===f.slides.length/f.params.slidesPerColumn?f.slides.length:Math.ceil(f.slides.length/f.params.slidesPerColumn)*f.params.slidesPerColumn);var s;for(t=0;t<f.slides.length;t++){s=0;var l=f.slides.eq(t);if(f.params.slidesPerColumn>1){var u,c,d,h,p=f.params.slidesPerColumn;"column"===f.params.slidesPerColumnFill?(c=Math.floor(t/p),d=t-c*p,u=c+d*o/p,l.css({"-webkit-box-ordinal-group":u,"-moz-box-ordinal-group":u,"-ms-flex-order":u,"-webkit-order":u,order:u})):(h=o/p,d=Math.floor(t/h),c=t-d*h),l.css({"margin-top":0!==d&&f.params.spaceBetween&&f.params.spaceBetween+"px"}).attr("data-swiper-column",c).attr("data-swiper-row",d)}"none"!==l.css("display")&&("auto"===f.params.slidesPerView?s=r()?l.outerWidth(!0):l.outerHeight(!0):(s=(f.size-(f.params.slidesPerView-1)*e)/f.params.slidesPerView,r()?f.slides[t].style.width=s+"px":f.slides[t].style.height=s+"px"),f.slides[t].swiperSlideSize=s,f.slidesSizesGrid.push(s),f.params.centeredSlides?(n=n+s/2+i/2+e,0===t&&(n=n-f.size/2-e),Math.abs(n)<.001&&(n=0),a%f.params.slidesPerGroup===0&&f.snapGrid.push(n),f.slidesGrid.push(n)):(a%f.params.slidesPerGroup===0&&f.snapGrid.push(n),f.slidesGrid.push(n),n=n+s+e),f.virtualWidth+=s+e,i=s,a++)}f.virtualWidth=Math.max(f.virtualWidth,f.size);var g;if(f.rtl&&f.wrongRTL&&("slide"===f.params.effect||"coverflow"===f.params.effect)&&f.wrapper.css({width:f.virtualWidth+f.params.spaceBetween+"px"}),f.params.slidesPerColumn>1&&(f.virtualWidth=(s+f.params.spaceBetween)*o,f.virtualWidth=Math.ceil(f.virtualWidth/f.params.slidesPerColumn)-f.params.spaceBetween,f.wrapper.css({width:f.virtualWidth+f.params.spaceBetween+"px"}),f.params.centeredSlides)){for(g=[],t=0;t<f.snapGrid.length;t++)f.snapGrid[t]<f.virtualWidth+f.snapGrid[0]&&g.push(f.snapGrid[t]);f.snapGrid=g}if(!f.params.centeredSlides){for(g=[],t=0;t<f.snapGrid.length;t++)f.snapGrid[t]<=f.virtualWidth-f.size&&g.push(f.snapGrid[t]);f.snapGrid=g,Math.floor(f.virtualWidth-f.size)>Math.floor(f.snapGrid[f.snapGrid.length-1])&&f.snapGrid.push(f.virtualWidth-f.size)}0===f.snapGrid.length&&(f.snapGrid=[0]),0!==f.params.spaceBetween&&f.slides.css(r()?f.rtl?{marginLeft:e+"px"}:{marginRight:e+"px"}:{marginBottom:e+"px"}),f.params.watchSlidesProgress&&f.updateSlidesOffset()},f.updateSlidesOffset=function(){for(var t=0;t<f.slides.length;t++)f.slides[t].swiperSlideOffset=r()?f.slides[t].offsetLeft:f.slides[t].offsetTop},f.update=function(){f.updateContainerSize(),f.updateSlidesSize(),f.updateProgress(),f.updatePagination(),f.updateClasses()},f.minTranslate=function(){return-f.snapGrid[0]},f.maxTranslate=function(){return-f.snapGrid[f.snapGrid.length-1]},f.updateSlidesProgress=function(t){if("undefined"==typeof t&&(t=f.translate||0),0!==f.slides.length){"undefined"==typeof f.slides[0].swiperSlideOffset&&f.updateSlidesOffset();var e=f.params.centeredSlides?-t+f.size/2:-t;f.rtl&&(e=f.params.centeredSlides?t-f.size/2:t),f.container[0].getBoundingClientRect(),r()?"left":"top",r()?"right":"bottom",f.slides.removeClass(f.params.slideVisibleClass);for(var n=0;n<f.slides.length;n++){var i=f.slides[n],a=f.params.centeredSlides===!0?i.swiperSlideSize/2:0,o=(e-i.swiperSlideOffset-a)/(i.swiperSlideSize+f.params.spaceBetween);if(f.params.watchVisibility){var s=-(e-i.swiperSlideOffset-a),l=s+f.slidesSizesGrid[n],u=s>=0&&s<f.size||l>0&&l<=f.size||0>=s&&l>=f.size;u&&f.slides.eq(n).addClass(f.params.slideVisibleClass)}i.progress=f.rtl?-o:o}}},f.updateProgress=function(t){"undefined"==typeof t&&(t=f.translate||0),f.progress=(t-f.minTranslate())/(f.maxTranslate()-f.minTranslate()),f.isBeginning=f.isEnd=!1,f.progress<=0&&(f.isBeginning=!0,f.params.onReachBeginning&&f.params.onReachBeginning(f)),f.progress>=1&&(f.isEnd=!0,f.params.onReachEnd&&f.params.onReachEnd(f)),f.params.watchSlidesProgress&&f.updateSlidesProgress(t),f.params.onProgress&&f.params.onProgress(f,f.progress)},f.updateActiveIndex=function(){var t,e,n,r=f.rtl?f.translate:-f.translate;for(e=0;e<f.slidesGrid.length;e++)"undefined"!=typeof f.slidesGrid[e+1]?r>=f.slidesGrid[e]&&r<f.slidesGrid[e+1]-(f.slidesGrid[e+1]-f.slidesGrid[e])/2?t=e:r>=f.slidesGrid[e]&&r<f.slidesGrid[e+1]&&(t=e+1):r>=f.slidesGrid[e]&&(t=e);(0>t||"undefined"==typeof t)&&(t=0),n=Math.floor(t/f.params.slidesPerGroup),n>=f.snapGrid.length&&(n=f.snapGrid.length-1),t!==f.activeIndex&&(f.snapIndex=n,f.previousIndex=f.activeIndex,f.activeIndex=t,f.updateClasses())},f.updateClasses=function(){f.slides.removeClass(f.params.slideActiveClass+" "+f.params.slideNextClass+" "+f.params.slidePrevClass);var t=f.slides.eq(f.activeIndex);if(t.addClass(f.params.slideActiveClass),t.next("."+f.params.slideClass).addClass(f.params.slideNextClass),t.prev("."+f.params.slideClass).addClass(f.params.slidePrevClass),f.bullets&&f.bullets.length>0){f.bullets.removeClass(f.params.bulletActiveClass);var e;f.params.loop?(e=f.activeIndex-f.loopedSlides,e>f.slides.length-1-2*f.loopedSlides&&(e-=f.slides.length-2*f.loopedSlides)):e="undefined"!=typeof f.snapIndex?f.snapIndex:f.activeIndex||0,f.bullets.eq(e).addClass(f.params.bulletActiveClass)}f.params.loop||(f.params.prevButton&&(f.isBeginning?d(f.params.prevButton).addClass(f.params.buttonDisabledClass):d(f.params.prevButton).removeClass(f.params.buttonDisabledClass)),f.params.nextButton&&(f.isEnd?d(f.params.nextButton).addClass(f.params.buttonDisabledClass):d(f.params.nextButton).removeClass(f.params.buttonDisabledClass)))},f.updatePagination=function(){if(f.params.pagination&&f.paginationContainer&&f.paginationContainer.length>0){for(var t="",e=f.params.loop?f.slides.length-2*f.loopedSlides:f.snapGrid.length,n=0;e>n;n++)t+='<span class="'+f.params.bulletClass+'"></span>';f.paginationContainer.html(t),f.bullets=f.paginationContainer.find("."+f.params.bulletClass)}},f.onResize=function(){f.updateContainerSize(),f.updateSlidesSize(),f.updateProgress(),f.updateClasses(),"auto"===f.params.slidesPerView&&f.updatePagination(),f.isEnd?f.slideTo(f.slides.length-1,0,!1,!0):f.slideTo(f.activeIndex,0,!1,!0),f.params.scrollbar&&f.scrollbar&&f.scrollbar.init()};var h=["mousedown","mousemove","mouseup"];window.navigator.pointerEnabled?h=["pointerdown","pointermove","pointerup"]:window.navigator.msPointerEnabled&&(h=["MSPointerDown","MSPointerMove","MSPointerUp"]),f.touchEvents={start:f.support.touch||!f.params.simulateTouch?"touchstart":h[0],move:f.support.touch||!f.params.simulateTouch?"touchmove":h[1],end:f.support.touch||!f.params.simulateTouch?"touchend":h[2]},(window.navigator.pointerEnabled||window.navigator.msPointerEnabled)&&("container"===f.params.touchEventsTarget?f.container:f.wrapper).addClass("swiper-wp8-"+f.params.direction),f.events=function(t){var e=t?"off":"on",n=t?"removeEventListener":"addEventListener",r="container"===f.params.touchEventsTarget?f.container:f.wrapper,i=f.support.touch?r:d(document),a=!!f.params.nested;r[0][n](f.touchEvents.start,f.onTouchStart,!1),i[0][n](f.touchEvents.move,f.onTouchMove,a),i[0][n](f.touchEvents.end,f.onTouchEnd,!1),window[n]("resize",f.onResize),f.params.nextButton&&d(f.params.nextButton)[e]("click",f.onClickNext),f.params.prevButton&&d(f.params.prevButton)[e]("click",f.onClickPrev),f.params.pagination&&f.params.paginationClickable&&d(f.paginationContainer)[e]("click","."+f.params.bulletClass,f.onClickIndex),(f.params.preventClicks||f.params.preventClicksPropagation)&&r[0][n]("click",f.preventClicks,!0)},f.attachEvents=function(){f.events()},f.detachEvents=function(){f.events(!0)},f.allowClick=!0,f.preventClicks=function(t){f.allowClick||(f.params.preventClicks&&t.preventDefault(),f.params.preventClicksPropagation&&(t.stopPropagation(),t.stopImmediatePropagation()))},f.onClickNext=function(t){t.preventDefault(),f.slideNext()},f.onClickPrev=function(t){t.preventDefault(),f.slidePrev()},f.onClickIndex=function(t){t.preventDefault();var e=d(this).index()*f.params.slidesPerGroup;f.params.loop&&(e+=f.loopedSlides),f.slideTo(e)},f.updateClickedSlide=function(t){var e=o(t,"."+f.params.slideClass);if(!e)return f.clickedSlide=void 0,void(f.clickedIndex=void 0);if(f.clickedSlide=e,f.clickedIndex=d(e).index(),f.params.slideToClickedSlide&&void 0!==f.clickedIndex&&f.clickedIndex!==f.activeIndex){var n,r=f.clickedIndex;if(f.params.loop)if(n=d(f.clickedSlide).attr("data-swiper-slide-index"),r>f.slides.length-f.params.slidesPerView)f.fixLoop(),r=f.wrapper.children("."+f.params.slideClass+'[data-swiper-slide-index="'+n+'"]').eq(0).index(),setTimeout(function(){f.slideTo(r)},0);else if(r<f.params.slidesPerView-1){f.fixLoop();var i=f.wrapper.children("."+f.params.slideClass+'[data-swiper-slide-index="'+n+'"]');r=i.eq(i.length-1).index(),setTimeout(function(){f.slideTo(r)},0)}else f.slideTo(r);else f.slideTo(r)}};var p,g,m,v,y,_,b,x={},w={};f.animating=!1;var C,k,S=Date.now(),T=[],A="input, select, textarea, button";return f.onTouchStart=function(t){if(t.originalEvent&&(t=t.originalEvent),!("mousedown"===t.type&&"which"in t&&3===t.which||f.params.noSwiping&&o(t,"."+f.params.noSwipingClass)||f.params.swipeHandler&&!o(t,f.params.swipeHandler))){if(p=!0,g=!1,v=void 0,x.x=w.x="touchstart"===t.type?t.targetTouches[0].pageX:t.pageX,x.y=w.y="touchstart"===t.type?t.targetTouches[0].pageY:t.pageY,m=Date.now(),f.allowClick=!0,f.updateContainerSize(),f.swipeDirection=void 0,f.params.threshold>0&&(b=!1),"touchstart"!==t.type){var e=!0;d(t.target).is(A)&&(e=!1),document.activeElement&&d(document.activeElement).is(A)&&document.activeElement.blur(),e&&t.preventDefault()}f.params.onTouchStart&&f.params.onTouchStart(f,t)}},f.onTouchMove=function(t){if(t.originalEvent&&(t=t.originalEvent),!t.preventedByNestedSwiper){if(f.params.onlyExternal)return g=!0,void(f.allowClick=!1);if(f.params.onTouchMove&&f.params.onTouchMove(f,t),f.allowClick=!1,p&&!(t.targetTouches&&t.targetTouches.length>1)){w.x="touchmove"===t.type?t.targetTouches[0].pageX:t.pageX,w.y="touchmove"===t.type?t.targetTouches[0].pageY:t.pageY;var e=180*Math.atan2(Math.abs(w.y-x.y),Math.abs(w.x-x.x))/Math.PI;if("undefined"==typeof v&&(v=r()?e>f.params.touchAngle:90-e>f.params.touchAngle),v)return void(p=!1);f.params.onSliderMove&&f.params.onSliderMove(f,t),t.preventDefault(),f.params.touchMoveStopPropagation&&!f.params.nested&&t.stopPropagation(),g||(n.loop&&f.fixLoop(),_="cube"===f.params.effect?(f.rtl?-f.translate:f.translate)||0:f.getWrapperTranslate(),
f.setWrapperTransition(0),f.animating&&f.wrapper.trigger("webkitTransitionEnd transitionend oTransitionEnd MSTransitionEnd msTransitionEnd"),f.params.autoplay&&f.autoplaying&&(f.params.autoplayDisableOnInteraction?f.stopAutoplay():f.pauseAutoplay()),k=!1,f.params.grabCursor&&(f.container[0].style.cursor="move",f.container[0].style.cursor="-webkit-grabbing",f.container[0].style.cursor="-moz-grabbin",f.container[0].style.cursor="grabbing")),g=!0;var i=r()?w.x-x.x:w.y-x.y;i*=f.params.touchRatio,f.rtl&&(i=-i),f.swipeDirection=i>0?"prev":"next",y=i+_;var a=!0;if(i>0&&y>f.minTranslate()?(a=!1,f.params.resistance&&(y=f.minTranslate()-1+Math.pow(-f.minTranslate()+_+i,f.params.resistanceRatio))):0>i&&y<f.maxTranslate()&&(a=!1,f.params.resistance&&(y=f.maxTranslate()+1-Math.pow(f.maxTranslate()-_-i,f.params.resistanceRatio))),a&&(t.preventedByNestedSwiper=!0),!f.params.allowSwipeToNext&&"next"===f.swipeDirection&&_>y&&(y=_),!f.params.allowSwipeToPrev&&"prev"===f.swipeDirection&&y>_&&(y=_),f.params.followFinger){if(f.params.threshold>0){if(!(Math.abs(i)>f.params.threshold||b))return void(y=_);if(!b)return b=!0,x.x=w.x,x.y=w.y,void(y=_)}(f.params.freeMode||f.params.watchSlidesProgress)&&f.updateActiveIndex(),f.params.freeMode&&(0===T.length&&T.push({position:x[r()?"x":"y"],time:m}),T.push({position:w[r()?"x":"y"],time:(new Date).getTime()})),f.updateProgress(y),f.setWrapperTranslate(y)}}}},f.onTouchEnd=function(t){if(t.originalEvent&&(t=t.originalEvent),p){f.params.onTouchEnd&&f.params.onTouchEnd(f,t),f.params.grabCursor&&g&&p&&(f.container[0].style.cursor="move",f.container[0].style.cursor="-webkit-grab",f.container[0].style.cursor="-moz-grab",f.container[0].style.cursor="grab");var e=Date.now(),n=e-m;f.allowClick&&(f.updateClickedSlide(t),f.params.onTap&&f.params.onTap(f,t),300>n&&e-S>300&&(C&&clearTimeout(C),C=setTimeout(function(){f&&(f.params.paginationHide&&f.paginationContainer.length>0&&!d(t.target).hasClass(f.params.bulletClass)&&f.paginationContainer.toggleClass(f.params.paginationHiddenClass),f.params.onClick&&f.params.onClick(f,t))},300)),300>n&&300>e-S&&(C&&clearTimeout(C),f.params.onDoubleTap&&f.params.onDoubleTap(f,t))),S=Date.now(),setTimeout(function(){f&&f.allowClick&&(f.allowClick=!0)},0);var i=r()?w.x-x.x:w.y-x.y;if(!p||!g||!f.swipeDirection||0===i||y===_)return void(p=g=!1);p=g=!1;var a;if(a=f.params.followFinger?f.rtl?f.translate:-f.translate:-y,f.params.freeMode){if(a<-f.minTranslate())return void f.slideTo(f.activeIndex);if(a>-f.maxTranslate())return void f.slideTo(f.slides.length-1);if(f.params.freeModeMomentum){if(T.length>1){var o=T.pop(),s=T.pop(),l=o.position-s.position,u=o.time-s.time;f.velocity=l/u,f.velocity=f.velocity/2,Math.abs(f.velocity)<.02&&(f.velocity=0),(u>150||n>300)&&(f.velocity=0)}else f.velocity=0;T.length=0;var c,h=1e3*f.params.freeModeMomentumRatio,v=f.velocity*h,b=f.translate+v,A=!1,E=20*Math.abs(f.velocity)*f.params.freeModeMomentumBounceRatio;b<f.maxTranslate()&&(f.params.freeModeMomentumBounce?(b+f.maxTranslate()<-E&&(b=f.maxTranslate()-E),c=f.maxTranslate(),A=!0,k=!0):b=f.maxTranslate()),b>f.minTranslate()&&(f.params.freeModeMomentumBounce?(b-f.minTranslate()>E&&(b=f.minTranslate()+E),c=f.minTranslate(),A=!0,k=!0):b=f.minTranslate()),0!==f.velocity&&(h=Math.abs((b-f.translate)/f.velocity)),f.params.freeModeMomentumBounce&&A?(f.updateProgress(c),f.setWrapperTranslate(b),f.setWrapperTransition(h),f.onTransitionStart(),f.animating=!0,f.wrapper.transitionEnd(function(){k&&(f.params.onMomentumBounce&&f.params.onMomentumBounce(f),f.setWrapperTranslate(c),f.setWrapperTransition(f.params.speed),f.wrapper.transitionEnd(function(){f.onTransitionEnd()}))})):f.velocity?(f.updateProgress(b),f.setWrapperTranslate(b),f.setWrapperTransition(h),f.onTransitionStart(),f.animating||(f.animating=!0,f.wrapper.transitionEnd(function(){f.onTransitionEnd()}))):f.updateProgress(b),f.updateActiveIndex()}return void((!f.params.freeModeMomentum||n>=f.params.longSwipesMs)&&(f.updateProgress(),f.updateActiveIndex()))}var M,D=0,P=f.slidesSizesGrid[0];for(M=0;M<f.slidesGrid.length;M+=f.params.slidesPerGroup)"undefined"!=typeof f.slidesGrid[M+f.params.slidesPerGroup]?a>=f.slidesGrid[M]&&a<f.slidesGrid[M+f.params.slidesPerGroup]&&(D=M,P=f.slidesGrid[M+f.params.slidesPerGroup]-f.slidesGrid[M]):a>=f.slidesGrid[M]&&(D=M,P=f.slidesGrid[f.slidesGrid.length-1]-f.slidesGrid[f.slidesGrid.length-2]);var O=(a-f.slidesGrid[D])/P;if(n>f.params.longSwipesMs){if(!f.params.longSwipes)return void f.slideTo(f.activeIndex);"next"===f.swipeDirection&&f.slideTo(O>=f.params.longSwipesRatio?D+f.params.slidesPerGroup:D),"prev"===f.swipeDirection&&f.slideTo(O>1-f.params.longSwipesRatio?D+f.params.slidesPerGroup:D)}else{if(!f.params.shortSwipes)return void f.slideTo(f.activeIndex);"next"===f.swipeDirection&&f.slideTo(D+f.params.slidesPerGroup),"prev"===f.swipeDirection&&f.slideTo(D)}}},f._slideTo=function(t,e){return f.slideTo(t,e,!0,!0)},f.slideTo=function(t,e,n,i){"undefined"==typeof n&&(n=!0),"undefined"==typeof t&&(t=0),0>t&&(t=0),f.snapIndex=Math.floor(t/f.params.slidesPerGroup),f.snapIndex>=f.snapGrid.length&&(f.snapIndex=f.snapGrid.length-1);var a=-f.snapGrid[f.snapIndex];f.params.autoplay&&f.autoplaying&&(i||!f.params.autoplayDisableOnInteraction?f.pauseAutoplay(e):f.stopAutoplay()),f.updateProgress(a);for(var o=0;o<f.slidesGrid.length;o++)-a>=f.slidesGrid[o]&&(t=o);return"undefined"==typeof e&&(e=f.params.speed),f.previousIndex=f.activeIndex||0,f.activeIndex=t,a===f.translate?(f.updateClasses(),!1):(n&&f.onTransitionStart(),r()?a:0,r()?0:a,0===e?(f.setWrapperTransition(0),f.setWrapperTranslate(a),n&&f.onTransitionEnd()):(f.setWrapperTransition(e),f.setWrapperTranslate(a),f.animating||(f.animating=!0,f.wrapper.transitionEnd(function(){n&&f.onTransitionEnd()}))),f.updateClasses(),void 0)},f.onTransitionStart=function(){f.params.onTransitionStart&&f.params.onTransitionStart(f),f.params.onSlideChangeStart&&f.activeIndex!==f.previousIndex&&f.params.onSlideChangeStart(f)},f.onTransitionEnd=function(){f.animating=!1,f.setWrapperTransition(0),f.params.onTransitionEnd&&f.params.onTransitionEnd(f),f.params.onSlideChangeEnd&&f.activeIndex!==f.previousIndex&&f.params.onSlideChangeEnd(f)},f.slideNext=function(t,e,n){return f.params.loop?!f.animating&&(f.fixLoop(),f.container[0].clientLeft,f.slideTo(f.activeIndex+f.params.slidesPerGroup,e,t,n)):f.slideTo(f.activeIndex+f.params.slidesPerGroup,e,t,n)},f._slideNext=function(t){return f.slideNext(!0,t,!0)},f.slidePrev=function(t,e,n){return f.params.loop?!f.animating&&(f.fixLoop(),f.container[0].clientLeft,f.slideTo(f.activeIndex-1,e,t,n)):f.slideTo(f.activeIndex-1,e,t,n)},f._slidePrev=function(t){return f.slidePrev(!0,t,!0)},f.slideReset=function(t,e){return f.slideTo(f.activeIndex,e,t)},f.setWrapperTransition=function(t,e){f.wrapper.transition(t),f.params.onSetTransition&&f.params.onSetTransition(f,t),"slide"!==f.params.effect&&f.effects[f.params.effect]&&f.effects[f.params.effect].setTransition(t),f.params.scrollbar&&f.scrollbar&&f.scrollbar.setTransition(t),f.params.control&&f.controller&&f.controller.setTransition(t,e)},f.setWrapperTranslate=function(t,e,n){var i=0,a=0,o=0;r()?i=f.rtl?-t:t:a=t,f.wrapper.transform(f.support.transforms3d?"translate3d("+i+"px, "+a+"px, "+o+"px)":"translate("+i+"px, "+a+"px)"),f.translate=r()?i:a,e&&f.updateActiveIndex(),"slide"!==f.params.effect&&f.effects[f.params.effect]&&f.effects[f.params.effect].setTranslate(f.translate),f.params.scrollbar&&f.scrollbar&&f.scrollbar.setTranslate(f.translate),f.params.control&&f.controller&&f.controller.setTranslate(f.translate,n),f.params.hashnav&&f.hashnav&&f.hashnav.setHash(),f.params.onSetTranslate&&f.params.onSetTranslate(f,f.translate)},f.getTranslate=function(t,e){var n,r,i,a;return"undefined"==typeof e&&(e="x"),i=window.getComputedStyle(t,null),window.WebKitCSSMatrix?a=new WebKitCSSMatrix("none"===i.webkitTransform?"":i.webkitTransform):(a=i.MozTransform||i.OTransform||i.MsTransform||i.msTransform||i.transform||i.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,"),n=a.toString().split(",")),"x"===e&&(r=window.WebKitCSSMatrix?a.m41:parseFloat(16===n.length?n[12]:n[4])),"y"===e&&(r=window.WebKitCSSMatrix?a.m42:parseFloat(16===n.length?n[13]:n[5])),f.rtl&&r&&(r=-r),r||0},f.getWrapperTranslate=function(t){return"undefined"==typeof t&&(t=r()?"x":"y"),f.getTranslate(f.wrapper[0],t)},f.observers=[],f.initObservers=function(){if(f.params.observeParents)for(var t=f.container.parents(),e=0;e<t.length;e++)s(t[e]);s(f.container[0],{childList:!1}),s(f.wrapper[0],{attributes:!1})},f.disconnectObservers=function(){for(var t=0;t<f.observers.length;t++)f.observers[t].disconnect();f.observers=[]},f.createLoop=function(){f.wrapper.children("."+f.params.slideClass+"."+f.params.slideDuplicateClass).remove();var t=f.wrapper.children("."+f.params.slideClass);f.loopedSlides=parseInt(f.params.loopedSlides||f.params.slidesPerView,10),f.loopedSlides=f.loopedSlides+f.params.loopAdditionalSlides,f.loopedSlides>t.length&&(f.loopedSlides=t.length);var e,n=[],r=[];for(t.each(function(e,i){var a=d(this);e<f.loopedSlides&&r.push(i),e<t.length&&e>=t.length-f.loopedSlides&&n.push(i),a.attr("data-swiper-slide-index",e)}),e=0;e<r.length;e++)f.wrapper.append(d(r[e].cloneNode(!0)).addClass(f.params.slideDuplicateClass));for(e=n.length-1;e>=0;e--)f.wrapper.prepend(d(n[e].cloneNode(!0)).addClass(f.params.slideDuplicateClass))},f.deleteLoop=function(){f.wrapper.children("."+f.params.slideClass+"."+f.params.slideDuplicateClass).remove()},f.fixLoop=function(){var t;f.activeIndex<f.loopedSlides?(t=f.slides.length-3*f.loopedSlides+f.activeIndex,t+=f.loopedSlides,f.slideTo(t,0,!1,!0)):("auto"===f.params.slidesPerView&&f.activeIndex>=2*f.loopedSlides||f.activeIndex>f.slides.length-2*f.params.slidesPerView)&&(t=-f.slides.length+f.activeIndex+f.loopedSlides,t+=f.loopedSlides,f.slideTo(t,0,!1,!0))},f.appendSlide=function(t){if(f.params.loop&&f.deleteLoop(),"object"==typeof t&&t.length)for(var e=0;e<t.length;e++)t[e]&&f.wrapper.append(t[e]);else f.wrapper.append(t);f.params.loop&&f.createLoop(),f.params.observer&&f.support.observer||f.update()},f.prependSlide=function(t){f.params.loop&&f.deleteLoop();var e=f.activeIndex+1;if("object"==typeof t&&t.length){for(var n=0;n<t.length;n++)t[n]&&f.wrapper.prepend(t[n]);e=f.activeIndex+t.length}else f.wrapper.prepend(t);f.params.loop&&f.createLoop(),f.params.observer&&f.support.observer||f.update(),f.slideTo(e,0,!1)},f.effects={fade:{setTranslate:function(){for(var t=0;t<f.slides.length;t++){var e=f.slides.eq(t),n=e[0].swiperSlideOffset,i=-n-f.translate,a=0;r()||(a=i,i=0),e.css({opacity:1+Math.min(Math.max(e[0].progress,-1),0)}).transform("translate3d("+i+"px, "+a+"px, 0px)")}},setTransition:function(t){f.slides.transition(t)}},cube:{setTranslate:function(){var t,e=0;f.params.cube.shadow&&(r()?(t=f.wrapper.find(".swiper-cube-shadow"),0===t.length&&(t=d('<div class="swiper-cube-shadow"></div>'),f.wrapper.append(t)),t.css({height:f.width+"px"})):(t=f.container.find(".swiper-cube-shadow"),0===t.length&&(t=d('<div class="swiper-cube-shadow"></div>'),f.container.append(t))));for(var n=0;n<f.slides.length;n++){var i=f.slides.eq(n),a=90*n,o=Math.floor(a/360);f.rtl&&(a=-a,o=Math.floor(-a/360));var s=Math.max(Math.min(i[0].progress,1),-1),l=0,u=0,c=0;n%4===0?(l=4*-o*f.size,c=0):(n-1)%4===0?(l=0,c=4*-o*f.size):(n-2)%4===0?(l=f.size+4*o*f.size,c=f.size):(n-3)%4===0&&(l=-f.size,c=3*f.size+4*f.size*o),f.rtl&&(l=-l),r()||(u=l,l=0);var h="rotateX("+(r()?0:-a)+"deg) rotateY("+(r()?a:0)+"deg) translate3d("+l+"px, "+u+"px, "+c+"px)";if(1>=s&&s>-1&&(e=90*n+90*s,f.rtl&&(e=90*-n-90*s)),i.transform(h),f.params.cube.slideShadows){var p=i.find(r()?".swiper-slide-shadow-left":".swiper-slide-shadow-top"),g=i.find(r()?".swiper-slide-shadow-right":".swiper-slide-shadow-bottom");0===p.length&&(p=d('<div class="swiper-slide-shadow-'+(r()?"left":"top")+'"></div>'),i.append(p)),0===g.length&&(g=d('<div class="swiper-slide-shadow-'+(r()?"right":"bottom")+'"></div>'),i.append(g)),i[0].progress,p.length&&(p[0].style.opacity=-i[0].progress),g.length&&(g[0].style.opacity=i[0].progress)}}if(f.wrapper.css({"-webkit-transform-origin":"50% 50% -"+f.size/2+"px","-moz-transform-origin":"50% 50% -"+f.size/2+"px","-ms-transform-origin":"50% 50% -"+f.size/2+"px","transform-origin":"50% 50% -"+f.size/2+"px"}),f.params.cube.shadow)if(r())t.transform("translate3d(0px, "+(f.width/2+f.params.cube.shadowOffset)+"px, "+-f.width/2+"px) rotateX(90deg) rotateZ(0deg) scale("+f.params.cube.shadowScale+")");else{var m=Math.abs(e)-90*Math.floor(Math.abs(e)/90),v=1.5-(Math.sin(2*m*Math.PI/360)/2+Math.cos(2*m*Math.PI/360)/2),y=f.params.cube.shadowScale,_=f.params.cube.shadowScale/v,b=f.params.cube.shadowOffset;t.transform("scale3d("+y+", 1, "+_+") translate3d(0px, "+(f.height/2+b)+"px, "+-f.height/2/_+"px) rotateX(-90deg)")}var x=f.isSafari||f.isUiWebView?-f.size/2:0;f.wrapper.transform("translate3d(0px,0,"+x+"px) rotateX("+(r()?0:e)+"deg) rotateY("+(r()?-e:0)+"deg)")},setTransition:function(t){f.slides.transition(t).find(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").transition(t),f.params.cube.shadow&&!r()&&f.container.find(".swiper-cube-shadow").transition(t)}},coverflow:{setTranslate:function(){for(var t=f.translate,e=r()?-t+f.width/2:-t+f.height/2,n=r()?f.params.coverflow.rotate:-f.params.coverflow.rotate,i=f.params.coverflow.depth,a=0,o=f.slides.length;o>a;a++){var s=f.slides.eq(a),l=f.slidesSizesGrid[a],u=s[0].swiperSlideOffset,c=(e-u-l/2)/l*f.params.coverflow.modifier,h=r()?n*c:0,p=r()?0:n*c,g=-i*Math.abs(c),m=r()?0:f.params.coverflow.stretch*c,v=r()?f.params.coverflow.stretch*c:0;Math.abs(v)<.001&&(v=0),Math.abs(m)<.001&&(m=0),Math.abs(g)<.001&&(g=0),Math.abs(h)<.001&&(h=0),Math.abs(p)<.001&&(p=0);var y="translate3d("+v+"px,"+m+"px,"+g+"px)  rotateX("+p+"deg) rotateY("+h+"deg)";if(s.transform(y),s[0].style.zIndex=-Math.abs(Math.round(c))+1,f.params.coverflow.slideShadows){var _=s.find(r()?".swiper-slide-shadow-left":".swiper-slide-shadow-top"),b=s.find(r()?".swiper-slide-shadow-right":".swiper-slide-shadow-bottom");0===_.length&&(_=d('<div class="swiper-slide-shadow-'+(r()?"left":"top")+'"></div>'),s.append(_)),0===b.length&&(b=d('<div class="swiper-slide-shadow-'+(r()?"right":"bottom")+'"></div>'),s.append(b)),_.length&&(_[0].style.opacity=c>0?c:0),b.length&&(b[0].style.opacity=-c>0?-c:0)}}if(window.navigator.pointerEnabled||window.navigator.msPointerEnabled){var x=f.wrapper.style;x.perspectiveOrigin=e+"px 50%"}},setTransition:function(t){f.slides.transition(t).find(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").transition(t)}}},f.scrollbar={init:function(){if(f.params.scrollbar){var t=f.scrollbar;t.track=d(f.params.scrollbar),t.drag=t.track.find(".swiper-scrollbar-drag"),0===t.drag.length&&(t.drag=d('<div class="swiper-scrollbar-drag"></div>'),t.track.append(t.drag)),t.drag[0].style.width="",t.drag[0].style.height="",t.trackSize=r()?t.track[0].offsetWidth:t.track[0].offsetHeight,t.divider=f.size/f.virtualWidth,t.moveDivider=t.divider*(t.trackSize/f.size),t.dragSize=t.trackSize*t.divider,r()?t.drag[0].style.width=t.dragSize+"px":t.drag[0].style.height=t.dragSize+"px",t.track[0].style.display=t.divider>=1?"none":"",f.params.scrollbarHide&&(t.track[0].style.opacity=0)}},setTranslate:function(){if(f.params.scrollbar){var t,e=f.scrollbar,n=(f.translate||0,e.dragSize);t=(e.trackSize-e.dragSize)*f.progress,f.rtl&&r()?(t=-t,t>0?(n=e.dragSize-t,t=0):-t+e.dragSize>e.trackSize&&(n=e.trackSize+t)):0>t?(n=e.dragSize+t,t=0):t+e.dragSize>e.trackSize&&(n=e.trackSize-t),r()?(e.drag.transform("translate3d("+t+"px, 0, 0)"),e.drag[0].style.width=n+"px"):(e.drag.transform("translate3d(0px, "+t+"px, 0)"),e.drag[0].style.height=n+"px"),f.params.scrollbarHide&&(clearTimeout(e.timeout),e.track[0].style.opacity=1,e.timeout=setTimeout(function(){e.track[0].style.opacity=0,e.track.transition(400)},1e3))}},setTransition:function(t){f.params.scrollbar&&f.scrollbar.drag.transition(t)}},f.controller={setTranslate:function(t,e){var n,r,i=f.params.control;if(f.isArray(i))for(var a=0;a<i.length;a++)i[a]!==e&&i[a]instanceof Swiper&&(t=i[a].rtl&&"horizontal"===i[a].params.direction?-f.translate:f.translate,n=(i[a].maxTranslate()-i[a].minTranslate())/(f.maxTranslate()-f.minTranslate()),r=(t-f.minTranslate())*n+i[a].minTranslate(),f.params.controlInverse&&(r=i[a].maxTranslate()-r),i[a].updateProgress(r),i[a].setWrapperTranslate(r,!1,f),i[a].updateActiveIndex());else i instanceof Swiper&&e!==i&&(t=i.rtl&&"horizontal"===i.params.direction?-f.translate:f.translate,n=(i.maxTranslate()-i.minTranslate())/(f.maxTranslate()-f.minTranslate()),r=(t-f.minTranslate())*n+i.minTranslate(),f.params.controlInverse&&(r=i.maxTranslate()-r),i.updateProgress(r),i.setWrapperTranslate(r,!1,f),i.updateActiveIndex())},setTransition:function(t,e){var n=f.params.control;if(f.isArray(n))for(var r=0;r<n.length;r++)n[r]!==e&&n[r]instanceof Swiper&&n[r].setWrapperTransition(t,f);else n instanceof Swiper&&e!==n&&n.setWrapperTransition(t,f)}},f.init=function(){f.params.loop&&f.createLoop(),f.updateContainerSize(),f.updateSlidesSize(),f.updatePagination(),f.params.scrollbar&&f.scrollbar&&f.scrollbar.init(),"slide"!==f.params.effect&&f.effects[f.params.effect]&&(f.params.loop||f.updateProgress(),f.effects[f.params.effect].setTranslate()),f.params.loop?f.slideTo(f.params.initialSlide+f.loopedSlides,0,!1):f.slideTo(f.params.initialSlide,0,!1),f.attachEvents(),f.params.observer&&f.support.observer&&f.initObservers(),f.params.updateOnImagesReady&&f.preloadImages(),f.params.autoplay&&f.startAutoplay(),f.params.keyboardControl&&f.enableKeyboardControl&&f.enableKeyboardControl(),f.params.mousewheelControl&&f.enableMousewheelControl&&f.enableMousewheelControl(),f.params.hashnav&&f.hashnav&&f.hashnav.init()},f.destroy=function(t){f.detachEvents(),f.disconnectObservers(),f.params.keyboardControl&&f.disableKeyboard&&f.disableKeyboard(),f.params.mousewheelControl&&f.disableMousewheel&&f.disableMousewheel(),f.params.onDestroy&&f.params.onDestroy(),t!==!1&&(f=null)},f.init(),f}},Swiper.prototype={isSafari:function(){var t=navigator.userAgent.toLowerCase();return t.indexOf("safari")>=0&&t.indexOf("chrome")<0&&t.indexOf("android")<0}(),isUiWebView:/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(navigator.userAgent),isArray:function(t){return"[object Array]"===Object.prototype.toString.apply(t)},support:{touch:window.Modernizr&&Modernizr.touch===!0||function(){return!!("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch)}(),transforms3d:window.Modernizr&&Modernizr.csstransforms3d===!0||function(){var t=document.createElement("div").style;return"webkitPerspective"in t||"MozPerspective"in t||"OPerspective"in t||"MsPerspective"in t||"perspective"in t}(),flexbox:function(){for(var t=document.createElement("div").style,e="WebkitBox msFlexbox MsFlexbox WebkitFlex MozBox fles".split(" "),n=0;n<e.length;n++)if(e[n]in t)return!0}(),observer:function(){return"MutationObserver"in window||"WebkitMutationObserver"in window}()}}}(),!function(t){function e(t){return t}function n(t,e){for(var n=0,r=e.length,i=Array(r);r>n;++n)i[n]=t[e[n]];return i}function r(t){function e(e,n,r,i){for(;i>r;){var a=r+i>>>1;t(e[a])<n?r=a+1:i=a}return r}function n(e,n,r,i){for(;i>r;){var a=r+i>>>1;n<t(e[a])?i=a:r=a+1}return r}return n.right=n,n.left=e,n}function i(t){function e(t,e,n){for(var i=n-e,a=(i>>>1)+1;--a>0;)r(t,a,i,e);return t}function n(t,e,n){for(var i,a=n-e;--a>0;)i=t[e],t[e]=t[e+a],t[e+a]=i,r(t,1,a,e);return t}function r(e,n,r,i){for(var a,o=e[--i+n],s=t(o);(a=n<<1)<=r&&(r>a&&t(e[i+a])>t(e[i+a+1])&&a++,!(s<=t(e[i+a])));)e[i+n]=e[i+a],n=a;e[i+n]=o}return e.sort=n,e}function a(t){function e(e,r,i,a){var o,s,l,u,c=Array(a=Math.min(i-r,a));for(s=0;a>s;++s)c[s]=e[r++];if(n(c,0,a),i>r){o=t(c[0]);do(l=t(u=e[r])>o)&&(c[0]=u,o=t(n(c,0,a)[0]));while(++r<i)}return c}var n=i(t);return e}function o(t){function e(e,n,r){for(var i=n+1;r>i;++i){for(var a=i,o=e[i],s=t(o);a>n&&t(e[a-1])>s;--a)e[a]=e[a-1];e[a]=o}return e}return e}function s(t){function e(t,e,i){return(M>i-e?r:n)(t,e,i)}function n(n,r,i){var a,o=0|(i-r)/6,s=r+o,l=i-1-o,u=r+i-1>>1,c=u-o,f=u+o,d=n[s],h=t(d),p=n[c],g=t(p),m=n[u],v=t(m),y=n[f],_=t(y),b=n[l],x=t(b);h>g&&(a=d,d=p,p=a,a=h,h=g,g=a),_>x&&(a=y,y=b,b=a,a=_,_=x,x=a),h>v&&(a=d,d=m,m=a,a=h,h=v,v=a),g>v&&(a=p,p=m,m=a,a=g,g=v,v=a),h>_&&(a=d,d=y,y=a,a=h,h=_,_=a),v>_&&(a=m,m=y,y=a,a=v,v=_,_=a),g>x&&(a=p,p=b,b=a,a=g,g=x,x=a),g>v&&(a=p,p=m,m=a,a=g,g=v,v=a),_>x&&(a=y,y=b,b=a,a=_,_=x,x=a);var w=p,C=g,k=y,S=_;n[s]=d,n[c]=n[r],n[u]=m,n[f]=n[i-1],n[l]=b;var T=r+1,A=i-2,E=S>=C&&C>=S;if(E)for(var M=T;A>=M;++M){var D=n[M],P=t(D);if(C>P)M!==T&&(n[M]=n[T],n[T]=D),++T;else if(P>C)for(;;){var O=t(n[A]);if(!(O>C)){if(C>O){n[M]=n[T],n[T++]=n[A],n[A--]=D;break}n[M]=n[A],n[A--]=D;break}A--}}else for(var M=T;A>=M;M++){var D=n[M],P=t(D);if(C>P)M!==T&&(n[M]=n[T],n[T]=D),++T;else if(P>S)for(;;){var O=t(n[A]);if(!(O>S)){C>O?(n[M]=n[T],n[T++]=n[A],n[A--]=D):(n[M]=n[A],n[A--]=D);break}if(A--,M>A)break}}if(n[r]=n[T-1],n[T-1]=w,n[i-1]=n[A+1],n[A+1]=k,e(n,r,T-1),e(n,A+2,i),E)return n;if(s>T&&A>l){for(var N,O;(N=t(n[T]))<=C&&N>=C;)++T;for(;(O=t(n[A]))<=S&&O>=S;)--A;for(var M=T;A>=M;M++){var D=n[M],P=t(D);if(C>=P&&P>=C)M!==T&&(n[M]=n[T],n[T]=D),T++;else if(S>=P&&P>=S)for(;;){var O=t(n[A]);if(!(S>=O&&O>=S)){C>O?(n[M]=n[T],n[T++]=n[A],n[A--]=D):(n[M]=n[A],n[A--]=D);break}if(A--,M>A)break}}}return e(n,T,A+1)}var r=o(t);return e}function l(t){for(var e=Array(t),n=-1;++n<t;)e[n]=0;return e}function u(t,e){for(var n=t.length;e>n;)t[n++]=0;return t}function c(t,e){if(e>32)throw Error("invalid array width!");return t}function f(t,e){return function(n){var r=n.length;return[t.left(n,e,0,r),t.right(n,e,0,r)]}}function d(t,e){var n=e[0],r=e[1];return function(e){var i=e.length;return[t.left(e,n,0,i),t.left(e,r,0,i)]}}function h(t){return[0,t.length]}function p(){return null}function g(){return 0}function m(t){return t+1}function v(t){return t-1}function y(t){return function(e,n){return e+ +t(n)}}function _(t){return function(e,n){return e-t(n)}}function b(){function t(t){var e=S,n=t.length;return n&&(b=b.concat(t),E=N(E,S+=n),P.forEach(function(r){r(t,e,n)})),c}function r(){for(var t=x(S,S),e=[],n=0,r=0;S>n;++n)E[n]?t[n]=r++:e.push(n);M.forEach(function(t){t(0,[],e)}),O.forEach(function(e){e(t)});for(var i,n=0,r=0;S>n;++n)(i=E[n])&&(n!==r&&(E[r]=i,b[r]=b[n]),++r);for(b.length=r;S>r;)E[--S]=0}function o(t){function r(e,r,i){W=e.map(t),G=Z(w(i),0,i),W=n(W,G);var a,o=Q(W),s=o[0],l=o[1];if(X)for(a=0;i>a;++a)X(W[a],a)||(E[G[a]+r]|=J);else{for(a=0;s>a;++a)E[G[a]+r]|=J;for(a=l;i>a;++a)E[G[a]+r]|=J}if(!r)return V=W,$=G,nt=s,void(rt=l);var u=V,c=$,f=0,d=0;for(V=Array(S),$=x(S,S),a=0;r>f&&i>d;++a)u[f]<W[d]?(V[a]=u[f],$[a]=c[f++]):(V[a]=W[d],$[a]=G[d++]+r);for(;r>f;++f,++a)V[a]=u[f],$[a]=c[f];for(;i>d;++d,++a)V[a]=W[d],$[a]=G[d]+r;o=Q(V),nt=o[0],rt=o[1]}function o(t,e,n){tt.forEach(function(t){t(W,G,e,n)}),W=G=null}function l(t){for(var e,n=0,r=0;S>n;++n)E[e=$[n]]&&(n!==r&&(V[r]=V[n]),$[r]=t[e],++r);for(V.length=r;S>r;)$[r++]=0;var i=Q(V);nt=i[0],rt=i[1]}function u(t){var e=t[0],n=t[1];if(X)return X=null,z(function(t,r){return r>=e&&n>r}),nt=e,rt=n,Y;var r,i,a,o=[],s=[];if(nt>e)for(r=e,i=Math.min(nt,n);i>r;++r)E[a=$[r]]^=J,o.push(a);else if(e>nt)for(r=nt,i=Math.min(e,rt);i>r;++r)E[a=$[r]]^=J,s.push(a);if(n>rt)for(r=Math.max(e,rt),i=n;i>r;++r)E[a=$[r]]^=J,o.push(a);else if(rt>n)for(r=Math.max(nt,n),i=rt;i>r;++r)E[a=$[r]]^=J,s.push(a);return nt=e,rt=n,M.forEach(function(t){t(J,o,s)}),Y}function c(t){return null==t?R():Array.isArray(t)?I(t):"function"==typeof t?B(t):D(t)}function D(t){return u((Q=f(k,t))(V))}function I(t){return u((Q=d(k,t))(V))}function R(){return u((Q=h)(V))}function B(t){return Q=h,z(X=t),nt=0,rt=S,Y}function z(t){var e,n,r,i=[],a=[];for(e=0;S>e;++e)!(E[n=$[e]]&J)^!!(r=t(V[e],e))&&(r?(E[n]&=K,i.push(n)):(E[n]|=J,a.push(n)));M.forEach(function(t){t(J,i,a)})}function F(t){for(var e,n=[],r=rt;--r>=nt&&t>0;)E[e=$[r]]||(n.push(b[e]),--t);return n}function q(t){for(var e,n=[],r=nt;rt>r&&t>0;)E[e=$[r]]||(n.push(b[e]),--t),r++;return n}function H(t){function n(e,n,r,i){function a(){++W===j&&(y=L(y,U<<=1),R=L(R,U),j=C(U))}var c,f,d,h,g,m,v=I,y=x(W,j),_=F,w=H,k=W,T=0,A=0;for(Y&&(_=w=p),I=Array(W),W=0,R=k>1?N(R,S):x(S,j),k&&(d=(f=v[0]).key);i>A&&!((h=t(e[A]))>=h);)++A;for(;i>A;){for(f&&h>=d?(g=f,m=d,y[T]=W,(f=v[++T])&&(d=f.key)):(g={key:h,value:w()},m=h),I[W]=g;!(h>m||(R[c=n[A]+r]=W,E[c]&K||(g.value=_(g.value,b[c])),++A>=i));)h=t(e[A]);a()}for(;k>T;)I[y[T]=W]=v[T++],a();if(W>T)for(T=0;r>T;++T)R[T]=y[R[T]];c=M.indexOf(G),W>1?(G=o,X=l):(!W&&Z&&(W=1,I=[{key:null,value:w()}]),1===W?(G=s,X=u):(G=p,X=p),R=null),M[c]=G}function r(){if(W>1){for(var t=W,e=I,n=x(t,t),r=0,i=0;S>r;++r)E[r]&&(n[R[i]=R[r]]=1,++i);for(I=[],W=0,r=0;t>r;++r)n[r]&&(n[r]=W++,I.push(e[r]));if(W>1)for(var r=0;i>r;++r)R[r]=n[R[r]];else R=null;M[M.indexOf(G)]=W>1?(X=l,G=o):1===W?(X=u,G=s):X=G=p}else if(1===W){if(Z)return;for(var r=0;S>r;++r)if(E[r])return;I=[],W=0,M[M.indexOf(G)]=G=X=p}}function o(t,e,n){if(t!==J&&!Y){var r,i,a,o;for(r=0,a=e.length;a>r;++r)E[i=e[r]]&K||(o=I[R[i]],o.value=F(o.value,b[i]));for(r=0,a=n.length;a>r;++r)(E[i=n[r]]&K)===t&&(o=I[R[i]],o.value=q(o.value,b[i]))}}function s(t,e,n){if(t!==J&&!Y){var r,i,a,o=I[0];for(r=0,a=e.length;a>r;++r)E[i=e[r]]&K||(o.value=F(o.value,b[i]));for(r=0,a=n.length;a>r;++r)(E[i=n[r]]&K)===t&&(o.value=q(o.value,b[i]))}}function l(){var t,e;for(t=0;W>t;++t)I[t].value=H();for(t=0;S>t;++t)E[t]&K||(e=I[R[t]],e.value=F(e.value,b[t]))}function u(){var t,e=I[0];for(e.value=H(),t=0;S>t;++t)E[t]&K||(e.value=F(e.value,b[t]))}function c(){return Y&&(X(),Y=!1),I}function f(t){var e=B(c(),0,I.length,t);return z.sort(e,0,e.length)}function d(t,e,n){return F=t,q=e,H=n,Y=!0,P}function h(){return d(m,v,g)}function w(t){return d(y(t),_(t),g)}function k(t){function e(e){return t(e.value)}return B=a(e),z=i(e),P}function T(){return k(e)}function A(){return W}function D(){var t=M.indexOf(G);return t>=0&&M.splice(t,1),t=tt.indexOf(n),t>=0&&tt.splice(t,1),t=O.indexOf(r),t>=0&&O.splice(t,1),P}var P={top:f,all:c,reduce:d,reduceCount:h,reduceSum:w,order:k,orderNatural:T,size:A,dispose:D,remove:D};et.push(P);var I,R,B,z,F,q,H,U=8,j=C(U),W=0,G=p,X=p,Y=!0,Z=t===p;return arguments.length<1&&(t=e),M.push(G),tt.push(n),O.push(r),n(V,$,0,S),h().orderNatural()}function U(){var t=H(p),e=t.all;return delete t.all,delete t.top,delete t.order,delete t.orderNatural,delete t.size,t.value=function(){return e()[0].value},t}function j(){et.forEach(function(t){t.dispose()});var t=P.indexOf(r);return t>=0&&P.splice(t,1),t=P.indexOf(o),t>=0&&P.splice(t,1),t=O.indexOf(l),t>=0&&O.splice(t,1),T&=K,R()}var V,$,W,G,X,Y={filter:c,filterExact:D,filterRange:I,filterFunction:B,filterAll:R,top:F,bottom:q,group:H,groupAll:U,dispose:j,remove:j},J=~T&-~T,K=~J,Z=s(function(t){return W[t]}),Q=h,tt=[],et=[],nt=0,rt=0;return P.unshift(r),P.push(o),O.push(l),T|=J,(A>=32?!J:T&-(1<<A))&&(E=L(E,A<<=1)),r(b,0,S),o(b,0,S),Y}function l(){function t(t,e){var n;if(!h)for(n=e;S>n;++n)E[n]||(l=u(l,b[n]))}function e(t,e,n){var r,i,a;if(!h){for(r=0,a=e.length;a>r;++r)E[i=e[r]]||(l=u(l,b[i]));for(r=0,a=n.length;a>r;++r)E[i=n[r]]===t&&(l=c(l,b[i]))}}function n(){var t;for(l=f(),t=0;S>t;++t)E[t]||(l=u(l,b[t]))}function r(t,e,n){return u=t,c=e,f=n,h=!0,d}function i(){return r(m,v,g)}function a(t){return r(y(t),_(t),g)}function o(){return h&&(n(),h=!1),l}function s(){var n=M.indexOf(e);return n>=0&&M.splice(n),n=P.indexOf(t),n>=0&&P.splice(n),d}var l,u,c,f,d={reduce:r,reduceCount:i,reduceSum:a,value:o,dispose:s,remove:s},h=!0;return M.push(e),P.push(t),t(b,0,S),i()}function u(){return S}var c={add:t,remove:r,dimension:o,groupAll:l,size:u},b=[],S=0,T=0,A=8,E=D(0),M=[],P=[],O=[];return arguments.length?t(arguments[0]):c}function x(t,e){return(257>e?D:65537>e?P:O)(t)}function w(t){for(var e=x(t,t),n=-1;++n<t;)e[n]=n;return e}function C(t){return 8===t?256:16===t?65536:4294967296}b.version="1.3.14",b.permute=n;var k=b.bisect=r(e);k.by=r;var S=b.heap=i(e);S.by=i;var T=b.heapselect=a(e);T.by=a;var A=b.insertionsort=o(e);A.by=o;var E=b.quicksort=s(e);E.by=s;var M=32,D=l,P=l,O=l,N=u,L=c;"undefined"!=typeof Uint8Array&&(D=function(t){return new Uint8Array(t)},P=function(t){return new Uint16Array(t)},O=function(t){return new Uint32Array(t)},N=function(t,e){if(t.length>=e)return t;var n=new t.constructor(e);return n.set(t),n},L=function(t,e){var n;switch(e){case 16:n=P(t.length);break;case 32:n=O(t.length);break;default:throw Error("invalid array width!")}return n.set(t),n}),t.crossfilter=b}("undefined"!=typeof exports&&exports||this),!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(t.d3=t.d3||{})}(this,function(t){"use strict";function e(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function n(t){return 1===t.length&&(t=r(t)),{left:function(e,n,r,i){for(null==r&&(r=0),null==i&&(i=e.length);r<i;){var a=r+i>>>1;t(e[a],n)<0?r=a+1:i=a}return r},right:function(e,n,r,i){for(null==r&&(r=0),null==i&&(i=e.length);r<i;){var a=r+i>>>1;t(e[a],n)>0?i=a:r=a+1}return r}}}function r(t){return function(n,r){return e(t(n),r)}}function i(t,e){return e<t?-1:e>t?1:e>=t?0:NaN}function a(t){return null===t?NaN:+t}function o(t,e){var n,r,i=t.length,o=0,s=0,l=-1,u=0;if(null==e)for(;++l<i;)isNaN(n=a(t[l]))||(r=n-o,o+=r/++u,s+=r*(n-o));else for(;++l<i;)isNaN(n=a(e(t[l],l,t)))||(r=n-o,o+=r/++u,s+=r*(n-o));if(u>1)return s/(u-1)}function s(t,e){var n=o(t,e);return n?Math.sqrt(n):n}function l(t,e){var n,r,i,a=-1,o=t.length;if(null==e){for(;++a<o;)if(null!=(r=t[a])&&r>=r){n=i=r;break}for(;++a<o;)null!=(r=t[a])&&(n>r&&(n=r),i<r&&(i=r))}else{for(;++a<o;)if(null!=(r=e(t[a],a,t))&&r>=r){n=i=r;break}for(;++a<o;)null!=(r=e(t[a],a,t))&&(n>r&&(n=r),i<r&&(i=r))}return[n,i]}function u(t){return function(){return t}}function c(t){return t}function f(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=0|Math.max(0,Math.ceil((e-t)/n)),a=new Array(i);++r<i;)a[r]=t+r*n;return a}function d(t,e,n){var r=h(t,e,n);return f(Math.ceil(t/r)*r,Math.floor(e/r)*r+r/2,r)}function h(t,e,n){var r=Math.abs(e-t)/Math.max(0,n),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),a=r/i;return a>=Ip?i*=10:a>=Rp?i*=5:a>=Bp&&(i*=2),e<t?-i:i}function p(t){return Math.ceil(Math.log(t.length)/Math.LN2)+1}function g(){function t(t){var i,a,o=t.length,s=new Array(o);for(i=0;i<o;++i)s[i]=e(t[i],i,t);var l=n(s),u=l[0],c=l[1],f=r(s,u,c);Array.isArray(f)||(f=d(u,c,f));for(var h=f.length;f[0]<=u;)f.shift(),--h;for(;f[h-1]>=c;)f.pop(),--h;var p,g=new Array(h+1);for(i=0;i<=h;++i)p=g[i]=[],p.x0=i>0?f[i-1]:u,p.x1=i<h?f[i]:c;for(i=0;i<o;++i)a=s[i],u<=a&&a<=c&&g[Dp(f,a,0,h)].push(t[i]);return g}var e=c,n=l,r=p;return t.value=function(n){return arguments.length?(e="function"==typeof n?n:u(n),t):e},t.domain=function(e){return arguments.length?(n="function"==typeof e?e:u([e[0],e[1]]),t):n},t.thresholds=function(e){return arguments.length?(r="function"==typeof e?e:u(Array.isArray(e)?Np.call(e):e),t):r},t}function m(t,e,n){if(null==n&&(n=a),r=t.length){if((e=+e)<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,i=(r-1)*e,o=Math.floor(i),s=+n(t[o],o,t),l=+n(t[o+1],o+1,t);return s+(l-s)*(i-o)}}function v(t,n,r){return t=Lp.call(t,a).sort(e),Math.ceil((r-n)/(2*(m(t,.75)-m(t,.25))*Math.pow(t.length,-1/3)))}function y(t,e,n){return Math.ceil((n-e)/(3.5*s(t)*Math.pow(t.length,-1/3)))}function _(t,e){var n,r,i=-1,a=t.length;if(null==e){for(;++i<a;)if(null!=(r=t[i])&&r>=r){n=r;break}for(;++i<a;)null!=(r=t[i])&&r>n&&(n=r)}else{for(;++i<a;)if(null!=(r=e(t[i],i,t))&&r>=r){n=r;break}for(;++i<a;)null!=(r=e(t[i],i,t))&&r>n&&(n=r)}return n}function b(t,e){var n,r=0,i=t.length,o=-1,s=i;if(null==e)for(;++o<i;)isNaN(n=a(t[o]))?--s:r+=n;else for(;++o<i;)isNaN(n=a(e(t[o],o,t)))?--s:r+=n;if(s)return r/s}function x(t,n){var r,i=[],o=t.length,s=-1;if(null==n)for(;++s<o;)isNaN(r=a(t[s]))||i.push(r);else for(;++s<o;)isNaN(r=a(n(t[s],s,t)))||i.push(r);
return m(i.sort(e),.5)}function w(t){for(var e,n,r,i=t.length,a=-1,o=0;++a<i;)o+=t[a].length;for(n=new Array(o);--i>=0;)for(r=t[i],e=r.length;--e>=0;)n[--o]=r[e];return n}function C(t,e){var n,r,i=-1,a=t.length;if(null==e){for(;++i<a;)if(null!=(r=t[i])&&r>=r){n=r;break}for(;++i<a;)null!=(r=t[i])&&n>r&&(n=r)}else{for(;++i<a;)if(null!=(r=e(t[i],i,t))&&r>=r){n=r;break}for(;++i<a;)null!=(r=e(t[i],i,t))&&n>r&&(n=r)}return n}function k(t){for(var e=0,n=t.length-1,r=t[0],i=new Array(n<0?0:n);e<n;)i[e]=[r,r=t[++e]];return i}function S(t,e){for(var n=e.length,r=new Array(n);n--;)r[n]=t[e[n]];return r}function T(t,n){if(r=t.length){var r,i,a=0,o=0,s=t[o];for(n||(n=e);++a<r;)(n(i=t[a],s)<0||0!==n(s,s))&&(s=i,o=a);return 0===n(s,s)?o:void 0}}function A(t,e,n){for(var r,i,a=(null==n?t.length:n)-(e=null==e?0:+e);a;)i=Math.random()*a--|0,r=t[a+e],t[a+e]=t[i+e],t[i+e]=r;return t}function E(t,e){var n,r=0,i=t.length,a=-1;if(null==e)for(;++a<i;)(n=+t[a])&&(r+=n);else for(;++a<i;)(n=+e(t[a],a,t))&&(r+=n);return r}function M(t){if(!(i=t.length))return[];for(var e=-1,n=C(t,D),r=new Array(n);++e<n;)for(var i,a=-1,o=r[e]=new Array(i);++a<i;)o[a]=t[a][e];return r}function D(t){return t.length}function P(){return M(arguments)}function O(){}function N(t,e){var n=new O;if(t instanceof O)t.each(function(t,e){n.set(e,t)});else if(Array.isArray(t)){var r,i=-1,a=t.length;if(null==e)for(;++i<a;)n.set(i,t[i]);else for(;++i<a;)n.set(e(r=t[i],i,t),r)}else if(t)for(var o in t)n.set(o,t[o]);return n}function L(){function t(e,i,o,s){if(i>=a.length)return null!=r?r(e):null!=n?e.sort(n):e;for(var l,u,c,f=-1,d=e.length,h=a[i++],p=N(),g=o();++f<d;)(c=p.get(l=h(u=e[f])+""))?c.push(u):p.set(l,[u]);return p.each(function(e,n){s(g,n,t(e,i,o,s))}),g}function e(t,n){if(++n>a.length)return t;var i,s=o[n-1];return null!=r&&n>=a.length?i=t.entries():(i=[],t.each(function(t,r){i.push({key:r,values:e(t,n)})})),null!=s?i.sort(function(t,e){return s(t.key,e.key)}):i}var n,r,i,a=[],o=[];return i={object:function(e){return t(e,0,I,R)},map:function(e){return t(e,0,B,z)},entries:function(n){return e(t(n,0,B,z),0)},key:function(t){return a.push(t),i},sortKeys:function(t){return o[a.length-1]=t,i},sortValues:function(t){return n=t,i},rollup:function(t){return r=t,i}}}function I(){return{}}function R(t,e,n){t[e]=n}function B(){return N()}function z(t,e,n){t.set(e,n)}function F(){}function q(t,e){var n=new F;if(t instanceof F)t.each(function(t){n.add(t)});else if(t){var r=-1,i=t.length;if(null==e)for(;++r<i;)n.add(t[r]);else for(;++r<i;)n.add(e(t[r],r,t))}return n}function H(t){var e=[];for(var n in t)e.push(n);return e}function U(t){var e=[];for(var n in t)e.push(t[n]);return e}function j(t){var e=[];for(var n in t)e.push({key:n,value:t[n]});return e}function V(t,e){return t=null==t?0:+t,e=null==e?1:+e,1===arguments.length?(e=t,t=0):e-=t,function(){return Math.random()*e+t}}function $(t,e){var n,r;return t=null==t?0:+t,e=null==e?1:+e,function(){var i;if(null!=n)i=n,n=null;else do n=2*Math.random()-1,i=2*Math.random()-1,r=n*n+i*i;while(!r||r>1);return t+e*i*Math.sqrt(-2*Math.log(r)/r)}}function W(){var t=$.apply(this,arguments);return function(){return Math.exp(t())}}function G(t){return function(){for(var e=0,n=0;n<t;++n)e+=Math.random();return e}}function X(t){var e=G(t);return function(){return e()/t}}function Y(t){return function(){return-Math.log(1-Math.random())/t}}function J(t){return+t}function K(t){return t*t}function Z(t){return t*(2-t)}function Q(t){return((t*=2)<=1?t*t:--t*(2-t)+1)/2}function tt(t){return t*t*t}function et(t){return--t*t*t+1}function nt(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}function rt(t){return 1-Math.cos(t*$p)}function it(t){return Math.sin(t*$p)}function at(t){return(1-Math.cos(Vp*t))/2}function ot(t){return Math.pow(2,10*t-10)}function st(t){return 1-Math.pow(2,-10*t)}function lt(t){return((t*=2)<=1?Math.pow(2,10*t-10):2-Math.pow(2,10-10*t))/2}function ut(t){return 1-Math.sqrt(1-t*t)}function ct(t){return Math.sqrt(1- --t*t)}function ft(t){return((t*=2)<=1?1-Math.sqrt(1-t*t):Math.sqrt(1-(t-=2)*t)+1)/2}function dt(t){return 1-ht(1-t)}function ht(t){return(t=+t)<Wp?eg*t*t:t<Xp?eg*(t-=Gp)*t+Yp:t<Kp?eg*(t-=Jp)*t+Zp:eg*(t-=Qp)*t+tg}function pt(t){return((t*=2)<=1?1-ht(1-t):ht(t-1)+1)/2}function gt(t){for(var e,n=-1,r=t.length,i=t[r-1],a=0;++n<r;)e=i,i=t[n],a+=e[1]*i[0]-e[0]*i[1];return a/2}function mt(t){for(var e,n,r=-1,i=t.length,a=0,o=0,s=t[i-1],l=0;++r<i;)e=s,s=t[r],l+=n=e[0]*s[1]-s[0]*e[1],a+=(e[0]+s[0])*n,o+=(e[1]+s[1])*n;return l*=3,[a/l,o/l]}function vt(t,e,n){return(e[0]-t[0])*(n[1]-t[1])-(e[1]-t[1])*(n[0]-t[0])}function yt(t,e){return t[0]-e[0]||t[1]-e[1]}function _t(t){for(var e=t.length,n=[0,1],r=2,i=2;i<e;++i){for(;r>1&&vt(t[n[r-2]],t[n[r-1]],t[i])<=0;)--r;n[r++]=i}return n.slice(0,r)}function bt(t){if((n=t.length)<3)return null;var e,n,r=new Array(n),i=new Array(n);for(e=0;e<n;++e)r[e]=[+t[e][0],+t[e][1],e];for(r.sort(yt),e=0;e<n;++e)i[e]=[r[e][0],-r[e][1]];var a=_t(r),o=_t(i),s=o[0]===a[0],l=o[o.length-1]===a[a.length-1],u=[];for(e=a.length-1;e>=0;--e)u.push(t[r[a[e]][2]]);for(e=+s;e<o.length-l;++e)u.push(t[r[o[e]][2]]);return u}function xt(t,e){for(var n,r,i=t.length,a=t[i-1],o=e[0],s=e[1],l=a[0],u=a[1],c=!1,f=0;f<i;++f)a=t[f],n=a[0],r=a[1],r>s!=u>s&&o<(l-n)*(s-r)/(u-r)+n&&(c=!c),l=n,u=r;return c}function wt(t){for(var e,n,r=-1,i=t.length,a=t[i-1],o=a[0],s=a[1],l=0;++r<i;)e=o,n=s,a=t[r],o=a[0],s=a[1],e-=o,n-=s,l+=Math.sqrt(e*e+n*n);return l}function Ct(){this._x0=this._y0=this._x1=this._y1=null,this._=[]}function kt(){return new Ct}function St(t){var e=+this._x.call(null,t),n=+this._y.call(null,t);return Tt(this.cover(e,n),e,n,t)}function Tt(t,e,n,r){if(isNaN(e)||isNaN(n))return t;var i,a,o,s,l,u,c,f,d,h=t._root,p={data:r},g=t._x0,m=t._y0,v=t._x1,y=t._y1;if(!h)return t._root=p,t;for(;h.length;)if((u=e>=(a=(g+v)/2))?g=a:v=a,(c=n>=(o=(m+y)/2))?m=o:y=o,i=h,!(h=h[f=c<<1|u]))return i[f]=p,t;if(s=+t._x.call(null,h.data),l=+t._y.call(null,h.data),e===s&&n===l)return p.next=h,i?i[f]=p:t._root=p,t;do i=i?i[f]=new Array(4):t._root=new Array(4),(u=e>=(a=(g+v)/2))?g=a:v=a,(c=n>=(o=(m+y)/2))?m=o:y=o;while((f=c<<1|u)===(d=(l>=o)<<1|s>=a));return i[d]=h,i[f]=p,t}function At(t){var e,n,r,i,a=t.length,o=new Array(a),s=new Array(a),l=1/0,u=1/0,c=-(1/0),f=-(1/0);for(n=0;n<a;++n)isNaN(r=+this._x.call(null,e=t[n]))||isNaN(i=+this._y.call(null,e))||(o[n]=r,s[n]=i,r<l&&(l=r),r>c&&(c=r),i<u&&(u=i),i>f&&(f=i));for(c<l&&(l=this._x0,c=this._x1),f<u&&(u=this._y0,f=this._y1),this.cover(l,u).cover(c,f),n=0;n<a;++n)Tt(this,o[n],s[n],t[n]);return this}function Et(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var n=this._x0,r=this._y0,i=this._x1,a=this._y1;if(isNaN(n))i=(n=Math.floor(t))+1,a=(r=Math.floor(e))+1;else{if(!(n>t||t>i||r>e||e>a))return this;var o,s,l=i-n,u=this._root;switch(s=(e<(r+a)/2)<<1|t<(n+i)/2){case 0:do o=new Array(4),o[s]=u,u=o;while(l*=2,i=n+l,a=r+l,t>i||e>a);break;case 1:do o=new Array(4),o[s]=u,u=o;while(l*=2,n=i-l,a=r+l,n>t||e>a);break;case 2:do o=new Array(4),o[s]=u,u=o;while(l*=2,i=n+l,r=a-l,t>i||r>e);break;case 3:do o=new Array(4),o[s]=u,u=o;while(l*=2,n=i-l,r=a-l,n>t||r>e)}this._root&&this._root.length&&(this._root=u)}return this._x0=n,this._y0=r,this._x1=i,this._y1=a,this}function Mt(){var t=[];return this.visit(function(e){if(!e.length)do t.push(e.data);while(e=e.next)}),t}function Dt(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function Pt(t,e,n,r,i){this.node=t,this.x0=e,this.y0=n,this.x1=r,this.y1=i}function Ot(t,e,n){var r,i,a,o,s,l,u,c=this._x0,f=this._y0,d=this._x1,h=this._y1,p=[],g=this._root;for(g&&p.push(new Pt(g,c,f,d,h)),null==n?n=1/0:(c=t-n,f=e-n,d=t+n,h=e+n,n*=n);l=p.pop();)if(!(!(g=l.node)||(i=l.x0)>d||(a=l.y0)>h||(o=l.x1)<c||(s=l.y1)<f))if(g.length){var m=(i+o)/2,v=(a+s)/2;p.push(new Pt(g[3],m,v,o,s),new Pt(g[2],i,v,m,s),new Pt(g[1],m,a,o,v),new Pt(g[0],i,a,m,v)),(u=(e>=v)<<1|t>=m)&&(l=p[p.length-1],p[p.length-1]=p[p.length-1-u],p[p.length-1-u]=l)}else{var y=t-+this._x.call(null,g.data),_=e-+this._y.call(null,g.data),b=y*y+_*_;if(b<n){var x=Math.sqrt(n=b);c=t-x,f=e-x,d=t+x,h=e+x,r=g.data}}return r}function Nt(t){if(isNaN(a=+this._x.call(null,t))||isNaN(o=+this._y.call(null,t)))return this;var e,n,r,i,a,o,s,l,u,c,f,d,h=this._root,p=this._x0,g=this._y0,m=this._x1,v=this._y1;if(!h)return this;if(h.length)for(;;){if((u=a>=(s=(p+m)/2))?p=s:m=s,(c=o>=(l=(g+v)/2))?g=l:v=l,e=h,!(h=h[f=c<<1|u]))return this;if(!h.length)break;(e[f+1&3]||e[f+2&3]||e[f+3&3])&&(n=e,d=f)}for(;h.data!==t;)if(r=h,!(h=h.next))return this;return(i=h.next)&&delete h.next,r?(i?r.next=i:delete r.next,this):e?(i?e[f]=i:delete e[f],(h=e[0]||e[1]||e[2]||e[3])&&h===(e[3]||e[2]||e[1]||e[0])&&!h.length&&(n?n[d]=h:this._root=h),this):(this._root=i,this)}function Lt(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this}function It(){return this._root}function Rt(){var t=0;return this.visit(function(e){if(!e.length)do++t;while(e=e.next)}),t}function Bt(t){var e,n,r,i,a,o,s=[],l=this._root;for(l&&s.push(new Pt(l,this._x0,this._y0,this._x1,this._y1));e=s.pop();)if(!t(l=e.node,r=e.x0,i=e.y0,a=e.x1,o=e.y1)&&l.length){var u=(r+a)/2,c=(i+o)/2;(n=l[3])&&s.push(new Pt(n,u,c,a,o)),(n=l[2])&&s.push(new Pt(n,r,c,u,o)),(n=l[1])&&s.push(new Pt(n,u,i,a,c)),(n=l[0])&&s.push(new Pt(n,r,i,u,c))}return this}function zt(t){var e,n=[],r=[];for(this._root&&n.push(new Pt(this._root,this._x0,this._y0,this._x1,this._y1));e=n.pop();){var i=e.node;if(i.length){var a,o=e.x0,s=e.y0,l=e.x1,u=e.y1,c=(o+l)/2,f=(s+u)/2;(a=i[0])&&n.push(new Pt(a,o,s,c,f)),(a=i[1])&&n.push(new Pt(a,c,s,l,f)),(a=i[2])&&n.push(new Pt(a,o,f,c,u)),(a=i[3])&&n.push(new Pt(a,c,f,l,u))}r.push(e)}for(;e=r.pop();)t(e.node,e.x0,e.y0,e.x1,e.y1);return this}function Ft(t){return t[0]}function qt(t){return arguments.length?(this._x=t,this):this._x}function Ht(t){return t[1]}function Ut(t){return arguments.length?(this._y=t,this):this._y}function jt(t,e,n){var r=new Vt(null==e?Ft:e,null==n?Ht:n,NaN,NaN,NaN,NaN);return null==t?r:r.addAll(t)}function Vt(t,e,n,r,i,a){this._x=t,this._y=e,this._x0=n,this._y0=r,this._x1=i,this._y1=a,this._root=void 0}function $t(t){for(var e={data:t.data},n=e;t=t.next;)n=n.next={data:t.data};return e}function Wt(t){if(!(t>=1))throw new Error;this._size=t,this._call=this._error=null,this._tasks=[],this._data=[],this._waiting=this._active=this._ended=this._start=0}function Gt(t){if(!t._start)try{Xt(t)}catch(e){t._tasks[t._ended+t._active-1]&&Jt(t,e)}}function Xt(t){for(;t._start=t._waiting&&t._active<t._size;){var e=t._ended+t._active,n=t._tasks[e],r=n.length-1,i=n[r];n[r]=Yt(t,e),--t._waiting,++t._active,n=i.apply(null,n),t._tasks[e]&&(t._tasks[e]=n||yg)}}function Yt(t,e){return function(n,r){t._tasks[e]&&(--t._active,++t._ended,t._tasks[e]=null,null==t._error&&(null!=n?Jt(t,n):(t._data[e]=r,t._waiting?Gt(t):Kt(t))))}}function Jt(t,e){var n,r=t._tasks.length;for(t._error=e,t._data=void 0,t._waiting=NaN;--r>=0;)if((n=t._tasks[r])&&(t._tasks[r]=null,n.abort))try{n.abort()}catch(t){}t._active=NaN,Kt(t)}function Kt(t){!t._active&&t._call&&t._call(t._error,t._data)}function Zt(t){return new Wt(arguments.length?+t:1/0)}function Qt(t){return function(){return t}}function te(t){return t.innerRadius}function ee(t){return t.outerRadius}function ne(t){return t.startAngle}function re(t){return t.endAngle}function ie(t){return t&&t.padAngle}function ae(t){return t>=1?xg:t<=-1?-xg:Math.asin(t)}function oe(t,e,n,r,i,a,o,s){var l=n-t,u=r-e,c=o-i,f=s-a,d=(c*(e-a)-f*(t-i))/(f*l-c*u);return[t+d*l,e+d*u]}function se(t,e,n,r,i,a,o){var s=t-n,l=e-r,u=(o?a:-a)/Math.sqrt(s*s+l*l),c=u*l,f=-u*s,d=t+c,h=e+f,p=n+c,g=r+f,m=(d+p)/2,v=(h+g)/2,y=p-d,_=g-h,b=y*y+_*_,x=i-a,w=d*g-p*h,C=(_<0?-1:1)*Math.sqrt(Math.max(0,x*x*b-w*w)),k=(w*_-y*C)/b,S=(-w*y-_*C)/b,T=(w*_+y*C)/b,A=(-w*y+_*C)/b,E=k-m,M=S-v,D=T-m,P=A-v;return E*E+M*M>D*D+P*P&&(k=T,S=A),{cx:k,cy:S,x01:-c,y01:-f,x11:k*(i/x-1),y11:S*(i/x-1)}}function le(){function t(){var t,u,c=+e.apply(this,arguments),f=+n.apply(this,arguments),d=a.apply(this,arguments)-xg,h=o.apply(this,arguments)-xg,p=Math.abs(h-d),g=h>d;if(l||(l=t=kt()),f<c&&(u=f,f=c,c=u),f>_g)if(p>wg-_g)l.moveTo(f*Math.cos(d),f*Math.sin(d)),l.arc(0,0,f,d,h,!g),c>_g&&(l.moveTo(c*Math.cos(h),c*Math.sin(h)),l.arc(0,0,c,h,d,g));else{var m,v,y=d,_=h,b=d,x=h,w=p,C=p,k=s.apply(this,arguments)/2,S=k>_g&&(i?+i.apply(this,arguments):Math.sqrt(c*c+f*f)),T=Math.min(Math.abs(f-c)/2,+r.apply(this,arguments)),A=T,E=T;if(S>_g){var M=ae(S/c*Math.sin(k)),D=ae(S/f*Math.sin(k));(w-=2*M)>_g?(M*=g?1:-1,b+=M,x-=M):(w=0,b=x=(d+h)/2),(C-=2*D)>_g?(D*=g?1:-1,y+=D,_-=D):(C=0,y=_=(d+h)/2)}var P=f*Math.cos(y),O=f*Math.sin(y),N=c*Math.cos(x),L=c*Math.sin(x);if(T>_g){var I=f*Math.cos(_),R=f*Math.sin(_),B=c*Math.cos(b),z=c*Math.sin(b);if(p<bg){var F=w>_g?oe(P,O,B,z,I,R,N,L):[N,L],q=P-F[0],H=O-F[1],U=I-F[0],j=R-F[1],V=1/Math.sin(Math.acos((q*U+H*j)/(Math.sqrt(q*q+H*H)*Math.sqrt(U*U+j*j)))/2),$=Math.sqrt(F[0]*F[0]+F[1]*F[1]);A=Math.min(T,(c-$)/(V-1)),E=Math.min(T,(f-$)/(V+1))}}C>_g?E>_g?(m=se(B,z,P,O,f,E,g),v=se(I,R,N,L,f,E,g),l.moveTo(m.cx+m.x01,m.cy+m.y01),E<T?l.arc(m.cx,m.cy,E,Math.atan2(m.y01,m.x01),Math.atan2(v.y01,v.x01),!g):(l.arc(m.cx,m.cy,E,Math.atan2(m.y01,m.x01),Math.atan2(m.y11,m.x11),!g),l.arc(0,0,f,Math.atan2(m.cy+m.y11,m.cx+m.x11),Math.atan2(v.cy+v.y11,v.cx+v.x11),!g),l.arc(v.cx,v.cy,E,Math.atan2(v.y11,v.x11),Math.atan2(v.y01,v.x01),!g))):(l.moveTo(P,O),l.arc(0,0,f,y,_,!g)):l.moveTo(P,O),c>_g&&w>_g?A>_g?(m=se(N,L,I,R,c,-A,g),v=se(P,O,B,z,c,-A,g),l.lineTo(m.cx+m.x01,m.cy+m.y01),A<T?l.arc(m.cx,m.cy,A,Math.atan2(m.y01,m.x01),Math.atan2(v.y01,v.x01),!g):(l.arc(m.cx,m.cy,A,Math.atan2(m.y01,m.x01),Math.atan2(m.y11,m.x11),!g),l.arc(0,0,c,Math.atan2(m.cy+m.y11,m.cx+m.x11),Math.atan2(v.cy+v.y11,v.cx+v.x11),g),l.arc(v.cx,v.cy,A,Math.atan2(v.y11,v.x11),Math.atan2(v.y01,v.x01),!g))):l.arc(0,0,c,x,b,g):l.lineTo(N,L)}else l.moveTo(0,0);if(l.closePath(),t)return l=null,t+""||null}var e=te,n=ee,r=Qt(0),i=null,a=ne,o=re,s=ie,l=null;return t.centroid=function(){var t=(+e.apply(this,arguments)+ +n.apply(this,arguments))/2,r=(+a.apply(this,arguments)+ +o.apply(this,arguments))/2-bg/2;return[Math.cos(r)*t,Math.sin(r)*t]},t.innerRadius=function(n){return arguments.length?(e="function"==typeof n?n:Qt(+n),t):e},t.outerRadius=function(e){return arguments.length?(n="function"==typeof e?e:Qt(+e),t):n},t.cornerRadius=function(e){return arguments.length?(r="function"==typeof e?e:Qt(+e),t):r},t.padRadius=function(e){return arguments.length?(i=null==e?null:"function"==typeof e?e:Qt(+e),t):i},t.startAngle=function(e){return arguments.length?(a="function"==typeof e?e:Qt(+e),t):a},t.endAngle=function(e){return arguments.length?(o="function"==typeof e?e:Qt(+e),t):o},t.padAngle=function(e){return arguments.length?(s="function"==typeof e?e:Qt(+e),t):s},t.context=function(e){return arguments.length?(l=null==e?null:e,t):l},t}function ue(t){this._context=t}function ce(t){return new ue(t)}function fe(t){return t[0]}function de(t){return t[1]}function he(){function t(t){var s,l,u,c=t.length,f=!1;for(null==i&&(o=a(u=kt())),s=0;s<=c;++s)!(s<c&&r(l=t[s],s,t))===f&&((f=!f)?o.lineStart():o.lineEnd()),f&&o.point(+e(l,s,t),+n(l,s,t));if(u)return o=null,u+""||null}var e=fe,n=de,r=Qt(!0),i=null,a=ce,o=null;return t.x=function(n){return arguments.length?(e="function"==typeof n?n:Qt(+n),t):e},t.y=function(e){return arguments.length?(n="function"==typeof e?e:Qt(+e),t):n},t.defined=function(e){return arguments.length?(r="function"==typeof e?e:Qt(!!e),t):r},t.curve=function(e){return arguments.length?(a=e,null!=i&&(o=a(i)),t):a},t.context=function(e){return arguments.length?(null==e?i=o=null:o=a(i=e),t):i},t}function pe(){function t(t){var e,c,f,d,h,p=t.length,g=!1,m=new Array(p),v=new Array(p);for(null==s&&(u=l(h=kt())),e=0;e<=p;++e){if(!(e<p&&o(d=t[e],e,t))===g)if(g=!g)c=e,u.areaStart(),u.lineStart();else{for(u.lineEnd(),u.lineStart(),f=e-1;f>=c;--f)u.point(m[f],v[f]);u.lineEnd(),u.areaEnd()}g&&(m[e]=+n(d,e,t),v[e]=+i(d,e,t),u.point(r?+r(d,e,t):m[e],a?+a(d,e,t):v[e]))}if(h)return u=null,h+""||null}function e(){return he().defined(o).curve(l).context(s)}var n=fe,r=null,i=Qt(0),a=de,o=Qt(!0),s=null,l=ce,u=null;return t.x=function(e){return arguments.length?(n="function"==typeof e?e:Qt(+e),r=null,t):n},t.x0=function(e){return arguments.length?(n="function"==typeof e?e:Qt(+e),t):n},t.x1=function(e){return arguments.length?(r=null==e?null:"function"==typeof e?e:Qt(+e),t):r},t.y=function(e){return arguments.length?(i="function"==typeof e?e:Qt(+e),a=null,t):i},t.y0=function(e){return arguments.length?(i="function"==typeof e?e:Qt(+e),t):i},t.y1=function(e){return arguments.length?(a=null==e?null:"function"==typeof e?e:Qt(+e),t):a},t.lineX0=t.lineY0=function(){return e().x(n).y(i)},t.lineY1=function(){return e().x(n).y(a)},t.lineX1=function(){return e().x(r).y(i)},t.defined=function(e){return arguments.length?(o="function"==typeof e?e:Qt(!!e),t):o},t.curve=function(e){return arguments.length?(l=e,null!=s&&(u=l(s)),t):l},t.context=function(e){return arguments.length?(null==e?s=u=null:u=l(s=e),t):s},t}function ge(t,e){return e<t?-1:e>t?1:e>=t?0:NaN}function me(t){return t}function ve(){function t(t){var s,l,u,c,f,d=t.length,h=0,p=new Array(d),g=new Array(d),m=+i.apply(this,arguments),v=Math.min(wg,Math.max(-wg,a.apply(this,arguments)-m)),y=Math.min(Math.abs(v)/d,o.apply(this,arguments)),_=y*(v<0?-1:1);for(s=0;s<d;++s)(f=g[p[s]=s]=+e(t[s],s,t))>0&&(h+=f);for(null!=n?p.sort(function(t,e){return n(g[t],g[e])}):null!=r&&p.sort(function(e,n){return r(t[e],t[n])}),s=0,u=h?(v-d*_)/h:0;s<d;++s,m=c)l=p[s],f=g[l],c=m+(f>0?f*u:0)+_,g[l]={data:t[l],index:s,value:f,startAngle:m,endAngle:c,padAngle:y};return g}var e=me,n=ge,r=null,i=Qt(0),a=Qt(wg),o=Qt(0);return t.value=function(n){return arguments.length?(e="function"==typeof n?n:Qt(+n),t):e},t.sortValues=function(e){return arguments.length?(n=e,r=null,t):n},t.sort=function(e){return arguments.length?(r=e,n=null,t):r},t.startAngle=function(e){return arguments.length?(i="function"==typeof e?e:Qt(+e),t):i},t.endAngle=function(e){return arguments.length?(a="function"==typeof e?e:Qt(+e),t):a},t.padAngle=function(e){return arguments.length?(o="function"==typeof e?e:Qt(+e),t):o},t}function ye(t){this._curve=t}function _e(t){function e(e){return new ye(t(e))}return e._curve=t,e}function be(t){var e=t.curve;return t.angle=t.x,delete t.x,t.radius=t.y,delete t.y,t.curve=function(t){return arguments.length?e(_e(t)):e()._curve},t}function xe(){return be(he().curve(Cg))}function we(){var t=pe().curve(Cg),e=t.curve,n=t.lineX0,r=t.lineX1,i=t.lineY0,a=t.lineY1;return t.angle=t.x,delete t.x,t.startAngle=t.x0,delete t.x0,t.endAngle=t.x1,delete t.x1,t.radius=t.y,delete t.y,t.innerRadius=t.y0,delete t.y0,t.outerRadius=t.y1,delete t.y1,t.lineStartAngle=function(){return be(n())},delete t.lineX0,t.lineEndAngle=function(){return be(r())},delete t.lineX1,t.lineInnerRadius=function(){return be(i())},delete t.lineY0,t.lineOuterRadius=function(){return be(a())},delete t.lineY1,t.curve=function(t){return arguments.length?e(_e(t)):e()._curve},t}function Ce(){function t(){var t;if(r||(r=t=kt()),e.apply(this,arguments).draw(r,+n.apply(this,arguments)),t)return r=null,t+""||null}var e=Qt(kg),n=Qt(64),r=null;return t.type=function(n){return arguments.length?(e="function"==typeof n?n:Qt(n),t):e},t.size=function(e){return arguments.length?(n="function"==typeof e?e:Qt(+e),t):n},t.context=function(e){return arguments.length?(r=null==e?null:e,t):r},t}function ke(){}function Se(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function Te(t){this._context=t}function Ae(t){return new Te(t)}function Ee(t){this._context=t}function Me(t){return new Ee(t)}function De(t){this._context=t}function Pe(t){return new De(t)}function Oe(t,e){this._basis=new Te(t),this._beta=e}function Ne(t,e,n){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-e),t._y2+t._k*(t._y1-n),t._x2,t._y2)}function Le(t,e){this._context=t,this._k=(1-e)/6}function Ie(t,e){this._context=t,this._k=(1-e)/6}function Re(t,e){this._context=t,this._k=(1-e)/6}function Be(t,e,n){var r=t._x1,i=t._y1,a=t._x2,o=t._y2;if(t._l01_a>_g){var s=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,l=3*t._l01_a*(t._l01_a+t._l12_a);r=(r*s-t._x0*t._l12_2a+t._x2*t._l01_2a)/l,i=(i*s-t._y0*t._l12_2a+t._y2*t._l01_2a)/l}if(t._l23_a>_g){var u=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,c=3*t._l23_a*(t._l23_a+t._l12_a);a=(a*u+t._x1*t._l23_2a-e*t._l12_2a)/c,o=(o*u+t._y1*t._l23_2a-n*t._l12_2a)/c}t._context.bezierCurveTo(r,i,a,o,t._x2,t._y2)}function ze(t,e){this._context=t,this._alpha=e}function Fe(t,e){this._context=t,this._alpha=e}function qe(t,e){this._context=t,this._alpha=e}function He(t){this._context=t}function Ue(t){return new He(t)}function je(t){return t<0?-1:1}function Ve(t,e,n){var r=t._x1-t._x0,i=e-t._x1,a=(t._y1-t._y0)/(r||i<0&&-0),o=(n-t._y1)/(i||r<0&&-0),s=(a*i+o*r)/(r+i);return(je(a)+je(o))*Math.min(Math.abs(a),Math.abs(o),.5*Math.abs(s))||0}function $e(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function We(t,e,n){var r=t._x0,i=t._y0,a=t._x1,o=t._y1,s=(a-r)/3;t._context.bezierCurveTo(r+s,i+s*e,a-s,o-s*n,a,o)}function Ge(t){this._context=t}function Xe(t){this._context=new Ye(t)}function Ye(t){this._context=t}function Je(t){return new Ge(t)}function Ke(t){return new Xe(t)}function Ze(t){this._context=t}function Qe(t){var e,n,r=t.length-1,i=new Array(r),a=new Array(r),o=new Array(r);for(i[0]=0,a[0]=2,o[0]=t[0]+2*t[1],e=1;e<r-1;++e)i[e]=1,a[e]=4,o[e]=4*t[e]+2*t[e+1];for(i[r-1]=2,a[r-1]=7,o[r-1]=8*t[r-1]+t[r],e=1;e<r;++e)n=i[e]/a[e-1],a[e]-=n,o[e]-=n*o[e-1];for(i[r-1]=o[r-1]/a[r-1],e=r-2;e>=0;--e)i[e]=(o[e]-i[e+1])/a[e];for(a[r-1]=(t[r]+i[r-1])/2,e=0;e<r-1;++e)a[e]=2*t[e+1]-i[e+1];return[i,a]}function tn(t){return new Ze(t)}function en(t,e){this._context=t,this._t=e}function nn(t){return new en(t,.5)}function rn(t){return new en(t,0)}function an(t){return new en(t,1)}function on(t,e){if((r=t.length)>1)for(var n,r,i=1,a=t[e[0]],o=a.length;i<r;++i){n=a,a=t[e[i]];for(var s=0;s<o;++s)a[s][1]+=a[s][0]=isNaN(n[s][1])?n[s][0]:n[s][1]}}function sn(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n}function ln(t,e){return t[e]}function un(){function t(t){var a,o,s=e.apply(this,arguments),l=t.length,u=s.length,c=new Array(u);for(a=0;a<u;++a){for(var f,d=s[a],h=c[a]=new Array(l),p=0;p<l;++p)h[p]=f=[0,+i(t[p],d,p,t)],f.data=t[p];h.key=d}for(a=0,o=n(c);a<u;++a)c[o[a]].index=a;return r(c,o),c}var e=Qt([]),n=sn,r=on,i=ln;return t.keys=function(n){return arguments.length?(e="function"==typeof n?n:Qt(Jg.call(n)),t):e},t.value=function(e){return arguments.length?(i="function"==typeof e?e:Qt(+e),t):i},t.order=function(e){return arguments.length?(n=null==e?sn:"function"==typeof e?e:Qt(Jg.call(e)),t):n},t.offset=function(e){return arguments.length?(r=null==e?on:e,t):r},t}function cn(t,e){if((r=t.length)>0){for(var n,r,i,a=0,o=t[0].length;a<o;++a){for(i=n=0;n<r;++n)i+=t[n][a][1]||0;if(i)for(n=0;n<r;++n)t[n][a][1]/=i}on(t,e)}}function fn(t,e){if((n=t.length)>0){for(var n,r=0,i=t[e[0]],a=i.length;r<a;++r){for(var o=0,s=0;o<n;++o)s+=t[o][r][1]||0;i[r][1]+=i[r][0]=-s/2}on(t,e)}}function dn(t,e){if((i=t.length)>0&&(r=(n=t[e[0]]).length)>0){for(var n,r,i,a=0,o=1;o<r;++o){for(var s=0,l=0,u=0;s<i;++s){for(var c=t[e[s]],f=c[o][1]||0,d=c[o-1][1]||0,h=(f-d)/2,p=0;p<s;++p){var g=t[e[p]],m=g[o][1]||0,v=g[o-1][1]||0;h+=m-v}l+=f,u+=h*f}n[o-1][1]+=n[o-1][0]=a,l&&(a-=u/l)}n[o-1][1]+=n[o-1][0]=a,on(t,e)}}function hn(t){var e=t.map(pn);return sn(t).sort(function(t,n){return e[t]-e[n]})}function pn(t){for(var e,n=0,r=-1,i=t.length;++r<i;)(e=+t[r][1])&&(n+=e);return n}function gn(t){return hn(t).reverse()}function mn(t){var e,n,r=t.length,i=t.map(pn),a=sn(t).sort(function(t,e){return i[e]-i[t]}),o=0,s=0,l=[],u=[];for(e=0;e<r;++e)n=a[e],o<s?(o+=i[n],l.push(n)):(s+=i[n],u.push(n));return u.reverse().concat(l)}function vn(t){return sn(t).reverse()}function yn(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function _n(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function bn(){}function xn(t){var e;return t=(t+"").trim().toLowerCase(),(e=Qg.exec(t))?(e=parseInt(e[1],16),new Tn(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1)):(e=tm.exec(t))?wn(parseInt(e[1],16)):(e=em.exec(t))?new Tn(e[1],e[2],e[3],1):(e=nm.exec(t))?new Tn(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=rm.exec(t))?Cn(e[1],e[2],e[3],e[4]):(e=im.exec(t))?Cn(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=am.exec(t))?An(e[1],e[2]/100,e[3]/100,1):(e=om.exec(t))?An(e[1],e[2]/100,e[3]/100,e[4]):sm.hasOwnProperty(t)?wn(sm[t]):"transparent"===t?new Tn(NaN,NaN,NaN,0):null}function wn(t){return new Tn(t>>16&255,t>>8&255,255&t,1)}function Cn(t,e,n,r){return r<=0&&(t=e=n=NaN),new Tn(t,e,n,r)}function kn(t){return t instanceof bn||(t=xn(t)),t?(t=t.rgb(),new Tn(t.r,t.g,t.b,t.opacity)):new Tn}function Sn(t,e,n,r){return 1===arguments.length?kn(t):new Tn(t,e,n,null==r?1:r)}function Tn(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}function An(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Dn(t,e,n,r)}function En(t){if(t instanceof Dn)return new Dn(t.h,t.s,t.l,t.opacity);if(t instanceof bn||(t=xn(t)),!t)return new Dn;if(t instanceof Dn)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),a=Math.max(e,n,r),o=NaN,s=a-i,l=(a+i)/2;return s?(o=e===a?(n-r)/s+6*(n<r):n===a?(r-e)/s+2:(e-n)/s+4,s/=l<.5?a+i:2-a-i,o*=60):s=l>0&&l<1?0:o,new Dn(o,s,l,t.opacity)}function Mn(t,e,n,r){return 1===arguments.length?En(t):new Dn(t,e,n,null==r?1:r)}function Dn(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function Pn(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}function On(t){if(t instanceof Ln)return new Ln(t.l,t.a,t.b,t.opacity);if(t instanceof Hn){var e=t.h*lm;return new Ln(t.l,Math.cos(e)*t.c,Math.sin(e)*t.c,t.opacity)}t instanceof Tn||(t=kn(t));var n=zn(t.r),r=zn(t.g),i=zn(t.b),a=In((.4124564*n+.3575761*r+.1804375*i)/fm),o=In((.2126729*n+.7151522*r+.072175*i)/dm),s=In((.0193339*n+.119192*r+.9503041*i)/hm);return new Ln(116*o-16,500*(a-o),200*(o-s),t.opacity)}function Nn(t,e,n,r){return 1===arguments.length?On(t):new Ln(t,e,n,null==r?1:r)}function Ln(t,e,n,r){this.l=+t,this.a=+e,this.b=+n,this.opacity=+r}function In(t){return t>vm?Math.pow(t,1/3):t/mm+pm}function Rn(t){return t>gm?t*t*t:mm*(t-pm)}function Bn(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function zn(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function Fn(t){if(t instanceof Hn)return new Hn(t.h,t.c,t.l,t.opacity);t instanceof Ln||(t=On(t));var e=Math.atan2(t.b,t.a)*um;return new Hn(e<0?e+360:e,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}function qn(t,e,n,r){return 1===arguments.length?Fn(t):new Hn(t,e,n,null==r?1:r)}function Hn(t,e,n,r){this.h=+t,this.c=+e,this.l=+n,this.opacity=+r}function Un(t){if(t instanceof Vn)return new Vn(t.h,t.s,t.l,t.opacity);t instanceof Tn||(t=kn(t));var e=t.r/255,n=t.g/255,r=t.b/255,i=(Sm*r+Cm*e-km*n)/(Sm+Cm-km),a=r-i,o=(wm*(n-i)-bm*a)/xm,s=Math.sqrt(o*o+a*a)/(wm*i*(1-i)),l=s?Math.atan2(o,a)*um-120:NaN;return new Vn(l<0?l+360:l,s,i,t.opacity)}function jn(t,e,n,r){return 1===arguments.length?Un(t):new Vn(t,e,n,null==r?1:r)}function Vn(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function $n(t,e,n,r,i){var a=t*t,o=a*t;return((1-3*t+3*a-o)*e+(4-6*a+3*o)*n+(1+3*t+3*a-3*o)*r+o*i)/6}function Wn(t){var e=t.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),i=t[r],a=t[r+1],o=r>0?t[r-1]:2*i-a,s=r<e-1?t[r+2]:2*a-i;return $n((n-r/e)*e,o,i,a,s)}}function Gn(t){var e=t.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*e),i=t[(r+e-1)%e],a=t[r%e],o=t[(r+1)%e],s=t[(r+2)%e];return $n((n-r/e)*e,i,a,o,s)}}function Xn(t){return function(){return t}}function Yn(t,e){return function(n){return t+n*e}}function Jn(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function Kn(t,e){var n=e-t;return n?Yn(t,n>180||n<-180?n-360*Math.round(n/360):n):Xn(isNaN(t)?e:t)}function Zn(t){return 1===(t=+t)?Qn:function(e,n){return n-e?Jn(e,n,t):Xn(isNaN(e)?n:e)}}function Qn(t,e){var n=e-t;return n?Yn(t,n):Xn(isNaN(t)?e:t)}function tr(t){return function(e){var n,r,i=e.length,a=new Array(i),o=new Array(i),s=new Array(i);for(n=0;n<i;++n)r=Sn(e[n]),a[n]=r.r||0,o[n]=r.g||0,s[n]=r.b||0;return a=t(a),o=t(o),s=t(s),r.opacity=1,function(t){return r.r=a(t),r.g=o(t),r.b=s(t),r+""}}}function er(t,e){var n,r=e?e.length:0,i=t?Math.min(r,t.length):0,a=new Array(r),o=new Array(r);for(n=0;n<i;++n)a[n]=lr(t[n],e[n]);for(;n<r;++n)o[n]=e[n];return function(t){for(n=0;n<i;++n)o[n]=a[n](t);return o}}function nr(t,e){var n=new Date;return t=+t,e-=t,function(r){return n.setTime(t+e*r),n}}function rr(t,e){return t=+t,e-=t,function(n){return t+e*n}}function ir(t,e){var n,r={},i={};null!==t&&"object"==typeof t||(t={}),null!==e&&"object"==typeof e||(e={});for(n in e)n in t?r[n]=lr(t[n],e[n]):i[n]=e[n];return function(t){for(n in r)i[n]=r[n](t);return i}}function ar(t){return function(){return t}}function or(t){return function(e){return t(e)+""}}function sr(t,e){var n,r,i,a=Nm.lastIndex=Lm.lastIndex=0,o=-1,s=[],l=[];for(t+="",e+="";(n=Nm.exec(t))&&(r=Lm.exec(e));)(i=r.index)>a&&(i=e.slice(a,i),s[o]?s[o]+=i:s[++o]=i),(n=n[0])===(r=r[0])?s[o]?s[o]+=r:s[++o]=r:(s[++o]=null,l.push({i:o,x:rr(n,r)})),a=Lm.lastIndex;return a<e.length&&(i=e.slice(a),s[o]?s[o]+=i:s[++o]=i),s.length<2?l[0]?or(l[0].x):ar(e):(e=l.length,function(t){for(var n,r=0;r<e;++r)s[(n=l[r]).i]=n.x(t);return s.join("")})}function lr(t,e){var n,r=typeof e;return null==e||"boolean"===r?Xn(e):("number"===r?rr:"string"===r?(n=xn(e))?(e=n,Dm):sr:e instanceof xn?Dm:e instanceof Date?nr:Array.isArray(e)?er:isNaN(e)?ir:rr)(t,e)}function ur(t,e){return t=+t,e-=t,function(n){return Math.round(t+e*n)}}function cr(t,e,n,r,i,a){var o,s,l;return(o=Math.sqrt(t*t+e*e))&&(t/=o,e/=o),(l=t*n+e*r)&&(n-=t*l,r-=e*l),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,l/=s),t*r<e*n&&(t=-t,e=-e,l=-l,o=-o),{translateX:i,translateY:a,rotate:Math.atan2(e,t)*Im,skewX:Math.atan(l)*Im,scaleX:o,scaleY:s}}function fr(t){return"none"===t?Rm:(Tm||(Tm=document.createElement("DIV"),Am=document.documentElement,Em=document.defaultView),Tm.style.transform=t,t=Em.getComputedStyle(Am.appendChild(Tm),null).getPropertyValue("transform"),Am.removeChild(Tm),t=t.slice(7,-1).split(","),cr(+t[0],+t[1],+t[2],+t[3],+t[4],+t[5]))}function dr(t){return null==t?Rm:(Mm||(Mm=document.createElementNS("http://www.w3.org/2000/svg","g")),Mm.setAttribute("transform",t),(t=Mm.transform.baseVal.consolidate())?(t=t.matrix,cr(t.a,t.b,t.c,t.d,t.e,t.f)):Rm)}function hr(t,e,n,r){function i(t){return t.length?t.pop()+" ":""}function a(t,r,i,a,o,s){if(t!==i||r!==a){var l=o.push("translate(",null,e,null,n);s.push({i:l-4,x:rr(t,i)},{i:l-2,x:rr(r,a)})}else(i||a)&&o.push("translate("+i+e+a+n)}function o(t,e,n,a){t!==e?(t-e>180?e+=360:e-t>180&&(t+=360),a.push({i:n.push(i(n)+"rotate(",null,r)-2,x:rr(t,e)})):e&&n.push(i(n)+"rotate("+e+r)}function s(t,e,n,a){t!==e?a.push({i:n.push(i(n)+"skewX(",null,r)-2,x:rr(t,e)}):e&&n.push(i(n)+"skewX("+e+r)}function l(t,e,n,r,a,o){if(t!==n||e!==r){var s=a.push(i(a)+"scale(",null,",",null,")");o.push({i:s-4,x:rr(t,n)},{i:s-2,x:rr(e,r)})}else 1===n&&1===r||a.push(i(a)+"scale("+n+","+r+")")}return function(e,n){var r=[],i=[];return e=t(e),n=t(n),a(e.translateX,e.translateY,n.translateX,n.translateY,r,i),o(e.rotate,n.rotate,r,i),s(e.skewX,n.skewX,r,i),l(e.scaleX,e.scaleY,n.scaleX,n.scaleY,r,i),e=n=null,function(t){for(var e,n=-1,a=i.length;++n<a;)r[(e=i[n]).i]=e.x(t);return r.join("")}}}function pr(t){return((t=Math.exp(t))+1/t)/2}function gr(t){return((t=Math.exp(t))-1/t)/2}function mr(t){return((t=Math.exp(2*t))-1)/(t+1)}function vr(t,e){var n,r,i=t[0],a=t[1],o=t[2],s=e[0],l=e[1],u=e[2],c=s-i,f=l-a,d=c*c+f*f;if(d<Um)r=Math.log(u/o)/Fm,n=function(t){return[i+t*c,a+t*f,o*Math.exp(Fm*t*r)]};else{var h=Math.sqrt(d),p=(u*u-o*o+Hm*d)/(2*o*qm*h),g=(u*u-o*o-Hm*d)/(2*u*qm*h),m=Math.log(Math.sqrt(p*p+1)-p),v=Math.log(Math.sqrt(g*g+1)-g);
r=(v-m)/Fm,n=function(t){var e=t*r,n=pr(m),s=o/(qm*h)*(n*mr(Fm*e+m)-gr(m));return[i+s*c,a+s*f,o*n/pr(Fm*e+m)]}}return n.duration=1e3*r,n}function yr(t){return function(e,n){var r=t((e=Mn(e)).h,(n=Mn(n)).h),i=Qn(e.s,n.s),a=Qn(e.l,n.l),o=Qn(e.opacity,n.opacity);return function(t){return e.h=r(t),e.s=i(t),e.l=a(t),e.opacity=o(t),e+""}}}function _r(t,e){var n=Qn((t=Nn(t)).l,(e=Nn(e)).l),r=Qn(t.a,e.a),i=Qn(t.b,e.b),a=Qn(t.opacity,e.opacity);return function(e){return t.l=n(e),t.a=r(e),t.b=i(e),t.opacity=a(e),t+""}}function br(t){return function(e,n){var r=t((e=qn(e)).h,(n=qn(n)).h),i=Qn(e.c,n.c),a=Qn(e.l,n.l),o=Qn(e.opacity,n.opacity);return function(t){return e.h=r(t),e.c=i(t),e.l=a(t),e.opacity=o(t),e+""}}}function xr(t){return function e(n){function r(e,r){var i=t((e=jn(e)).h,(r=jn(r)).h),a=Qn(e.s,r.s),o=Qn(e.l,r.l),s=Qn(e.opacity,r.opacity);return function(t){return e.h=i(t),e.s=a(t),e.l=o(Math.pow(t,n)),e.opacity=s(t),e+""}}return n=+n,r.gamma=e,r}(1)}function wr(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t(r/(e-1));return n}function Cr(){for(var t,e=0,n=arguments.length,r={};e<n;++e){if(!(t=arguments[e]+"")||t in r)throw new Error("illegal type: "+t);r[t]=[]}return new kr(r)}function kr(t){this._=t}function Sr(t,e){return t.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");if(r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:n}})}function Tr(t,e){for(var n,r=0,i=t.length;r<i;++r)if((n=t[r]).name===e)return n.value}function Ar(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=Ym,t=t.slice(0,r).concat(t.slice(r+1));break}return null!=n&&t.push({name:e,value:n}),t}function Er(t){return new Function("d","return {"+t.map(function(t,e){return JSON.stringify(t)+": d["+e+"]"}).join(",")+"}")}function Mr(t,e){var n=Er(t);return function(r,i){return e(n(r),i,t)}}function Dr(t){var e=Object.create(null),n=[];return t.forEach(function(t){for(var r in t)r in e||n.push(e[r]=r)}),n}function Pr(t){function e(t,e){var r,i,a=n(t,function(t,n){return r?r(t,n-1):(i=t,void(r=e?Mr(t,e):Er(t)))});return a.columns=i,a}function n(t,e){function n(){if(c>=u)return o;if(i)return i=!1,a;var e,n=c;if(34===t.charCodeAt(n)){for(var r=n;r++<u;)if(34===t.charCodeAt(r)){if(34!==t.charCodeAt(r+1))break;++r}return c=r+2,e=t.charCodeAt(r+1),13===e?(i=!0,10===t.charCodeAt(r+2)&&++c):10===e&&(i=!0),t.slice(n+1,r).replace(/""/g,'"')}for(;c<u;){var s=1;if(e=t.charCodeAt(c++),10===e)i=!0;else if(13===e)i=!0,10===t.charCodeAt(c)&&(++c,++s);else if(e!==l)continue;return t.slice(n,c-s)}return t.slice(n)}for(var r,i,a={},o={},s=[],u=t.length,c=0,f=0;(r=n())!==o;){for(var d=[];r!==a&&r!==o;)d.push(r),r=n();e&&null==(d=e(d,f++))||s.push(d)}return s}function r(e,n){return null==n&&(n=Dr(e)),[n.map(o).join(t)].concat(e.map(function(e){return n.map(function(t){return o(e[t])}).join(t)})).join("\n")}function i(t){return t.map(a).join("\n")}function a(e){return e.map(o).join(t)}function o(t){return null==t?"":s.test(t+="")?'"'+t.replace(/\"/g,'""')+'"':t}var s=new RegExp('["'+t+"\n]"),l=t.charCodeAt(0);return{parse:e,parseRows:n,format:r,formatRows:i}}function Or(t,e){function n(t){var e,n=u.status;if(!n&&Lr(u)||n>=200&&n<300||304===n){if(a)try{e=a.call(r,u)}catch(t){return void s.call("error",r,t)}else e=u;s.call("load",r,e)}else s.call("error",r,t)}var r,i,a,o,s=Cr("beforesend","progress","load","error"),l=N(),u=new XMLHttpRequest,c=null,f=null,d=0;if("undefined"==typeof XDomainRequest||"withCredentials"in u||!/^(http(s)?:)?\/\//.test(t)||(u=new XDomainRequest),"onload"in u?u.onload=u.onerror=u.ontimeout=n:u.onreadystatechange=function(t){u.readyState>3&&n(t)},u.onprogress=function(t){s.call("progress",r,t)},r={header:function(t,e){return t=(t+"").toLowerCase(),arguments.length<2?l.get(t):(null==e?l.remove(t):l.set(t,e+""),r)},mimeType:function(t){return arguments.length?(i=null==t?null:t+"",r):i},responseType:function(t){return arguments.length?(o=t,r):o},timeout:function(t){return arguments.length?(d=+t,r):d},user:function(t){return arguments.length<1?c:(c=null==t?null:t+"",r)},password:function(t){return arguments.length<1?f:(f=null==t?null:t+"",r)},response:function(t){return a=t,r},get:function(t,e){return r.send("GET",t,e)},post:function(t,e){return r.send("POST",t,e)},send:function(e,n,a){return u.open(e,t,!0,c,f),null==i||l.has("accept")||l.set("accept",i+",*/*"),u.setRequestHeader&&l.each(function(t,e){u.setRequestHeader(e,t)}),null!=i&&u.overrideMimeType&&u.overrideMimeType(i),null!=o&&(u.responseType=o),d>0&&(u.timeout=d),null==a&&"function"==typeof n&&(a=n,n=null),null!=a&&1===a.length&&(a=Nr(a)),null!=a&&r.on("error",a).on("load",function(t){a(null,t)}),s.call("beforesend",r,u),u.send(null==n?null:n),r},abort:function(){return u.abort(),r},on:function(){var t=s.on.apply(s,arguments);return t===s?r:t}},null!=e){if("function"!=typeof e)throw new Error("invalid callback: "+e);return r.get(e)}return r}function Nr(t){return function(e,n){t(null==e?n:null)}}function Lr(t){var e=t.responseType;return e&&"text"!==e?t.response:t.responseText}function Ir(t,e){return function(n,r){var i=Or(n).mimeType(t).response(e);if(null!=r){if("function"!=typeof r)throw new Error("invalid callback: "+r);return i.get(r)}return i}}function Rr(t,e){return function(n,r,i){arguments.length<3&&(i=r,r=null);var a=Or(n).mimeType(t);return a.row=function(t){return arguments.length?a.response(Br(e,r=t)):r},a.row(r),i?a.get(i):a}}function Br(t,e){return function(n){return t(n.responseText,e)}}function zr(){return _v||(wv(Fr),_v=xv.now()+bv)}function Fr(){_v=0}function qr(){this._call=this._time=this._next=null}function Hr(t,e,n){var r=new qr;return r.restart(t,e,n),r}function Ur(){zr(),++pv;for(var t,e=Jm;e;)(t=_v-e._time)>=0&&e._call.call(null,t),e=e._next;--pv}function jr(t){_v=(yv=t||xv.now())+bv,pv=gv=0;try{Ur()}finally{pv=0,$r(),_v=0}}function Vr(){var t=xv.now(),e=t-yv;e>vv&&(bv-=e,yv=t)}function $r(){for(var t,e,n=Jm,r=1/0;n;)n._call?(r>n._time&&(r=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:Jm=e);Km=t,Wr(r)}function Wr(t){if(!pv){gv&&(gv=clearTimeout(gv));var e=t-_v;e>24?(t<1/0&&(gv=setTimeout(jr,e)),mv&&(mv=clearInterval(mv))):(mv||(mv=setInterval(Vr,vv)),pv=1,wv(jr))}}function Gr(t,e,n){var r=new qr;return e=null==e?0:+e,r.restart(function(n){r.stop(),t(n+e)},e,n),r}function Xr(t,e,n){var r=new qr,i=e;return null==e?(r.restart(t,e,n),r):(e=+e,n=null==n?zr():+n,r.restart(function a(o){o+=i,r.restart(a,i+=e,n),t(o)},e,n),r)}function Yr(t,e,n,r){function i(e){return t(e=new Date((+e))),e}return i.floor=i,i.ceil=function(n){return t(n=new Date(n-1)),e(n,1),t(n),n},i.round=function(t){var e=i(t),n=i.ceil(t);return t-e<n-t?e:n},i.offset=function(t,n){return e(t=new Date((+t)),null==n?1:Math.floor(n)),t},i.range=function(n,r,a){var o=[];if(n=i.ceil(n),a=null==a?1:Math.floor(a),!(n<r&&a>0))return o;do o.push(new Date((+n)));while(e(n,a),t(n),n<r);return o},i.filter=function(n){return Yr(function(e){for(;t(e),!n(e);)e.setTime(e-1)},function(t,r){for(;--r>=0;)for(;e(t,1),!n(t););})},n&&(i.count=function(e,r){return Cv.setTime(+e),kv.setTime(+r),t(Cv),t(kv),Math.floor(n(Cv,kv))},i.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?i.filter(r?function(e){return r(e)%t===0}:function(e){return i.count(0,e)%t===0}):i:null}),i}function Jr(t){return Yr(function(e){e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},function(t,e){t.setDate(t.getDate()+7*e)},function(t,e){return(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Ev)/Pv})}function Kr(t){return Yr(function(e){e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},function(t,e){t.setUTCDate(t.getUTCDate()+7*e)},function(t,e){return(e-t)/Pv})}function Zr(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function Qr(t){return t=Zr(Math.abs(t)),t?t[1]:NaN}function ti(t,e){return function(n,r){for(var i=n.length,a=[],o=0,s=t[0],l=0;i>0&&s>0&&(l+s+1>r&&(s=Math.max(1,r-l)),a.push(n.substring(i-=s,i+s)),!((l+=s+1)>r));)s=t[o=(o+1)%t.length];return a.reverse().join(e)}}function ei(t,e){t=t.toPrecision(e);t:for(var n,r=t.length,i=1,a=-1;i<r;++i)switch(t[i]){case".":a=n=i;break;case"0":0===a&&(a=i),n=i;break;case"e":break t;default:a>0&&(a=0)}return a>0?t.slice(0,a)+t.slice(n+1):t}function ni(t,e){var n=Zr(t,e);if(!n)return t+"";var r=n[0],i=n[1],a=i-(Ay=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,o=r.length;return a===o?r:a>o?r+new Array(a-o+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+Zr(t,Math.max(0,e+a-1))[0]}function ri(t,e){var n=Zr(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array((-i)).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}function ii(t){return new ai(t)}function ai(t){if(!(e=Dy.exec(t)))throw new Error("invalid format: "+t);var e,n=e[1]||" ",r=e[2]||">",i=e[3]||"-",a=e[4]||"",o=!!e[5],s=e[6]&&+e[6],l=!!e[7],u=e[8]&&+e[8].slice(1),c=e[9]||"";"n"===c?(l=!0,c="g"):My[c]||(c=""),(o||"0"===n&&"="===r)&&(o=!0,n="0",r="="),this.fill=n,this.align=r,this.sign=i,this.symbol=a,this.zero=o,this.width=s,this.comma=l,this.precision=u,this.type=c}function oi(t){return t}function si(t){function e(t){function e(t){var e,i,l,y=p,_=g;if("c"===h)_=m(t)+_,t="";else{t=+t;var b=(t<0||1/t<0)&&(t*=-1,!0);if(t=m(t,d),b)for(e=-1,i=t.length,b=!1;++e<i;)if(l=t.charCodeAt(e),48<l&&l<58||"x"===h&&96<l&&l<103||"X"===h&&64<l&&l<71){b=!0;break}if(y=(b?"("===s?s:"-":"-"===s||"("===s?"":s)+y,_=_+("s"===h?Oy[8+Ay/3]:"")+(b&&"("===s?")":""),v)for(e=-1,i=t.length;++e<i;)if(l=t.charCodeAt(e),48>l||l>57){_=(46===l?a+t.slice(e+1):t.slice(e))+_,t=t.slice(0,e);break}}f&&!u&&(t=r(t,1/0));var x=y.length+t.length+_.length,w=x<c?new Array(c-x+1).join(n):"";switch(f&&u&&(t=r(w+t,w.length?c-_.length:1/0),w=""),o){case"<":return y+t+_+w;case"=":return y+w+t+_;case"^":return w.slice(0,x=w.length>>1)+y+t+_+w.slice(x)}return w+y+t+_}t=ii(t);var n=t.fill,o=t.align,s=t.sign,l=t.symbol,u=t.zero,c=t.width,f=t.comma,d=t.precision,h=t.type,p="$"===l?i[0]:"#"===l&&/[boxX]/.test(h)?"0"+h.toLowerCase():"",g="$"===l?i[1]:/[%p]/.test(h)?"%":"",m=My[h],v=!h||/[defgprs%]/.test(h);return d=null==d?h?6:12:/[gprs]/.test(h)?Math.max(1,Math.min(21,d)):Math.max(0,Math.min(20,d)),e.toString=function(){return t+""},e}function n(t,n){var r=e((t=ii(t),t.type="f",t)),i=3*Math.max(-8,Math.min(8,Math.floor(Qr(n)/3))),a=Math.pow(10,-i),o=Oy[8+i/3];return function(t){return r(a*t)+o}}var r=t.grouping&&t.thousands?ti(t.grouping,t.thousands):oi,i=t.currency,a=t.decimal;return{format:e,formatPrefix:n}}function li(e){return Py=si(e),t.format=Py.format,t.formatPrefix=Py.formatPrefix,Py}function ui(t){return Math.max(0,-Qr(Math.abs(t)))}function ci(t,e){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(Qr(e)/3)))-Qr(Math.abs(t)))}function fi(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Qr(e)-Qr(t))+1}function di(t){if(0<=t.y&&t.y<100){var e=new Date((-1),t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function hi(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function pi(t){return{y:t,m:0,d:1,H:0,M:0,S:0,L:0}}function gi(t){function e(t,e){return function(n){var r,i,a,o=[],s=-1,l=0,u=t.length;for(n instanceof Date||(n=new Date((+n)));++s<u;)37===t.charCodeAt(s)&&(o.push(t.slice(l,s)),null!=(i=Ly[r=t.charAt(++s)])?r=t.charAt(++s):i="e"===r?" ":"0",(a=e[r])&&(r=a(n,i)),o.push(r),l=s+1);return o.push(t.slice(l,s)),o.join("")}}function n(t,e){return function(n){var i=pi(1900),a=r(i,t,n+="",0);if(a!=n.length)return null;if("p"in i&&(i.H=i.H%12+12*i.p),"W"in i||"U"in i){"w"in i||(i.w="W"in i?1:0);var o="Z"in i?hi(pi(i.y)).getUTCDay():e(pi(i.y)).getDay();i.m=0,i.d="W"in i?(i.w+6)%7+7*i.W-(o+5)%7:i.w+7*i.U-(o+6)%7}return"Z"in i?(i.H+=i.Z/100|0,i.M+=i.Z%100,hi(i)):e(i)}}function r(t,e,n,r){for(var i,a,o=0,s=e.length,l=n.length;o<s;){if(r>=l)return-1;if(i=e.charCodeAt(o++),37===i){if(i=e.charAt(o++),a=U[i in Ly?e.charAt(o++):i],!a||(r=a(t,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}function i(t,e,n){var r=D.exec(e.slice(n));return r?(t.p=P[r[0].toLowerCase()],n+r[0].length):-1}function a(t,e,n){var r=L.exec(e.slice(n));return r?(t.w=I[r[0].toLowerCase()],n+r[0].length):-1}function o(t,e,n){var r=O.exec(e.slice(n));return r?(t.w=N[r[0].toLowerCase()],n+r[0].length):-1}function s(t,e,n){var r=z.exec(e.slice(n));return r?(t.m=F[r[0].toLowerCase()],n+r[0].length):-1}function l(t,e,n){var r=R.exec(e.slice(n));return r?(t.m=B[r[0].toLowerCase()],n+r[0].length):-1}function u(t,e,n){return r(t,w,e,n)}function c(t,e,n){return r(t,C,e,n)}function f(t,e,n){return r(t,k,e,n)}function d(t){return A[t.getDay()]}function h(t){return T[t.getDay()]}function p(t){return M[t.getMonth()]}function g(t){return E[t.getMonth()]}function m(t){return S[+(t.getHours()>=12)]}function v(t){return A[t.getUTCDay()]}function y(t){return T[t.getUTCDay()]}function _(t){return M[t.getUTCMonth()]}function b(t){return E[t.getUTCMonth()]}function x(t){return S[+(t.getUTCHours()>=12)]}var w=t.dateTime,C=t.date,k=t.time,S=t.periods,T=t.days,A=t.shortDays,E=t.months,M=t.shortMonths,D=yi(S),P=_i(S),O=yi(T),N=_i(T),L=yi(A),I=_i(A),R=yi(E),B=_i(E),z=yi(M),F=_i(M),q={a:d,A:h,b:p,B:g,c:null,d:Li,e:Li,H:Ii,I:Ri,j:Bi,L:zi,m:Fi,M:qi,p:m,S:Hi,U:Ui,w:ji,W:Vi,x:null,X:null,y:$i,Y:Wi,Z:Gi,"%":la},H={a:v,A:y,b:_,B:b,c:null,d:Xi,e:Xi,H:Yi,I:Ji,j:Ki,L:Zi,m:Qi,M:ta,p:x,S:ea,U:na,w:ra,W:ia,x:null,X:null,y:aa,Y:oa,Z:sa,"%":la},U={a:a,A:o,b:s,B:l,c:u,d:Ai,e:Ai,H:Mi,I:Mi,j:Ei,L:Oi,m:Ti,M:Di,p:i,S:Pi,U:xi,w:bi,W:wi,x:c,X:f,y:ki,Y:Ci,Z:Si,"%":Ni};return q.x=e(C,q),q.X=e(k,q),q.c=e(w,q),H.x=e(C,H),H.X=e(k,H),H.c=e(w,H),{format:function(t){var n=e(t+="",q);return n.toString=function(){return t},n},parse:function(t){var e=n(t+="",di);return e.toString=function(){return t},e},utcFormat:function(t){var n=e(t+="",H);return n.toString=function(){return t},n},utcParse:function(t){var e=n(t,hi);return e.toString=function(){return t},e}}}function mi(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",a=i.length;return r+(a<n?new Array(n-a+1).join(e)+i:i)}function vi(t){return t.replace(By,"\\$&")}function yi(t){return new RegExp("^(?:"+t.map(vi).join("|")+")","i")}function _i(t){for(var e={},n=-1,r=t.length;++n<r;)e[t[n].toLowerCase()]=n;return e}function bi(t,e,n){var r=Iy.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function xi(t,e,n){var r=Iy.exec(e.slice(n));return r?(t.U=+r[0],n+r[0].length):-1}function wi(t,e,n){var r=Iy.exec(e.slice(n));return r?(t.W=+r[0],n+r[0].length):-1}function Ci(t,e,n){var r=Iy.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function ki(t,e,n){var r=Iy.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function Si(t,e,n){var r=/^(Z)|([+-]\d\d)(?:\:?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function Ti(t,e,n){var r=Iy.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function Ai(t,e,n){var r=Iy.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function Ei(t,e,n){var r=Iy.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function Mi(t,e,n){var r=Iy.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function Di(t,e,n){var r=Iy.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function Pi(t,e,n){var r=Iy.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function Oi(t,e,n){var r=Iy.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function Ni(t,e,n){var r=Ry.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function Li(t,e){return mi(t.getDate(),e,2)}function Ii(t,e){return mi(t.getHours(),e,2)}function Ri(t,e){return mi(t.getHours()%12||12,e,2)}function Bi(t,e){return mi(1+zv.count(ny(t),t),e,3)}function zi(t,e){return mi(t.getMilliseconds(),e,3)}function Fi(t,e){return mi(t.getMonth()+1,e,2)}function qi(t,e){return mi(t.getMinutes(),e,2)}function Hi(t,e){return mi(t.getSeconds(),e,2)}function Ui(t,e){return mi(qv.count(ny(t),t),e,2)}function ji(t){return t.getDay()}function Vi(t,e){return mi(Hv.count(ny(t),t),e,2)}function $i(t,e){return mi(t.getFullYear()%100,e,2)}function Wi(t,e){return mi(t.getFullYear()%1e4,e,4)}function Gi(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+mi(e/60|0,"0",2)+mi(e%60,"0",2)}function Xi(t,e){return mi(t.getUTCDate(),e,2)}function Yi(t,e){return mi(t.getUTCHours(),e,2)}function Ji(t,e){return mi(t.getUTCHours()%12||12,e,2)}function Ki(t,e){return mi(1+ly.count(Ty(t),t),e,3)}function Zi(t,e){return mi(t.getUTCMilliseconds(),e,3)}function Qi(t,e){return mi(t.getUTCMonth()+1,e,2)}function ta(t,e){return mi(t.getUTCMinutes(),e,2)}function ea(t,e){return mi(t.getUTCSeconds(),e,2)}function na(t,e){return mi(cy.count(Ty(t),t),e,2)}function ra(t){return t.getUTCDay()}function ia(t,e){return mi(fy.count(Ty(t),t),e,2)}function aa(t,e){return mi(t.getUTCFullYear()%100,e,2)}function oa(t,e){return mi(t.getUTCFullYear()%1e4,e,4)}function sa(){return"+0000"}function la(){return"%"}function ua(e){return Ny=gi(e),t.timeFormat=Ny.format,t.timeParse=Ny.parse,t.utcFormat=Ny.utcFormat,t.utcParse=Ny.utcParse,Ny}function ca(t){return t.toISOString()}function fa(t){var e=new Date(t);return isNaN(e)?null:e}function da(t){function e(e){var a=e+"",o=n.get(a);if(!o){if(i!==Vy)return i;n.set(a,o=r.push(e))}return t[(o-1)%t.length]}var n=N(),r=[],i=Vy;return t=null==t?[]:jy.call(t),e.domain=function(t){if(!arguments.length)return r.slice();r=[],n=N();for(var i,a,o=-1,s=t.length;++o<s;)n.has(a=(i=t[o])+"")||n.set(a,r.push(i));return e},e.range=function(n){return arguments.length?(t=jy.call(n),e):t.slice()},e.unknown=function(t){return arguments.length?(i=t,e):i},e.copy=function(){return da().domain(r).range(t).unknown(i)},e}function ha(){function t(){var t=i().length,r=o[1]<o[0],d=o[r-0],h=o[1-r];e=(h-d)/Math.max(1,t-l+2*u),s&&(e=Math.floor(e)),d+=(h-d-e*(t-l))*c,n=e*(1-l),s&&(d=Math.round(d),n=Math.round(n));var p=f(t).map(function(t){return d+e*t});return a(r?p.reverse():p)}var e,n,r=da().unknown(void 0),i=r.domain,a=r.range,o=[0,1],s=!1,l=0,u=0,c=.5;return delete r.unknown,r.domain=function(e){return arguments.length?(i(e),t()):i()},r.range=function(e){return arguments.length?(o=[+e[0],+e[1]],t()):o.slice()},r.rangeRound=function(e){return o=[+e[0],+e[1]],s=!0,t()},r.bandwidth=function(){return n},r.step=function(){return e},r.round=function(e){return arguments.length?(s=!!e,t()):s},r.padding=function(e){return arguments.length?(l=u=Math.max(0,Math.min(1,e)),t()):l},r.paddingInner=function(e){return arguments.length?(l=Math.max(0,Math.min(1,e)),t()):l},r.paddingOuter=function(e){return arguments.length?(u=Math.max(0,Math.min(1,e)),t()):u},r.align=function(e){return arguments.length?(c=Math.max(0,Math.min(1,e)),t()):c},r.copy=function(){return ha().domain(i()).range(o).round(s).paddingInner(l).paddingOuter(u).align(c)},t()}function pa(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return pa(e())},t}function ga(){return pa(ha().paddingInner(1))}function ma(t){return function(){return t}}function va(t){return+t}function ya(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:ma(e)}function _a(t){return function(e,n){var r=t(e=+e,n=+n);return function(t){return t<=e?0:t>=n?1:r(t)}}}function ba(t){return function(e,n){var r=t(e=+e,n=+n);return function(t){return t<=0?e:t>=1?n:r(t)}}}function xa(t,e,n,r){var i=t[0],a=t[1],o=e[0],s=e[1];return a<i?(i=n(a,i),o=r(s,o)):(i=n(i,a),o=r(o,s)),function(t){return o(i(t))}}function wa(t,e,n,r){var i=Math.min(t.length,e.length)-1,a=new Array(i),o=new Array(i),s=-1;for(t[i]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++s<i;)a[s]=n(t[s],t[s+1]),o[s]=r(e[s],e[s+1]);return function(e){var n=Dp(t,e,1,i)-1;return o[n](a[n](e))}}function Ca(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp())}function ka(t,e){function n(){return i=Math.min(s.length,l.length)>2?wa:xa,a=o=null,r}function r(e){return(a||(a=i(s,l,c?_a(t):t,u)))(+e)}var i,a,o,s=$y,l=$y,u=lr,c=!1;return r.invert=function(t){return(o||(o=i(l,s,ya,c?ba(e):e)))(+t)},r.domain=function(t){return arguments.length?(s=Uy.call(t,va),n()):s.slice()},r.range=function(t){return arguments.length?(l=jy.call(t),n()):l.slice()},r.rangeRound=function(t){return l=jy.call(t),u=ur,n()},r.clamp=function(t){return arguments.length?(c=!!t,n()):c},r.interpolate=function(t){return arguments.length?(u=t,n()):u},n()}function Sa(e,n,r){var i,a=e[0],o=e[e.length-1],s=h(a,o,null==n?10:n);switch(r=ii(null==r?",f":r),r.type){case"s":var l=Math.max(Math.abs(a),Math.abs(o));return null!=r.precision||isNaN(i=ci(s,l))||(r.precision=i),t.formatPrefix(r,l);case"":case"e":case"g":case"p":case"r":null!=r.precision||isNaN(i=fi(s,Math.max(Math.abs(a),Math.abs(o))))||(r.precision=i-("e"===r.type));break;case"f":case"%":null!=r.precision||isNaN(i=ui(s))||(r.precision=i-2*("%"===r.type))}return t.format(r)}function Ta(t){var e=t.domain;return t.ticks=function(t){var n=e();return d(n[0],n[n.length-1],null==t?10:t)},t.tickFormat=function(t,n){return Sa(e(),t,n)},t.nice=function(n){var r=e(),i=r.length-1,a=null==n?10:n,o=r[0],s=r[i],l=h(o,s,a);return l&&(l=h(Math.floor(o/l)*l,Math.ceil(s/l)*l,a),r[0]=Math.floor(o/l)*l,r[i]=Math.ceil(s/l)*l,e(r)),t},t}function Aa(){var t=ka(ya,rr);return t.copy=function(){return Ca(t,Aa())},Ta(t)}function Ea(){function t(t){return+t}var e=[0,1];return t.invert=t,t.domain=t.range=function(n){return arguments.length?(e=Uy.call(n,va),t):e.slice()},t.copy=function(){return Ea().domain(e)},Ta(t)}function Ma(t,e){t=t.slice();var n,r=0,i=t.length-1,a=t[r],o=t[i];return o<a&&(n=r,r=i,i=n,n=a,a=o,o=n),t[r]=e.floor(a),t[i]=e.ceil(o),t}function Da(t,e){return(e=Math.log(e/t))?function(n){return Math.log(n/t)/e}:ma(e)}function Pa(t,e){return t<0?function(n){return-Math.pow(-e,n)*Math.pow(-t,1-n)}:function(n){return Math.pow(e,n)*Math.pow(t,1-n)}}function Oa(t){return isFinite(t)?+("1e"+t):t<0?0:t}function Na(t){return 10===t?Oa:t===Math.E?Math.exp:function(e){return Math.pow(t,e)}}function La(t){return t===Math.E?Math.log:10===t&&Math.log10||2===t&&Math.log2||(t=Math.log(t),function(e){return Math.log(e)/t})}function Ia(t){return function(e){return-t(-e)}}function Ra(){function e(){return a=La(i),o=Na(i),r()[0]<0&&(a=Ia(a),o=Ia(o)),n}var n=ka(Da,Pa).domain([1,10]),r=n.domain,i=10,a=La(10),o=Na(10);return n.base=function(t){return arguments.length?(i=+t,e()):i},n.domain=function(t){return arguments.length?(r(t),e()):r()},n.ticks=function(t){var e,n=r(),s=n[0],l=n[n.length-1];(e=l<s)&&(h=s,s=l,l=h);var u,c,f,h=a(s),p=a(l),g=null==t?10:+t,m=[];if(!(i%1)&&p-h<g){if(h=Math.round(h)-1,p=Math.round(p)+1,s>0){for(;h<p;++h)for(c=1,u=o(h);c<i;++c)if(f=u*c,!(f<s)){if(f>l)break;m.push(f)}}else for(;h<p;++h)for(c=i-1,u=o(h);c>=1;--c)if(f=u*c,!(f<s)){if(f>l)break;m.push(f)}}else m=d(h,p,Math.min(p-h,g)).map(o);return e?m.reverse():m},n.tickFormat=function(e,r){if(null==r&&(r=10===i?".0e":","),"function"!=typeof r&&(r=t.format(r)),e===1/0)return r;null==e&&(e=10);var s=Math.max(1,i*e/n.ticks().length);return function(t){var e=t/o(Math.round(a(t)));return e*i<i-.5&&(e*=i),e<=s?r(t):""}},n.nice=function(){return r(Ma(r(),{floor:function(t){return o(Math.floor(a(t)))},ceil:function(t){return o(Math.ceil(a(t)))}}))},n.copy=function(){return Ca(n,Ra().base(i))},n}function Ba(t,e){return t<0?-Math.pow(-t,e):Math.pow(t,e)}function za(){function t(t,e){return(e=Ba(e,n)-(t=Ba(t,n)))?function(r){return(Ba(r,n)-t)/e}:ma(e)}function e(t,e){return e=Ba(e,n)-(t=Ba(t,n)),function(r){return Ba(t+e*r,1/n)}}var n=1,r=ka(t,e),i=r.domain;return r.exponent=function(t){return arguments.length?(n=+t,i(i())):n},r.copy=function(){return Ca(r,za().exponent(n))},Ta(r)}function Fa(){return za().exponent(.5)}function qa(){function t(){var t=0,e=Math.max(1,i.length);for(a=new Array(e-1);++t<e;)a[t-1]=m(r,t/e);return n}function n(t){if(!isNaN(t=+t))return i[Dp(a,t)]}var r=[],i=[],a=[];return n.invertExtent=function(t){var e=i.indexOf(t);return e<0?[NaN,NaN]:[e>0?a[e-1]:r[0],e<a.length?a[e]:r[r.length-1]]},n.domain=function(n){if(!arguments.length)return r.slice();r=[];for(var i,a=0,o=n.length;a<o;++a)i=n[a],null==i||isNaN(i=+i)||r.push(i);return r.sort(e),t()},n.range=function(e){return arguments.length?(i=jy.call(e),t()):i.slice()},n.quantiles=function(){return a.slice()},n.copy=function(){return qa().domain(r).range(i)},n}function Ha(){function t(t){if(t<=t)return o[Dp(a,t,0,i)]}function e(){var e=-1;for(a=new Array(i);++e<i;)a[e]=((e+1)*r-(e-i)*n)/(i+1);return t}var n=0,r=1,i=1,a=[.5],o=[0,1];return t.domain=function(t){return arguments.length?(n=+t[0],r=+t[1],e()):[n,r]},t.range=function(t){return arguments.length?(i=(o=jy.call(t)).length-1,e()):o.slice()},t.invertExtent=function(t){var e=o.indexOf(t);return e<0?[NaN,NaN]:e<1?[n,a[0]]:e>=i?[a[i-1],r]:[a[e-1],a[e]]},t.copy=function(){return Ha().domain([n,r]).range(o)},Ta(t)}function Ua(){function t(t){if(t<=t)return n[Dp(e,t,0,r)]}var e=[.5],n=[0,1],r=1;return t.domain=function(i){return arguments.length?(e=jy.call(i),r=Math.min(e.length,n.length-1),t):e.slice()},t.range=function(i){return arguments.length?(n=jy.call(i),r=Math.min(e.length,n.length-1),t):n.slice()},t.invertExtent=function(t){var r=n.indexOf(t);return[e[r-1],e[r]]},t.copy=function(){return Ua().domain(e).range(n)},t}function ja(t){return new Date(t)}function Va(t){return t instanceof Date?+t:+new Date((+t))}function $a(t,e,r,i,a,o,s,l,u){function c(n){return(s(n)<n?m:o(n)<n?v:a(n)<n?y:i(n)<n?_:e(n)<n?r(n)<n?b:x:t(n)<n?w:C)(n)}function f(e,r,i,a){if(null==e&&(e=10),"number"==typeof e){var o=Math.abs(i-r)/e,s=n(function(t){return t[2]}).right(k,o);s===k.length?(a=h(r/Zy,i/Zy,e),e=t):s?(s=k[o/k[s-1][2]<k[s][2]/o?s-1:s],a=s[1],e=s[0]):(a=h(r,i,e),e=l)}return null==a?e:e.every(a)}var d=ka(ya,rr),p=d.invert,g=d.domain,m=u(".%L"),v=u(":%S"),y=u("%I:%M"),_=u("%I %p"),b=u("%a %d"),x=u("%b %d"),w=u("%B"),C=u("%Y"),k=[[s,1,Wy],[s,5,5*Wy],[s,15,15*Wy],[s,30,30*Wy],[o,1,Gy],[o,5,5*Gy],[o,15,15*Gy],[o,30,30*Gy],[a,1,Xy],[a,3,3*Xy],[a,6,6*Xy],[a,12,12*Xy],[i,1,Yy],[i,2,2*Yy],[r,1,Jy],[e,1,Ky],[e,3,3*Ky],[t,1,Zy]];return d.invert=function(t){return new Date(p(t))},d.domain=function(t){return arguments.length?g(Uy.call(t,Va)):g().map(ja)},d.ticks=function(t,e){var n,r=g(),i=r[0],a=r[r.length-1],o=a<i;return o&&(n=i,i=a,a=n),n=f(t,i,a,e),n=n?n.range(i,a+1):[],o?n.reverse():n},d.tickFormat=function(t,e){return null==e?c:u(e)},d.nice=function(t,e){var n=g();return(t=f(t,n[0],n[n.length-1],e))?g(Ma(n,t)):d},d.copy=function(){return Ca(d,$a(t,e,r,i,a,o,s,l,u))},d}function Wa(){return $a(ny,ty,qv,zv,Rv,Lv,Ov,Sv,t.timeFormat).domain([new Date(2e3,0,1),new Date(2e3,0,2)])}function Ga(){return $a(Ty,ky,cy,ly,oy,iy,Ov,Sv,t.utcFormat).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)])}function Xa(t){return t.match(/.{6}/g).map(function(t){return"#"+t})}function Ya(t){(t<0||t>1)&&(t-=Math.floor(t));var e=Math.abs(t-.5);return o_.h=360*t-100,o_.s=1.5-1.5*e,o_.l=.8-.9*e,o_+""}function Ja(t){var e=t.length;return function(n){return t[Math.max(0,Math.min(e-1,Math.floor(n*e)))]}}function Ka(t){function e(e){var a=(e-n)/(r-n);return t(i?Math.max(0,Math.min(1,a)):a)}var n=0,r=1,i=!1;return e.domain=function(t){return arguments.length?(n=+t[0],r=+t[1],e):[n,r]},e.clamp=function(t){return arguments.length?(i=!!t,e):i},e.interpolator=function(n){return arguments.length?(t=n,e):t},e.copy=function(){return Ka(t).domain([n,r]).clamp(i)},Ta(e)}function Za(t){var e=t+="",n=e.indexOf(":");return n>=0&&"xmlns"!==(e=t.slice(0,n))&&(t=t.slice(n+1)),d_.hasOwnProperty(e)?{space:d_[e],local:t}:t}function Qa(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===f_&&e.documentElement.namespaceURI===f_?e.createElement(t):e.createElementNS(n,t)}}function to(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function eo(t){var e=Za(t);return(e.local?to:Qa)(e)}function no(){return new ro}function ro(){this._="@"+(++h_).toString(36)}function io(t,e,n){return t=ao(t,e,n),function(e){var n=e.relatedTarget;n&&(n===this||8&n.compareDocumentPosition(this))||t.call(this,e)}}function ao(e,n,r){return function(i){var a=t.event;t.event=i;try{e.call(this,this.__data__,n,r)}finally{t.event=a}}}function oo(t){return t.trim().split(/^|\s+/).map(function(t){var e="",n=t.indexOf(".");return n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),{type:t,name:e}})}function so(t){return function(){var e=this.__on;if(e){for(var n,r=0,i=-1,a=e.length;r<a;++r)n=e[r],t.type&&n.type!==t.type||n.name!==t.name?e[++i]=n:this.removeEventListener(n.type,n.listener,n.capture);++i?e.length=i:delete this.__on}}}function lo(t,e,n){var r=y_.hasOwnProperty(t.type)?io:ao;return function(i,a,o){var s,l=this.__on,u=r(e,a,o);if(l)for(var c=0,f=l.length;c<f;++c)if((s=l[c]).type===t.type&&s.name===t.name)return this.removeEventListener(s.type,s.listener,s.capture),this.addEventListener(s.type,s.listener=u,s.capture=n),void(s.value=e);this.addEventListener(t.type,u,n),s={type:t.type,name:t.name,value:e,listener:u,capture:n},l?l.push(s):this.__on=[s]}}function uo(t,e,n){var r,i,a=oo(t+""),o=a.length;if(!(arguments.length<2)){for(s=e?lo:so,null==n&&(n=!1),r=0;r<o;++r)this.each(s(a[r],e,n));return this}var s=this.node().__on;if(s)for(var l,u=0,c=s.length;u<c;++u)for(r=0,l=s[u];r<o;++r)if((i=a[r]).type===l.type&&i.name===l.name)return l.value}function co(e,n,r,i){var a=t.event;e.sourceEvent=t.event,t.event=e;try{return n.apply(r,i)}finally{t.event=a}}function fo(){for(var e,n=t.event;e=n.sourceEvent;)n=e;return n}function ho(t,e){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}function po(t){var e=fo();return e.changedTouches&&(e=e.changedTouches[0]),ho(t,e)}function go(){}function mo(t){return null==t?go:function(){return this.querySelector(t)}}function vo(t){"function"!=typeof t&&(t=mo(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var a,o,s=e[i],l=s.length,u=r[i]=new Array(l),c=0;c<l;++c)(a=s[c])&&(o=t.call(a,a.__data__,c,s))&&("__data__"in a&&(o.__data__=a.__data__),u[c]=o);return new Ns(r,this._parents)}function yo(){return[]}function _o(t){return null==t?yo:function(){return this.querySelectorAll(t)}}function bo(t){"function"!=typeof t&&(t=_o(t));for(var e=this._groups,n=e.length,r=[],i=[],a=0;a<n;++a)for(var o,s=e[a],l=s.length,u=0;u<l;++u)(o=s[u])&&(r.push(t.call(o,o.__data__,u,s)),i.push(o));return new Ns(r,i)}function xo(t){"function"!=typeof t&&(t=v_(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var a,o=e[i],s=o.length,l=r[i]=[],u=0;u<s;++u)(a=o[u])&&t.call(a,a.__data__,u,o)&&l.push(a);return new Ns(r,this._parents)}function wo(t){return new Array(t.length)}function Co(){return new Ns(this._enter||this._groups.map(wo),this._parents)}function ko(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}function So(t){return function(){return t}}function To(t,e,n,r,i,a){for(var o,s=0,l=e.length,u=a.length;s<u;++s)(o=e[s])?(o.__data__=a[s],r[s]=o):n[s]=new ko(t,a[s]);for(;s<l;++s)(o=e[s])&&(i[s]=o)}function Ao(t,e,n,r,i,a,o){var s,l,u,c={},f=e.length,d=a.length,h=new Array(f);for(s=0;s<f;++s)(l=e[s])&&(h[s]=u=b_+o.call(l,l.__data__,s,e),u in c?i[s]=l:c[u]=l);for(s=0;s<d;++s)u=b_+o.call(t,a[s],s,a),(l=c[u])?(r[s]=l,l.__data__=a[s],c[u]=null):n[s]=new ko(t,a[s]);for(s=0;s<f;++s)(l=e[s])&&c[h[s]]===l&&(i[s]=l)}function Eo(t,e){if(!t)return h=new Array(this.size()),u=-1,this.each(function(t){h[++u]=t}),h;var n=e?Ao:To,r=this._parents,i=this._groups;"function"!=typeof t&&(t=So(t));for(var a=i.length,o=new Array(a),s=new Array(a),l=new Array(a),u=0;u<a;++u){
var c=r[u],f=i[u],d=f.length,h=t.call(c,c&&c.__data__,u,r),p=h.length,g=s[u]=new Array(p),m=o[u]=new Array(p),v=l[u]=new Array(d);n(c,f,g,m,v,h,e);for(var y,_,b=0,x=0;b<p;++b)if(y=g[b]){for(b>=x&&(x=b+1);!(_=m[x])&&++x<p;);y._next=_||null}}return o=new Ns(o,r),o._enter=s,o._exit=l,o}function Mo(){return new Ns(this._exit||this._groups.map(wo),this._parents)}function Do(t){for(var e=this._groups,n=t._groups,r=e.length,i=n.length,a=Math.min(r,i),o=new Array(r),s=0;s<a;++s)for(var l,u=e[s],c=n[s],f=u.length,d=o[s]=new Array(f),h=0;h<f;++h)(l=u[h]||c[h])&&(d[h]=l);for(;s<r;++s)o[s]=e[s];return new Ns(o,this._parents)}function Po(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r,i=t[e],a=i.length-1,o=i[a];--a>=0;)(r=i[a])&&(o&&o!==r.nextSibling&&o.parentNode.insertBefore(r,o),o=r);return this}function Oo(t){function e(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}t||(t=No);for(var n=this._groups,r=n.length,i=new Array(r),a=0;a<r;++a){for(var o,s=n[a],l=s.length,u=i[a]=new Array(l),c=0;c<l;++c)(o=s[c])&&(u[c]=o);u.sort(e)}return new Ns(i,this._parents).order()}function No(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function Lo(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function Io(){var t=new Array(this.size()),e=-1;return this.each(function(){t[++e]=this}),t}function Ro(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,a=r.length;i<a;++i){var o=r[i];if(o)return o}return null}function Bo(){var t=0;return this.each(function(){++t}),t}function zo(){return!this.node()}function Fo(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i,a=e[n],o=0,s=a.length;o<s;++o)(i=a[o])&&t.call(i,i.__data__,o,a);return this}function qo(t){return function(){this.removeAttribute(t)}}function Ho(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Uo(t,e){return function(){this.setAttribute(t,e)}}function jo(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function Vo(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}}function $o(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function Wo(t,e){var n=Za(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==e?n.local?Ho:qo:"function"==typeof e?n.local?$o:Vo:n.local?jo:Uo)(n,e))}function Go(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function Xo(t){return function(){this.style.removeProperty(t)}}function Yo(t,e,n){return function(){this.style.setProperty(t,e,n)}}function Jo(t,e,n){return function(){var r=e.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function Ko(t,e,n){var r;return arguments.length>1?this.each((null==e?Xo:"function"==typeof e?Jo:Yo)(t,e,null==n?"":n)):Go(r=this.node()).getComputedStyle(r,null).getPropertyValue(t)}function Zo(t){return function(){delete this[t]}}function Qo(t,e){return function(){this[t]=e}}function ts(t,e){return function(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}}function es(t,e){return arguments.length>1?this.each((null==e?Zo:"function"==typeof e?ts:Qo)(t,e)):this.node()[t]}function ns(t){return t.trim().split(/^|\s+/)}function rs(t){return t.classList||new is(t)}function is(t){this._node=t,this._names=ns(t.getAttribute("class")||"")}function as(t,e){for(var n=rs(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function os(t,e){for(var n=rs(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function ss(t){return function(){as(this,t)}}function ls(t){return function(){os(this,t)}}function us(t,e){return function(){(e.apply(this,arguments)?as:os)(this,t)}}function cs(t,e){var n=ns(t+"");if(arguments.length<2){for(var r=rs(this.node()),i=-1,a=n.length;++i<a;)if(!r.contains(n[i]))return!1;return!0}return this.each(("function"==typeof e?us:e?ss:ls)(n,e))}function fs(){this.textContent=""}function ds(t){return function(){this.textContent=t}}function hs(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}}function ps(t){return arguments.length?this.each(null==t?fs:("function"==typeof t?hs:ds)(t)):this.node().textContent}function gs(){this.innerHTML=""}function ms(t){return function(){this.innerHTML=t}}function vs(t){return function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}}function ys(t){return arguments.length?this.each(null==t?gs:("function"==typeof t?vs:ms)(t)):this.node().innerHTML}function _s(){this.nextSibling&&this.parentNode.appendChild(this)}function bs(){return this.each(_s)}function xs(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function ws(){return this.each(xs)}function Cs(t){var e="function"==typeof t?t:eo(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function ks(){return null}function Ss(t,e){var n="function"==typeof t?t:eo(t),r=null==e?ks:"function"==typeof e?e:mo(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function Ts(){var t=this.parentNode;t&&t.removeChild(this)}function As(){return this.each(Ts)}function Es(t){return arguments.length?this.property("__data__",t):this.node().__data__}function Ms(t,e,n){var r=Go(t),i=r.CustomEvent;i?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function Ds(t,e){return function(){return Ms(this,t,e)}}function Ps(t,e){return function(){return Ms(this,t,e.apply(this,arguments))}}function Os(t,e){return this.each(("function"==typeof e?Ps:Ds)(t,e))}function Ns(t,e){this._groups=t,this._parents=e}function Ls(){return new Ns([[document.documentElement]],x_)}function Is(t){return"string"==typeof t?new Ns([[document.querySelector(t)]],[document.documentElement]):new Ns([[t]],x_)}function Rs(t){return"string"==typeof t?new Ns([document.querySelectorAll(t)],[document.documentElement]):new Ns([null==t?[]:t],x_)}function Bs(t,e,n){arguments.length<3&&(n=e,e=fo().changedTouches);for(var r,i=0,a=e?e.length:0;i<a;++i)if((r=e[i]).identifier===n)return ho(t,r);return null}function zs(t,e){null==e&&(e=fo().touches);for(var n=0,r=e?e.length:0,i=new Array(r);n<r;++n)i[n]=ho(t,e[n]);return i}function Fs(t,e,n,r,i,a){var o=t.__transition;if(o){if(n in o)return}else t.__transition={};js(t,n,{name:e,index:r,group:i,on:w_,tween:C_,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:k_})}function qs(t,e){var n=t.__transition;if(!n||!(n=n[e])||n.state>k_)throw new Error("too late");return n}function Hs(t,e){var n=t.__transition;if(!n||!(n=n[e])||n.state>T_)throw new Error("too late");return n}function Us(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("too late");return n}function js(t,e,n){function r(t){n.state=S_,n.delay<=t?i(t-n.delay):n.timer.restart(i,n.delay,n.time)}function i(r){var i,l,u,c;for(i in s)c=s[i],c.name===n.name&&(c.state===A_?(c.state=M_,c.timer.stop(),c.on.call("interrupt",t,t.__data__,c.index,c.group),delete s[i]):+i<e&&(c.state=M_,c.timer.stop(),delete s[i]));if(Gr(function(){n.state===A_&&(n.timer.restart(a,n.delay,n.time),a(r))}),n.state=T_,n.on.call("start",t,t.__data__,n.index,n.group),n.state===T_){for(n.state=A_,o=new Array(u=n.tween.length),i=0,l=-1;i<u;++i)(c=n.tween[i].value.call(t,t.__data__,n.index,n.group))&&(o[++l]=c);o.length=l+1}}function a(r){for(var i=r<n.duration?n.ease.call(null,r/n.duration):(n.state=E_,1),a=-1,l=o.length;++a<l;)o[a].call(null,i);if(n.state===E_){n.state=M_,n.timer.stop(),n.on.call("end",t,t.__data__,n.index,n.group);for(a in s)if(+a!==e)return void delete s[e];delete t.__transition}}var o,s=t.__transition;s[e]=n,n.timer=Hr(r,0,n.time)}function Vs(t,e){var n,r,i,a=t.__transition,o=!0;if(a){e=null==e?null:e+"";for(i in a)(n=a[i]).name===e?(r=n.state===A_,n.state=M_,n.timer.stop(),r&&n.on.call("interrupt",t,t.__data__,n.index,n.group),delete a[i]):o=!1;o&&delete t.__transition}}function $s(t){return this.each(function(){Vs(this,t)})}function Ws(t,e){var n,r;return function(){var i=Hs(this,t),a=i.tween;if(a!==n){r=n=a;for(var o=0,s=r.length;o<s;++o)if(r[o].name===e){r=r.slice(),r.splice(o,1);break}}i.tween=r}}function Gs(t,e,n){var r,i;if("function"!=typeof n)throw new Error;return function(){var a=Hs(this,t),o=a.tween;if(o!==r){i=(r=o).slice();for(var s={name:e,value:n},l=0,u=i.length;l<u;++l)if(i[l].name===e){i[l]=s;break}l===u&&i.push(s)}a.tween=i}}function Xs(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r,i=Us(this.node(),n).tween,a=0,o=i.length;a<o;++a)if((r=i[a]).name===t)return r.value;return null}return this.each((null==e?Ws:Gs)(n,t,e))}function Ys(t,e,n){var r=t._id;return t.each(function(){var t=Hs(this,r);(t.value||(t.value={}))[e]=n.apply(this,arguments)}),function(t){return Us(t,r).value[e]}}function Js(t,e){var n;return("number"==typeof e?rr:e instanceof xn?Dm:(n=xn(e))?(e=n,Dm):sr)(t,e)}function Ks(t){return function(){this.removeAttribute(t)}}function Zs(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Qs(t,e,n){var r,i;return function(){var a=this.getAttribute(t);return a===n?null:a===r?i:i=e(r=a,n)}}function tl(t,e,n){var r,i;return function(){var a=this.getAttributeNS(t.space,t.local);return a===n?null:a===r?i:i=e(r=a,n)}}function el(t,e,n){var r,i,a;return function(){var o,s=n(this);return null==s?void this.removeAttribute(t):(o=this.getAttribute(t),o===s?null:o===r&&s===i?a:a=e(r=o,i=s))}}function nl(t,e,n){var r,i,a;return function(){var o,s=n(this);return null==s?void this.removeAttributeNS(t.space,t.local):(o=this.getAttributeNS(t.space,t.local),o===s?null:o===r&&s===i?a:a=e(r=o,i=s))}}function rl(t,e){var n=Za(t),r="transform"===n?zm:Js;return this.attrTween(t,"function"==typeof e?(n.local?nl:el)(n,r,Ys(this,"attr."+t,e)):null==e?(n.local?Zs:Ks)(n):(n.local?tl:Qs)(n,r,e))}function il(t,e){function n(){var n=this,r=e.apply(n,arguments);return r&&function(e){n.setAttributeNS(t.space,t.local,r(e))}}return n._value=e,n}function al(t,e){function n(){var n=this,r=e.apply(n,arguments);return r&&function(e){n.setAttribute(t,r(e))}}return n._value=e,n}function ol(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==e)return this.tween(n,null);if("function"!=typeof e)throw new Error;var r=Za(t);return this.tween(n,(r.local?il:al)(r,e))}function sl(t,e){return function(){qs(this,t).delay=+e.apply(this,arguments)}}function ll(t,e){return e=+e,function(){qs(this,t).delay=e}}function ul(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?sl:ll)(e,t)):Us(this.node(),e).delay}function cl(t,e){return function(){Hs(this,t).duration=+e.apply(this,arguments)}}function fl(t,e){return e=+e,function(){Hs(this,t).duration=e}}function dl(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?cl:fl)(e,t)):Us(this.node(),e).duration}function hl(t,e){if("function"!=typeof e)throw new Error;return function(){Hs(this,t).ease=e}}function pl(t){var e=this._id;return arguments.length?this.each(hl(e,t)):Us(this.node(),e).ease}function gl(t){"function"!=typeof t&&(t=v_(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var a,o=e[i],s=o.length,l=r[i]=[],u=0;u<s;++u)(a=o[u])&&t.call(a,a.__data__,u,o)&&l.push(a);return new Rl(r,this._parents,this._name,this._id)}function ml(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,a=Math.min(r,i),o=new Array(r),s=0;s<a;++s)for(var l,u=e[s],c=n[s],f=u.length,d=o[s]=new Array(f),h=0;h<f;++h)(l=u[h]||c[h])&&(d[h]=l);for(;s<r;++s)o[s]=e[s];return new Rl(o,this._parents,this._name,this._id)}function vl(t){return(t+"").trim().split(/^|\s+/).every(function(t){var e=t.indexOf(".");return e>=0&&(t=t.slice(0,e)),!t||"start"===t})}function yl(t,e,n){var r,i,a=vl(e)?qs:Hs;return function(){var o=a(this,t),s=o.on;s!==r&&(i=(r=s).copy()).on(e,n),o.on=i}}function _l(t,e){var n=this._id;return arguments.length<2?Us(this.node(),n).on.on(t):this.each(yl(n,t,e))}function bl(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function xl(){return this.on("end.remove",bl(this._id))}function wl(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=mo(t));for(var r=this._groups,i=r.length,a=new Array(i),o=0;o<i;++o)for(var s,l,u=r[o],c=u.length,f=a[o]=new Array(c),d=0;d<c;++d)(s=u[d])&&(l=t.call(s,s.__data__,d,u))&&("__data__"in s&&(l.__data__=s.__data__),f[d]=l,Fs(f[d],e,n,d,f,Us(s,n)));return new Rl(a,this._parents,e,n)}function Cl(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=_o(t));for(var r=this._groups,i=r.length,a=[],o=[],s=0;s<i;++s)for(var l,u=r[s],c=u.length,f=0;f<c;++f)if(l=u[f]){for(var d,h=t.call(l,l.__data__,f,u),p=Us(l,n),g=0,m=h.length;g<m;++g)(d=h[g])&&Fs(d,e,n,g,h,p);a.push(h),o.push(l)}return new Rl(a,o,e,n)}function kl(){return new D_(this._groups,this._parents)}function Sl(t,e){var n,r,i;return function(){var a=Go(this).getComputedStyle(this,null),o=a.getPropertyValue(t),s=(this.style.removeProperty(t),a.getPropertyValue(t));return o===s?null:o===n&&s===r?i:i=e(n=o,r=s)}}function Tl(t){return function(){this.style.removeProperty(t)}}function Al(t,e,n){var r,i;return function(){var a=Go(this).getComputedStyle(this,null).getPropertyValue(t);return a===n?null:a===r?i:i=e(r=a,n)}}function El(t,e,n){var r,i,a;return function(){var o=Go(this).getComputedStyle(this,null),s=o.getPropertyValue(t),l=n(this);return null==l&&(this.style.removeProperty(t),l=o.getPropertyValue(t)),s===l?null:s===r&&l===i?a:a=e(r=s,i=l)}}function Ml(t,e,n){var r="transform"==(t+="")?Bm:Js;return null==e?this.styleTween(t,Sl(t,r)).on("end.style."+t,Tl(t)):this.styleTween(t,"function"==typeof e?El(t,r,Ys(this,"style."+t,e)):Al(t,r,e),n)}function Dl(t,e,n){function r(){var r=this,i=e.apply(r,arguments);return i&&function(e){r.style.setProperty(t,i(e),n)}}return r._value=e,r}function Pl(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==e)return this.tween(r,null);if("function"!=typeof e)throw new Error;return this.tween(r,Dl(t,e,null==n?"":n))}function Ol(t){return function(){this.textContent=t}}function Nl(t){return function(){var e=t(this);this.textContent=null==e?"":e}}function Ll(t){return this.tween("text","function"==typeof t?Nl(Ys(this,"text",t)):Ol(null==t?"":t+""))}function Il(){for(var t=this._name,e=this._id,n=zl(),r=this._groups,i=r.length,a=0;a<i;++a)for(var o,s=r[a],l=s.length,u=0;u<l;++u)if(o=s[u]){var c=Us(o,e);Fs(o,t,n,u,s,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new Rl(r,this._parents,t,n)}function Rl(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function Bl(t){return Ls().transition(t)}function zl(){return++P_}function Fl(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))return N_.time=zr(),N_;return n}function ql(t){var e,n;t instanceof Rl?(e=t._id,t=t._name):(e=zl(),(n=N_).time=zr(),t=null==t?null:t+"");for(var r=this._groups,i=r.length,a=0;a<i;++a)for(var o,s=r[a],l=s.length,u=0;u<l;++u)(o=s[u])&&Fs(o,t,e,u,s,n||Fl(o,e));return new Rl(r,this._parents,t,e)}function Hl(t,e){var n,r,i=t.__transition;if(i){e=null==e?null:e+"";for(r in i)if((n=i[r]).state>S_&&n.name===e)return new Rl([[t]],L_,e,(+r))}return null}function Ul(t){return t}function jl(t,e,n){var r=t(n);return"translate("+(isFinite(r)?r:e(n))+",0)"}function Vl(t,e,n){var r=t(n);return"translate(0,"+(isFinite(r)?r:e(n))+")"}function $l(t){var e=t.bandwidth()/2;return t.round()&&(e=Math.round(e)),function(n){return t(n)+e}}function Wl(){return!this.__axis}function Gl(t,e){function n(n){var u,c=null==i?e.ticks?e.ticks.apply(e,r):e.domain():i,f=null==a?e.tickFormat?e.tickFormat.apply(e,r):Ul:a,d=Math.max(o,0)+l,h=t===R_||t===z_?jl:Vl,p=e.range(),g=p[0]+.5,m=p[p.length-1]+.5,v=(e.bandwidth?$l:Ul)(e.copy()),y=n.selection?n.selection():n,_=y.selectAll(".domain").data([null]),b=y.selectAll(".tick").data(c,e).order(),x=b.exit(),w=b.enter().append("g").attr("class","tick"),C=b.select("line"),k=b.select("text"),S=t===R_||t===F_?-1:1,T=t===F_||t===B_?(u="x","y"):(u="y","x");_=_.merge(_.enter().insert("path",".tick").attr("class","domain").attr("stroke","#000")),b=b.merge(w),C=C.merge(w.append("line").attr("stroke","#000").attr(u+"2",S*o).attr(T+"1",.5).attr(T+"2",.5)),k=k.merge(w.append("text").attr("fill","#000").attr(u,S*d).attr(T,.5).attr("dy",t===R_?"0em":t===z_?"0.71em":"0.32em")),n!==y&&(_=_.transition(n),b=b.transition(n),C=C.transition(n),k=k.transition(n),x=x.transition(n).attr("opacity",q_).attr("transform",function(t){return h(v,this.parentNode.__axis||v,t)}),w.attr("opacity",q_).attr("transform",function(t){return h(this.parentNode.__axis||v,v,t)})),x.remove(),_.attr("d",t===F_||t==B_?"M"+S*s+","+g+"H0.5V"+m+"H"+S*s:"M"+g+","+S*s+"V0.5H"+m+"V"+S*s),b.attr("opacity",1).attr("transform",function(t){return h(v,v,t)}),C.attr(u+"2",S*o),k.attr(u,S*d).text(f),y.filter(Wl).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",t===B_?"start":t===F_?"end":"middle"),y.each(function(){this.__axis=v})}var r=[],i=null,a=null,o=6,s=6,l=3;return n.scale=function(t){return arguments.length?(e=t,n):e},n.ticks=function(){return r=I_.call(arguments),n},n.tickArguments=function(t){return arguments.length?(r=null==t?[]:I_.call(t),n):r.slice()},n.tickValues=function(t){return arguments.length?(i=null==t?null:I_.call(t),n):i&&i.slice()},n.tickFormat=function(t){return arguments.length?(a=t,n):a},n.tickSize=function(t){return arguments.length?(o=s=+t,n):o},n.tickSizeInner=function(t){return arguments.length?(o=+t,n):o},n.tickSizeOuter=function(t){return arguments.length?(s=+t,n):s},n.tickPadding=function(t){return arguments.length?(l=+t,n):l},n}function Xl(t){return Gl(R_,t)}function Yl(t){return Gl(B_,t)}function Jl(t){return Gl(z_,t)}function Kl(t){return Gl(F_,t)}function Zl(t,e){return t.parent===e.parent?1:2}function Ql(t){return t.reduce(tu,0)/t.length}function tu(t,e){return t+e.x}function eu(t){return 1+t.reduce(nu,0)}function nu(t,e){return Math.max(t,e.y)}function ru(t){for(var e;e=t.children;)t=e[0];return t}function iu(t){for(var e;e=t.children;)t=e[e.length-1];return t}function au(){function t(t){var a,o=0;t.eachAfter(function(t){var n=t.children;n?(t.x=Ql(n),t.y=eu(n)):(t.x=a?o+=e(t,a):0,t.y=0,a=t)});var s=ru(t),l=iu(t),u=s.x-e(s,l)/2,c=l.x+e(l,s)/2;return t.eachAfter(i?function(e){e.x=(e.x-t.x)*n,e.y=(t.y-e.y)*r}:function(e){e.x=(e.x-u)/(c-u)*n,e.y=(1-(t.y?e.y/t.y:1))*r})}var e=Zl,n=1,r=1,i=!1;return t.separation=function(n){return arguments.length?(e=n,t):e},t.size=function(e){return arguments.length?(i=!1,n=+e[0],r=+e[1],t):i?null:[n,r]},t.nodeSize=function(e){return arguments.length?(i=!0,n=+e[0],r=+e[1],t):i?[n,r]:null},t}function ou(t){var e,n,r,i,a=this,o=[a];do for(e=o.reverse(),o=[];a=e.pop();)if(t(a),n=a.children)for(r=0,i=n.length;r<i;++r)o.push(n[r]);while(o.length);return this}function su(t){for(var e,n,r=this,i=[r];r=i.pop();)if(t(r),e=r.children)for(n=e.length-1;n>=0;--n)i.push(e[n]);return this}function lu(t){for(var e,n,r,i=this,a=[i],o=[];i=a.pop();)if(o.push(i),e=i.children)for(n=0,r=e.length;n<r;++n)a.push(e[n]);for(;i=o.pop();)t(i);return this}function uu(t){return this.eachAfter(function(e){for(var n=+t(e.data)||0,r=e.children,i=r&&r.length;--i>=0;)n+=r[i].value;e.value=n})}function cu(t){return this.eachBefore(function(e){e.children&&e.children.sort(t)})}function fu(t){for(var e=this,n=du(e,t),r=[e];e!==n;)e=e.parent,r.push(e);for(var i=r.length;t!==n;)r.splice(i,0,t),t=t.parent;return r}function du(t,e){if(t===e)return t;var n=t.ancestors(),r=e.ancestors(),i=null;for(t=n.pop(),e=r.pop();t===e;)i=t,t=n.pop(),e=r.pop();return i}function hu(){for(var t=this,e=[t];t=t.parent;)e.push(t);return e}function pu(){var t=[];return this.each(function(e){t.push(e)}),t}function gu(){var t=[];return this.eachBefore(function(e){e.children||t.push(e)}),t}function mu(){var t=this,e=[];return t.each(function(n){n!==t&&e.push({source:n.parent,target:n})}),e}function vu(t,e){var n,r,i,a,o,s=new wu(t),l=+t.value&&(s.value=t.value),u=[s];for(null==e&&(e=_u);n=u.pop();)if(l&&(n.value=+n.data.value),(i=e(n.data))&&(o=i.length))for(n.children=new Array(o),a=o-1;a>=0;--a)u.push(r=n.children[a]=new wu(i[a])),r.parent=n,r.depth=n.depth+1;return s.eachBefore(xu)}function yu(){return vu(this).eachBefore(bu)}function _u(t){return t.children}function bu(t){t.data=t.data.data}function xu(t){var e=0;do t.height=e;while((t=t.parent)&&t.height<++e)}function wu(t){this.data=t,this.depth=this.height=0,this.parent=null}function Cu(t){this._=t,this.next=null}function ku(t){for(var e,n=(t=t.slice()).length,r=null,i=r;n;){var a=new Cu(t[n-1]);i=i?i.next=a:r=a,t[e]=t[--n]}return{head:r,tail:i}}function Su(t){return Au(ku(t),[])}function Tu(t,e){var n=e.x-t.x,r=e.y-t.y,i=t.r-e.r;return i*i+1e-6>n*n+r*r}function Au(t,e){var n,r,i,a=null,o=t.head;switch(e.length){case 1:n=Eu(e[0]);break;case 2:n=Mu(e[0],e[1]);break;case 3:n=Du(e[0],e[1],e[2])}for(;o;)i=o._,r=o.next,n&&Tu(n,i)?a=o:(a?(t.tail=a,a.next=null):t.head=t.tail=null,e.push(i),n=Au(t,e),e.pop(),t.head?(o.next=t.head,t.head=o):(o.next=null,t.head=t.tail=o),a=t.tail,a.next=r),o=r;return t.tail=a,n}function Eu(t){return{x:t.x,y:t.y,r:t.r}}function Mu(t,e){var n=t.x,r=t.y,i=t.r,a=e.x,o=e.y,s=e.r,l=a-n,u=o-r,c=s-i,f=Math.sqrt(l*l+u*u);return{x:(n+a+l/f*c)/2,y:(r+o+u/f*c)/2,r:(f+i+s)/2}}function Du(t,e,n){var r=t.x,i=t.y,a=t.r,o=e.x,s=e.y,l=e.r,u=n.x,c=n.y,f=n.r,d=2*(r-o),h=2*(i-s),p=2*(l-a),g=r*r+i*i-a*a-o*o-s*s+l*l,m=2*(r-u),v=2*(i-c),y=2*(f-a),_=r*r+i*i-a*a-u*u-c*c+f*f,b=m*h-d*v,x=(h*_-v*g)/b-r,w=(v*p-h*y)/b,C=(m*g-d*_)/b-i,k=(d*y-m*p)/b,S=w*w+k*k-1,T=2*(x*w+C*k+a),A=x*x+C*C-a*a,E=(-T-Math.sqrt(T*T-4*S*A))/(2*S);return{x:x+w*E+r,y:C+k*E+i,r:E}}function Pu(t,e,n){var r=t.x,i=t.y,a=e.r+n.r,o=t.r+n.r,s=e.x-r,l=e.y-i,u=s*s+l*l;if(u){var c=.5+((o*=o)-(a*=a))/(2*u),f=Math.sqrt(Math.max(0,2*a*(o+u)-(o-=u)*o-a*a))/(2*u);n.x=r+c*s+f*l,n.y=i+c*l-f*s}else n.x=r+o,n.y=i}function Ou(t,e){var n=e.x-t.x,r=e.y-t.y,i=t.r+e.r;return i*i>n*n+r*r}function Nu(t,e,n){var r=t.x-e,i=t.y-n;return r*r+i*i}function Lu(t){this._=t,this.next=null,this.previous=null}function Iu(t){if(!(i=t.length))return 0;var e,n,r,i;if(e=t[0],e.x=0,e.y=0,!(i>1))return e.r;if(n=t[1],e.x=-n.r,n.x=e.r,n.y=0,!(i>2))return e.r+n.r;Pu(n,e,r=t[2]);var a,o,s,l,u,c,f,d=e.r*e.r,h=n.r*n.r,p=r.r*r.r,g=d+h+p,m=d*e.x+h*n.x+p*r.x,v=d*e.y+h*n.y+p*r.y;e=new Lu(e),n=new Lu(n),r=new Lu(r),e.next=r.previous=n,n.next=e.previous=r,r.next=n.previous=e;t:for(s=3;s<i;++s){if(Pu(e._,n._,r=t[s]),r=new Lu(r),(u=e.previous)===(l=n.next)){if(Ou(l._,r._)){e=n,n=l,--s;continue t}}else{c=l._.r,f=u._.r;do if(c<=f){if(Ou(l._,r._)){n=l,e.next=n,n.previous=e,--s;continue t}l=l.next,c+=l._.r}else{if(Ou(u._,r._)){e=u,e.next=n,n.previous=e,--s;continue t}u=u.previous,f+=u._.r}while(l!==u.next)}for(r.previous=e,r.next=n,e.next=n.previous=n=r,g+=p=r._.r*r._.r,m+=p*r._.x,v+=p*r._.y,d=Nu(e._,a=m/g,o=v/g);(r=r.next)!==n;)(p=Nu(r._,a,o))<d&&(e=r,d=p);n=e.next}for(e=[n._],r=n;(r=r.next)!==n;)e.push(r._);for(r=Su(e),s=0;s<i;++s)e=t[s],e.x-=r.x,e.y-=r.y;return r.r}function Ru(t){return Iu(t),t}function Bu(t){return null==t?null:zu(t)}function zu(t){if("function"!=typeof t)throw new Error;return t}function Fu(){return 0}function qu(t){return function(){return t}}function Hu(t){return Math.sqrt(t.value)}function Uu(){function t(t){return t.x=n/2,t.y=r/2,e?t.eachBefore(ju(e)).eachAfter(Vu(i,.5)).eachBefore($u(1)):t.eachBefore(ju(Hu)).eachAfter(Vu(Fu,1)).eachAfter(Vu(i,t.r/Math.min(n,r))).eachBefore($u(Math.min(n,r)/(2*t.r))),t}var e=null,n=1,r=1,i=Fu;return t.radius=function(n){return arguments.length?(e=Bu(n),t):e},t.size=function(e){return arguments.length?(n=+e[0],r=+e[1],t):[n,r]},t.padding=function(e){return arguments.length?(i="function"==typeof e?e:qu(+e),t):i},t}function ju(t){return function(e){e.children||(e.r=Math.max(0,+t(e)||0))}}function Vu(t,e){return function(n){if(r=n.children){var r,i,a,o=r.length,s=t(n)*e||0;if(s)for(i=0;i<o;++i)r[i].r+=s;if(a=Iu(r),s)for(i=0;i<o;++i)r[i].r-=s;n.r=a+s}}}function $u(t){return function(e){var n=e.parent;e.r*=t,n&&(e.x=n.x+t*e.x,e.y=n.y+t*e.y)}}function Wu(t){t.x0=Math.round(t.x0),t.y0=Math.round(t.y0),t.x1=Math.round(t.x1),t.y1=Math.round(t.y1)}function Gu(t,e,n,r,i){for(var a,o=t.children,s=-1,l=o.length,u=t.value&&(r-e)/t.value;++s<l;)a=o[s],a.y0=n,a.y1=i,a.x0=e,a.x1=e+=a.value*u}function Xu(){function t(t){var o=t.height+1;return t.x0=t.y0=i,t.x1=n,t.y1=r/o,t.eachBefore(e(r,o)),a&&t.eachBefore(Wu),t}function e(t,e){return function(n){n.children&&Gu(n,n.x0,t*(n.depth+1)/e,n.x1,t*(n.depth+2)/e);var r=n.x0,a=n.y0,o=n.x1-i,s=n.y1-i;o<r&&(r=o=(r+o)/2),s<a&&(a=s=(a+s)/2),n.x0=r,n.y0=a,n.x1=o,n.y1=s}}var n=1,r=1,i=0,a=!1;return t.round=function(e){return arguments.length?(a=!!e,t):a},t.size=function(e){return arguments.length?(n=+e[0],r=+e[1],t):[n,r]},t.padding=function(e){return arguments.length?(i=+e,t):i},t}function Yu(t){return t.id}function Ju(t){return t.parentId}function Ku(){function t(t){var r,i,a,o,s,l,u,c=t.length,f=new Array(c),d={};for(i=0;i<c;++i)r=t[i],s=f[i]=new wu(r),null!=(l=e(r,i,t))&&(l+="")&&(u=H_+(s.id=l),d[u]=u in d?j_:s);for(i=0;i<c;++i)if(s=f[i],l=n(t[i],i,t),null!=l&&(l+="")){if(o=d[H_+l],!o)throw new Error("missing: "+l);if(o===j_)throw new Error("ambiguous: "+l);o.children?o.children.push(s):o.children=[s],s.parent=o}else{if(a)throw new Error("multiple roots");a=s}if(!a)throw new Error("no root");if(a.parent=U_,a.eachBefore(function(t){t.depth=t.parent.depth+1,--c}).eachBefore(xu),a.parent=null,c>0)throw new Error("cycle");return a}var e=Yu,n=Ju;return t.id=function(n){return arguments.length?(e=zu(n),t):e},t.parentId=function(e){return arguments.length?(n=zu(e),t):n},t}function Zu(t,e){return t.parent===e.parent?1:2}function Qu(t){var e=t.children;return e?e[0]:t.t}function tc(t){var e=t.children;return e?e[e.length-1]:t.t}function ec(t,e,n){var r=n/(e.i-t.i);e.c-=r,e.s+=n,t.c+=r,e.z+=n,e.m+=n}function nc(t){for(var e,n=0,r=0,i=t.children,a=i.length;--a>=0;)e=i[a],e.z+=n,e.m+=n,n+=e.s+(r+=e.c)}function rc(t,e,n){return t.a.parent===e.parent?t.a:n}function ic(t,e){this._=t,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=e}function ac(t){for(var e,n,r,i,a,o=new ic(t,0),s=[o];e=s.pop();)if(r=e._.children)for(e.children=new Array(a=r.length),i=a-1;i>=0;--i)s.push(n=e.children[i]=new ic(r[i],i)),n.parent=e;return(o.parent=new ic(null,0)).children=[o],o}function oc(){function t(t){var r=ac(t);if(r.eachAfter(e),r.parent.m=-r.z,r.eachBefore(n),l)t.eachBefore(i);else{var u=t,c=t,f=t;t.eachBefore(function(t){t.x<u.x&&(u=t),t.x>c.x&&(c=t),t.depth>f.depth&&(f=t)});var d=u===c?1:a(u,c)/2,h=d-u.x,p=o/(c.x+d+h),g=s/(f.depth||1);t.eachBefore(function(t){t.x=(t.x+h)*p,t.y=t.depth*g})}return t}function e(t){var e=t.children,n=t.parent.children,i=t.i?n[t.i-1]:null;if(e){nc(t);var o=(e[0].z+e[e.length-1].z)/2;i?(t.z=i.z+a(t._,i._),t.m=t.z-o):t.z=o}else i&&(t.z=i.z+a(t._,i._));t.parent.A=r(t,i,t.parent.A||n[0])}function n(t){t._.x=t.z+t.parent.m,t.m+=t.parent.m}function r(t,e,n){if(e){for(var r,i=t,o=t,s=e,l=i.parent.children[0],u=i.m,c=o.m,f=s.m,d=l.m;s=tc(s),i=Qu(i),s&&i;)l=Qu(l),o=tc(o),o.a=t,r=s.z+f-i.z-u+a(s._,i._),r>0&&(ec(rc(s,t,n),t,r),u+=r,c+=r),f+=s.m,u+=i.m,d+=l.m,c+=o.m;s&&!tc(o)&&(o.t=s,o.m+=f-c),i&&!Qu(l)&&(l.t=i,l.m+=u-d,n=t)}return n}function i(t){t.x*=o,t.y=t.depth*s}var a=Zu,o=1,s=1,l=null;return t.separation=function(e){return arguments.length?(a=e,t):a},t.size=function(e){return arguments.length?(l=!1,o=+e[0],s=+e[1],t):l?null:[o,s]},t.nodeSize=function(e){return arguments.length?(l=!0,o=+e[0],s=+e[1],t):l?[o,s]:null},t}function sc(t,e,n,r,i){for(var a,o=t.children,s=-1,l=o.length,u=t.value&&(i-n)/t.value;++s<l;)a=o[s],a.x0=e,a.x1=r,a.y0=n,a.y1=n+=a.value*u}function lc(t,e,n,r,i,a){for(var o,s,l,u,c,f,d,h,p,g,m,v,y=[],_=e.children,b=0,x=_.length,w=e.value;b<x;){for(u=i-n,c=a-r,d=h=f=_[b].value,m=Math.max(c/u,u/c)/(w*t),v=f*f*m,g=Math.max(h/v,v/d),l=b+1;l<x;++l){if(f+=s=_[l].value,s<d&&(d=s),s>h&&(h=s),v=f*f*m,p=Math.max(h/v,v/d),p>g){f-=s;break}g=p}y.push(o={value:f,dice:u<c,children:_.slice(b,l)}),o.dice?Gu(o,n,r,i,w?r+=c*f/w:a):sc(o,n,r,w?n+=u*f/w:i,a),w-=f,b=l}return y}function uc(){function t(t){return t.x0=t.y0=0,t.x1=i,t.y1=a,t.eachBefore(e),o=[0],r&&t.eachBefore(Wu),t}function e(t){var e=o[t.depth],r=t.x0+e,i=t.y0+e,a=t.x1-e,d=t.y1-e;a<r&&(r=a=(r+a)/2),d<i&&(i=d=(i+d)/2),t.x0=r,t.y0=i,t.x1=a,t.y1=d,t.children&&(e=o[t.depth+1]=s(t)/2,r+=f(t)-e,i+=l(t)-e,a-=u(t)-e,d-=c(t)-e,a<r&&(r=a=(r+a)/2),d<i&&(i=d=(i+d)/2),n(t,r,i,a,d))}var n=$_,r=!1,i=1,a=1,o=[0],s=Fu,l=Fu,u=Fu,c=Fu,f=Fu;return t.round=function(e){return arguments.length?(r=!!e,t):r},t.size=function(e){return arguments.length?(i=+e[0],a=+e[1],t):[i,a]},t.tile=function(e){return arguments.length?(n=zu(e),t):n},t.padding=function(e){return arguments.length?t.paddingInner(e).paddingOuter(e):t.paddingInner()},t.paddingInner=function(e){return arguments.length?(s="function"==typeof e?e:qu(+e),t):s},t.paddingOuter=function(e){return arguments.length?t.paddingTop(e).paddingRight(e).paddingBottom(e).paddingLeft(e):t.paddingTop()},t.paddingTop=function(e){return arguments.length?(l="function"==typeof e?e:qu(+e),t):l},t.paddingRight=function(e){return arguments.length?(u="function"==typeof e?e:qu(+e),t):u},t.paddingBottom=function(e){return arguments.length?(c="function"==typeof e?e:qu(+e),t):c},t.paddingLeft=function(e){return arguments.length?(f="function"==typeof e?e:qu(+e),t):f},t}function cc(t,e,n,r,i){function a(t,e,n,r,i,o,s){if(t>=e-1){var u=l[t];return u.x0=r,u.y0=i,u.x1=o,void(u.y1=s)}for(var f=c[t],d=n/2+f,h=t+1,p=e-1;h<p;){var g=h+p>>>1;c[g]<d?h=g+1:p=g}var m=c[h]-f,v=n-m;if(s-i>o-r){var y=(i*v+s*m)/n;a(t,h,m,r,i,o,y),a(h,e,v,r,y,o,s)}else{var _=(r*v+o*m)/n;a(t,h,m,r,i,_,s),a(h,e,v,_,i,o,s)}}var o,s,l=t.children,u=l.length,c=new Array(u+1);for(c[0]=s=o=0;o<u;++o)c[o+1]=s+=l[o].value;a(0,u,t.value,e,n,r,i)}function fc(t,e,n,r,i){(1&t.depth?sc:Gu)(t,e,n,r,i)}function dc(t,e){function n(){var n,i,a=r.length,o=0,s=0;for(n=0;n<a;++n)i=r[n],o+=i.x,s+=i.y;for(o=o/a-t,s=s/a-e,n=0;n<a;++n)i=r[n],i.x-=o,i.y-=s}var r;return null==t&&(t=0),null==e&&(e=0),n.initialize=function(t){r=t},n.x=function(e){return arguments.length?(t=+e,n):t},n.y=function(t){return arguments.length?(e=+t,n):e},n}function hc(t){return function(){return t}}function pc(){return 1e-6*(Math.random()-.5)}function gc(t){return t.x+t.vx}function mc(t){return t.y+t.vy}function vc(t){function e(){function t(t,n,r,i,o){var s=t.data,h=t.r,p=f+h;if(!s)return n>u+p||i<u-p||r>c+p||o<c-p;if(s.index>e){var g=u-s.x-s.vx,m=c-s.y-s.vy,v=g*g+m*m;v<p*p&&(0===g&&(g=pc(),v+=g*g),0===m&&(m=pc(),v+=m*m),v=(p-(v=Math.sqrt(v)))/v*a,l.vx+=(g*=v)*(p=(h*=h)/(d+h)),l.vy+=(m*=v)*p,s.vx-=g*(p=1-p),s.vy-=m*p)}}for(var e,s,l,u,c,f,d,h=r.length,p=0;p<o;++p)for(s=jt(r,gc,mc).visitAfter(n),e=0;e<h;++e)l=r[e],f=i[e],d=f*f,u=l.x+l.vx,c=l.y+l.vy,s.visit(t)}function n(t){if(t.data)return t.r=i[t.data.index];for(var e=t.r=0;e<4;++e)t[e]&&t[e].r>t.r&&(t.r=t[e].r)}var r,i,a=1,o=1;return"function"!=typeof t&&(t=hc(null==t?1:+t)),e.initialize=function(e){var n,a=(r=e).length;for(i=new Array(a),n=0;n<a;++n)i[n]=+t(r[n],n,r)},e.iterations=function(t){return arguments.length?(o=+t,e):o},e.strength=function(t){return arguments.length?(a=+t,e):a},e.radius=function(n){return arguments.length?(t="function"==typeof n?n:hc(+n),e):t},e}function yc(t,e){return e}function _c(t){function e(t){return 1/Math.min(u[t.source.index],u[t.target.index])}function n(e){for(var n=0,r=t.length;n<p;++n)for(var i,a,l,u,f,d,h,g=0;g<r;++g)i=t[g],a=i.source,l=i.target,u=l.x+l.vx-a.x-a.vx||pc(),f=l.y+l.vy-a.y-a.vy||pc(),d=Math.sqrt(u*u+f*f),d=(d-s[g])/d*e*o[g],u*=d,f*=d,l.vx-=u*(h=c[g]),l.vy-=f*h,a.vx+=u*(h=1-h),a.vy+=f*h}function r(){if(l){
var e,n,r=l.length,d=t.length,h=N(l,f);for(e=0,u=new Array(r);e<r;++e)u[e]=0;for(e=0;e<d;++e)n=t[e],n.index=e,"object"!=typeof n.source&&(n.source=h.get(n.source)),"object"!=typeof n.target&&(n.target=h.get(n.target)),++u[n.source.index],++u[n.target.index];for(e=0,c=new Array(d);e<d;++e)n=t[e],c[e]=u[n.source.index]/(u[n.source.index]+u[n.target.index]);o=new Array(d),i(),s=new Array(d),a()}}function i(){if(l)for(var e=0,n=t.length;e<n;++e)o[e]=+d(t[e],e,t)}function a(){if(l)for(var e=0,n=t.length;e<n;++e)s[e]=+h(t[e],e,t)}var o,s,l,u,c,f=yc,d=e,h=hc(30),p=1;return null==t&&(t=[]),n.initialize=function(t){l=t,r()},n.links=function(e){return arguments.length?(t=e,r(),n):t},n.id=function(t){return arguments.length?(f=t,n):f},n.iterations=function(t){return arguments.length?(p=+t,n):p},n.strength=function(t){return arguments.length?(d="function"==typeof t?t:hc(+t),i(),n):d},n.distance=function(t){return arguments.length?(h="function"==typeof t?t:hc(+t),a(),n):h},n}function bc(t){return t.x}function xc(t){return t.y}function wc(t){function e(){n(),h.call("tick",a),o<s&&(d.stop(),h.call("end",a))}function n(){var e,n,r=t.length;for(o+=(u-o)*l,f.each(function(t){t(o)}),e=0;e<r;++e)n=t[e],null==n.fx?n.x+=n.vx*=c:(n.x=n.fx,n.vx=0),null==n.fy?n.y+=n.vy*=c:(n.y=n.fy,n.vy=0)}function r(){for(var e,n=0,r=t.length;n<r;++n){if(e=t[n],e.index=n,isNaN(e.x)||isNaN(e.y)){var i=G_*Math.sqrt(n),a=n*X_;e.x=i*Math.cos(a),e.y=i*Math.sin(a)}(isNaN(e.vx)||isNaN(e.vy))&&(e.vx=e.vy=0)}}function i(e){return e.initialize&&e.initialize(t),e}var a,o=1,s=.001,l=1-Math.pow(s,1/300),u=0,c=.6,f=N(),d=Hr(e),h=Cr("tick","end");return null==t&&(t=[]),r(),a={tick:n,restart:function(){return d.restart(e),a},stop:function(){return d.stop(),a},nodes:function(e){return arguments.length?(t=e,r(),f.each(i),a):t},alpha:function(t){return arguments.length?(o=+t,a):o},alphaMin:function(t){return arguments.length?(s=+t,a):s},alphaDecay:function(t){return arguments.length?(l=+t,a):+l},alphaTarget:function(t){return arguments.length?(u=+t,a):u},velocityDecay:function(t){return arguments.length?(c=1-t,a):1-c},force:function(t,e){return arguments.length>1?(null==e?f.remove(t):f.set(t,i(e)),a):f.get(t)},find:function(e,n,r){var i,a,o,s,l,u=0,c=t.length;for(null==r?r=1/0:r*=r,u=0;u<c;++u)s=t[u],i=e-s.x,a=n-s.y,o=i*i+a*a,o<r&&(l=s,r=o);return l},on:function(t,e){return arguments.length>1?(h.on(t,e),a):h.on(t)}}}function Cc(){function t(t){var e,s=i.length,l=jt(i,bc,xc).visitAfter(n);for(o=t,e=0;e<s;++e)a=i[e],l.visit(r)}function e(){if(i){var t,e=i.length;for(s=new Array(e),t=0;t<e;++t)s[t]=+l(i[t],t,i)}}function n(t){var e,n,r,i,a,o=0;if(t.length){for(r=i=a=0;a<4;++a)(e=t[a])&&(n=e.value)&&(o+=n,r+=n*e.x,i+=n*e.y);t.x=r/o,t.y=i/o}else{e=t,e.x=e.data.x,e.y=e.data.y;do o+=s[e.data.index];while(e=e.next)}t.value=o}function r(t,e,n,r){if(!t.value)return!0;var i=t.x-a.x,l=t.y-a.y,d=r-e,h=i*i+l*l;if(d*d/f<h)return h<c&&(0===i&&(i=pc(),h+=i*i),0===l&&(l=pc(),h+=l*l),h<u&&(h=Math.sqrt(u*h)),a.vx+=i*t.value*o/h,a.vy+=l*t.value*o/h),!0;if(!(t.length||h>=c)){(t.data!==a||t.next)&&(0===i&&(i=pc(),h+=i*i),0===l&&(l=pc(),h+=l*l),h<u&&(h=Math.sqrt(u*h)));do t.data!==a&&(d=s[t.data.index]*o/h,a.vx+=i*d,a.vy+=l*d);while(t=t.next)}}var i,a,o,s,l=hc(-30),u=1,c=1/0,f=.81;return t.initialize=function(t){i=t,e()},t.strength=function(n){return arguments.length?(l="function"==typeof n?n:hc(+n),e(),t):l},t.distanceMin=function(e){return arguments.length?(u=e*e,t):Math.sqrt(u)},t.distanceMax=function(e){return arguments.length?(c=e*e,t):Math.sqrt(c)},t.theta=function(e){return arguments.length?(f=e*e,t):Math.sqrt(f)},t}function kc(t){function e(t){for(var e,n=0,o=r.length;n<o;++n)e=r[n],e.vx+=(a[n]-e.x)*i[n]*t}function n(){if(r){var e,n=r.length;for(i=new Array(n),a=new Array(n),e=0;e<n;++e)i[e]=isNaN(a[e]=+t(r[e],e,r))?0:+o(r[e],e,r)}}var r,i,a,o=hc(.1);return"function"!=typeof t&&(t=hc(null==t?0:+t)),e.initialize=function(t){r=t,n()},e.strength=function(t){return arguments.length?(o="function"==typeof t?t:hc(+t),n(),e):o},e.x=function(r){return arguments.length?(t="function"==typeof r?r:hc(+r),n(),e):t},e}function Sc(t){function e(t){for(var e,n=0,o=r.length;n<o;++n)e=r[n],e.vy+=(a[n]-e.y)*i[n]*t}function n(){if(r){var e,n=r.length;for(i=new Array(n),a=new Array(n),e=0;e<n;++e)i[e]=isNaN(a[e]=+t(r[e],e,r))?0:+o(r[e],e,r)}}var r,i,a,o=hc(.1);return"function"!=typeof t&&(t=hc(null==t?0:+t)),e.initialize=function(t){r=t,n()},e.strength=function(t){return arguments.length?(o="function"==typeof t?t:hc(+t),n(),e):o},e.y=function(r){return arguments.length?(t="function"==typeof r?r:hc(+r),n(),e):t},e}function Tc(){t.event.stopImmediatePropagation()}function Ac(){t.event.preventDefault(),t.event.stopImmediatePropagation()}function Ec(t){var e=t.document.documentElement,n=Is(t).on("dragstart.drag",Ac,!0);"onselectstart"in e?n.on("selectstart.drag",Ac,!0):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function Mc(t,e){var n=t.document.documentElement,r=Is(t).on("dragstart.drag",null);e&&(r.on("click.drag",Ac,!0),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function Dc(t){return function(){return t}}function Pc(t,e,n,r,i,a,o,s,l,u){this.target=t,this.type=e,this.subject=n,this.identifier=r,this.active=i,this.x=a,this.y=o,this.dx=s,this.dy=l,this._=u}function Oc(){return!t.event.button}function Nc(){return this.parentNode}function Lc(e){return null==e?{x:t.event.x,y:t.event.y}:e}function Ic(){function e(t){t.on("mousedown.drag",n).on("touchstart.drag",a).on("touchmove.drag",o).on("touchend.drag touchcancel.drag",s).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function n(){if(!c&&f.apply(this,arguments)){var e=l("mouse",d.apply(this,arguments),po,this,arguments);e&&(Is(t.event.view).on("mousemove.drag",r,!0).on("mouseup.drag",i,!0),Ec(t.event.view),Tc(),u=!1,e("start"))}}function r(){Ac(),u=!0,p.mouse("drag")}function i(){Is(t.event.view).on("mousemove.drag mouseup.drag",null),Mc(t.event.view,u),Ac(),p.mouse("end")}function a(){if(f.apply(this,arguments)){var e,n,r=t.event.changedTouches,i=d.apply(this,arguments),a=r.length;for(e=0;e<a;++e)(n=l(r[e].identifier,i,Bs,this,arguments))&&(Tc(),n("start"))}}function o(){var e,n,r=t.event.changedTouches,i=r.length;for(e=0;e<i;++e)(n=p[r[e].identifier])&&(Ac(),n("drag"))}function s(){var e,n,r=t.event.changedTouches,i=r.length;for(c&&clearTimeout(c),c=setTimeout(function(){c=null},500),e=0;e<i;++e)(n=p[r[e].identifier])&&(Tc(),n("end"))}function l(n,r,i,a,o){var s,l,u,c=i(r,n),f=g.copy();if(co(new Pc(e,"beforestart",s,n,m,c[0],c[1],0,0,f),function(){return null!=(t.event.subject=s=h.apply(a,o))&&(l=s.x-c[0]||0,u=s.y-c[1]||0,!0)}))return function t(d){var h,g=c;switch(d){case"start":p[n]=t,h=m++;break;case"end":delete p[n],--m;case"drag":c=i(r,n),h=m}co(new Pc(e,d,s,n,h,c[0]+l,c[1]+u,c[0]-g[0],c[1]-g[1],f),f.apply,f,[d,a,o])}}var u,c,f=Oc,d=Nc,h=Lc,p={},g=Cr("start","drag","end"),m=0;return e.filter=function(t){return arguments.length?(f="function"==typeof t?t:Dc(!!t),e):f},e.container=function(t){return arguments.length?(d="function"==typeof t?t:Dc(t),e):d},e.subject=function(t){return arguments.length?(h="function"==typeof t?t:Dc(t),e):h},e.on=function(){var t=g.on.apply(g,arguments);return t===g?e:t},e}function Rc(t){return function(){return t}}function Bc(t){return t[0]}function zc(t){return t[1]}function Fc(){this._=null}function qc(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function Hc(t,e){var n=e,r=e.R,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.R=r.L,n.R&&(n.R.U=n),r.L=n}function Uc(t,e){var n=e,r=e.L,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.L=r.R,n.L&&(n.L.U=n),r.R=n}function jc(t){for(;t.L;)t=t.L;return t}function Vc(t,e,n,r){var i=[null,null],a=Q_.push(i)-1;return i.left=t,i.right=e,n&&Wc(i,t,e,n),r&&Wc(i,e,t,r),K_[t.index].halfedges.push(a),K_[e.index].halfedges.push(a),i}function $c(t,e,n){var r=[e,n];return r.left=t,r}function Wc(t,e,n,r){t[0]||t[1]?t.left===n?t[1]=r:t[0]=r:(t[0]=r,t.left=e,t.right=n)}function Gc(t,e,n,r,i){var a,o=t[0],s=t[1],l=o[0],u=o[1],c=s[0],f=s[1],d=0,h=1,p=c-l,g=f-u;if(a=e-l,p||!(a>0)){if(a/=p,p<0){if(a<d)return;a<h&&(h=a)}else if(p>0){if(a>h)return;a>d&&(d=a)}if(a=r-l,p||!(a<0)){if(a/=p,p<0){if(a>h)return;a>d&&(d=a)}else if(p>0){if(a<d)return;a<h&&(h=a)}if(a=n-u,g||!(a>0)){if(a/=g,g<0){if(a<d)return;a<h&&(h=a)}else if(g>0){if(a>h)return;a>d&&(d=a)}if(a=i-u,g||!(a<0)){if(a/=g,g<0){if(a>h)return;a>d&&(d=a)}else if(g>0){if(a<d)return;a<h&&(h=a)}return!(d>0||h<1)||(d>0&&(t[0]=[l+d*p,u+d*g]),h<1&&(t[1]=[l+h*p,u+h*g]),!0)}}}}}function Xc(t,e,n,r,i){var a=t[1];if(a)return!0;var o,s,l=t[0],u=t.left,c=t.right,f=u[0],d=u[1],h=c[0],p=c[1],g=(f+h)/2,m=(d+p)/2;if(p===d){if(g<e||g>=r)return;if(f>h){if(l){if(l[1]>=i)return}else l=[g,n];a=[g,i]}else{if(l){if(l[1]<n)return}else l=[g,i];a=[g,n]}}else if(o=(f-h)/(p-d),s=m-o*g,o<-1||o>1)if(f>h){if(l){if(l[1]>=i)return}else l=[(n-s)/o,n];a=[(i-s)/o,i]}else{if(l){if(l[1]<n)return}else l=[(i-s)/o,i];a=[(n-s)/o,n]}else if(d<p){if(l){if(l[0]>=r)return}else l=[e,o*e+s];a=[r,o*r+s]}else{if(l){if(l[0]<e)return}else l=[r,o*r+s];a=[e,o*e+s]}return t[0]=l,t[1]=a,!0}function Yc(t,e,n,r){for(var i,a=Q_.length;a--;)Xc(i=Q_[a],t,e,n,r)&&Gc(i,t,e,n,r)&&(Math.abs(i[0][0]-i[1][0])>nb||Math.abs(i[0][1]-i[1][1])>nb)||delete Q_[a]}function Jc(t){return K_[t.index]={site:t,halfedges:[]}}function Kc(t,e){var n=t.site,r=e.left,i=e.right;return n===i&&(i=r,r=n),i?Math.atan2(i[1]-r[1],i[0]-r[0]):(n===r?(r=e[1],i=e[0]):(r=e[0],i=e[1]),Math.atan2(r[0]-i[0],i[1]-r[1]))}function Zc(t,e){return e[+(e.left!==t.site)]}function Qc(t,e){return e[+(e.left===t.site)]}function tf(){for(var t,e,n,r,i=0,a=K_.length;i<a;++i)if((t=K_[i])&&(r=(e=t.halfedges).length)){var o=new Array(r),s=new Array(r);for(n=0;n<r;++n)o[n]=n,s[n]=Kc(t,Q_[e[n]]);for(o.sort(function(t,e){return s[e]-s[t]}),n=0;n<r;++n)s[n]=e[o[n]];for(n=0;n<r;++n)e[n]=s[n]}}function ef(t,e,n,r){var i,a,o,s,l,u,c,f,d,h,p,g,m=K_.length,v=!0;for(i=0;i<m;++i)if(a=K_[i]){for(o=a.site,l=a.halfedges,s=l.length;s--;)Q_[l[s]]||l.splice(s,1);for(s=0,u=l.length;s<u;)h=Qc(a,Q_[l[s]]),p=h[0],g=h[1],c=Zc(a,Q_[l[++s%u]]),f=c[0],d=c[1],(Math.abs(p-f)>nb||Math.abs(g-d)>nb)&&(l.splice(s,0,Q_.push($c(o,h,Math.abs(p-t)<nb&&r-g>nb?[t,Math.abs(f-t)<nb?d:r]:Math.abs(g-r)<nb&&n-p>nb?[Math.abs(d-r)<nb?f:n,r]:Math.abs(p-n)<nb&&g-e>nb?[n,Math.abs(f-n)<nb?d:e]:Math.abs(g-e)<nb&&p-t>nb?[Math.abs(d-e)<nb?f:t,e]:null))-1),++u);u&&(v=!1)}if(v){var y,_,b,x=1/0;for(i=0,v=null;i<m;++i)(a=K_[i])&&(o=a.site,y=o[0]-t,_=o[1]-e,b=y*y+_*_,b<x&&(x=b,v=a));if(v){var w=[t,e],C=[t,r],k=[n,r],S=[n,e];v.halfedges.push(Q_.push($c(o=v.site,w,C))-1,Q_.push($c(o,C,k))-1,Q_.push($c(o,k,S))-1,Q_.push($c(o,S,w))-1)}}for(i=0;i<m;++i)(a=K_[i])&&(a.halfedges.length||delete K_[i])}function nf(){qc(this),this.x=this.y=this.arc=this.site=this.cy=null}function rf(t){var e=t.P,n=t.N;if(e&&n){var r=e.site,i=t.site,a=n.site;if(r!==a){var o=i[0],s=i[1],l=r[0]-o,u=r[1]-s,c=a[0]-o,f=a[1]-s,d=2*(l*f-u*c);if(!(d>=-rb)){var h=l*l+u*u,p=c*c+f*f,g=(f*h-u*p)/d,m=(l*p-c*h)/d,v=tb.pop()||new nf;v.arc=t,v.site=i,v.x=g+o,v.y=(v.cy=m+s)+Math.sqrt(g*g+m*m),t.circle=v;for(var y=null,_=Z_._;_;)if(v.y<_.y||v.y===_.y&&v.x<=_.x){if(!_.L){y=_.P;break}_=_.L}else{if(!_.R){y=_;break}_=_.R}Z_.insert(y,v),y||(Y_=v)}}}}function af(t){var e=t.circle;e&&(e.P||(Y_=e.N),Z_.remove(e),tb.push(e),qc(e),t.circle=null)}function of(){qc(this),this.edge=this.site=this.circle=null}function sf(t){var e=eb.pop()||new of;return e.site=t,e}function lf(t){af(t),J_.remove(t),eb.push(t),qc(t)}function uf(t){var e=t.circle,n=e.x,r=e.cy,i=[n,r],a=t.P,o=t.N,s=[t];lf(t);for(var l=a;l.circle&&Math.abs(n-l.circle.x)<nb&&Math.abs(r-l.circle.cy)<nb;)a=l.P,s.unshift(l),lf(l),l=a;s.unshift(l),af(l);for(var u=o;u.circle&&Math.abs(n-u.circle.x)<nb&&Math.abs(r-u.circle.cy)<nb;)o=u.N,s.push(u),lf(u),u=o;s.push(u),af(u);var c,f=s.length;for(c=1;c<f;++c)u=s[c],l=s[c-1],Wc(u.edge,l.site,u.site,i);l=s[0],u=s[f-1],u.edge=Vc(l.site,u.site,null,i),rf(l),rf(u)}function cf(t){for(var e,n,r,i,a=t[0],o=t[1],s=J_._;s;)if(r=ff(s,o)-a,r>nb)s=s.L;else{if(i=a-df(s,o),!(i>nb)){r>-nb?(e=s.P,n=s):i>-nb?(e=s,n=s.N):e=n=s;break}if(!s.R){e=s;break}s=s.R}Jc(t);var l=sf(t);if(J_.insert(e,l),e||n){if(e===n)return af(e),n=sf(e.site),J_.insert(l,n),l.edge=n.edge=Vc(e.site,l.site),rf(e),void rf(n);if(!n)return void(l.edge=Vc(e.site,l.site));af(e),af(n);var u=e.site,c=u[0],f=u[1],d=t[0]-c,h=t[1]-f,p=n.site,g=p[0]-c,m=p[1]-f,v=2*(d*m-h*g),y=d*d+h*h,_=g*g+m*m,b=[(m*y-h*_)/v+c,(d*_-g*y)/v+f];Wc(n.edge,u,p,b),l.edge=Vc(u,t,null,b),n.edge=Vc(t,p,null,b),rf(e),rf(n)}}function ff(t,e){var n=t.site,r=n[0],i=n[1],a=i-e;if(!a)return r;var o=t.P;if(!o)return-(1/0);n=o.site;var s=n[0],l=n[1],u=l-e;if(!u)return s;var c=s-r,f=1/a-1/u,d=c/u;return f?(-d+Math.sqrt(d*d-2*f*(c*c/(-2*u)-l+u/2+i-a/2)))/f+r:(r+s)/2}function df(t,e){var n=t.N;if(n)return ff(n,e);var r=t.site;return r[1]===e?r[0]:1/0}function hf(t,e,n){return(t[0]-n[0])*(e[1]-t[1])-(t[0]-e[0])*(n[1]-t[1])}function pf(t,e){return e[1]-t[1]||e[0]-t[0]}function gf(t,e){var n,r,i,a=t.sort(pf).pop();for(Q_=[],K_=new Array(t.length),J_=new Fc,Z_=new Fc;;)if(i=Y_,a&&(!i||a[1]<i.y||a[1]===i.y&&a[0]<i.x))a[0]===n&&a[1]===r||(cf(a),n=a[0],r=a[1]),a=t.pop();else{if(!i)break;uf(i.arc)}if(tf(),e){var o=+e[0][0],s=+e[0][1],l=+e[1][0],u=+e[1][1];Yc(o,s,l,u),ef(o,s,l,u)}this.edges=Q_,this.cells=K_,J_=Z_=Q_=K_=null}function mf(){function t(t){return new gf(t.map(function(r,i){var a=[Math.round(e(r,i,t)/nb)*nb,Math.round(n(r,i,t)/nb)*nb];return a.index=i,a.data=r,a}),r)}var e=Bc,n=zc,r=null;return t.polygons=function(e){return t(e).polygons()},t.links=function(e){return t(e).links()},t.triangles=function(e){return t(e).triangles()},t.x=function(n){return arguments.length?(e="function"==typeof n?n:Rc(+n),t):e},t.y=function(e){return arguments.length?(n="function"==typeof e?e:Rc(+e),t):n},t.extent=function(e){return arguments.length?(r=null==e?null:[[+e[0][0],+e[0][1]],[+e[1][0],+e[1][1]]],t):r&&[[r[0][0],r[0][1]],[r[1][0],r[1][1]]]},t.size=function(e){return arguments.length?(r=null==e?null:[[0,0],[+e[0],+e[1]]],t):r&&[r[1][0]-r[0][0],r[1][1]-r[0][1]]},t}function vf(t){return function(){return t}}function yf(t,e,n){this.target=t,this.type=e,this.transform=n}function _f(t,e,n){this.k=t,this.x=e,this.y=n}function bf(t){return t.__zoom||ib}function xf(){t.event.stopImmediatePropagation()}function wf(){t.event.preventDefault(),t.event.stopImmediatePropagation()}function Cf(){return!t.event.button}function kf(){var t,e,n=this;return n instanceof SVGElement?(n=n.ownerSVGElement||n,t=n.width.baseVal.value,e=n.height.baseVal.value):(t=n.clientWidth,e=n.clientHeight),[[0,0],[t,e]]}function Sf(){return this.__zoom||ib}function Tf(){function e(t){t.on("wheel.zoom",u).on("mousedown.zoom",c).on("dblclick.zoom",f).on("touchstart.zoom",d).on("touchmove.zoom",h).on("touchend.zoom touchcancel.zoom",p).style("-webkit-tap-highlight-color","rgba(0,0,0,0)").property("__zoom",Sf)}function n(t,e){return e=Math.max(_,Math.min(b,e)),e===t.k?t:new _f(e,t.x,t.y)}function r(t,e,n){var r=e[0]-n[0]*t.k,i=e[1]-n[1]*t.k;return r===t.x&&i===t.y?t:new _f(t.k,r,i)}function i(t,e){var n=Math.min(0,t.invertX(e[0][0])-x)||Math.max(0,t.invertX(e[1][0])-w),r=Math.min(0,t.invertY(e[0][1])-C)||Math.max(0,t.invertY(e[1][1])-k);return n||r?t.translate(n,r):t}function a(t){return[(+t[0][0]+ +t[1][0])/2,(+t[0][1]+ +t[1][1])/2]}function o(t,e,n){t.on("start.zoom",function(){s(this,arguments).start()}).on("interrupt.zoom end.zoom",function(){s(this,arguments).end()}).tween("zoom",function(){var t=this,r=arguments,i=s(t,r),o=y.apply(t,r),l=n||a(o),u=Math.max(o[1][0]-o[0][0],o[1][1]-o[0][1]),c=t.__zoom,f="function"==typeof e?e.apply(t,r):e,d=vr(c.invert(l).concat(u/c.k),f.invert(l).concat(u/f.k));return function(t){if(1===t)t=f;else{var e=d(t),n=u/e[2];t=new _f(n,l[0]-e[0]*n,l[1]-e[1]*n)}i.zoom(null,t)}})}function s(t,e){for(var n,r=0,i=T.length;r<i;++r)if((n=T[r]).that===t)return n;return new l(t,e)}function l(t,e){this.that=t,this.args=e,this.index=-1,this.active=0,this.extent=y.apply(t,e)}function u(){function e(){a.wheel=null,a.end()}if(v.apply(this,arguments)){var a=s(this,arguments),o=this.__zoom,l=Math.max(_,Math.min(b,o.k*Math.pow(2,-t.event.deltaY*(t.event.deltaMode?120:1)/500))),u=po(this);if(a.wheel)a.mouse[0][0]===u[0]&&a.mouse[0][1]===u[1]||(a.mouse[1]=o.invert(a.mouse[0]=u)),clearTimeout(a.wheel);else{if(o.k===l)return;a.mouse=[u,o.invert(u)],Vs(this),a.start()}wf(),a.wheel=setTimeout(e,M),a.zoom("mouse",i(r(n(o,l),a.mouse[0],a.mouse[1]),a.extent))}}function c(){function e(){wf(),a.moved=!0,a.zoom("mouse",i(r(a.that.__zoom,a.mouse[0]=po(a.that),a.mouse[1]),a.extent))}function n(){o.on("mousemove.zoom mouseup.zoom",null),Mc(t.event.view,a.moved),wf(),a.end()}if(!m&&v.apply(this,arguments)){var a=s(this,arguments),o=Is(t.event.view).on("mousemove.zoom",e,!0).on("mouseup.zoom",n,!0),l=po(this);Ec(t.event.view),xf(),a.mouse=[l,this.__zoom.invert(l)],Vs(this),a.start()}}function f(){if(v.apply(this,arguments)){var a=this.__zoom,s=po(this),l=a.invert(s),u=a.k*(t.event.shiftKey?.5:2),c=i(r(n(a,u),s,l),y.apply(this,arguments));wf(),S>0?Is(this).transition().duration(S).call(o,c,s):Is(this).call(e.transform,c)}}function d(){if(v.apply(this,arguments)){var e,n,r,i=s(this,arguments),a=t.event.changedTouches,o=a.length;for(xf(),e=0;e<o;++e)n=a[e],r=Bs(this,a,n.identifier),r=[r,this.__zoom.invert(r),n.identifier],i.touch0?i.touch1||(i.touch1=r):i.touch0=r;return g&&(g=clearTimeout(g),!i.touch1)?(i.end(),f.apply(this,arguments)):void(t.event.touches.length===o&&(g=setTimeout(function(){g=null},E),Vs(this),i.start()))}}function h(){var e,a,o,l,u=s(this,arguments),c=t.event.changedTouches,f=c.length;for(wf(),g&&(g=clearTimeout(g)),e=0;e<f;++e)a=c[e],o=Bs(this,c,a.identifier),u.touch0&&u.touch0[2]===a.identifier?u.touch0[0]=o:u.touch1&&u.touch1[2]===a.identifier&&(u.touch1[0]=o);if(a=u.that.__zoom,u.touch1){var d=u.touch0[0],h=u.touch0[1],p=u.touch1[0],m=u.touch1[1],v=(v=p[0]-d[0])*v+(v=p[1]-d[1])*v,y=(y=m[0]-h[0])*y+(y=m[1]-h[1])*y;a=n(a,Math.sqrt(v/y)),o=[(d[0]+p[0])/2,(d[1]+p[1])/2],l=[(h[0]+m[0])/2,(h[1]+m[1])/2]}else{if(!u.touch0)return;o=u.touch0[0],l=u.touch0[1]}u.zoom("touch",i(r(a,o,l),u.extent))}function p(){var e,n,r=s(this,arguments),i=t.event.changedTouches,a=i.length;for(xf(),m&&clearTimeout(m),m=setTimeout(function(){m=null},E),e=0;e<a;++e)n=i[e],r.touch0&&r.touch0[2]===n.identifier?delete r.touch0:r.touch1&&r.touch1[2]===n.identifier&&delete r.touch1;r.touch1&&!r.touch0&&(r.touch0=r.touch1,delete r.touch1),r.touch0||r.end()}var g,m,v=Cf,y=kf,_=0,b=1/0,x=-b,w=b,C=x,k=w,S=250,T=[],A=Cr("start","zoom","end"),E=500,M=150;return e.transform=function(t,e){var n=t.selection?t.selection():t;n.property("__zoom",Sf),t!==n?o(t,e):n.interrupt().each(function(){s(this,arguments).start().zoom(null,"function"==typeof e?e.apply(this,arguments):e).end()})},e.scaleBy=function(t,n){e.scaleTo(t,function(){var t=this.__zoom.k,e="function"==typeof n?n.apply(this,arguments):n;return t*e})},e.scaleTo=function(t,o){e.transform(t,function(){var t=y.apply(this,arguments),e=this.__zoom,s=a(t),l=e.invert(s),u="function"==typeof o?o.apply(this,arguments):o;return i(r(n(e,u),s,l),t)})},e.translateBy=function(t,n,r){e.transform(t,function(){return i(this.__zoom.translate("function"==typeof n?n.apply(this,arguments):n,"function"==typeof r?r.apply(this,arguments):r),y.apply(this,arguments))})},l.prototype={start:function(){return 1===++this.active&&(this.index=T.push(this)-1,this.emit("start")),this},zoom:function(t,e){return this.mouse&&"mouse"!==t&&(this.mouse[1]=e.invert(this.mouse[0])),this.touch0&&"touch"!==t&&(this.touch0[1]=e.invert(this.touch0[0])),this.touch1&&"touch"!==t&&(this.touch1[1]=e.invert(this.touch1[0])),this.that.__zoom=e,this.emit("zoom"),this},end:function(){return 0===--this.active&&(T.splice(this.index,1),this.index=-1,this.emit("end")),this},emit:function(t){co(new yf(e,t,this.that.__zoom),A.apply,A,[t,this.that,this.args])}},e.filter=function(t){return arguments.length?(v="function"==typeof t?t:vf(!!t),e):v},e.extent=function(t){return arguments.length?(y="function"==typeof t?t:vf([[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]]),e):y},e.scaleExtent=function(t){return arguments.length?(_=+t[0],b=+t[1],e):[_,b]},e.translateExtent=function(t){return arguments.length?(x=+t[0][0],w=+t[1][0],C=+t[0][1],k=+t[1][1],e):[[x,C],[w,k]]},e.duration=function(t){return arguments.length?(S=+t,e):S},e.on=function(){var t=A.on.apply(A,arguments);return t===A?e:t},e}function Af(t){return function(){return t}}function Ef(t,e,n){this.target=t,this.type=e,this.selection=n}function Mf(){t.event.stopImmediatePropagation()}function Df(){t.event.preventDefault(),t.event.stopImmediatePropagation()}function Pf(t){return{type:t}}function Of(){return!t.event.button}function Nf(){var t=this.ownerSVGElement||this;return[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]}function Lf(t){for(;!t.__brush;)if(!(t=t.parentNode))return;return t.__brush}function If(t){return t[0][0]===t[1][0]||t[0][1]===t[1][1]}function Rf(t){var e=t.__brush;return e?e.dim.output(e.selection):null}function Bf(){return qf(ub)}function zf(){return qf(cb)}function Ff(){return qf(fb)}function qf(e){function n(t){var n=t.property("__brush",s).selectAll(".overlay").data([Pf("overlay")]);n.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",db.overlay).merge(n).each(function(){var t=Lf(this).extent;Is(this).attr("x",t[0][0]).attr("y",t[0][1]).attr("width",t[1][0]-t[0][0]).attr("height",t[1][1]-t[0][1])}),t.selectAll(".selection").data([Pf("selection")]).enter().append("rect").attr("class","selection").attr("cursor",db.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var i=t.selectAll(".handle").data(e.handles,function(t){return t.type});i.exit().remove(),i.enter().append("rect").attr("class",function(t){return"handle handle--"+t.type}).attr("cursor",function(t){return db[t.type]}),t.each(r).attr("fill","none").attr("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush touchstart.brush",o)}function r(){var t=Is(this),e=Lf(this).selection;e?(t.selectAll(".selection").style("display",null).attr("x",e[0][0]).attr("y",e[0][1]).attr("width",e[1][0]-e[0][0]).attr("height",e[1][1]-e[0][1]),t.selectAll(".handle").style("display",null).attr("x",function(t){return"e"===t.type[t.type.length-1]?e[1][0]-d/2:e[0][0]-d/2}).attr("y",function(t){return"s"===t.type[0]?e[1][1]-d/2:e[0][1]-d/2}).attr("width",function(t){return"n"===t.type||"s"===t.type?e[1][0]-e[0][0]+d:d}).attr("height",function(t){return"e"===t.type||"w"===t.type?e[1][1]-e[0][1]+d:d})):t.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function i(t,e){return t.__brush.emitter||new a(t,e)}function a(t,e){this.that=t,this.args=e,this.state=t.__brush,this.active=0}function o(){function n(){var t=po(k);!R||w||C||(Math.abs(t[0]-z[0])>Math.abs(t[1]-z[1])?C=!0:w=!0),z=t,x=!0,Df(),a()}function a(){var t;switch(_=z[0]-B[0],b=z[1]-B[1],T){case ob:case ab:A&&(_=Math.max(O-f,Math.min(L-g,_)),d=f+_,m=g+_),E&&(b=Math.max(N-h,Math.min(I-v,b)),p=h+b,y=v+b);break;case sb:A<0?(_=Math.max(O-f,Math.min(L-f,_)),d=f+_,m=g):A>0&&(_=Math.max(O-g,Math.min(L-g,_)),d=f,m=g+_),E<0?(b=Math.max(N-h,Math.min(I-h,b)),p=h+b,y=v):E>0&&(b=Math.max(N-v,Math.min(I-v,b)),p=h,y=v+b);break;case lb:A&&(d=Math.max(O,Math.min(L,f-_*A)),m=Math.max(O,Math.min(L,g+_*A))),E&&(p=Math.max(N,Math.min(I,h-b*E)),y=Math.max(N,Math.min(I,v+b*E)))}m<d&&(A*=-1,t=f,f=g,g=t,t=d,d=m,m=t,S in hb&&H.attr("cursor",db[S=hb[S]])),y<p&&(E*=-1,t=h,h=v,v=t,t=p,p=y,y=t,S in pb&&H.attr("cursor",db[S=pb[S]])),P=M.selection,w&&(d=P[0][0],m=P[1][0]),C&&(p=P[0][1],y=P[1][1]),P[0][0]===d&&P[0][1]===p&&P[1][0]===m&&P[1][1]===y||(M.selection=[[d,p],[m,y]],r.call(k),F.brush())}function o(){if(Mf(),t.event.touches){if(t.event.touches.length)return;l&&clearTimeout(l),l=setTimeout(function(){l=null},500),q.on("touchmove.brush touchend.brush touchcancel.brush",null)}else Mc(t.event.view,x),U.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);q.attr("pointer-events","all"),H.attr("cursor",db.overlay),If(P)&&(M.selection=null,r.call(k)),F.end()}function s(){switch(t.event.keyCode){case 16:R=A&&E;break;case 18:T===sb&&(A&&(g=m-_*A,f=d+_*A),E&&(v=y-b*E,h=p+b*E),T=lb,a());break;case 32:T!==sb&&T!==lb||(A<0?g=m-_:A>0&&(f=d-_),E<0?v=y-b:E>0&&(h=p-b),T=ob,H.attr("cursor",db.selection),a());break;default:return}Df()}function u(){switch(t.event.keyCode){case 16:R&&(w=C=R=!1,a());break;case 18:T===lb&&(A<0?g=m:A>0&&(f=d),E<0?v=y:E>0&&(h=p),T=sb,a());break;case 32:T===ob&&(t.event.altKey?(A&&(g=m-_*A,f=d+_*A),E&&(v=y-b*E,h=p+b*E),T=lb):(A<0?g=m:A>0&&(f=d),E<0?v=y:E>0&&(h=p),T=sb),H.attr("cursor",db[S]),a());break;default:return}Df()}if(t.event.touches){if(t.event.changedTouches.length<t.event.touches.length)return Df()}else if(l)return;if(c.apply(this,arguments)){var f,d,h,p,g,m,v,y,_,b,x,w,C,k=this,S=t.event.target.__data__.type,T="selection"===(t.event.metaKey?S="overlay":S)?ab:t.event.altKey?lb:sb,A=e===cb?null:gb[S],E=e===ub?null:mb[S],M=Lf(k),D=M.extent,P=M.selection,O=D[0][0],N=D[0][1],L=D[1][0],I=D[1][1],R=A&&E&&t.event.shiftKey,B=po(k),z=B,F=i(k,arguments).beforestart();"overlay"===S?M.selection=P=[[f=e===cb?O:B[0],h=e===ub?N:B[1]],[g=e===cb?L:f,v=e===ub?I:h]]:(f=P[0][0],h=P[0][1],g=P[1][0],v=P[1][1]),d=f,p=h,m=g,y=v;var q=Is(k).attr("pointer-events","none"),H=q.selectAll(".overlay").attr("cursor",db[S]);if(t.event.touches)q.on("touchmove.brush",n,!0).on("touchend.brush touchcancel.brush",o,!0);else{var U=Is(t.event.view).on("keydown.brush",s,!0).on("keyup.brush",u,!0).on("mousemove.brush",n,!0).on("mouseup.brush",o,!0);Ec(t.event.view)}Mf(),Vs(k),r.call(k),F.start()}}function s(){var t=this.__brush||{selection:null};return t.extent=u.apply(this,arguments),t.dim=e,t}var l,u=Nf,c=Of,f=Cr(n,"start","brush","end"),d=6;return n.move=function(t,n){t.selection?t.on("start.brush",function(){i(this,arguments).beforestart().start()}).on("interrupt.brush end.brush",function(){i(this,arguments).end()}).tween("brush",function(){function t(t){o.selection=1===t&&If(u)?null:c(t),r.call(a),s.brush()}var a=this,o=a.__brush,s=i(a,arguments),l=o.selection,u=e.input("function"==typeof n?n.apply(this,arguments):n,o.extent),c=lr(l,u);return l&&u?t:t(1)}):t.each(function(){var t=this,a=arguments,o=t.__brush,s=e.input("function"==typeof n?n.apply(t,a):n,o.extent),l=i(t,a).beforestart();Vs(t),o.selection=null==s||If(s)?null:s,r.call(t),l.start().brush().end()})},a.prototype={beforestart:function(){return 1===++this.active&&(this.state.emitter=this,this.starting=!0),this},start:function(){return this.starting&&(this.starting=!1,this.emit("start")),this},brush:function(){return this.emit("brush"),this},end:function(){return 0===--this.active&&(delete this.state.emitter,this.emit("end")),this},emit:function(t){co(new Ef(n,t,e.output(this.state.selection)),f.apply,f,[t,this.that,this.args])}},n.extent=function(t){return arguments.length?(u="function"==typeof t?t:Af([[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]]),n):u},n.filter=function(t){return arguments.length?(c="function"==typeof t?t:Af(!!t),n):c},n.handleSize=function(t){return arguments.length?(d=+t,n):d},n.on=function(){var t=f.on.apply(f,arguments);return t===f?n:t},n}function Hf(t){return function(e,n){return t(e.source.value+e.target.value,n.source.value+n.target.value)}}function Uf(){function t(t){var a,o,s,l,u,c,d=t.length,h=[],p=f(d),g=[],m=[],v=m.groups=new Array(d),y=new Array(d*d);for(a=0,u=-1;++u<d;){for(o=0,c=-1;++c<d;)o+=t[u][c];h.push(o),g.push(f(d)),a+=o}for(n&&p.sort(function(t,e){return n(h[t],h[e])}),r&&g.forEach(function(e,n){e.sort(function(e,i){return r(t[n][e],t[n][i])})}),a=wb(0,xb-e*d)/a,l=a?e:xb/d,o=0,u=-1;++u<d;){for(s=o,c=-1;++c<d;){var _=p[u],b=g[_][c],x=t[_][b],w=o,C=o+=x*a;y[b*d+_]={index:_,subindex:b,startAngle:w,endAngle:C,value:x}}v[_]={index:_,startAngle:s,endAngle:o,value:h[_]},o+=l}for(u=-1;++u<d;)for(c=u-1;++c<d;){var k=y[c*d+u],S=y[u*d+c];(k.value||S.value)&&m.push(k.value<S.value?{source:S,target:k}:{source:k,target:S})}return i?m.sort(i):m}var e=0,n=null,r=null,i=null;return t.padAngle=function(n){return arguments.length?(e=wb(0,n),t):e},t.sortGroups=function(e){return arguments.length?(n=e,t):n},t.sortSubgroups=function(e){return arguments.length?(r=e,t):r},t.sortChords=function(e){return arguments.length?(null==e?i=null:(i=Hf(e))._=e,t):i&&i._},t}function jf(t){return function(){return t}}function Vf(t){return t.source}function $f(t){return t.target}function Wf(t){return t.radius}function Gf(t){return t.startAngle}function Xf(t){return t.endAngle}function Yf(){function t(){var t,s=Cb.call(arguments),l=e.apply(this,s),u=n.apply(this,s),c=+r.apply(this,(s[0]=l,s)),f=i.apply(this,s)-bb,d=a.apply(this,s)-bb,h=c*vb(f),p=c*yb(f),g=+r.apply(this,(s[0]=u,s)),m=i.apply(this,s)-bb,v=a.apply(this,s)-bb;if(o||(o=t=kt()),o.moveTo(h,p),o.arc(0,0,c,f,d),f===m&&d===v||(o.quadraticCurveTo(0,0,g*vb(m),g*yb(m)),o.arc(0,0,g,m,v)),o.quadraticCurveTo(0,0,h,p),o.closePath(),t)return o=null,t+""||null}var e=Vf,n=$f,r=Wf,i=Gf,a=Xf,o=null;return t.radius=function(e){return arguments.length?(r="function"==typeof e?e:jf(+e),t):r},t.startAngle=function(e){return arguments.length?(i="function"==typeof e?e:jf(+e),t):i},t.endAngle=function(e){return arguments.length?(a="function"==typeof e?e:jf(+e),t):a},t.source=function(n){return arguments.length?(e=n,t):e},t.target=function(e){return arguments.length?(n=e,t):n},t.context=function(e){return arguments.length?(o=null==e?null:e,t):o},t}function Jf(){return new Kf}function Kf(){this.reset()}function Zf(t,e,n){var r=t.s=e+n,i=r-e,a=r-i;t.t=e-a+(n-i)}function Qf(t){return t>1?0:t<-1?ix:Math.acos(t)}function td(t){return t>1?ax:t<-1?-ax:Math.asin(t)}function ed(t){return(t=yx(t/2))*t}function nd(){}function rd(t,e){t&&Cx.hasOwnProperty(t.type)&&Cx[t.type](t,e)}function id(t,e,n){var r,i=-1,a=t.length-n;for(e.lineStart();++i<a;)r=t[i],e.point(r[0],r[1],r[2]);e.lineEnd()}function ad(t,e){var n=-1,r=t.length;for(e.polygonStart();++n<r;)id(t[n],e,1);e.polygonEnd()}function od(t,e){t&&wx.hasOwnProperty(t.type)?wx[t.type](t,e):rd(t,e)}function sd(){Tx.point=ud}function ld(){cd(kb,Sb)}function ud(t,e){Tx.point=cd,kb=t,Sb=e,t*=ux,e*=ux,Tb=t,Ab=hx(e=e/2+ox),Eb=yx(e)}function cd(t,e){t*=ux,e*=ux,e=e/2+ox;var n=t-Tb,r=n>=0?1:-1,i=r*n,a=hx(e),o=yx(e),s=Eb*o,l=Ab*a+s*hx(i),u=s*r*yx(i);kx.add(dx(u,l)),Tb=t,Ab=a,Eb=o}function fd(t){return Sx.reset(),od(t,Tx),2*Sx}function dd(t){return[dx(t[1],t[0]),td(t[2])]}function hd(t){var e=t[0],n=t[1],r=hx(n);return[r*hx(e),r*yx(e),yx(n)]}function pd(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function gd(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function md(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function vd(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function yd(t){var e=bx(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}function _d(t,e){Bb.push(zb=[Mb=t,Pb=t]),e<Db&&(Db=e),e>Ob&&(Ob=e)}function bd(t,e){var n=hd([t*ux,e*ux]);if(Rb){var r=gd(Rb,n),i=[r[1],-r[0],0],a=gd(i,r);yd(a),a=dd(a);var o,s=t-Nb,l=s>0?1:-1,u=a[0]*lx*l,c=cx(s)>180;c^(l*Nb<u&&u<l*t)?(o=a[1]*lx,o>Ob&&(Ob=o)):(u=(u+360)%360-180,c^(l*Nb<u&&u<l*t)?(o=-a[1]*lx,o<Db&&(Db=o)):(e<Db&&(Db=e),e>Ob&&(Ob=e))),c?t<Nb?Td(Mb,t)>Td(Mb,Pb)&&(Pb=t):Td(t,Pb)>Td(Mb,Pb)&&(Mb=t):Pb>=Mb?(t<Mb&&(Mb=t),t>Pb&&(Pb=t)):t>Nb?Td(Mb,t)>Td(Mb,Pb)&&(Pb=t):Td(t,Pb)>Td(Mb,Pb)&&(Mb=t)}else _d(t,e);Rb=n,Nb=t}function xd(){Ex.point=bd}function wd(){zb[0]=Mb,zb[1]=Pb,Ex.point=_d,Rb=null}function Cd(t,e){if(Rb){var n=t-Nb;Ax.add(cx(n)>180?n+(n>0?360:-360):n)}else Lb=t,Ib=e;Tx.point(t,e),bd(t,e)}function kd(){Tx.lineStart()}function Sd(){Cd(Lb,Ib),Tx.lineEnd(),cx(Ax)>nx&&(Mb=-(Pb=180)),zb[0]=Mb,zb[1]=Pb,Rb=null}function Td(t,e){return(e-=t)<0?e+360:e}function Ad(t,e){return t[0]-e[0];
}function Ed(t,e){return t[0]<=t[1]?t[0]<=e&&e<=t[1]:e<t[0]||t[1]<e}function Md(t){var e,n,r,i,a,o,s;if(Ob=Pb=-(Mb=Db=1/0),Bb=[],od(t,Ex),n=Bb.length){for(Bb.sort(Ad),e=1,r=Bb[0],a=[r];e<n;++e)i=Bb[e],Ed(r,i[0])||Ed(r,i[1])?(Td(r[0],i[1])>Td(r[0],r[1])&&(r[1]=i[1]),Td(i[0],r[1])>Td(r[0],r[1])&&(r[0]=i[0])):a.push(r=i);for(o=-(1/0),n=a.length-1,e=0,r=a[n];e<=n;r=i,++e)i=a[e],(s=Td(r[1],i[0]))>o&&(o=s,Mb=i[0],Pb=r[1])}return Bb=zb=null,Mb===1/0||Db===1/0?[[NaN,NaN],[NaN,NaN]]:[[Mb,Db],[Pb,Ob]]}function Dd(t,e){t*=ux,e*=ux;var n=hx(e);Pd(n*hx(t),n*yx(t),yx(e))}function Pd(t,e,n){++Fb,Hb+=(t-Hb)/Fb,Ub+=(e-Ub)/Fb,jb+=(n-jb)/Fb}function Od(){Mx.point=Nd}function Nd(t,e){t*=ux,e*=ux;var n=hx(e);Zb=n*hx(t),Qb=n*yx(t),tx=yx(e),Mx.point=Ld,Pd(Zb,Qb,tx)}function Ld(t,e){t*=ux,e*=ux;var n=hx(e),r=n*hx(t),i=n*yx(t),a=yx(e),o=dx(bx((o=Qb*a-tx*i)*o+(o=tx*r-Zb*a)*o+(o=Zb*i-Qb*r)*o),Zb*r+Qb*i+tx*a);qb+=o,Vb+=o*(Zb+(Zb=r)),$b+=o*(Qb+(Qb=i)),Wb+=o*(tx+(tx=a)),Pd(Zb,Qb,tx)}function Id(){Mx.point=Dd}function Rd(){Mx.point=zd}function Bd(){Fd(Jb,Kb),Mx.point=Dd}function zd(t,e){Jb=t,Kb=e,t*=ux,e*=ux,Mx.point=Fd;var n=hx(e);Zb=n*hx(t),Qb=n*yx(t),tx=yx(e),Pd(Zb,Qb,tx)}function Fd(t,e){t*=ux,e*=ux;var n=hx(e),r=n*hx(t),i=n*yx(t),a=yx(e),o=Qb*a-tx*i,s=tx*r-Zb*a,l=Zb*i-Qb*r,u=bx(o*o+s*s+l*l),c=Zb*r+Qb*i+tx*a,f=u&&-Qf(c)/u,d=dx(u,c);Gb+=f*o,Xb+=f*s,Yb+=f*l,qb+=d,Vb+=d*(Zb+(Zb=r)),$b+=d*(Qb+(Qb=i)),Wb+=d*(tx+(tx=a)),Pd(Zb,Qb,tx)}function qd(t){Fb=qb=Hb=Ub=jb=Vb=$b=Wb=Gb=Xb=Yb=0,od(t,Mx);var e=Gb,n=Xb,r=Yb,i=e*e+n*n+r*r;return i<rx&&(e=Vb,n=$b,r=Wb,qb<nx&&(e=Hb,n=Ub,r=jb),i=e*e+n*n+r*r,i<rx)?[NaN,NaN]:[dx(n,e)*lx,td(r/bx(i))*lx]}function Hd(t){return function(){return t}}function Ud(t,e){function n(n,r){return n=t(n,r),e(n[0],n[1])}return t.invert&&e.invert&&(n.invert=function(n,r){return n=e.invert(n,r),n&&t.invert(n[0],n[1])}),n}function jd(t,e){return[t>ix?t-sx:t<-ix?t+sx:t,e]}function Vd(t,e,n){return(t%=sx)?e||n?Ud(Wd(t),Gd(e,n)):Wd(t):e||n?Gd(e,n):jd}function $d(t){return function(e,n){return e+=t,[e>ix?e-sx:e<-ix?e+sx:e,n]}}function Wd(t){var e=$d(t);return e.invert=$d(-t),e}function Gd(t,e){function n(t,e){var n=hx(e),s=hx(t)*n,l=yx(t)*n,u=yx(e),c=u*r+s*i;return[dx(l*a-c*o,s*r-u*i),td(c*a+l*o)]}var r=hx(t),i=yx(t),a=hx(e),o=yx(e);return n.invert=function(t,e){var n=hx(e),s=hx(t)*n,l=yx(t)*n,u=yx(e),c=u*a-l*o;return[dx(l*a+u*o,s*r+c*i),td(c*r-s*i)]},n}function Xd(t){function e(e){return e=t(e[0]*ux,e[1]*ux),e[0]*=lx,e[1]*=lx,e}return t=Vd(t[0]*ux,t[1]*ux,t.length>2?t[2]*ux:0),e.invert=function(e){return e=t.invert(e[0]*ux,e[1]*ux),e[0]*=lx,e[1]*=lx,e},e}function Yd(t,e,n,r,i,a){if(n){var o=hx(e),s=yx(e),l=r*n;null==i?(i=e+r*sx,a=e-l/2):(i=Jd(o,i),a=Jd(o,a),(r>0?i<a:i>a)&&(i+=r*sx));for(var u,c=i;r>0?c>a:c<a;c-=l)u=dd([o,-s*hx(c),-s*yx(c)]),t.point(u[0],u[1])}}function Jd(t,e){e=hd(e),e[0]-=t,yd(e);var n=Qf(-e[1]);return((-e[2]<0?-n:n)+sx-nx)%sx}function Kd(){function t(t,e){n.push(t=r(t,e)),t[0]*=lx,t[1]*=lx}function e(){var t=i.apply(this,arguments),e=a.apply(this,arguments)*ux,l=o.apply(this,arguments)*ux;return n=[],r=Vd(-t[0]*ux,-t[1]*ux,0).invert,Yd(s,e,l,1),t={type:"Polygon",coordinates:[n]},n=r=null,t}var n,r,i=Hd([0,0]),a=Hd(90),o=Hd(6),s={point:t};return e.center=function(t){return arguments.length?(i="function"==typeof t?t:Hd([+t[0],+t[1]]),e):i},e.radius=function(t){return arguments.length?(a="function"==typeof t?t:Hd(+t),e):a},e.precision=function(t){return arguments.length?(o="function"==typeof t?t:Hd(+t),e):o},e}function Zd(){var t,e=[];return{point:function(e,n){t.push([e,n])},lineStart:function(){e.push(t=[])},lineEnd:nd,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function Qd(t,e,n,r,i,a){var o,s=t[0],l=t[1],u=e[0],c=e[1],f=0,d=1,h=u-s,p=c-l;if(o=n-s,h||!(o>0)){if(o/=h,h<0){if(o<f)return;o<d&&(d=o)}else if(h>0){if(o>d)return;o>f&&(f=o)}if(o=i-s,h||!(o<0)){if(o/=h,h<0){if(o>d)return;o>f&&(f=o)}else if(h>0){if(o<f)return;o<d&&(d=o)}if(o=r-l,p||!(o>0)){if(o/=p,p<0){if(o<f)return;o<d&&(d=o)}else if(p>0){if(o>d)return;o>f&&(f=o)}if(o=a-l,p||!(o<0)){if(o/=p,p<0){if(o>d)return;o>f&&(f=o)}else if(p>0){if(o<f)return;o<d&&(d=o)}return f>0&&(t[0]=s+f*h,t[1]=l+f*p),d<1&&(e[0]=s+d*h,e[1]=l+d*p),!0}}}}}function th(t,e){return cx(t[0]-e[0])<nx&&cx(t[1]-e[1])<nx}function eh(t,e,n,r){this.x=t,this.z=e,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function nh(t,e,n,r,i){var a,o,s=[],l=[];if(t.forEach(function(t){if(!((e=t.length-1)<=0)){var e,n,r=t[0],o=t[e];if(th(r,o)){for(i.lineStart(),a=0;a<e;++a)i.point((r=t[a])[0],r[1]);return void i.lineEnd()}s.push(n=new eh(r,t,null,(!0))),l.push(n.o=new eh(r,null,n,(!1))),s.push(n=new eh(o,t,null,(!1))),l.push(n.o=new eh(o,null,n,(!0)))}}),s.length){for(l.sort(e),rh(s),rh(l),a=0,o=l.length;a<o;++a)l[a].e=n=!n;for(var u,c,f=s[0];;){for(var d=f,h=!0;d.v;)if((d=d.n)===f)return;u=d.z,i.lineStart();do{if(d.v=d.o.v=!0,d.e){if(h)for(a=0,o=u.length;a<o;++a)i.point((c=u[a])[0],c[1]);else r(d.x,d.n.x,1,i);d=d.n}else{if(h)for(u=d.p.z,a=u.length-1;a>=0;--a)i.point((c=u[a])[0],c[1]);else r(d.x,d.p.x,-1,i);d=d.p}d=d.o,u=d.z,h=!h}while(!d.v);i.lineEnd()}}}function rh(t){if(e=t.length){for(var e,n,r=0,i=t[0];++r<e;)i.n=n=t[r],n.p=i,i=n;i.n=n=t[0],n.p=i}}function ih(t,e,n,r){function i(i,a){return t<=i&&i<=n&&e<=a&&a<=r}function a(i,a,s,u){var c=0,f=0;if(null==i||(c=o(i,s))!==(f=o(a,s))||l(i,a)<0^s>0){do u.point(0===c||3===c?t:n,c>1?r:e);while((c=(c+s+4)%4)!==f)}else u.point(a[0],a[1])}function o(r,i){return cx(r[0]-t)<nx?i>0?0:3:cx(r[0]-n)<nx?i>0?2:1:cx(r[1]-e)<nx?i>0?1:0:i>0?3:2}function s(t,e){return l(t.x,e.x)}function l(t,e){var n=o(t,1),r=o(e,1);return n!==r?n-r:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}return function(o){function l(t,e){i(t,e)&&A.point(t,e)}function u(){for(var e=0,n=0,i=m.length;n<i;++n)for(var a,o,s=m[n],l=1,u=s.length,c=s[0],f=c[0],d=c[1];l<u;++l)a=f,o=d,c=s[l],f=c[0],d=c[1],o<=r?d>r&&(f-a)*(r-o)>(d-o)*(t-a)&&++e:d<=r&&(f-a)*(r-o)<(d-o)*(t-a)&&--e;return e}function c(){A=E,g=[],m=[],T=!0}function f(){var t=u(),e=T&&t,n=(g=w(g)).length;(e||n)&&(o.polygonStart(),e&&(o.lineStart(),a(null,null,1,o),o.lineEnd()),n&&nh(g,s,t,a,o),o.polygonEnd()),A=o,g=m=v=null}function d(){M.point=p,m&&m.push(v=[]),S=!0,k=!1,x=C=NaN}function h(){g&&(p(y,_),b&&k&&E.rejoin(),g.push(E.result())),M.point=l,k&&A.lineEnd()}function p(a,o){var s=i(a,o);if(m&&v.push([a,o]),S)y=a,_=o,b=s,S=!1,s&&(A.lineStart(),A.point(a,o));else if(s&&k)A.point(a,o);else{var l=[x=Math.max(Ux,Math.min(Hx,x)),C=Math.max(Ux,Math.min(Hx,C))],u=[a=Math.max(Ux,Math.min(Hx,a)),o=Math.max(Ux,Math.min(Hx,o))];Qd(l,u,t,e,n,r)?(k||(A.lineStart(),A.point(l[0],l[1])),A.point(u[0],u[1]),s||A.lineEnd(),T=!1):s&&(A.lineStart(),A.point(a,o),T=!1)}x=a,C=o,k=s}var g,m,v,y,_,b,x,C,k,S,T,A=o,E=Zd(),M={point:l,lineStart:d,lineEnd:h,polygonStart:c,polygonEnd:f};return M}}function ah(){var t,e,n,r=0,i=0,a=960,o=500;return n={stream:function(n){return t&&e===n?t:t=ih(r,i,a,o)(e=n)},extent:function(s){return arguments.length?(r=+s[0][0],i=+s[0][1],a=+s[1][0],o=+s[1][1],t=e=null,n):[[r,i],[a,o]]}}}function oh(){Vx.point=lh,Vx.lineEnd=sh}function sh(){Vx.point=Vx.lineEnd=nd}function lh(t,e){t*=ux,e*=ux,Dx=t,Px=yx(e),Ox=hx(e),Vx.point=uh}function uh(t,e){t*=ux,e*=ux;var n=yx(e),r=hx(e),i=cx(t-Dx),a=hx(i),o=yx(i),s=r*o,l=Ox*n-Px*r*a,u=Px*n+Ox*r*a;jx.add(dx(bx(s*s+l*l),u)),Dx=t,Px=n,Ox=r}function ch(t){return jx.reset(),od(t,Vx),+jx}function fh(t,e){return $x[0]=t,$x[1]=e,ch(Wx)}function dh(t,e,n){var r=f(t,e-nx,n).concat(e);return function(t){return r.map(function(e){return[t,e]})}}function hh(t,e,n){var r=f(t,e-nx,n).concat(e);return function(t){return r.map(function(e){return[e,t]})}}function ph(){function t(){return{type:"MultiLineString",coordinates:e()}}function e(){return f(px(a/v)*v,i,v).map(h).concat(f(px(u/y)*y,l,y).map(p)).concat(f(px(r/g)*g,n,g).filter(function(t){return cx(t%v)>nx}).map(c)).concat(f(px(s/m)*m,o,m).filter(function(t){return cx(t%y)>nx}).map(d))}var n,r,i,a,o,s,l,u,c,d,h,p,g=10,m=g,v=90,y=360,_=2.5;return t.lines=function(){return e().map(function(t){return{type:"LineString",coordinates:t}})},t.outline=function(){return{type:"Polygon",coordinates:[h(a).concat(p(l).slice(1),h(i).reverse().slice(1),p(u).reverse().slice(1))]}},t.extent=function(e){return arguments.length?t.extentMajor(e).extentMinor(e):t.extentMinor()},t.extentMajor=function(e){return arguments.length?(a=+e[0][0],i=+e[1][0],u=+e[0][1],l=+e[1][1],a>i&&(e=a,a=i,i=e),u>l&&(e=u,u=l,l=e),t.precision(_)):[[a,u],[i,l]]},t.extentMinor=function(e){return arguments.length?(r=+e[0][0],n=+e[1][0],s=+e[0][1],o=+e[1][1],r>n&&(e=r,r=n,n=e),s>o&&(e=s,s=o,o=e),t.precision(_)):[[r,s],[n,o]]},t.step=function(e){return arguments.length?t.stepMajor(e).stepMinor(e):t.stepMinor()},t.stepMajor=function(e){return arguments.length?(v=+e[0],y=+e[1],t):[v,y]},t.stepMinor=function(e){return arguments.length?(g=+e[0],m=+e[1],t):[g,m]},t.precision=function(e){return arguments.length?(_=+e,c=dh(s,o,90),d=hh(r,n,_),h=dh(u,l,90),p=hh(a,i,_),t):_},t.extentMajor([[-180,-90+nx],[180,90-nx]]).extentMinor([[-180,-80-nx],[180,80+nx]])}function gh(t,e){var n=t[0]*ux,r=t[1]*ux,i=e[0]*ux,a=e[1]*ux,o=hx(r),s=yx(r),l=hx(a),u=yx(a),c=o*hx(n),f=o*yx(n),d=l*hx(i),h=l*yx(i),p=2*td(bx(ed(a-r)+o*l*ed(i-n))),g=yx(p),m=p?function(t){var e=yx(t*=p)/g,n=yx(p-t)/g,r=n*c+e*d,i=n*f+e*h,a=n*s+e*u;return[dx(i,r)*lx,dx(a,bx(r*r+i*i))*lx]}:function(){return[n*lx,r*lx]};return m.distance=p,m}function mh(t){return t}function vh(){Yx.point=yh}function yh(t,e){Yx.point=_h,Nx=Ix=t,Lx=Rx=e}function _h(t,e){Xx.add(Rx*t-Ix*e),Ix=t,Rx=e}function bh(){_h(Nx,Lx)}function xh(t,e){t<Jx&&(Jx=t),t>Zx&&(Zx=t),e<Kx&&(Kx=e),e>Qx&&(Qx=e)}function wh(t,e){ew+=t,nw+=e,++rw}function Ch(){cw.point=kh}function kh(t,e){cw.point=Sh,wh(Fx=t,qx=e)}function Sh(t,e){var n=t-Fx,r=e-qx,i=bx(n*n+r*r);iw+=i*(Fx+t)/2,aw+=i*(qx+e)/2,ow+=i,wh(Fx=t,qx=e)}function Th(){cw.point=wh}function Ah(){cw.point=Mh}function Eh(){Dh(Bx,zx)}function Mh(t,e){cw.point=Dh,wh(Bx=Fx=t,zx=qx=e)}function Dh(t,e){var n=t-Fx,r=e-qx,i=bx(n*n+r*r);iw+=i*(Fx+t)/2,aw+=i*(qx+e)/2,ow+=i,i=qx*t-Fx*e,sw+=i*(Fx+t),lw+=i*(qx+e),uw+=3*i,wh(Fx=t,qx=e)}function Ph(t){function e(e,n){t.moveTo(e+o,n),t.arc(e,n,o,0,sx)}function n(e,n){t.moveTo(e,n),s.point=r}function r(e,n){t.lineTo(e,n)}function i(){s.point=e}function a(){t.closePath()}var o=4.5,s={point:e,lineStart:function(){s.point=n},lineEnd:i,polygonStart:function(){s.lineEnd=a},polygonEnd:function(){s.lineEnd=i,s.point=e},pointRadius:function(t){return o=t,s},result:nd};return s}function Oh(){function t(t,e){s.push("M",t,",",e,o)}function e(t,e){s.push("M",t,",",e),l.point=n}function n(t,e){s.push("L",t,",",e)}function r(){l.point=e}function i(){l.point=t}function a(){s.push("Z")}var o=Nh(4.5),s=[],l={point:t,lineStart:r,lineEnd:i,polygonStart:function(){l.lineEnd=a},polygonEnd:function(){l.lineEnd=i,l.point=t},pointRadius:function(t){return o=Nh(t),l},result:function(){if(s.length){var t=s.join("");return s=[],t}}};return l}function Nh(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}function Lh(){function t(t){return t&&("function"==typeof a&&i.pointRadius(+a.apply(this,arguments)),od(t,n(i))),i.result()}var e,n,r,i,a=4.5;return t.area=function(t){return od(t,n(Yx)),Yx.result()},t.bounds=function(t){return od(t,n(tw)),tw.result()},t.centroid=function(t){return od(t,n(cw)),cw.result()},t.projection=function(r){return arguments.length?(n=null==(e=r)?mh:r.stream,t):e},t.context=function(e){return arguments.length?(i=null==(r=e)?new Oh:new Ph(e),"function"!=typeof a&&i.pointRadius(a),t):r},t.pointRadius=function(e){return arguments.length?(a="function"==typeof e?e:(i.pointRadius(+e),+e),t):a},t.projection(null).context(null)}function Ih(t,e){var n=e[0],r=e[1],i=[yx(n),-hx(n),0],a=0,o=0;fw.reset();for(var s=0,l=t.length;s<l;++s)if(c=(u=t[s]).length)for(var u,c,f=u[c-1],d=f[0],h=f[1]/2+ox,p=yx(h),g=hx(h),m=0;m<c;++m,d=y,p=b,g=x,f=v){var v=u[m],y=v[0],_=v[1]/2+ox,b=yx(_),x=hx(_),w=y-d,C=w>=0?1:-1,k=C*w,S=k>ix,T=p*b;if(fw.add(dx(T*C*yx(k),g*x+T*hx(k))),a+=S?w+C*sx:w,S^d>=n^y>=n){var A=gd(hd(f),hd(v));yd(A);var E=gd(i,A);yd(E);var M=(S^w>=0?-1:1)*td(E[2]);(r>M||r===M&&(A[0]||A[1]))&&(o+=S^w>=0?1:-1)}}return(a<-nx||a<nx&&fw<-nx)^1&o}function Rh(t,e,n,r){return function(i,a){function o(e,n){var r=i(e,n);t(e=r[0],n=r[1])&&a.point(e,n)}function s(t,e){var n=i(t,e);m.point(n[0],n[1])}function l(){x.point=s,m.lineStart()}function u(){x.point=o,m.lineEnd()}function c(t,e){g.push([t,e]);var n=i(t,e);_.point(n[0],n[1])}function f(){_.lineStart(),g=[]}function d(){c(g[0][0],g[0][1]),_.lineEnd();var t,e,n,r,i=_.clean(),o=y.result(),s=o.length;if(g.pop(),h.push(g),g=null,s)if(1&i){if(n=o[0],(e=n.length-1)>0){for(b||(a.polygonStart(),b=!0),a.lineStart(),t=0;t<e;++t)a.point((r=n[t])[0],r[1]);a.lineEnd()}}else s>1&&2&i&&o.push(o.pop().concat(o.shift())),p.push(o.filter(Bh))}var h,p,g,m=e(a),v=i.invert(r[0],r[1]),y=Zd(),_=e(y),b=!1,x={point:o,lineStart:l,lineEnd:u,polygonStart:function(){x.point=c,x.lineStart=f,x.lineEnd=d,p=[],h=[]},polygonEnd:function(){x.point=o,x.lineStart=l,x.lineEnd=u,p=w(p);var t=Ih(h,v);p.length?(b||(a.polygonStart(),b=!0),nh(p,zh,t,n,a)):t&&(b||(a.polygonStart(),b=!0),a.lineStart(),n(null,null,1,a),a.lineEnd()),b&&(a.polygonEnd(),b=!1),p=h=null},sphere:function(){a.polygonStart(),a.lineStart(),n(null,null,1,a),a.lineEnd(),a.polygonEnd()}};return x}}function Bh(t){return t.length>1}function zh(t,e){return((t=t.x)[0]<0?t[1]-ax-nx:ax-t[1])-((e=e.x)[0]<0?e[1]-ax-nx:ax-e[1])}function Fh(t){var e,n=NaN,r=NaN,i=NaN;return{lineStart:function(){t.lineStart(),e=1},point:function(a,o){var s=a>0?ix:-ix,l=cx(a-n);cx(l-ix)<nx?(t.point(n,r=(r+o)/2>0?ax:-ax),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(s,r),t.point(a,r),e=0):i!==s&&l>=ix&&(cx(n-i)<nx&&(n-=i*nx),cx(a-s)<nx&&(a-=s*nx),r=qh(n,r,a,o),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(s,r),e=0),t.point(n=a,r=o),i=s},lineEnd:function(){t.lineEnd(),n=r=NaN},clean:function(){return 2-e}}}function qh(t,e,n,r){var i,a,o=yx(t-n);return cx(o)>nx?fx((yx(e)*(a=hx(r))*yx(n)-yx(r)*(i=hx(e))*yx(t))/(i*a*o)):(e+r)/2}function Hh(t,e,n,r){var i;if(null==t)i=n*ax,r.point(-ix,i),r.point(0,i),r.point(ix,i),r.point(ix,0),r.point(ix,-i),r.point(0,-i),r.point(-ix,-i),r.point(-ix,0),r.point(-ix,i);else if(cx(t[0]-e[0])>nx){var a=t[0]<e[0]?ix:-ix;i=n*a/2,r.point(-a,i),r.point(0,i),r.point(a,i)}else r.point(e[0],e[1])}function Uh(t,e){function n(n,r,i,a){Yd(a,t,e,i,n,r)}function r(t,e){return hx(t)*hx(e)>s}function i(t){var e,n,i,s,c;return{lineStart:function(){s=i=!1,c=1},point:function(f,d){var h,p=[f,d],g=r(f,d),m=l?g?0:o(f,d):g?o(f+(f<0?ix:-ix),d):0;if(!e&&(s=i=g)&&t.lineStart(),g!==i&&(h=a(e,p),(th(e,h)||th(p,h))&&(p[0]+=nx,p[1]+=nx,g=r(p[0],p[1]))),g!==i)c=0,g?(t.lineStart(),h=a(p,e),t.point(h[0],h[1])):(h=a(e,p),t.point(h[0],h[1]),t.lineEnd()),e=h;else if(u&&e&&l^g){var v;m&n||!(v=a(p,e,!0))||(c=0,l?(t.lineStart(),t.point(v[0][0],v[0][1]),t.point(v[1][0],v[1][1]),t.lineEnd()):(t.point(v[1][0],v[1][1]),t.lineEnd(),t.lineStart(),t.point(v[0][0],v[0][1])))}!g||e&&th(e,p)||t.point(p[0],p[1]),e=p,i=g,n=m},lineEnd:function(){i&&t.lineEnd(),e=null},clean:function(){return c|(s&&i)<<1}}}function a(t,e,n){var r=hd(t),i=hd(e),a=[1,0,0],o=gd(r,i),l=pd(o,o),u=o[0],c=l-u*u;if(!c)return!n&&t;var f=s*l/c,d=-s*u/c,h=gd(a,o),p=vd(a,f),g=vd(o,d);md(p,g);var m=h,v=pd(p,m),y=pd(m,m),_=v*v-y*(pd(p,p)-1);if(!(_<0)){var b=bx(_),x=vd(m,(-v-b)/y);if(md(x,p),x=dd(x),!n)return x;var w,C=t[0],k=e[0],S=t[1],T=e[1];k<C&&(w=C,C=k,k=w);var A=k-C,E=cx(A-ix)<nx,M=E||A<nx;if(!E&&T<S&&(w=S,S=T,T=w),M?E?S+T>0^x[1]<(cx(x[0]-C)<nx?S:T):S<=x[1]&&x[1]<=T:A>ix^(C<=x[0]&&x[0]<=k)){var D=vd(m,(-v+b)/y);return md(D,p),[x,dd(D)]}}}function o(e,n){var r=l?t:ix-t,i=0;return e<-r?i|=1:e>r&&(i|=2),n<-r?i|=4:n>r&&(i|=8),i}var s=hx(t),l=s>0,u=cx(s)>nx;return Rh(r,i,n,l?[0,-t]:[-ix,t-ix])}function jh(t){return{stream:Vh(t)}}function Vh(t){function e(){}var n=e.prototype=Object.create($h.prototype);for(var r in t)n[r]=t[r];return function(t){var n=new e;return n.stream=t,n}}function $h(){}function Wh(t,e,n){var r=e[1][0]-e[0][0],i=e[1][1]-e[0][1],a=t.clipExtent&&t.clipExtent();t.scale(150).translate([0,0]),null!=a&&t.clipExtent(null),od(n,t.stream(tw));var o=tw.result(),s=Math.min(r/(o[1][0]-o[0][0]),i/(o[1][1]-o[0][1])),l=+e[0][0]+(r-s*(o[1][0]+o[0][0]))/2,u=+e[0][1]+(i-s*(o[1][1]+o[0][1]))/2;return null!=a&&t.clipExtent(a),t.scale(150*s).translate([l,u])}function Gh(t){return function(e,n){return Wh(t,[[0,0],e],n)}}function Xh(t){return function(e,n){return Wh(t,e,n)}}function Yh(t,e){return+e?Kh(t,e):Jh(t)}function Jh(t){return Vh({point:function(e,n){e=t(e,n),this.stream.point(e[0],e[1])}})}function Kh(t,e){function n(r,i,a,o,s,l,u,c,f,d,h,p,g,m){var v=u-r,y=c-i,_=v*v+y*y;if(_>4*e&&g--){var b=o+d,x=s+h,w=l+p,C=bx(b*b+x*x+w*w),k=td(w/=C),S=cx(cx(w)-1)<nx||cx(a-f)<nx?(a+f)/2:dx(x,b),T=t(S,k),A=T[0],E=T[1],M=A-r,D=E-i,P=y*M-v*D;(P*P/_>e||cx((v*M+y*D)/_-.5)>.3||o*d+s*h+l*p<pw)&&(n(r,i,a,o,s,l,A,E,S,b/=C,x/=C,w,g,m),m.point(A,E),n(A,E,S,b,x,w,u,c,f,d,h,p,g,m))}}return function(e){function r(n,r){n=t(n,r),e.point(n[0],n[1])}function i(){v=NaN,w.point=a,e.lineStart()}function a(r,i){var a=hd([r,i]),o=t(r,i);n(v,y,m,_,b,x,v=o[0],y=o[1],m=r,_=a[0],b=a[1],x=a[2],hw,e),e.point(v,y)}function o(){w.point=r,e.lineEnd()}function s(){i(),w.point=l,w.lineEnd=u}function l(t,e){a(c=t,e),f=v,d=y,h=_,p=b,g=x,w.point=a}function u(){n(v,y,m,_,b,x,f,d,c,h,p,g,hw,e),w.lineEnd=o,o()}var c,f,d,h,p,g,m,v,y,_,b,x,w={point:r,lineStart:i,lineEnd:o,polygonStart:function(){e.polygonStart(),w.lineStart=s},polygonEnd:function(){e.polygonEnd(),w.lineStart=i}};return w}}function Zh(t){return Qh(function(){return t})()}function Qh(t){function e(t){return t=c(t[0]*ux,t[1]*ux),[t[0]*m+s,l-t[1]*m]}function n(t){return t=c.invert((t[0]-s)/m,(l-t[1])/m),t&&[t[0]*lx,t[1]*lx]}function r(t,e){return t=o(t,e),[t[0]*m+s,l-t[1]*m]}function i(){c=Ud(u=Vd(x,w,C),o);var t=o(_,b);return s=v-t[0]*m,l=y+t[1]*m,a()}function a(){return p=g=null,e}var o,s,l,u,c,f,d,h,p,g,m=150,v=480,y=250,_=0,b=0,x=0,w=0,C=0,k=null,S=dw,T=null,A=mh,E=.5,M=Yh(r,E);return e.stream=function(t){return p&&g===t?p:p=gw(S(u,M(A(g=t))))},e.clipAngle=function(t){return arguments.length?(S=+t?Uh(k=t*ux,6*ux):(k=null,dw),a()):k*lx},e.clipExtent=function(t){return arguments.length?(A=null==t?(T=f=d=h=null,mh):ih(T=+t[0][0],f=+t[0][1],d=+t[1][0],h=+t[1][1]),a()):null==T?null:[[T,f],[d,h]]},e.scale=function(t){return arguments.length?(m=+t,i()):m},e.translate=function(t){return arguments.length?(v=+t[0],y=+t[1],i()):[v,y]},e.center=function(t){return arguments.length?(_=t[0]%360*ux,b=t[1]%360*ux,i()):[_*lx,b*lx]},e.rotate=function(t){return arguments.length?(x=t[0]%360*ux,w=t[1]%360*ux,C=t.length>2?t[2]%360*ux:0,i()):[x*lx,w*lx,C*lx]},e.precision=function(t){return arguments.length?(M=Yh(r,E=t*t),a()):bx(E)},e.fitExtent=Xh(e),e.fitSize=Gh(e),function(){return o=t.apply(this,arguments),e.invert=o.invert&&n,i()}}function tp(t){var e=0,n=ix/3,r=Qh(t),i=r(e,n);return i.parallels=function(t){return arguments.length?r(e=t[0]*ux,n=t[1]*ux):[e*lx,n*lx]},i}function ep(t,e){function n(t,e){var n=bx(a-2*i*yx(e))/i;return[n*yx(t*=i),o-n*hx(t)]}var r=yx(t),i=(r+yx(e))/2,a=1+r*(2*i-r),o=bx(a)/i;return n.invert=function(t,e){var n=o-e;return[dx(t,n)/i,td((a-(t*t+n*n)*i*i)/(2*i))]},n}function np(){return tp(ep).scale(155.424).center([0,33.6442])}function rp(){return np().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function ip(t){var e=t.length;return{point:function(n,r){for(var i=-1;++i<e;)t[i].point(n,r)},sphere:function(){for(var n=-1;++n<e;)t[n].sphere()},lineStart:function(){for(var n=-1;++n<e;)t[n].lineStart()},lineEnd:function(){for(var n=-1;++n<e;)t[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<e;)t[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<e;)t[n].polygonEnd()}}}function ap(){function t(t){var e=t[0],n=t[1];return o=null,r.point(e,n),o||(i.point(e,n),o)||(a.point(e,n),o)}var e,n,r,i,a,o,s=rp(),l=np().rotate([154,0]).center([-2,58.5]).parallels([55,65]),u=np().rotate([157,0]).center([-3,19.9]).parallels([8,18]),c={point:function(t,e){o=[t,e]}};return t.invert=function(t){var e=s.scale(),n=s.translate(),r=(t[0]-n[0])/e,i=(t[1]-n[1])/e;return(i>=.12&&i<.234&&r>=-.425&&r<-.214?l:i>=.166&&i<.234&&r>=-.214&&r<-.115?u:s).invert(t)},t.stream=function(t){return e&&n===t?e:e=ip([s.stream(n=t),l.stream(t),u.stream(t)])},t.precision=function(e){return arguments.length?(s.precision(e),l.precision(e),u.precision(e),t):s.precision()},t.scale=function(e){return arguments.length?(s.scale(e),l.scale(.35*e),u.scale(e),t.translate(s.translate())):s.scale()},t.translate=function(e){if(!arguments.length)return s.translate();var n=s.scale(),o=+e[0],f=+e[1];return r=s.translate(e).clipExtent([[o-.455*n,f-.238*n],[o+.455*n,f+.238*n]]).stream(c),i=l.translate([o-.307*n,f+.201*n]).clipExtent([[o-.425*n+nx,f+.12*n+nx],[o-.214*n-nx,f+.234*n-nx]]).stream(c),a=u.translate([o-.205*n,f+.212*n]).clipExtent([[o-.214*n+nx,f+.166*n+nx],[o-.115*n-nx,f+.234*n-nx]]).stream(c),t},t.fitExtent=Xh(t),t.fitSize=Gh(t),t.scale(1070)}function op(t){return function(e,n){var r=hx(e),i=hx(n),a=t(r*i);return[a*i*yx(e),a*yx(n)]}}function sp(t){return function(e,n){var r=bx(e*e+n*n),i=t(r),a=yx(i),o=hx(i);return[dx(e*a,r*o),td(r&&n*a/r)]}}function lp(){return Zh(mw).scale(124.75).clipAngle(179.999)}function up(){return Zh(vw).scale(79.4188).clipAngle(179.999)}function cp(t,e){return[t,mx(xx((ax+e)/2))]}function fp(){return dp(cp).scale(961/sx)}function dp(t){var e,n=Zh(t),r=n.scale,i=n.translate,a=n.clipExtent;return n.scale=function(t){return arguments.length?(r(t),e&&n.clipExtent(null),n):r()},n.translate=function(t){return arguments.length?(i(t),e&&n.clipExtent(null),n):i()},n.clipExtent=function(t){if(!arguments.length)return e?null:a();if(e=null==t){var o=ix*r(),s=i();t=[[s[0]-o,s[1]-o],[s[0]+o,s[1]+o]]}return a(t),n},n.clipExtent(null)}function hp(t){return xx((ax+t)/2)}function pp(t,e){function n(t,e){a>0?e<-ax+nx&&(e=-ax+nx):e>ax-nx&&(e=ax-nx);var n=a/vx(hp(e),i);return[n*yx(i*t),a-n*hx(i*t)]}var r=hx(t),i=t===e?yx(t):mx(r/hx(e))/mx(hp(e)/hp(t)),a=r*vx(hp(t),i)/i;return i?(n.invert=function(t,e){var n=a-e,r=_x(i)*bx(t*t+n*n);return[dx(t,n)/i,2*fx(vx(a/r,1/i))-ax]},n):cp}function gp(){return tp(pp).scale(109.5).parallels([30,30])}function mp(t,e){return[t,e]}function vp(){return Zh(mp).scale(152.63)}function yp(t,e){function n(t,e){var n=a-e,r=i*t;return[n*yx(r),a-n*hx(r)]}var r=hx(t),i=t===e?yx(t):(r-hx(e))/(e-t),a=r/i+t;return cx(i)<nx?mp:(n.invert=function(t,e){var n=a-e;return[dx(t,n)/i,a-_x(i)*bx(t*t+n*n)]},n)}function _p(){return tp(yp).scale(131.154).center([0,13.9389])}function bp(t,e){var n=hx(e),r=hx(t)*n;return[n*yx(t)/r,yx(e)/r]}function xp(){return Zh(bp).scale(144.049).clipAngle(60)}function wp(t,e){return[hx(e)*yx(t),yx(e)]}function Cp(){return Zh(wp).scale(249.5).clipAngle(90+nx)}function kp(t,e){var n=hx(e),r=1+hx(t)*n;return[n*yx(t)/r,yx(e)/r]}function Sp(){return Zh(kp).scale(250).clipAngle(142)}function Tp(t,e){return[mx(xx((ax+e)/2)),-t]}function Ap(){var t=dp(Tp),e=t.center,n=t.rotate;return t.center=function(t){return arguments.length?e([-t[1],t[0]]):(t=e(),[t[1],-t[0]])},t.rotate=function(t){return arguments.length?n([t[0],t[1],t.length>2?t[2]+90:90]):(t=n(),[t[0],t[1],t[2]-90])},n([0,0,90]).scale(159.155)}var Ep="4.2.2",Mp=n(e),Dp=Mp.right,Pp=Mp.left,Op=Array.prototype,Np=Op.slice,Lp=Op.map,Ip=Math.sqrt(50),Rp=Math.sqrt(10),Bp=Math.sqrt(2),zp="$";O.prototype=N.prototype={constructor:O,has:function(t){return zp+t in this},get:function(t){return this[zp+t]},set:function(t,e){return this[zp+t]=e,this},remove:function(t){var e=zp+t;return e in this&&delete this[e]},clear:function(){for(var t in this)t[0]===zp&&delete this[t]},keys:function(){var t=[];for(var e in this)e[0]===zp&&t.push(e.slice(1));return t},values:function(){var t=[];for(var e in this)e[0]===zp&&t.push(this[e]);return t},entries:function(){var t=[];for(var e in this)e[0]===zp&&t.push({key:e.slice(1),value:this[e]});return t},size:function(){var t=0;for(var e in this)e[0]===zp&&++t;return t},empty:function(){for(var t in this)if(t[0]===zp)return!1;return!0},each:function(t){for(var e in this)e[0]===zp&&t(this[e],e.slice(1),this)}};var Fp=N.prototype;F.prototype=q.prototype={constructor:F,has:Fp.has,add:function(t){return t+="",this[zp+t]=t,this},remove:Fp.remove,clear:Fp.clear,values:Fp.keys,size:Fp.size,empty:Fp.empty,each:Fp.each};var qp=3,Hp=function t(e){function n(t){return Math.pow(t,e)}return e=+e,n.exponent=t,n}(qp),Up=function t(e){function n(t){return 1-Math.pow(1-t,e)}return e=+e,n.exponent=t,n}(qp),jp=function t(e){function n(t){return((t*=2)<=1?Math.pow(t,e):2-Math.pow(2-t,e))/2}return e=+e,n.exponent=t,n}(qp),Vp=Math.PI,$p=Vp/2,Wp=4/11,Gp=6/11,Xp=8/11,Yp=.75,Jp=9/11,Kp=10/11,Zp=.9375,Qp=21/22,tg=63/64,eg=1/Wp/Wp,ng=1.70158,rg=function t(e){function n(t){return t*t*((e+1)*t-e)}return e=+e,n.overshoot=t,n}(ng),ig=function t(e){function n(t){return--t*t*((e+1)*t+e)+1}return e=+e,n.overshoot=t,n}(ng),ag=function t(e){function n(t){return((t*=2)<1?t*t*((e+1)*t-e):(t-=2)*t*((e+1)*t+e)+2)/2}return e=+e,n.overshoot=t,n}(ng),og=2*Math.PI,sg=1,lg=.3,ug=function t(e,n){function r(t){return e*Math.pow(2,10*--t)*Math.sin((i-t)/n)}var i=Math.asin(1/(e=Math.max(1,e)))*(n/=og);return r.amplitude=function(e){return t(e,n*og)},r.period=function(n){return t(e,n)},r}(sg,lg),cg=function t(e,n){function r(t){return 1-e*Math.pow(2,-10*(t=+t))*Math.sin((t+i)/n)}var i=Math.asin(1/(e=Math.max(1,e)))*(n/=og);return r.amplitude=function(e){return t(e,n*og)},r.period=function(n){return t(e,n)},r}(sg,lg),fg=function t(e,n){function r(t){return((t=2*t-1)<0?e*Math.pow(2,10*t)*Math.sin((i-t)/n):2-e*Math.pow(2,-10*t)*Math.sin((i+t)/n))/2}var i=Math.asin(1/(e=Math.max(1,e)))*(n/=og);return r.amplitude=function(e){return t(e,n*og)},r.period=function(n){return t(e,n)},r}(sg,lg),dg=Math.PI,hg=2*dg,pg=1e-6,gg=hg-pg;Ct.prototype=kt.prototype={constructor:Ct,moveTo:function(t,e){this._.push("M",this._x0=this._x1=+t,",",this._y0=this._y1=+e)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._.push("Z"))},lineTo:function(t,e){this._.push("L",this._x1=+t,",",this._y1=+e)},quadraticCurveTo:function(t,e,n,r){this._.push("Q",+t,",",+e,",",this._x1=+n,",",this._y1=+r)},bezierCurveTo:function(t,e,n,r,i,a){this._.push("C",+t,",",+e,",",+n,",",+r,",",this._x1=+i,",",this._y1=+a)},arcTo:function(t,e,n,r,i){t=+t,e=+e,n=+n,r=+r,i=+i;var a=this._x1,o=this._y1,s=n-t,l=r-e,u=a-t,c=o-e,f=u*u+c*c;if(i<0)throw new Error("negative radius: "+i);if(null===this._x1)this._.push("M",this._x1=t,",",this._y1=e);else if(f>pg)if(Math.abs(c*s-l*u)>pg&&i){var d=n-a,h=r-o,p=s*s+l*l,g=d*d+h*h,m=Math.sqrt(p),v=Math.sqrt(f),y=i*Math.tan((dg-Math.acos((p+f-g)/(2*m*v)))/2),_=y/v,b=y/m;Math.abs(_-1)>pg&&this._.push("L",t+_*u,",",e+_*c),this._.push("A",i,",",i,",0,0,",+(c*d>u*h),",",this._x1=t+b*s,",",this._y1=e+b*l)}else this._.push("L",this._x1=t,",",this._y1=e)},arc:function(t,e,n,r,i,a){t=+t,e=+e,n=+n;var o=n*Math.cos(r),s=n*Math.sin(r),l=t+o,u=e+s,c=1^a,f=a?r-i:i-r;if(n<0)throw new Error("negative radius: "+n);null===this._x1?this._.push("M",l,",",u):(Math.abs(this._x1-l)>pg||Math.abs(this._y1-u)>pg)&&this._.push("L",l,",",u),n&&(f>gg?this._.push("A",n,",",n,",0,1,",c,",",t-o,",",e-s,"A",n,",",n,",0,1,",c,",",this._x1=l,",",this._y1=u):(f<0&&(f=f%hg+hg),this._.push("A",n,",",n,",0,",+(f>=dg),",",c,",",this._x1=t+n*Math.cos(i),",",this._y1=e+n*Math.sin(i))))},rect:function(t,e,n,r){this._.push("M",this._x0=this._x1=+t,",",this._y0=this._y1=+e,"h",+n,"v",+r,"h",-n,"Z")},toString:function(){return this._.join("")}};var mg=jt.prototype=Vt.prototype;mg.copy=function(){var t,e,n=new Vt(this._x,this._y,this._x0,this._y0,this._x1,this._y1),r=this._root;if(!r)return n;if(!r.length)return n._root=$t(r),n;for(t=[{source:r,target:n._root=new Array(4)}];r=t.pop();)for(var i=0;i<4;++i)(e=r.source[i])&&(e.length?t.push({source:e,target:r.target[i]=new Array(4)}):r.target[i]=$t(e));return n},mg.add=St,mg.addAll=At,mg.cover=Et,mg.data=Mt,mg.extent=Dt,mg.find=Ot,mg.remove=Nt,mg.removeAll=Lt,mg.root=It,mg.size=Rt,mg.visit=Bt,mg.visitAfter=zt,mg.x=qt,mg.y=Ut;var vg=[].slice,yg={};Wt.prototype=Zt.prototype={constructor:Wt,defer:function(t){if("function"!=typeof t||this._call)throw new Error;if(null!=this._error)return this;var e=vg.call(arguments,1);return e.push(t),++this._waiting,this._tasks.push(e),Gt(this),this},abort:function(){return null==this._error&&Jt(this,new Error("abort")),this},await:function(t){if("function"!=typeof t||this._call)throw new Error;return this._call=function(e,n){t.apply(null,[e].concat(n))},Kt(this),this},awaitAll:function(t){if("function"!=typeof t||this._call)throw new Error;return this._call=t,Kt(this),this}};var _g=1e-12,bg=Math.PI,xg=bg/2,wg=2*bg;ue.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e)}}};var Cg=_e(ce);ye.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(t,e){this._curve.point(e*Math.sin(t),e*-Math.cos(t))}};var kg={draw:function(t,e){var n=Math.sqrt(e/bg);t.moveTo(n,0),t.arc(0,0,n,0,wg)}},Sg={draw:function(t,e){var n=Math.sqrt(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},Tg=Math.sqrt(1/3),Ag=2*Tg,Eg={draw:function(t,e){var n=Math.sqrt(e/Ag),r=n*Tg;t.moveTo(0,-n),t.lineTo(r,0),t.lineTo(0,n),t.lineTo(-r,0),t.closePath()}},Mg=.8908130915292852,Dg=Math.sin(bg/10)/Math.sin(7*bg/10),Pg=Math.sin(wg/10)*Dg,Og=-Math.cos(wg/10)*Dg,Ng={draw:function(t,e){var n=Math.sqrt(e*Mg),r=Pg*n,i=Og*n;t.moveTo(0,-n),t.lineTo(r,i);for(var a=1;a<5;++a){var o=wg*a/5,s=Math.cos(o),l=Math.sin(o);t.lineTo(l*n,-s*n),t.lineTo(s*r-l*i,l*r+s*i)}t.closePath()}},Lg={draw:function(t,e){var n=Math.sqrt(e),r=-n/2;t.rect(r,r,n,n)}},Ig=Math.sqrt(3),Rg={draw:function(t,e){var n=-Math.sqrt(e/(3*Ig));t.moveTo(0,2*n),t.lineTo(-Ig*n,-n),t.lineTo(Ig*n,-n),t.closePath()}},Bg=-.5,zg=Math.sqrt(3)/2,Fg=1/Math.sqrt(12),qg=3*(Fg/2+1),Hg={draw:function(t,e){var n=Math.sqrt(e/qg),r=n/2,i=n*Fg,a=r,o=n*Fg+n,s=-a,l=o;t.moveTo(r,i),t.lineTo(a,o),t.lineTo(s,l),t.lineTo(Bg*r-zg*i,zg*r+Bg*i),t.lineTo(Bg*a-zg*o,zg*a+Bg*o),t.lineTo(Bg*s-zg*l,zg*s+Bg*l),t.lineTo(Bg*r+zg*i,Bg*i-zg*r),t.lineTo(Bg*a+zg*o,Bg*o-zg*a),t.lineTo(Bg*s+zg*l,Bg*l-zg*s),t.closePath()}},Ug=[kg,Sg,Eg,Lg,Ng,Rg,Hg];Te.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Se(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Se(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}},Ee.prototype={areaStart:ke,areaEnd:ke,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),
this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:Se(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}},De.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:Se(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}},Oe.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,e=this._y,n=t.length-1;if(n>0)for(var r,i=t[0],a=e[0],o=t[n]-i,s=e[n]-a,l=-1;++l<=n;)r=l/n,this._basis.point(this._beta*t[l]+(1-this._beta)*(i+r*o),this._beta*e[l]+(1-this._beta)*(a+r*s));this._x=this._y=null,this._basis.lineEnd()},point:function(t,e){this._x.push(+t),this._y.push(+e)}};var jg=function t(e){function n(t){return 1===e?new Te(t):new Oe(t,e)}return n.beta=function(e){return t(+e)},n}(.85);Le.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:Ne(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2,this._x1=t,this._y1=e;break;case 2:this._point=3;default:Ne(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Vg=function t(e){function n(t){return new Le(t,e)}return n.tension=function(e){return t(+e)},n}(0);Ie.prototype={areaStart:ke,areaEnd:ke,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:Ne(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var $g=function t(e){function n(t){return new Ie(t,e)}return n.tension=function(e){return t(+e)},n}(0);Re.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Ne(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Wg=function t(e){function n(t){return new Re(t,e)}return n.tension=function(e){return t(+e)},n}(0);ze.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this,this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3;default:Be(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Gg=function t(e){function n(t){return e?new ze(t,e):new Le(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);Fe.prototype={areaStart:ke,areaEnd:ke,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:Be(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Xg=function t(e){function n(t){return e?new Fe(t,e):new Ie(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);qe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Be(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Yg=function t(e){function n(t){return e?new qe(t,e):new Re(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);He.prototype={areaStart:ke,areaEnd:ke,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}},Ge.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:We(this,this._t0,$e(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,t!==this._x1||e!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,We(this,$e(this,n=Ve(this,t,e)),n);break;default:We(this,this._t0,n=Ve(this,t,e))}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}},(Xe.prototype=Object.create(Ge.prototype)).point=function(t,e){Ge.prototype.point.call(this,e,t)},Ye.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,i,a){this._context.bezierCurveTo(e,t,r,n,a,i)}},Ze.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),2===n)this._context.lineTo(t[1],e[1]);else for(var r=Qe(t),i=Qe(e),a=0,o=1;o<n;++a,++o)this._context.bezierCurveTo(r[0][a],i[0][a],r[1][a],i[1][a],t[o],e[o]);(this._line||0!==this._line&&1===n)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}},en.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}}this._x=t,this._y=e}};var Jg=Array.prototype.slice,Kg=.7,Zg=1/Kg,Qg=/^#([0-9a-f]{3})$/,tm=/^#([0-9a-f]{6})$/,em=/^rgb\(\s*([-+]?\d+)\s*,\s*([-+]?\d+)\s*,\s*([-+]?\d+)\s*\)$/,nm=/^rgb\(\s*([-+]?\d+(?:\.\d+)?)%\s*,\s*([-+]?\d+(?:\.\d+)?)%\s*,\s*([-+]?\d+(?:\.\d+)?)%\s*\)$/,rm=/^rgba\(\s*([-+]?\d+)\s*,\s*([-+]?\d+)\s*,\s*([-+]?\d+)\s*,\s*([-+]?\d+(?:\.\d+)?)\s*\)$/,im=/^rgba\(\s*([-+]?\d+(?:\.\d+)?)%\s*,\s*([-+]?\d+(?:\.\d+)?)%\s*,\s*([-+]?\d+(?:\.\d+)?)%\s*,\s*([-+]?\d+(?:\.\d+)?)\s*\)$/,am=/^hsl\(\s*([-+]?\d+(?:\.\d+)?)\s*,\s*([-+]?\d+(?:\.\d+)?)%\s*,\s*([-+]?\d+(?:\.\d+)?)%\s*\)$/,om=/^hsla\(\s*([-+]?\d+(?:\.\d+)?)\s*,\s*([-+]?\d+(?:\.\d+)?)%\s*,\s*([-+]?\d+(?:\.\d+)?)%\s*,\s*([-+]?\d+(?:\.\d+)?)\s*\)$/,sm={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};yn(bn,xn,{displayable:function(){return this.rgb().displayable()},toString:function(){return this.rgb()+""}}),yn(Tn,Sn,_n(bn,{brighter:function(t){return t=null==t?Zg:Math.pow(Zg,t),new Tn(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?Kg:Math.pow(Kg,t),new Tn(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return 0<=this.r&&this.r<=255&&0<=this.g&&this.g<=255&&0<=this.b&&this.b<=255&&0<=this.opacity&&this.opacity<=1},toString:function(){var t=this.opacity;return t=isNaN(t)?1:Math.max(0,Math.min(1,t)),(1===t?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}})),yn(Dn,Mn,_n(bn,{brighter:function(t){return t=null==t?Zg:Math.pow(Zg,t),new Dn(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?Kg:Math.pow(Kg,t),new Dn(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new Tn(Pn(t>=240?t-240:t+120,i,r),Pn(t,i,r),Pn(t<120?t+240:t-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1}}));var lm=Math.PI/180,um=180/Math.PI,cm=18,fm=.95047,dm=1,hm=1.08883,pm=4/29,gm=6/29,mm=3*gm*gm,vm=gm*gm*gm;yn(Ln,Nn,_n(bn,{brighter:function(t){return new Ln(this.l+cm*(null==t?1:t),this.a,this.b,this.opacity)},darker:function(t){return new Ln(this.l-cm*(null==t?1:t),this.a,this.b,this.opacity)},rgb:function(){var t=(this.l+16)/116,e=isNaN(this.a)?t:t+this.a/500,n=isNaN(this.b)?t:t-this.b/200;return t=dm*Rn(t),e=fm*Rn(e),n=hm*Rn(n),new Tn(Bn(3.2404542*e-1.5371385*t-.4985314*n),Bn(-.969266*e+1.8760108*t+.041556*n),Bn(.0556434*e-.2040259*t+1.0572252*n),this.opacity)}})),yn(Hn,qn,_n(bn,{brighter:function(t){return new Hn(this.h,this.c,this.l+cm*(null==t?1:t),this.opacity)},darker:function(t){return new Hn(this.h,this.c,this.l-cm*(null==t?1:t),this.opacity)},rgb:function(){return On(this).rgb()}}));var ym=-.14861,_m=1.78277,bm=-.29227,xm=-.90649,wm=1.97294,Cm=wm*xm,km=wm*_m,Sm=_m*bm-xm*ym;yn(Vn,jn,_n(bn,{brighter:function(t){return t=null==t?Zg:Math.pow(Zg,t),new Vn(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?Kg:Math.pow(Kg,t),new Vn(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=isNaN(this.h)?0:(this.h+120)*lm,e=+this.l,n=isNaN(this.s)?0:this.s*e*(1-e),r=Math.cos(t),i=Math.sin(t);return new Tn(255*(e+n*(ym*r+_m*i)),255*(e+n*(bm*r+xm*i)),255*(e+n*(wm*r)),this.opacity)}}));var Tm,Am,Em,Mm,Dm=function t(e){function n(t,e){var n=r((t=Sn(t)).r,(e=Sn(e)).r),i=r(t.g,e.g),a=r(t.b,e.b),o=r(t.opacity,e.opacity);return function(e){return t.r=n(e),t.g=i(e),t.b=a(e),t.opacity=o(e),t+""}}var r=Zn(e);return n.gamma=t,n}(1),Pm=tr(Wn),Om=tr(Gn),Nm=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Lm=new RegExp(Nm.source,"g"),Im=180/Math.PI,Rm={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1},Bm=hr(fr,"px, ","px)","deg)"),zm=hr(dr,", ",")",")"),Fm=Math.SQRT2,qm=2,Hm=4,Um=1e-12,jm=yr(Kn),Vm=yr(Qn),$m=br(Kn),Wm=br(Qn),Gm=xr(Kn),Xm=xr(Qn),Ym={value:function(){}};kr.prototype=Cr.prototype={constructor:kr,on:function(t,e){var n,r=this._,i=Sr(t+"",r),a=-1,o=i.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++a<o;)if(n=(t=i[a]).type)r[n]=Ar(r[n],t.name,e);else if(null==e)for(n in r)r[n]=Ar(r[n],t.name,null);return this}for(;++a<o;)if((n=(t=i[a]).type)&&(n=Tr(r[n],t.name)))return n},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new kr(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var n,r,i=new Array(n),a=0;a<n;++a)i[a]=arguments[a+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(r=this._[t],a=0,n=r.length;a<n;++a)r[a].value.apply(e,i)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,a=r.length;i<a;++i)r[i].value.apply(e,n)}};var Jm,Km,Zm=Pr(","),Qm=Zm.parse,tv=Zm.parseRows,ev=Zm.format,nv=Zm.formatRows,rv=Pr("\t"),iv=rv.parse,av=rv.parseRows,ov=rv.format,sv=rv.formatRows,lv=Ir("text/html",function(t){return document.createRange().createContextualFragment(t.responseText)}),uv=Ir("application/json",function(t){return JSON.parse(t.responseText)}),cv=Ir("text/plain",function(t){return t.responseText}),fv=Ir("application/xml",function(t){var e=t.responseXML;if(!e)throw new Error("parse error");return e}),dv=Rr("text/csv",Qm),hv=Rr("text/tab-separated-values",iv),pv=0,gv=0,mv=0,vv=1e3,yv=0,_v=0,bv=0,xv="object"==typeof performance&&performance.now?performance:Date,wv="function"==typeof requestAnimationFrame?xv===Date?function(t){requestAnimationFrame(function(){t(xv.now())})}:requestAnimationFrame:function(t){setTimeout(t,17)};qr.prototype=Hr.prototype={constructor:qr,restart:function(t,e,n){if("function"!=typeof t)throw new TypeError("callback is not a function");n=(null==n?zr():+n)+(null==e?0:+e),this._next||Km===this||(Km?Km._next=this:Jm=this,Km=this),this._call=t,this._time=n,Wr()},stop:function(){this._call&&(this._call=null,this._time=1/0,Wr())}};var Cv=new Date,kv=new Date,Sv=Yr(function(){},function(t,e){t.setTime(+t+e)},function(t,e){return e-t});Sv.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?Yr(function(e){e.setTime(Math.floor(e/t)*t)},function(e,n){e.setTime(+e+n*t)},function(e,n){return(n-e)/t}):Sv:null};var Tv=Sv.range,Av=1e3,Ev=6e4,Mv=36e5,Dv=864e5,Pv=6048e5,Ov=Yr(function(t){t.setTime(Math.floor(t/Av)*Av)},function(t,e){t.setTime(+t+e*Av)},function(t,e){return(e-t)/Av},function(t){return t.getUTCSeconds()}),Nv=Ov.range,Lv=Yr(function(t){t.setTime(Math.floor(t/Ev)*Ev)},function(t,e){t.setTime(+t+e*Ev)},function(t,e){return(e-t)/Ev},function(t){return t.getMinutes()}),Iv=Lv.range,Rv=Yr(function(t){var e=t.getTimezoneOffset()*Ev%Mv;e<0&&(e+=Mv),t.setTime(Math.floor((+t-e)/Mv)*Mv+e)},function(t,e){t.setTime(+t+e*Mv)},function(t,e){return(e-t)/Mv},function(t){return t.getHours()}),Bv=Rv.range,zv=Yr(function(t){t.setHours(0,0,0,0)},function(t,e){t.setDate(t.getDate()+e)},function(t,e){return(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Ev)/Dv},function(t){return t.getDate()-1}),Fv=zv.range,qv=Jr(0),Hv=Jr(1),Uv=Jr(2),jv=Jr(3),Vv=Jr(4),$v=Jr(5),Wv=Jr(6),Gv=qv.range,Xv=Hv.range,Yv=Uv.range,Jv=jv.range,Kv=Vv.range,Zv=$v.range,Qv=Wv.range,ty=Yr(function(t){t.setDate(1),t.setHours(0,0,0,0)},function(t,e){t.setMonth(t.getMonth()+e)},function(t,e){return e.getMonth()-t.getMonth()+12*(e.getFullYear()-t.getFullYear())},function(t){return t.getMonth()}),ey=ty.range,ny=Yr(function(t){t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,e){t.setFullYear(t.getFullYear()+e)},function(t,e){return e.getFullYear()-t.getFullYear()},function(t){return t.getFullYear()});ny.every=function(t){return isFinite(t=Math.floor(t))&&t>0?Yr(function(e){e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},function(e,n){e.setFullYear(e.getFullYear()+n*t)}):null};var ry=ny.range,iy=Yr(function(t){t.setUTCSeconds(0,0)},function(t,e){t.setTime(+t+e*Ev)},function(t,e){return(e-t)/Ev},function(t){return t.getUTCMinutes()}),ay=iy.range,oy=Yr(function(t){t.setUTCMinutes(0,0,0)},function(t,e){t.setTime(+t+e*Mv)},function(t,e){return(e-t)/Mv},function(t){return t.getUTCHours()}),sy=oy.range,ly=Yr(function(t){t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCDate(t.getUTCDate()+e)},function(t,e){return(e-t)/Dv},function(t){return t.getUTCDate()-1}),uy=ly.range,cy=Kr(0),fy=Kr(1),dy=Kr(2),hy=Kr(3),py=Kr(4),gy=Kr(5),my=Kr(6),vy=cy.range,yy=fy.range,_y=dy.range,by=hy.range,xy=py.range,wy=gy.range,Cy=my.range,ky=Yr(function(t){t.setUTCDate(1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCMonth(t.getUTCMonth()+e)},function(t,e){return e.getUTCMonth()-t.getUTCMonth()+12*(e.getUTCFullYear()-t.getUTCFullYear())},function(t){return t.getUTCMonth()}),Sy=ky.range,Ty=Yr(function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCFullYear(t.getUTCFullYear()+e)},function(t,e){return e.getUTCFullYear()-t.getUTCFullYear()},function(t){return t.getUTCFullYear()});Ty.every=function(t){return isFinite(t=Math.floor(t))&&t>0?Yr(function(e){e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},function(e,n){e.setUTCFullYear(e.getUTCFullYear()+n*t)}):null};var Ay,Ey=Ty.range,My={"":ei,"%":function(t,e){return(100*t).toFixed(e)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:function(t){return Math.round(t).toString(10)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},g:function(t,e){return t.toPrecision(e)},o:function(t){return Math.round(t).toString(8)},p:function(t,e){return ri(100*t,e)},r:ri,s:ni,X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}},Dy=/^(?:(.)?([<>=^]))?([+\-\( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?([a-z%])?$/i;ai.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(null==this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(null==this.precision?"":"."+Math.max(0,0|this.precision))+this.type};var Py,Oy=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];li({decimal:".",thousands:",",grouping:[3],currency:["$",""]});var Ny,Ly={"-":"",_:" ",0:"0"},Iy=/^\s*\d+/,Ry=/^%/,By=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g;ua({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var zy="%Y-%m-%dT%H:%M:%S.%LZ",Fy=Date.prototype.toISOString?ca:t.utcFormat(zy),qy=+new Date("2000-01-01T00:00:00.000Z")?fa:t.utcParse(zy),Hy=Array.prototype,Uy=Hy.map,jy=Hy.slice,Vy={name:"implicit"},$y=[0,1],Wy=1e3,Gy=60*Wy,Xy=60*Gy,Yy=24*Xy,Jy=7*Yy,Ky=30*Yy,Zy=365*Yy,Qy=Xa("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),t_=Xa("393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6"),e_=Xa("3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9"),n_=Xa("1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5"),r_=Xm(jn(300,.5,0),jn(-240,.5,1)),i_=Xm(jn(-100,.75,.35),jn(80,1.5,.8)),a_=Xm(jn(260,.75,.35),jn(80,1.5,.8)),o_=jn(),s_=Ja(Xa("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725")),l_=Ja(Xa("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),u_=Ja(Xa("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),c_=Ja(Xa("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921")),f_="http://www.w3.org/1999/xhtml",d_={svg:"http://www.w3.org/2000/svg",xhtml:f_,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},h_=0;ro.prototype=no.prototype={constructor:ro,get:function(t){for(var e=this._;!(e in t);)if(!(t=t.parentNode))return;return t[e]},set:function(t,e){return t[this._]=e},remove:function(t){return this._ in t&&delete t[this._]},toString:function(){return this._}};var p_=function(t){return function(){return this.matches(t)}};if("undefined"!=typeof document){var g_=document.documentElement;if(!g_.matches){var m_=g_.webkitMatchesSelector||g_.msMatchesSelector||g_.mozMatchesSelector||g_.oMatchesSelector;p_=function(t){return function(){return m_.call(this,t)}}}}var v_=p_,y_={};if(t.event=null,"undefined"!=typeof document){var __=document.documentElement;"onmouseenter"in __||(y_={mouseenter:"mouseover",mouseleave:"mouseout"})}ko.prototype={constructor:ko,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};var b_="$";is.prototype={add:function(t){var e=this._names.indexOf(t);
e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var x_=[null];Ns.prototype=Ls.prototype={constructor:Ns,select:vo,selectAll:bo,filter:xo,data:Eo,enter:Co,exit:Mo,merge:Do,order:Po,sort:Oo,call:Lo,nodes:Io,node:Ro,size:Bo,empty:zo,each:Fo,attr:Wo,style:Ko,property:es,classed:cs,text:ps,html:ys,raise:bs,lower:ws,append:Cs,insert:Ss,remove:As,datum:Es,on:uo,dispatch:Os};var w_=Cr("start","end","interrupt"),C_=[],k_=0,S_=1,T_=2,A_=3,E_=4,M_=5,D_=Ls.prototype.constructor,P_=0,O_=Ls.prototype;Rl.prototype=Bl.prototype={constructor:Rl,select:wl,selectAll:Cl,filter:gl,merge:ml,selection:kl,transition:Il,call:O_.call,nodes:O_.nodes,node:O_.node,size:O_.size,empty:O_.empty,each:O_.each,on:_l,attr:rl,attrTween:ol,style:Ml,styleTween:Pl,text:Ll,remove:xl,tween:Xs,delay:ul,duration:dl,ease:pl};var N_={time:null,delay:0,duration:250,ease:nt};Ls.prototype.interrupt=$s,Ls.prototype.transition=ql;var L_=[null],I_=Array.prototype.slice,R_=1,B_=2,z_=3,F_=4,q_=1e-6;wu.prototype=vu.prototype={constructor:wu,each:ou,eachAfter:lu,eachBefore:su,sum:uu,sort:cu,path:fu,ancestors:hu,descendants:pu,leaves:gu,links:mu,copy:yu};var H_="$",U_={depth:-1},j_={};ic.prototype=Object.create(wu.prototype);var V_=(1+Math.sqrt(5))/2,$_=function t(e){function n(t,n,r,i,a){lc(e,t,n,r,i,a)}return n.ratio=function(e){return t((e=+e)>1?e:1)},n}(V_),W_=function t(e){function n(t,n,r,i,a){if((o=t._squarify)&&o.ratio===e)for(var o,s,l,u,c,f=-1,d=o.length,h=t.value;++f<d;){for(s=o[f],l=s.children,u=s.value=0,c=l.length;u<c;++u)s.value+=l[u].value;s.dice?Gu(s,n,r,i,r+=(a-r)*s.value/h):sc(s,n,r,n+=(i-n)*s.value/h,a),h-=s.value}else t._squarify=o=lc(e,t,n,r,i,a),o.ratio=e}return n.ratio=function(e){return t((e=+e)>1?e:1)},n}(V_),G_=10,X_=Math.PI*(3-Math.sqrt(5));Pc.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t},Fc.prototype={constructor:Fc,insert:function(t,e){var n,r,i;if(t){if(e.P=t,e.N=t.N,t.N&&(t.N.P=e),t.N=e,t.R){for(t=t.R;t.L;)t=t.L;t.L=e}else t.R=e;n=t}else this._?(t=jc(this._),e.P=null,e.N=t,t.P=t.L=e,n=t):(e.P=e.N=null,this._=e,n=null);for(e.L=e.R=null,e.U=n,e.C=!0,t=e;n&&n.C;)r=n.U,n===r.L?(i=r.R,i&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.R&&(Hc(this,n),t=n,n=t.U),n.C=!1,r.C=!0,Uc(this,r))):(i=r.L,i&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.L&&(Uc(this,n),t=n,n=t.U),n.C=!1,r.C=!0,Hc(this,r))),n=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var e,n,r,i=t.U,a=t.L,o=t.R;if(n=a?o?jc(o):a:o,i?i.L===t?i.L=n:i.R=n:this._=n,a&&o?(r=n.C,n.C=t.C,n.L=a,a.U=n,n!==o?(i=n.U,n.U=t.U,t=n.R,i.L=t,n.R=o,o.U=n):(n.U=i,i=n,t=n.R)):(r=t.C,t=n),t&&(t.U=i),!r){if(t&&t.C)return void(t.C=!1);do{if(t===this._)break;if(t===i.L){if(e=i.R,e.C&&(e.C=!1,i.C=!0,Hc(this,i),e=i.R),e.L&&e.L.C||e.R&&e.R.C){e.R&&e.R.C||(e.L.C=!1,e.C=!0,Uc(this,e),e=i.R),e.C=i.C,i.C=e.R.C=!1,Hc(this,i),t=this._;break}}else if(e=i.L,e.C&&(e.C=!1,i.C=!0,Uc(this,i),e=i.L),e.L&&e.L.C||e.R&&e.R.C){e.L&&e.L.C||(e.R.C=!1,e.C=!0,Hc(this,e),e=i.L),e.C=i.C,i.C=e.L.C=!1,Uc(this,i),t=this._;break}e.C=!0,t=i,i=i.U}while(!t.C);t&&(t.C=!1)}}};var Y_,J_,K_,Z_,Q_,tb=[],eb=[],nb=1e-6,rb=1e-12;gf.prototype={constructor:gf,polygons:function(){var t=this.edges;return this.cells.map(function(e){var n=e.halfedges.map(function(n){return Zc(e,t[n])});return n.data=e.site.data,n})},triangles:function(){var t=[],e=this.edges;return this.cells.forEach(function(n,r){for(var i,a=n.site,o=n.halfedges,s=-1,l=o.length,u=e[o[l-1]],c=u.left===a?u.right:u.left;++s<l;)i=c,u=e[o[s]],c=u.left===a?u.right:u.left,r<i.index&&r<c.index&&hf(a,i,c)<0&&t.push([a.data,i.data,c.data])}),t},links:function(){return this.edges.filter(function(t){return t.right}).map(function(t){return{source:t.left.data,target:t.right.data}})}},_f.prototype={constructor:_f,scale:function(t){return 1===t?this:new _f(this.k*t,this.x,this.y)},translate:function(t,e){return 0===t&0===e?this:new _f(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var ib=new _f(1,0,0);bf.prototype=_f.prototype;var ab={name:"drag"},ob={name:"space"},sb={name:"handle"},lb={name:"center"},ub={name:"x",handles:["e","w"].map(Pf),input:function(t,e){return t&&[[t[0],e[0][1]],[t[1],e[1][1]]]},output:function(t){return t&&[t[0][0],t[1][0]]}},cb={name:"y",handles:["n","s"].map(Pf),input:function(t,e){return t&&[[e[0][0],t[0]],[e[1][0],t[1]]]},output:function(t){return t&&[t[0][1],t[1][1]]}},fb={name:"xy",handles:["n","e","s","w","nw","ne","se","sw"].map(Pf),input:function(t){return t},output:function(t){return t}},db={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},hb={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},pb={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},gb={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},mb={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1},vb=Math.cos,yb=Math.sin,_b=Math.PI,bb=_b/2,xb=2*_b,wb=Math.max,Cb=Array.prototype.slice;Kf.prototype={constructor:Kf,reset:function(){this.s=this.t=0},add:function(t){Zf(ex,t,this.t),Zf(this,ex.s,this.s),this.s?this.t+=ex.t:this.s=ex.t},valueOf:function(){return this.s}};var kb,Sb,Tb,Ab,Eb,Mb,Db,Pb,Ob,Nb,Lb,Ib,Rb,Bb,zb,Fb,qb,Hb,Ub,jb,Vb,$b,Wb,Gb,Xb,Yb,Jb,Kb,Zb,Qb,tx,ex=new Kf,nx=1e-6,rx=1e-12,ix=Math.PI,ax=ix/2,ox=ix/4,sx=2*ix,lx=180/ix,ux=ix/180,cx=Math.abs,fx=Math.atan,dx=Math.atan2,hx=Math.cos,px=Math.ceil,gx=Math.exp,mx=Math.log,vx=Math.pow,yx=Math.sin,_x=Math.sign||function(t){return t>0?1:t<0?-1:0},bx=Math.sqrt,xx=Math.tan,wx={Feature:function(t,e){rd(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,r=-1,i=n.length;++r<i;)rd(n[r].geometry,e)}},Cx={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)t=n[r],e.point(t[0],t[1],t[2])},LineString:function(t,e){id(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)id(n[r],e,0)},Polygon:function(t,e){ad(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)ad(n[r],e)},GeometryCollection:function(t,e){for(var n=t.geometries,r=-1,i=n.length;++r<i;)rd(n[r],e)}},kx=Jf(),Sx=Jf(),Tx={point:nd,lineStart:nd,lineEnd:nd,polygonStart:function(){kx.reset(),Tx.lineStart=sd,Tx.lineEnd=ld},polygonEnd:function(){var t=+kx;Sx.add(t<0?sx+t:t),this.lineStart=this.lineEnd=this.point=nd},sphere:function(){Sx.add(sx)}},Ax=Jf(),Ex={point:_d,lineStart:xd,lineEnd:wd,polygonStart:function(){Ex.point=Cd,Ex.lineStart=kd,Ex.lineEnd=Sd,Ax.reset(),Tx.polygonStart()},polygonEnd:function(){Tx.polygonEnd(),Ex.point=_d,Ex.lineStart=xd,Ex.lineEnd=wd,kx<0?(Mb=-(Pb=180),Db=-(Ob=90)):Ax>nx?Ob=90:Ax<-nx&&(Db=-90),zb[0]=Mb,zb[1]=Pb}},Mx={sphere:nd,point:Dd,lineStart:Od,lineEnd:Id,polygonStart:function(){Mx.lineStart=Rd,Mx.lineEnd=Bd},polygonEnd:function(){Mx.lineStart=Od,Mx.lineEnd=Id}};jd.invert=jd;var Dx,Px,Ox,Nx,Lx,Ix,Rx,Bx,zx,Fx,qx,Hx=1e9,Ux=-Hx,jx=Jf(),Vx={sphere:nd,point:nd,lineStart:oh,lineEnd:nd,polygonStart:nd,polygonEnd:nd},$x=[null,null],Wx={type:"LineString",coordinates:$x},Gx=Jf(),Xx=Jf(),Yx={point:nd,lineStart:nd,lineEnd:nd,polygonStart:function(){Yx.lineStart=vh,Yx.lineEnd=bh},polygonEnd:function(){Yx.lineStart=Yx.lineEnd=Yx.point=nd,Gx.add(cx(Xx)),Xx.reset()},result:function(){var t=Gx/2;return Gx.reset(),t}},Jx=1/0,Kx=Jx,Zx=-Jx,Qx=Zx,tw={point:xh,lineStart:nd,lineEnd:nd,polygonStart:nd,polygonEnd:nd,result:function(){var t=[[Jx,Kx],[Zx,Qx]];return Zx=Qx=-(Kx=Jx=1/0),t}},ew=0,nw=0,rw=0,iw=0,aw=0,ow=0,sw=0,lw=0,uw=0,cw={point:wh,lineStart:Ch,lineEnd:Th,polygonStart:function(){cw.lineStart=Ah,cw.lineEnd=Eh},polygonEnd:function(){cw.point=wh,cw.lineStart=Ch,cw.lineEnd=Th},result:function(){var t=uw?[sw/uw,lw/uw]:ow?[iw/ow,aw/ow]:rw?[ew/rw,nw/rw]:[NaN,NaN];return ew=nw=rw=iw=aw=ow=sw=lw=uw=0,t}},fw=Jf(),dw=Rh(function(){return!0},Fh,Hh,[-ix,-ax]);$h.prototype={point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var hw=16,pw=hx(30*ux),gw=Vh({point:function(t,e){this.stream.point(t*ux,e*ux)}}),mw=op(function(t){return bx(2/(1+t))});mw.invert=sp(function(t){return 2*td(t/2)});var vw=op(function(t){return(t=Qf(t))&&t/yx(t)});vw.invert=sp(function(t){return t}),cp.invert=function(t,e){return[t,2*fx(gx(e))-ax]},mp.invert=mp,bp.invert=sp(fx),wp.invert=sp(td),kp.invert=sp(function(t){return 2*fx(t)}),Tp.invert=function(t,e){return[-e,2*fx(gx(t))-ax]},t.version=Ep,t.bisect=Dp,t.bisectRight=Dp,t.bisectLeft=Pp,t.ascending=e,t.bisector=n,t.descending=i,t.deviation=s,t.extent=l,t.histogram=g,t.thresholdFreedmanDiaconis=v,t.thresholdScott=y,t.thresholdSturges=p,t.max=_,t.mean=b,t.median=x,t.merge=w,t.min=C,t.pairs=k,t.permute=S,t.quantile=m,t.range=f,t.scan=T,t.shuffle=A,t.sum=E,t.ticks=d,t.tickStep=h,t.transpose=M,t.variance=o,t.zip=P,t.entries=j,t.keys=H,t.values=U,t.map=N,t.set=q,t.nest=L,t.randomUniform=V,t.randomNormal=$,t.randomLogNormal=W,t.randomBates=X,t.randomIrwinHall=G,t.randomExponential=Y,t.easeLinear=J,t.easeQuad=Q,t.easeQuadIn=K,t.easeQuadOut=Z,t.easeQuadInOut=Q,t.easeCubic=nt,t.easeCubicIn=tt,t.easeCubicOut=et,t.easeCubicInOut=nt,t.easePoly=jp,t.easePolyIn=Hp,t.easePolyOut=Up,t.easePolyInOut=jp,t.easeSin=at,t.easeSinIn=rt,t.easeSinOut=it,t.easeSinInOut=at,t.easeExp=lt,t.easeExpIn=ot,t.easeExpOut=st,t.easeExpInOut=lt,t.easeCircle=ft,t.easeCircleIn=ut,t.easeCircleOut=ct,t.easeCircleInOut=ft,t.easeBounce=ht,t.easeBounceIn=dt,t.easeBounceOut=ht,t.easeBounceInOut=pt,t.easeBack=ag,t.easeBackIn=rg,t.easeBackOut=ig,t.easeBackInOut=ag,t.easeElastic=cg,t.easeElasticIn=ug,t.easeElasticOut=cg,t.easeElasticInOut=fg,t.polygonArea=gt,t.polygonCentroid=mt,t.polygonHull=bt,t.polygonContains=xt,t.polygonLength=wt,t.path=kt,t.quadtree=jt,t.queue=Zt,t.arc=le,t.area=pe,t.line=he,t.pie=ve,t.radialArea=we,t.radialLine=xe,t.symbol=Ce,t.symbols=Ug,t.symbolCircle=kg,t.symbolCross=Sg,t.symbolDiamond=Eg,t.symbolSquare=Lg,t.symbolStar=Ng,t.symbolTriangle=Rg,t.symbolWye=Hg,t.curveBasisClosed=Me,t.curveBasisOpen=Pe,t.curveBasis=Ae,t.curveBundle=jg,t.curveCardinalClosed=$g,t.curveCardinalOpen=Wg,t.curveCardinal=Vg,t.curveCatmullRomClosed=Xg,t.curveCatmullRomOpen=Yg,t.curveCatmullRom=Gg,t.curveLinearClosed=Ue,t.curveLinear=ce,t.curveMonotoneX=Je,t.curveMonotoneY=Ke,t.curveNatural=tn,t.curveStep=nn,t.curveStepAfter=an,t.curveStepBefore=rn,t.stack=un,t.stackOffsetExpand=cn,t.stackOffsetNone=on,t.stackOffsetSilhouette=fn,t.stackOffsetWiggle=dn,t.stackOrderAscending=hn,t.stackOrderDescending=gn,t.stackOrderInsideOut=mn,t.stackOrderNone=sn,t.stackOrderReverse=vn,t.color=xn,t.rgb=Sn,t.hsl=Mn,t.lab=Nn,t.hcl=qn,t.cubehelix=jn,t.interpolate=lr,t.interpolateArray=er,t.interpolateDate=nr,t.interpolateNumber=rr,t.interpolateObject=ir,t.interpolateRound=ur,t.interpolateString=sr,t.interpolateTransformCss=Bm,t.interpolateTransformSvg=zm,t.interpolateZoom=vr,t.interpolateRgb=Dm,t.interpolateRgbBasis=Pm,t.interpolateRgbBasisClosed=Om,t.interpolateHsl=jm,t.interpolateHslLong=Vm,t.interpolateLab=_r,t.interpolateHcl=$m,t.interpolateHclLong=Wm,t.interpolateCubehelix=Gm,t.interpolateCubehelixLong=Xm,t.interpolateBasis=Wn,t.interpolateBasisClosed=Gn,t.quantize=wr,t.dispatch=Cr,t.dsvFormat=Pr,t.csvParse=Qm,t.csvParseRows=tv,t.csvFormat=ev,t.csvFormatRows=nv,t.tsvParse=iv,t.tsvParseRows=av,t.tsvFormat=ov,t.tsvFormatRows=sv,t.request=Or,t.html=lv,t.json=uv,t.text=cv,t.xml=fv,t.csv=dv,t.tsv=hv,t.now=zr,t.timer=Hr,t.timerFlush=Ur,t.timeout=Gr,t.interval=Xr,t.timeInterval=Yr,t.timeMillisecond=Sv,t.timeMilliseconds=Tv,t.timeSecond=Ov,t.timeSeconds=Nv,t.timeMinute=Lv,t.timeMinutes=Iv,t.timeHour=Rv,t.timeHours=Bv,t.timeDay=zv,t.timeDays=Fv,t.timeWeek=qv;t.timeWeeks=Gv;t.timeSunday=qv,t.timeSundays=Gv,t.timeMonday=Hv,t.timeMondays=Xv,t.timeTuesday=Uv,t.timeTuesdays=Yv,t.timeWednesday=jv,t.timeWednesdays=Jv,t.timeThursday=Vv,t.timeThursdays=Kv,t.timeFriday=$v,t.timeFridays=Zv,t.timeSaturday=Wv,t.timeSaturdays=Qv,t.timeMonth=ty,t.timeMonths=ey,t.timeYear=ny,t.timeYears=ry,t.utcMillisecond=Sv,t.utcMilliseconds=Tv,t.utcSecond=Ov,t.utcSeconds=Nv,t.utcMinute=iy,t.utcMinutes=ay,t.utcHour=oy,t.utcHours=sy,t.utcDay=ly,t.utcDays=uy,t.utcWeek=cy,t.utcWeeks=vy,t.utcSunday=cy,t.utcSundays=vy,t.utcMonday=fy,t.utcMondays=yy,t.utcTuesday=dy,t.utcTuesdays=_y,t.utcWednesday=hy,t.utcWednesdays=by,t.utcThursday=py,t.utcThursdays=xy,t.utcFriday=gy,t.utcFridays=wy,t.utcSaturday=my,t.utcSaturdays=Cy,t.utcMonth=ky,t.utcMonths=Sy,t.utcYear=Ty,t.utcYears=Ey,t.formatLocale=si,t.formatDefaultLocale=li,t.formatSpecifier=ii,t.precisionFixed=ui,t.precisionPrefix=ci,t.precisionRound=fi,t.isoFormat=Fy,t.isoParse=qy,t.timeFormatLocale=gi,t.timeFormatDefaultLocale=ua,t.scaleBand=ha,t.scalePoint=ga,t.scaleIdentity=Ea,t.scaleLinear=Aa,t.scaleLog=Ra,t.scaleOrdinal=da,t.scaleImplicit=Vy,t.scalePow=za,t.scaleSqrt=Fa,t.scaleQuantile=qa,t.scaleQuantize=Ha,t.scaleThreshold=Ua,t.scaleTime=Wa,t.scaleUtc=Ga,t.schemeCategory10=Qy,t.schemeCategory20b=t_,t.schemeCategory20c=e_,t.schemeCategory20=n_,t.scaleSequential=Ka,t.interpolateCubehelixDefault=r_,t.interpolateRainbow=Ya,t.interpolateWarm=i_,t.interpolateCool=a_,t.interpolateViridis=s_,t.interpolateMagma=l_,t.interpolateInferno=u_,t.interpolatePlasma=c_,t.creator=eo,t.customEvent=co,t.local=no,t.matcher=v_,t.mouse=po,t.namespace=Za,t.namespaces=d_,t.select=Is,t.selectAll=Rs,t.selection=Ls,t.selector=mo,t.selectorAll=_o,t.touch=Bs,t.touches=zs,t.window=Go,t.active=Hl,t.interrupt=Vs,t.transition=Bl,t.axisTop=Xl,t.axisRight=Yl,t.axisBottom=Jl,t.axisLeft=Kl,t.cluster=au,t.hierarchy=vu,t.pack=Uu,t.packSiblings=Ru,t.packEnclose=Su,t.partition=Xu,t.stratify=Ku,t.tree=oc,t.treemap=uc,t.treemapBinary=cc,t.treemapDice=Gu,t.treemapSlice=sc,t.treemapSliceDice=fc,t.treemapSquarify=$_,t.treemapResquarify=W_,t.forceCenter=dc,t.forceCollide=vc,t.forceLink=_c,t.forceManyBody=Cc,t.forceSimulation=wc,t.forceX=kc,t.forceY=Sc,t.drag=Ic,t.dragDisable=Ec,t.dragEnable=Mc,t.voronoi=mf,t.zoom=Tf,t.zoomIdentity=ib,t.zoomTransform=bf,t.brush=Ff,t.brushX=Bf,t.brushY=zf,t.brushSelection=Rf,t.chord=Uf,t.ribbon=Yf,t.geoAlbers=rp,t.geoAlbersUsa=ap,t.geoArea=fd,t.geoAzimuthalEqualArea=lp,t.geoAzimuthalEqualAreaRaw=mw,t.geoAzimuthalEquidistant=up,t.geoAzimuthalEquidistantRaw=vw,t.geoBounds=Md,t.geoCentroid=qd,t.geoCircle=Kd,t.geoClipExtent=ah,t.geoConicConformal=gp,t.geoConicConformalRaw=pp,t.geoConicEqualArea=np,t.geoConicEqualAreaRaw=ep,t.geoConicEquidistant=_p,t.geoConicEquidistantRaw=yp,t.geoDistance=fh,t.geoEquirectangular=vp,t.geoEquirectangularRaw=mp,t.geoGnomonic=xp,t.geoGnomonicRaw=bp,t.geoGraticule=ph,t.geoInterpolate=gh,t.geoLength=ch,t.geoMercator=fp,t.geoMercatorRaw=cp,t.geoOrthographic=Cp,t.geoOrthographicRaw=wp,t.geoPath=Lh,t.geoProjection=Zh,t.geoProjectionMutator=Qh,t.geoRotation=Xd,t.geoStereographic=Sp,t.geoStereographicRaw=kp,t.geoStream=od,t.geoTransform=jh,t.geoTransverseMercator=Ap,t.geoTransverseMercatorRaw=Tp,Object.defineProperty(t,"__esModule",{value:!0})}),!function(){function t(t,e){"use strict";var n={version:"2.0.0-beta.32",constants:{CHART_CLASS:"dc-chart",DEBUG_GROUP_CLASS:"debug",STACK_CLASS:"stack",DESELECTED_CLASS:"deselected",SELECTED_CLASS:"selected",NODE_INDEX_NAME:"__index__",GROUP_INDEX_NAME:"__group_index__",DEFAULT_CHART_GROUP:"__default_chart_group__",EVENT_DELAY:40,NEGLIGIBLE_NUMBER:1e-10},_renderlet:null};n.chartRegistry=function(){function t(t){return t||(t=n.constants.DEFAULT_CHART_GROUP),e[t]||(e[t]=[]),t}var e={};return{has:function(t){for(var n in e)if(e[n].indexOf(t)>=0)return!0;return!1},register:function(n,r){r=t(r),e[r].push(n)},deregister:function(n,r){r=t(r);for(var i=0;i<e[r].length;i++)if(e[r][i].anchorName()===n.anchorName()){e[r].splice(i,1);break}},clear:function(t){t?delete e[t]:e={}},list:function(n){return n=t(n),e[n]}}}(),n.registerChart=function(t,e){n.chartRegistry.register(t,e)},n.deregisterChart=function(t,e){n.chartRegistry.deregister(t,e)},n.hasChart=function(t){return n.chartRegistry.has(t)},n.deregisterAllCharts=function(t){n.chartRegistry.clear(t)},n.filterAll=function(t){for(var e=n.chartRegistry.list(t),r=0;r<e.length;++r)e[r].filterAll()},n.refocusAll=function(t){for(var e=n.chartRegistry.list(t),r=0;r<e.length;++r)e[r].focus&&e[r].focus()},n.renderAll=function(t){for(var e=n.chartRegistry.list(t),r=0;r<e.length;++r)e[r].render();null!==n._renderlet&&n._renderlet(t)},n.redrawAll=function(t){for(var e=n.chartRegistry.list(t),r=0;r<e.length;++r)e[r].redraw();null!==n._renderlet&&n._renderlet(t)},n.disableTransitions=!1,n.transition=function(t,e,r,i){if(0>=e||void 0===e||n.disableTransitions)return t;var a=t.transition(i).duration(e);return"function"==typeof r&&r(a),a},n.optionalTransition=function(t,e,r,i){return t?function(t){return n.transition(t,e,r,i)}:function(t){return t}},n.afterTransition=function(t,e){if(t.empty()||!t.duration)e.call(t);else{var n=0;t.each(function(){++n}).each("end",function(){--n||e.call(t)})}},n.units={},n.units.integers=function(t,e){return Math.abs(e-t)},n.units.ordinal=function(t,e,n){return n},n.units.fp={},n.units.fp.precision=function(t){var e=function(t,r){var i=Math.abs((r-t)/e.resolution);return n.utils.isNegligible(i-Math.floor(i))?Math.floor(i):Math.ceil(i)};return e.resolution=t,e},n.round={},n.round.floor=function(t){return Math.floor(t)},n.round.ceil=function(t){return Math.ceil(t)},n.round.round=function(t){return Math.round(t)},n.override=function(t,e,n){var r=t[e];t["_"+e]=r,t[e]=n},n.renderlet=function(t){return arguments.length?(n._renderlet=t,n):n._renderlet},n.instanceOfChart=function(t){return t instanceof Object&&t.__dcFlag__&&!0},n.errors={},n.errors.Exception=function(t){var e=t||"Unexpected internal error";this.message=e,this.toString=function(){return e},this.stack=(new Error).stack},n.errors.Exception.prototype=Object.create(Error.prototype),n.errors.Exception.prototype.constructor=n.errors.Exception,n.errors.InvalidStateException=function(){n.errors.Exception.apply(this,arguments)},n.errors.InvalidStateException.prototype=Object.create(n.errors.Exception.prototype),n.errors.InvalidStateException.prototype.constructor=n.errors.InvalidStateException,n.errors.BadArgumentException=function(){n.errors.Exception.apply(this,arguments)},n.errors.BadArgumentException.prototype=Object.create(n.errors.Exception.prototype),n.errors.BadArgumentException.prototype.constructor=n.errors.BadArgumentException,n.dateFormat=t.time.format("%m/%d/%Y"),n.printers={},n.printers.filters=function(t){for(var e="",r=0;r<t.length;++r)r>0&&(e+=", "),e+=n.printers.filter(t[r]);return e},n.printers.filter=function(t){var e="";return"undefined"!=typeof t&&null!==t&&(t instanceof Array?t.length>=2?e="["+n.utils.printSingleValue(t[0])+" -> "+n.utils.printSingleValue(t[1])+"]":t.length>=1&&(e=n.utils.printSingleValue(t[0])):e=n.utils.printSingleValue(t)),e},n.pluck=function(t,e){return e?function(n,r){return e.call(n,n[t],r)}:function(e){return e[t]}},n.utils={},n.utils.printSingleValue=function(t){var e=""+t;return t instanceof Date?e=n.dateFormat(t):"string"==typeof t?e=t:n.utils.isFloat(t)?e=n.utils.printSingleValue.fformat(t):n.utils.isInteger(t)&&(e=Math.round(t)),e},n.utils.printSingleValue.fformat=t.format(".2f"),n.utils.add=function(t,e){if("string"==typeof e&&(e=e.replace("%","")),t instanceof Date){"string"==typeof e&&(e=+e);var n=new Date;return n.setTime(t.getTime()),n.setDate(t.getDate()+e),n}if("string"==typeof e){var r=+e/100;return t>0?t*(1+r):t*(1-r)}return t+e},n.utils.subtract=function(t,e){if("string"==typeof e&&(e=e.replace("%","")),t instanceof Date){"string"==typeof e&&(e=+e);var n=new Date;return n.setTime(t.getTime()),n.setDate(t.getDate()-e),n}if("string"==typeof e){var r=+e/100;return 0>t?t*(1+r):t*(1-r)}return t-e},n.utils.isNumber=function(t){return t===+t},n.utils.isFloat=function(t){return t===+t&&t!==(0|t)},n.utils.isInteger=function(t){return t===+t&&t===(0|t)},n.utils.isNegligible=function(t){return!n.utils.isNumber(t)||t<n.constants.NEGLIGIBLE_NUMBER&&t>-n.constants.NEGLIGIBLE_NUMBER},n.utils.clamp=function(t,e,n){return e>t?e:t>n?n:t};var r=0;return n.utils.uniqueId=function(){return++r},n.utils.nameToId=function(t){return t.toLowerCase().replace(/[\s]/g,"_").replace(/[\.']/g,"")},n.utils.appendOrSelect=function(t,e,n){n=n||e;var r=t.select(e);return r.empty()&&(r=t.append(n)),r},n.utils.safeNumber=function(t){return n.utils.isNumber(+t)?+t:0},n.logger={},n.logger.enableDebugLog=!1,n.logger.warn=function(t){return console&&(console.warn?console.warn(t):console.log&&console.log(t)),n.logger},n.logger.debug=function(t){return n.logger.enableDebugLog&&console&&(console.debug?console.debug(t):console.log&&console.log(t)),n.logger},n.logger.deprecate=function(t,e){function r(){return i||(n.logger.warn(e),i=!0),t.apply(this,arguments)}var i=!1;return r},n.events={current:null},n.events.trigger=function(t,e){return e?(n.events.current=t,void setTimeout(function(){t===n.events.current&&t()},e)):void t()},n.filters={},n.filters.RangedFilter=function(t,e){var n=new Array(t,e);return n.isFiltered=function(t){return t>=this[0]&&t<this[1]},n.filterType="RangedFilter",n},n.filters.TwoDimensionalFilter=function(t){if(null===t)return null;var e=t;return e.isFiltered=function(t){return t.length&&t.length===e.length&&t[0]===e[0]&&t[1]===e[1]},e.filterType="TwoDimensionalFilter",e},n.filters.RangedTwoDimensionalFilter=function(t){if(null===t)return null;var e,n=t;return e=n[0]instanceof Array?[[Math.min(t[0][0],t[1][0]),Math.min(t[0][1],t[1][1])],[Math.max(t[0][0],t[1][0]),Math.max(t[0][1],t[1][1])]]:[[t[0],-(1/0)],[t[1],1/0]],n.isFiltered=function(t){var n,r;if(t instanceof Array){if(2!==t.length)return!1;n=t[0],r=t[1]}else n=t,r=e[0][1];return n>=e[0][0]&&n<e[1][0]&&r>=e[0][1]&&r<e[1][1]},n.filterType="RangedTwoDimensionalFilter",n},n.baseMixin=function(r){function i(){d&&d.attr("width",r.width()).attr("height",r.height())}function a(){return d=r.root().append("svg"),i(),d}function o(t){if(!r[t]||!r[t]())throw new n.errors.InvalidStateException("Mandatory attribute chart."+t+" is missing on chart[#"+r.anchorName()+"]")}function s(){if(r.dimension()&&r.dimension().filter){var t=F(r.dimension(),z);z=t?t:z}}r.__dcFlag__=n.utils.uniqueId();var l,u,c,f,d,h,p,g,m,v,y,_=200,b=function(t){var e=t&&t.getBoundingClientRect&&t.getBoundingClientRect().width;return e&&e>_?e:_},x=b,w=200,C=function(t){var e=t&&t.getBoundingClientRect&&t.getBoundingClientRect().height;return e&&e>w?e:w},k=C,S=n.pluck("key"),T=n.pluck("value"),A=n.pluck("key"),E=n.pluck("key"),M=!1,D=function(t){return r.keyAccessor()(t)+": "+r.valueAccessor()(t)},P=!0,O=!1,N=750,L=n.printers.filters,I=["dimension","group"],R=n.constants.DEFAULT_CHART_GROUP,B=t.dispatch("preRender","postRender","preRedraw","postRedraw","filtered","zoomed","renderlet","pretransition"),z=[],F=function(t,e){return 0===e.length?t.filter(null):1!==e.length||e[0].isFiltered?1===e.length&&"RangedFilter"===e[0].filterType?t.filterRange(e[0]):t.filterFunction(function(t){for(var n=0;n<e.length;n++){var r=e[n];if(r.isFiltered&&r.isFiltered(t))return!0;if(t>=r&&r>=t)return!0}return!1}):t.filterExact(e[0]),e},q=function(t){return t.all()};r.height=function(e){return arguments.length?(k=t.functor(e||C),g=void 0,r):(n.utils.isNumber(g)||(g=k(f.node())),g)},r.width=function(e){return arguments.length?(x=t.functor(e||b),p=void 0,r):(n.utils.isNumber(p)||(p=x(f.node())),p)},r.minWidth=function(t){return arguments.length?(_=t,r):_},r.minHeight=function(t){return arguments.length?(w=t,r):w},r.dimension=function(t){return arguments.length?(l=t,r.expireCache(),r):l},r.data=function(e){return arguments.length?(q=t.functor(e),r.expireCache(),r):q.call(r,u)},r.group=function(t,e){return arguments.length?(u=t,r._groupName=e,r.expireCache(),r):u},r.ordering=function(t){return arguments.length?(E=t,m=e.quicksort.by(E),r.expireCache(),r):E},r._computeOrderedGroups=function(t){var n=t.slice(0);return n.length<=1?n:(m||(m=e.quicksort.by(E)),m(n,0,n.length))},r.filterAll=function(){return r.filter(null)},r.select=function(t){return f.select(t)},r.selectAll=function(t){return f?f.selectAll(t):null},r.anchor=function(e,i){if(!arguments.length)return c;if(n.instanceOfChart(e))c=e.anchor(),f=e.root(),h=!0;else{if(!e)throw new n.errors.BadArgumentException("parent must be defined");c=e.select&&e.classed?e.node():e,f=t.select(c),f.classed(n.constants.CHART_CLASS,!0),n.registerChart(r,i),h=!1}return R=i,r},r.anchorName=function(){var t=r.anchor();return t&&t.id?t.id:t&&t.replace?t.replace("#",""):"dc-chart"+r.chartID()},r.root=function(t){return arguments.length?(f=t,r):f},r.svg=function(t){return arguments.length?(d=t,r):d},r.resetSvg=function(){return r.select("svg").remove(),a()},r.filterPrinter=function(t){return arguments.length?(L=t,r):L},r.controlsUseVisibility=function(t){return arguments.length?(O=t,r):O},r.turnOnControls=function(){if(f){var t=r.controlsUseVisibility()?"visibility":"display";r.selectAll(".reset").style(t,null),r.selectAll(".filter").text(L(r.filters())).style(t,null)}return r},r.turnOffControls=function(){if(f){var t=r.controlsUseVisibility()?"visibility":"display",e=r.controlsUseVisibility()?"hidden":"none";r.selectAll(".reset").style(t,e),r.selectAll(".filter").style(t,e).text(r.filter())}return r},r.transitionDuration=function(t){return arguments.length?(N=t,r):N},r._mandatoryAttributes=function(t){return arguments.length?(I=t,r):I},r.render=function(){g=p=void 0,B.preRender(r),I&&I.forEach(o);var t=r._doRender();return v&&v.render(),r._activateRenderlets("postRender"),t},r._activateRenderlets=function(t){B.pretransition(r),r.transitionDuration()>0&&d?d.transition().duration(r.transitionDuration()).each("end",function(){B.renderlet(r),t&&B[t](r)}):(B.renderlet(r),t&&B[t](r))},r.redraw=function(){i(),B.preRedraw(r);var t=r._doRedraw();return v&&v.render(),r._activateRenderlets("postRedraw"),t},r.commitHandler=function(t){return arguments.length?(y=t,r):y},r.redrawGroup=function(){return y?y(!1,function(t,e){t?console.log(t):n.redrawAll(r.chartGroup())}):n.redrawAll(r.chartGroup()),r},r.renderGroup=function(){return y?y(!1,function(t,e){t?console.log(t):n.renderAll(r.chartGroup())}):n.renderAll(r.chartGroup()),r},r._invokeFilteredListener=function(t){void 0!==t&&B.filtered(r,t)},r._invokeZoomedListener=function(){B.zoomed(r)};var H=function(t,e){return null===e||"undefined"==typeof e?t.length>0:t.some(function(t){return t>=e&&e>=t})};r.hasFilterHandler=function(t){return arguments.length?(H=t,r):H},r.hasFilter=function(t){return H(z,t)};var U=function(t,e){for(var n=0;n<t.length;n++)if(t[n]<=e&&t[n]>=e){t.splice(n,1);break}return t};r.removeFilterHandler=function(t){return arguments.length?(U=t,r):U};var j=function(t,e){return t.push(e),t};r.addFilterHandler=function(t){return arguments.length?(j=t,r):j};var V=function(t){return[]};return r.resetFilterHandler=function(t){return arguments.length?(V=t,r):V},r.replaceFilter=function(t){z=V(z),r.filter(t)},r.filter=function(t){return arguments.length?(t instanceof Array&&t[0]instanceof Array&&!t.isFiltered?t[0].forEach(function(t){r.hasFilter(t)?U(z,t):j(z,t)}):null===t?z=V(z):r.hasFilter(t)?U(z,t):j(z,t),s(),r._invokeFilteredListener(t),null!==f&&r.hasFilter()?r.turnOnControls():r.turnOffControls(),r):z.length>0?z[0]:null},r.filters=function(){return z},r.highlightSelected=function(e){t.select(e).classed(n.constants.SELECTED_CLASS,!0),t.select(e).classed(n.constants.DESELECTED_CLASS,!1)},r.fadeDeselected=function(e){t.select(e).classed(n.constants.SELECTED_CLASS,!1),t.select(e).classed(n.constants.DESELECTED_CLASS,!0)},r.resetHighlight=function(e){t.select(e).classed(n.constants.SELECTED_CLASS,!1),t.select(e).classed(n.constants.DESELECTED_CLASS,!1)},r.onClick=function(t){var e=r.keyAccessor()(t);n.events.trigger(function(){r.filter(e),r.redrawGroup()})},r.filterHandler=function(t){return arguments.length?(F=t,r):F},r._doRender=function(){return r},r._doRedraw=function(){return r},r.legendables=function(){return[]},r.legendHighlight=function(){},r.legendReset=function(){},r.legendToggle=function(){},r.isLegendableHidden=function(){return!1},r.keyAccessor=function(t){return arguments.length?(S=t,r):S},r.valueAccessor=function(t){return arguments.length?(T=t,r):T},r.label=function(t,e){return arguments.length?(A=t,(void 0===e||e)&&(M=!0),r):A},r.renderLabel=function(t){return arguments.length?(M=t,r):M},r.title=function(t){return arguments.length?(D=t,r):D},r.renderTitle=function(t){return arguments.length?(P=t,r):P},r.renderlet=n.logger.deprecate(function(t){return r.on("renderlet."+n.utils.uniqueId(),t),r},'chart.renderlet has been deprecated.  Please use chart.on("renderlet.<renderletKey>", renderletFunction)'),r.chartGroup=function(t){return arguments.length?(h||n.deregisterChart(r,R),R=t,h||n.registerChart(r,R),r):R},r.expireCache=function(){return r},r.legend=function(t){return arguments.length?(v=t,v.parent(r),r):v},r.chartID=function(){return r.__dcFlag__},r.options=function(t){var e=["anchor","group","xAxisLabel","yAxisLabel","stack","title","point","getColor","overlayGeoJson"];for(var i in t)"function"==typeof r[i]?t[i]instanceof Array&&-1!==e.indexOf(i)?r[i].apply(r,t[i]):r[i].call(r,t[i]):n.logger.debug("Not a valid option setter name: "+i);return r},r.on=function(t,e){return B.on(t,e),r},r},n.marginMixin=function(t){var e={top:10,right:50,bottom:30,left:30};return t.margins=function(n){return arguments.length?(e=n,t):e},t.effectiveWidth=function(){return t.width()-t.margins().left-t.margins().right},t.effectiveHeight=function(){return t.height()-t.margins().top-t.margins().bottom},t},n.colorMixin=function(e){var n=t.scale.category20c(),r=!0,i=function(t){return e.keyAccessor()(t)};return e.colors=function(r){return arguments.length?(n=r instanceof Array?t.scale.quantize().range(r):t.functor(r),e):n},e.ordinalColors=function(n){return e.colors(t.scale.ordinal().range(n))},e.linearColors=function(n){return e.colors(t.scale.linear().range(n).interpolate(t.interpolateHcl))},e.colorAccessor=function(t){return arguments.length?(i=t,r=!1,e):i},e.defaultColorAccessor=function(){return r},e.colorDomain=function(t){return arguments.length?(n.domain(t),e):n.domain()},e.calculateColorDomain=function(){var r=[t.min(e.data(),e.colorAccessor()),t.max(e.data(),e.colorAccessor())];return n.domain(r),e},e.getColor=function(t,e){return n(i.call(this,t,e))},e.colorCalculator=function(t){return arguments.length?(e.getColor=t,e):e.getColor},e},n.coordinateGridMixin=function(e){function r(){G=!0,J&&(e.x().domain(d(e.x().domain(),S)),O&&e.x().domain(d(e.x().domain(),O.x().domain())));var t=e.x().domain(),r=n.filters.RangedFilter(t[0],t[1]);e.replaceFilter(r),e.rescale(),e.redraw(),O&&!h(e.filter(),O.filter())&&n.events.trigger(function(){O.replaceFilter(r),O.redraw()}),e._invokeZoomedListener(),n.events.trigger(function(){e.redrawGroup()},n.constants.EVENT_DELAY),G=!h(t,S)}function i(t,e){return!t||!e||t.length!==e.length||t.some(function(t,n){return t&&e[n]?t.toString()!==e[n].toString():t===e[n]})}function a(t,n){e.isOrdinal()?(e.elasticX()||0===k.domain().length)&&k.domain(e._ordinalXDomain()):e.elasticX()&&k.domain([e.xAxisMin(),e.xAxisMax()]);
var r=k.domain();(n||i(A,r))&&e.rescale(),A=r,e.isOrdinal()?k.rangeBands([0,e.xAxisLength()],rt,e._useOuterPadding()?nt:0):k.range([0,e.xAxisLength()]),L=L.scale(e.x()),o(t)}function o(t){var r=t.selectAll("g."+v);if(W){r.empty()&&(r=t.insert("g",":first-child").attr("class",g+" "+v).attr("transform","translate("+e.margins().left+","+e.margins().top+")"));var i=L.tickValues()?L.tickValues():"function"==typeof k.ticks?k.ticks(L.ticks()[0]):k.domain(),a=r.selectAll("line").data(i),o=a.enter().append("line").attr("x1",function(t){return k(t)}).attr("y1",e._xAxisY()-e.margins().top).attr("x2",function(t){return k(t)}).attr("y2",0).attr("opacity",0);n.transition(o,e.transitionDuration()).attr("opacity",1),n.transition(a,e.transitionDuration()).attr("x1",function(t){return k(t)}).attr("y1",e._xAxisY()-e.margins().top).attr("x2",function(t){return k(t)}).attr("y2",0),a.exit().remove()}else r.selectAll("line").remove()}function s(){return e._xAxisY()-e.margins().top}function l(){return e.anchorName().replace(/[ .#=\[\]]/g,"-")+"-clip"}function u(){var t=n.utils.appendOrSelect(x,"defs"),r=l(),i=n.utils.appendOrSelect(t,"#"+r,"clipPath").attr("id",r),a=2*et;n.utils.appendOrSelect(i,"rect").attr("width",e.xAxisLength()+a).attr("height",e.yAxisHeight()+a).attr("transform","translate(-"+et+", -"+et+")")}function c(t){e.isOrdinal()&&(V=!1),a(e.g(),t),e._prepareYAxis(e.g()),e.plotData(),(e.elasticX()||X||t)&&e.renderXAxis(e.g()),(e.elasticY()||X||t)&&e.renderYAxis(e.g()),t?e.renderBrush(e.g(),!1):e.redrawBrush(e.g(),X),e.fadeDeselectedArea(),X=!1}function f(){tt?e._enableMouseZoom():Q&&e._disableMouseZoom()}function d(e,n){var r=[];return r[0]=t.max([e[0],n[0]]),r[1]=t.min([e[1],n[1]]),r}function h(t,e){return!t&&!e||!(!t||!e)&&(0===t.length&&0===e.length||t[0].valueOf()===e[0].valueOf()&&t[1].valueOf()===e[1].valueOf())}function p(t){return t instanceof Array&&t.length>1}var g="grid-line",m="horizontal",v="vertical",y="y-axis-label",_="x-axis-label",b=12;e=n.colorMixin(n.marginMixin(n.baseMixin(e))),e.colors(t.scale.category10()),e._mandatoryAttributes().push("x");var x,w,C,k,S,T,A,E,M,D,P,O,N,L=t.svg.axis().orient("bottom"),I=n.units.integers,R=0,B=!1,z=0,F=t.svg.axis().orient("left"),q=0,H=!1,U=0,j=t.svg.brush(),V=!0,$=!1,W=!1,G=!1,X=!1,Y=[1,1/0],J=!0,K=t.behavior.zoom().on("zoom",r),Z=t.behavior.zoom().on("zoom",null),Q=!1,tt=!1,et=0,nt=.5,rt=0,it=!1;return e.rescale=function(){return P=void 0,X=!0,e},e.resizing=function(){return X},e.rangeChart=function(t){return arguments.length?(O=t,O.focusChart(e),e):O},e.zoomScale=function(t){return arguments.length?(Y=t,e):Y},e.zoomOutRestrict=function(t){return arguments.length?(Y[0]=t?1:0,J=t,e):J},e._generateG=function(t){x=void 0===t?e.svg():t;var n=window.location.href.split("#")[0];return w=x.append("g"),C=w.append("g").attr("class","chart-body").attr("transform","translate("+e.margins().left+", "+e.margins().top+")").attr("clip-path","url("+n+"#"+l()+")"),w},e.g=function(t){return arguments.length?(w=t,e):w},e.mouseZoomable=function(t){return arguments.length?(tt=t,e):tt},e.chartBodyG=function(t){return arguments.length?(C=t,e):C},e.x=function(t){return arguments.length?(k=t,S=k.domain(),e.rescale(),e):k},e.xOriginalDomain=function(){return S},e.xUnits=function(t){return arguments.length?(I=t,e):I},e.xAxis=function(t){return arguments.length?(L=t,e):L},e.elasticX=function(t){return arguments.length?(B=t,e):B},e.xAxisPadding=function(t){return arguments.length?(R=t,e):R},e.xUnitCount=function(){if(void 0===P){var t=e.xUnits()(e.x().domain()[0],e.x().domain()[1],e.x().domain());P=t instanceof Array?t.length:t}return P},e.useRightYAxis=function(t){return arguments.length?(it=t,e):it},e.isOrdinal=function(){return e.xUnits()===n.units.ordinal},e._useOuterPadding=function(){return!0},e._ordinalXDomain=function(){var t=e._computeOrderedGroups(e.data());return t.map(e.keyAccessor())},e.renderXAxis=function(t){var r=t.selectAll("g.x");r.empty()&&(r=t.append("g").attr("class","axis x").attr("transform","translate("+e.margins().left+","+e._xAxisY()+")"));var i=t.selectAll("text."+_);i.empty()&&e.xAxisLabel()&&(i=t.append("text").attr("class",_).attr("transform","translate("+(e.margins().left+e.xAxisLength()/2)+","+(e.height()-z)+")").attr("text-anchor","middle")),e.xAxisLabel()&&i.text()!==e.xAxisLabel()&&i.text(e.xAxisLabel()),n.transition(r,e.transitionDuration()).attr("transform","translate("+e.margins().left+","+e._xAxisY()+")").call(L),n.transition(i,e.transitionDuration()).attr("transform","translate("+(e.margins().left+e.xAxisLength()/2)+","+(e.height()-z)+")")},e._xAxisY=function(){return e.height()-e.margins().bottom},e.xAxisLength=function(){return e.effectiveWidth()},e.xAxisLabel=function(t,n){return arguments.length?(T=t,e.margins().bottom-=z,z=void 0===n?b:n,e.margins().bottom+=z,e):T},e._prepareYAxis=function(n){if(void 0===E||e.elasticY()){void 0===E&&(E=t.scale.linear());var r=e.yAxisMin()||0,i=e.yAxisMax()||0;E.domain([r,i]).rangeRound([e.yAxisHeight(),0])}E.range([e.yAxisHeight(),0]),F=F.scale(E),it&&F.orient("right"),e._renderHorizontalGridLinesForAxis(n,E,F)},e.renderYAxisLabel=function(t,r,i,a){a=a||U;var o=e.g().selectAll("text."+y+"."+t+"-label"),s=e.margins().top+e.yAxisHeight()/2;o.empty()&&r&&(o=e.g().append("text").attr("transform","translate("+a+","+s+"),rotate("+i+")").attr("class",y+" "+t+"-label").attr("text-anchor","middle").text(r)),r&&o.text()!==r&&o.text(r),n.transition(o,e.transitionDuration()).attr("transform","translate("+a+","+s+"),rotate("+i+")")},e.renderYAxisAt=function(t,r,i){var a=e.g().selectAll("g."+t);a.empty()&&(a=e.g().append("g").attr("class","axis "+t).attr("transform","translate("+i+","+e.margins().top+")")),n.transition(a,e.transitionDuration()).attr("transform","translate("+i+","+e.margins().top+")").call(r)},e.renderYAxis=function(){var t=it?e.width()-e.margins().right:e._yAxisX();e.renderYAxisAt("y",F,t);var n=it?e.width()-U:U,r=it?90:-90;e.renderYAxisLabel("y",e.yAxisLabel(),r,n)},e._renderHorizontalGridLinesForAxis=function(t,r,i){var a=t.selectAll("g."+m);if($){var o=i.tickValues()?i.tickValues():r.ticks(i.ticks()[0]);a.empty()&&(a=t.insert("g",":first-child").attr("class",g+" "+m).attr("transform","translate("+e.margins().left+","+e.margins().top+")"));var s=a.selectAll("line").data(o),l=s.enter().append("line").attr("x1",1).attr("y1",function(t){return r(t)}).attr("x2",e.xAxisLength()).attr("y2",function(t){return r(t)}).attr("opacity",0);n.transition(l,e.transitionDuration()).attr("opacity",1),n.transition(s,e.transitionDuration()).attr("x1",1).attr("y1",function(t){return r(t)}).attr("x2",e.xAxisLength()).attr("y2",function(t){return r(t)}),s.exit().remove()}else a.selectAll("line").remove()},e._yAxisX=function(){return e.useRightYAxis()?e.width()-e.margins().right:e.margins().left},e.yAxisLabel=function(t,n){return arguments.length?(M=t,e.margins().left-=U,U=void 0===n?b:n,e.margins().left+=U,e):M},e.y=function(t){return arguments.length?(E=t,e.rescale(),e):E},e.yAxis=function(t){return arguments.length?(F=t,e):F},e.elasticY=function(t){return arguments.length?(H=t,e):H},e.renderHorizontalGridLines=function(t){return arguments.length?($=t,e):$},e.renderVerticalGridLines=function(t){return arguments.length?(W=t,e):W},e.xAxisMin=function(){var r=t.min(e.data(),function(t){return e.keyAccessor()(t)});return n.utils.subtract(r,R)},e.xAxisMax=function(){var r=t.max(e.data(),function(t){return e.keyAccessor()(t)});return n.utils.add(r,R)},e.yAxisMin=function(){var r=t.min(e.data(),function(t){return e.valueAccessor()(t)});return n.utils.subtract(r,q)},e.yAxisMax=function(){var r=t.max(e.data(),function(t){return e.valueAccessor()(t)});return n.utils.add(r,q)},e.yAxisPadding=function(t){return arguments.length?(q=t,e):q},e.yAxisHeight=function(){return e.effectiveHeight()},e.round=function(t){return arguments.length?(D=t,e):D},e._rangeBandPadding=function(t){return arguments.length?(rt=t,e):rt},e._outerRangeBandPadding=function(t){return arguments.length?(nt=t,e):nt},n.override(e,"filter",function(t){return arguments.length?(e._filter(t),t?e.brush().extent(t):e.brush().clear(),e):e._filter()}),e.brush=function(t){return arguments.length?(j=t,e):j},e.renderBrush=function(t){if(V){j.on("brush",e._brushing),j.on("brushstart",e._disableMouseZoom),j.on("brushend",f);var n=t.append("g").attr("class","brush").attr("transform","translate("+e.margins().left+","+e.margins().top+")").call(j.x(e.x()));e.setBrushY(n,!1),e.setHandlePaths(n),e.hasFilter()&&e.redrawBrush(t,!1)}},e.setHandlePaths=function(t){t.selectAll(".resize").append("path").attr("d",e.resizeHandlePath)},e.setBrushY=function(t){t.selectAll("rect").attr("height",s()),t.selectAll(".resize path").attr("d",e.resizeHandlePath)},e.extendBrush=function(){var t=j.extent();return e.round()&&(t[0]=t.map(e.round())[0],t[1]=t.map(e.round())[1],w.select(".brush").call(j.extent(t))),t},e.brushIsEmpty=function(t){return j.empty()||!t||t[1]<=t[0]},e._brushing=function(){var t=e.extendBrush();if(e.redrawBrush(w,!1),e.brushIsEmpty(t))n.events.trigger(function(){e.filter(null),e.redrawGroup()},n.constants.EVENT_DELAY);else{var r=n.filters.RangedFilter(t[0],t[1]);n.events.trigger(function(){e.replaceFilter(r),e.redrawGroup()},n.constants.EVENT_DELAY)}},e.redrawBrush=function(t,r){if(V){e.filter()&&e.brush().empty()&&e.brush().extent(e.filter());var i=n.optionalTransition(r,e.transitionDuration())(t.select("g.brush"));e.setBrushY(i),i.call(e.brush().x(e.x()).extent(e.brush().extent()))}e.fadeDeselectedArea()},e.fadeDeselectedArea=function(){},e.resizeHandlePath=function(t){var e=+("e"===t),n=e?1:-1,r=s()/3;return"M"+.5*n+","+r+"A6,6 0 0 "+e+" "+6.5*n+","+(r+6)+"V"+(2*r-6)+"A6,6 0 0 "+e+" "+.5*n+","+2*r+"ZM"+2.5*n+","+(r+8)+"V"+(2*r-8)+"M"+4.5*n+","+(r+8)+"V"+(2*r-8)},e.clipPadding=function(t){return arguments.length?(et=t,e):et},e._preprocessData=function(){},e._doRender=function(){return e.resetSvg(),e._preprocessData(),e._generateG(),u(),c(!0),f(),e},e._doRedraw=function(){return e._preprocessData(),c(!1),u(),e},e._enableMouseZoom=function(){Q=!0,K.x(e.x()).scaleExtent(Y).size([e.width(),e.height()]).duration(e.transitionDuration()),e.root().call(K)},e._disableMouseZoom=function(){e.root().call(Z)},e.focus=function(t){p(t)?e.x().domain(t):e.x().domain(S),K.x(e.x()),r()},e.refocused=function(){return G},e.focusChart=function(t){return arguments.length?(N=t,e.on("filtered",function(t){t.filter()?h(t.filter(),N.filter())||n.events.trigger(function(){N.focus(t.filter())}):n.events.trigger(function(){N.x().domain(N.xOriginalDomain())})}),e):N},e.brushOn=function(t){return arguments.length?(V=t,e):V},e},n.stackMixin=function(e){function r(t,n){var r=t.accessor||e.valueAccessor();return t.name=String(t.name||n),t.values=t.group.all().map(function(n,i){return{x:e.keyAccessor()(n,i),y:t.hidden?null:r(n,i),data:n,layer:t.name,hidden:t.hidden}}),t.values=t.values.filter(i()),t.values}function i(){if(!e.x())return t.functor(!0);var n=e.x().domain();return e.isOrdinal()?function(){return!0}:e.elasticX()?function(){return!0}:function(t){return t.x>=n[0]&&t.x<=n[n.length-1]}}function a(t){var e=u.map(n.pluck("name")).indexOf(t);return u[e]}function o(){var t=e.data().map(function(t){return t.values});return Array.prototype.concat.apply([],t)}function s(t){return!t.hidden}var l=t.layout.stack().values(r),u=[],c={},f=!1;return e.stack=function(t,n,r){if(!arguments.length)return u;arguments.length<=2&&(r=n);var i={group:t};return"string"==typeof n&&(i.name=n),"function"==typeof r&&(i.accessor=r),u.push(i),e},n.override(e,"group",function(t,n,r){return arguments.length?(u=[],c={},e.stack(t,n),r&&e.valueAccessor(r),e._group(t,n)):e._group()}),e.hidableStacks=function(t){return arguments.length?(f=t,e):f},e.hideStack=function(t){var n=a(t);return n&&(n.hidden=!0),e},e.showStack=function(t){var n=a(t);return n&&(n.hidden=!1),e},e.getValueAccessorByIndex=function(t){return u[t].accessor||e.valueAccessor()},e.yAxisMin=function(){var r=t.min(o(),function(t){return t.y<0?t.y+t.y0:t.y0});return n.utils.subtract(r,e.yAxisPadding())},e.yAxisMax=function(){var r=t.max(o(),function(t){return t.y>0?t.y+t.y0:t.y0});return n.utils.add(r,e.yAxisPadding())},e.xAxisMin=function(){var r=t.min(o(),n.pluck("x"));return n.utils.subtract(r,e.xAxisPadding())},e.xAxisMax=function(){var r=t.max(o(),n.pluck("x"));return n.utils.add(r,e.xAxisPadding())},n.override(e,"title",function(t,n){return t?"function"==typeof t?e._title(t):t===e._groupName&&"function"==typeof n?e._title(n):"function"!=typeof n?c[t]||e._title():(c[t]=n,e):e._title()}),e.stackLayout=function(n){return arguments.length?(l=n,l.values()===t.layout.stack().values()&&l.values(r),e):l},e.data(function(){var t=u.filter(s);return t.length?e.stackLayout()(t):[]}),e._ordinalXDomain=function(){var t=o().map(n.pluck("data")),r=e._computeOrderedGroups(t);return r.map(e.keyAccessor())},e.colorAccessor(function(t){var e=this.layer||this.name||t.name||t.layer;return e}),e.legendables=function(){return u.map(function(t,n){return{chart:e,name:t.name,hidden:t.hidden||!1,color:e.getColor.call(t,t.values,n)}})},e.isLegendableHidden=function(t){var e=a(t.name);return!!e&&e.hidden},e.legendToggle=function(t){f&&(e.isLegendableHidden(t)?e.showStack(t.name):e.hideStack(t.name),e.renderGroup())},e},n.capMixin=function(e){var r=1/0,i="Others",a=function(n){var r=t.sum(n,e.valueAccessor()),a=e.group().all(),o=t.sum(a,e.valueAccessor()),s=n.map(e.keyAccessor()),l=a.map(e.keyAccessor()),u=t.set(s),c=l.filter(function(t){return!u.has(t)});return o>r?n.concat([{others:c,key:i,value:o-r}]):n};return e.cappedKeyAccessor=function(t,n){return t.others?t.key:e.keyAccessor()(t,n)},e.cappedValueAccessor=function(t,n){return t.others?t.value:e.valueAccessor()(t,n)},e.data(function(t){if(r===1/0)return e._computeOrderedGroups(t.all());var n=t.top(r);return n=e._computeOrderedGroups(n),a?a(n):n}),e.cap=function(t){return arguments.length?(r=t,e):r},e.othersLabel=function(t){return arguments.length?(i=t,e):i},e.othersGrouper=function(t){return arguments.length?(a=t,e):a},n.override(e,"onClick",function(t){t.others&&e.filter([t.others]),e._onClick(t)}),e},n.bubbleMixin=function(e){var r=.3,i=10;e.BUBBLE_NODE_CLASS="node",e.BUBBLE_CLASS="bubble",e.MIN_RADIUS=10,e=n.colorMixin(e),e.renderLabel(!0),e.data(function(t){return t.top(1/0)});var a=t.scale.linear().domain([0,100]),o=function(t){return t.r};e.r=function(t){return arguments.length?(a=t,e):a},e.radiusValueAccessor=function(t){return arguments.length?(o=t,e):o},e.rMin=function(){var n=t.min(e.data(),function(t){return e.radiusValueAccessor()(t)});return n},e.rMax=function(){var n=t.max(e.data(),function(t){return e.radiusValueAccessor()(t)});return n},e.bubbleR=function(t){var n=e.radiusValueAccessor()(t),r=e.r()(n);return(isNaN(r)||0>=n)&&(r=0),r};var s=function(t){return e.label()(t)},l=function(t){return e.bubbleR(t)>i},u=function(t){return l(t)?1:0},c=function(t){return l(t)?"all":"none"};e._doRenderLabel=function(t){if(e.renderLabel()){var r=t.select("text");r.empty()&&(r=t.append("text").attr("text-anchor","middle").attr("dy",".3em").on("click",e.onClick)),r.attr("opacity",0).attr("pointer-events",c).text(s),n.transition(r,e.transitionDuration()).attr("opacity",u)}},e.doUpdateLabels=function(t){if(e.renderLabel()){var r=t.selectAll("text").attr("pointer-events",c).text(s);n.transition(r,e.transitionDuration()).attr("opacity",u)}};var f=function(t){return e.title()(t)};return e._doRenderTitles=function(t){if(e.renderTitle()){var n=t.select("title");n.empty()&&t.append("title").text(f)}},e.doUpdateTitles=function(t){e.renderTitle()&&t.selectAll("title").text(f)},e.minRadius=function(t){return arguments.length?(e.MIN_RADIUS=t,e):e.MIN_RADIUS},e.minRadiusWithLabel=function(t){return arguments.length?(i=t,e):i},e.maxBubbleRelativeSize=function(t){return arguments.length?(r=t,e):r},e.fadeDeselectedArea=function(){e.hasFilter()?e.selectAll("g."+e.BUBBLE_NODE_CLASS).each(function(t){e.isSelectedNode(t)?e.highlightSelected(this):e.fadeDeselected(this)}):e.selectAll("g."+e.BUBBLE_NODE_CLASS).each(function(){e.resetHighlight(this)})},e.isSelectedNode=function(t){return e.hasFilter(t.key)},e.onClick=function(t){var r=t.key;n.events.trigger(function(){e.filter(r),e.redrawGroup()})},e},n.pieChart=function(e,r){function i(){P=O?O:t.min([X.width(),X.height()])/2;var e,r=_(),i=x();if(t.sum(X.data(),X.valueAccessor())?(e=i(X.data()),N.classed(U,!1)):(e=i([{key:j,value:1,others:[j]}]),N.classed(U,!0)),N){var o=N.select("g."+q).selectAll("g."+z).data(e),s=N.select("g."+H).selectAll("text."+F).data(e);a(o,s,r,e),h(e,r),v(o,s),y(),n.transition(N,X.transitionDuration()).attr("transform","translate("+X.cx()+","+X.cy()+")")}}function a(t,e,n,r){var i=o(t);s(i,n),l(i),f(e,r,n)}function o(t){var e=t.enter().append("g").attr("class",function(t,e){return z+" _"+e});return e}function s(t,e){var r=t.append("path").attr("fill",T).on("click",A).attr("d",function(t,n){return E(t,n,e)});n.transition(r,X.transitionDuration(),function(t){t.attrTween("d",k)})}function l(t){X.renderTitle()&&t.append("title").text(function(t){return X.title()(t.data)})}function u(t,e){X._applyLabelText(t),n.transition(t,X.transitionDuration()).attr("transform",function(t){return M(t,e)}).attr("text-anchor","middle")}function c(t,e){X.select("g.pie-slice._"+t).classed("highlight",e)}function f(t,e,n){if(X.renderLabel()){var r=t.enter().append("text").attr("class",function(t,e){var n=z+" "+F+" _"+e;return R&&(n+=" external"),n}).on("click",A).on("mouseover",function(t,e){c(e,!0)}).on("mouseout",function(t,e){c(e,!1)});u(r,n),R&&G&&d(e,n)}}function d(e,r){var i=N.selectAll("polyline."+z).data(e);i.enter().append("polyline").attr("class",function(t,e){return"pie-path _"+e+" "+z}).on("click",A).on("mouseover",function(t,e){c(e,!0)}).on("mouseout",function(t,e){c(e,!1)}),i.exit().remove();var a=t.svg.arc().outerRadius(P-$+R).innerRadius(P-$),o=n.transition(i,X.transitionDuration());o.attrTween?o.attrTween("points",function(e){this._current=this._current||e;var n=t.interpolate(this._current,e);return this._current=n(0),function(t){var e=n(t);return[r.centroid(e),a.centroid(e)]}}):o.attr("points",function(t){return[r.centroid(t),a.centroid(t)]}),o.style("visibility",function(t){return t.endAngle-t.startAngle<1e-4?"hidden":"visible"})}function h(t,e){p(t,e),g(t,e),m(t)}function p(t,e){var r=N.selectAll("g."+z).data(t).select("path").attr("d",function(t,n){return E(t,n,e)});n.transition(r,X.transitionDuration(),function(t){t.attrTween("d",k)}).attr("fill",T)}function g(t,e){if(X.renderLabel()){var n=N.selectAll("text."+F).data(t);u(n,e),R&&G&&d(t,e)}}function m(t){X.renderTitle()&&N.selectAll("g."+z).data(t).select("title").text(function(t){return X.title()(t.data)})}function v(t,e){t.exit().remove(),e.exit().remove()}function y(){X.hasFilter()?X.selectAll("g."+z).each(function(t){b(t)?X.highlightSelected(this):X.fadeDeselected(this)}):X.selectAll("g."+z).each(function(){X.resetHighlight(this)})}function _(){return t.svg.arc().outerRadius(P-$).innerRadius(V)}function b(t){return X.hasFilter(X.cappedKeyAccessor(t.data))}function x(){return t.layout.pie().sort(null).value(X.cappedValueAccessor)}function w(t){var e=t.endAngle-t.startAngle;return isNaN(e)||W>e}function C(t){return 0===X.cappedValueAccessor(t)}function k(e){e.innerRadius=V;var n=this._current;n=S(n)?{startAngle:0,endAngle:0}:{startAngle:n.startAngle,endAngle:n.endAngle};var r=t.interpolate(n,e);return this._current=r(0),function(t){return E(r(t),0,_())}}function S(t){return!t||isNaN(t.startAngle)||isNaN(t.endAngle)}function T(t,e){return X.getColor(t.data,e)}function A(t,e){N.attr("class")!==U&&X.onClick(t.data,e)}function E(t,e,n){var r=n(t,e);return r.indexOf("NaN")>=0&&(r="M0,0"),r}function M(e,n){var r;return r=R?t.svg.arc().outerRadius(P-$+R).innerRadius(P-$+R).centroid(e):n.centroid(e),isNaN(r[0])||isNaN(r[1])?"translate(0,0)":"translate("+r+")"}function D(e,n){X.selectAll("g.pie-slice").each(function(r){e.name===r.data.key&&t.select(this).classed("highlight",n)})}var P,O,N,L,I,R,B=.5,z="pie-slice",F="pie-label",q="pie-slice-group",H="pie-label-group",U="empty-chart",j="empty",V=0,$=0,W=B,G=!1,X=n.capMixin(n.colorMixin(n.baseMixin({})));return X.colorAccessor(X.cappedKeyAccessor),X.title(function(t){return X.cappedKeyAccessor(t)+": "+X.cappedValueAccessor(t)}),X.slicesCap=X.cap,X.label(X.cappedKeyAccessor),X.renderLabel(!0),X.transitionDuration(350),X._doRender=function(){return X.resetSvg(),N=X.svg().append("g").attr("transform","translate("+X.cx()+","+X.cy()+")"),N.append("g").attr("class",q),N.append("g").attr("class",H),i(),X},X._applyLabelText=function(t){t.text(function(t){var e=t.data;return!C(e)&&!w(t)||b(t)?X.label()(t.data):""})},X.externalRadiusPadding=function(t){return arguments.length?($=t,X):$},X.innerRadius=function(t){return arguments.length?(V=t,X):V},X.radius=function(t){return arguments.length?(O=t,X):O},X.cx=function(t){return arguments.length?(L=t,X):L||X.width()/2},X.cy=function(t){return arguments.length?(I=t,X):I||X.height()/2},X._doRedraw=function(){return i(),X},X.minAngleForLabel=function(t){return arguments.length?(W=t,X):W},X.emptyTitle=function(t){return 0===arguments.length?j:(j=t,X)},X.externalLabels=function(t){return 0===arguments.length?R:(R=t?t:void 0,X)},X.drawPaths=function(t){return 0===arguments.length?G:(G=t,X)},X.legendables=function(){return X.data().map(function(t,e){var n={name:t.key,data:t.value,others:t.others,chart:X};return n.color=X.getColor(t,e),n})},X.legendHighlight=function(t){D(t,!0)},X.legendReset=function(t){D(t,!1)},X.legendToggle=function(t){X.onClick({key:t.name,others:t.others})},X.anchor(e,r)},n.barChart=function(e,r){function i(t){return n.utils.safeNumber(Math.abs(h.y()(t.y+t.y0)-h.y()(t.y0)))}function a(t,e,r){var a=t.selectAll("text.barLabel").data(r.values,n.pluck("x"));a.enter().append("text").attr("class","barLabel").attr("text-anchor","middle"),h.isOrdinal()&&(a.on("click",h.onClick),a.attr("cursor","pointer")),n.transition(a,h.transitionDuration()).attr("x",function(t){var e=h.x()(t.x);return g||(e+=u/2),n.utils.safeNumber(e)}).attr("y",function(t){var e=h.y()(t.y+t.y0);return t.y<0&&(e-=i(t)),n.utils.safeNumber(e-d)}).text(function(t){return h.label()(t)}),n.transition(a.exit(),h.transitionDuration()).attr("height",0).remove()}function o(t,e,r){var a=t.selectAll("rect.bar").data(r.values,n.pluck("x")),o=a.enter().append("rect").attr("class","bar").attr("fill",n.pluck("data",h.getColor)).attr("y",h.yAxisHeight()).attr("height",0);h.renderTitle()&&o.append("title").text(n.pluck("data",h.title(r.name))),h.isOrdinal()&&a.on("click",h.onClick),n.transition(a,h.transitionDuration()).attr("x",function(t){var e=h.x()(t.x);return g&&(e-=u/2),h.isOrdinal()&&void 0!==p&&(e+=p/2),n.utils.safeNumber(e)}).attr("y",function(t){var e=h.y()(t.y+t.y0);return t.y<0&&(e-=i(t)),n.utils.safeNumber(e)}).attr("width",u).attr("height",function(t){return i(t)}).attr("fill",n.pluck("data",h.getColor)).select("title").text(n.pluck("data",h.title(r.name))),n.transition(a.exit(),h.transitionDuration()).attr("x",function(t){return h.x()(t.x)}).attr("width",.9*u).remove()}function s(){if(void 0===u){var t=h.xUnitCount();u=h.isOrdinal()&&void 0===p?Math.floor(h.x().rangeBand()):p?Math.floor((h.xAxisLength()-(t-1)*p)/t):Math.floor(h.xAxisLength()/(1+h.barPadding())/t),(u===1/0||isNaN(u)||c>u)&&(u=c)}}function l(e,n){return function(){var r=t.select(this),i=r.attr("fill")===e;return n?!i:i}}var u,c=1,f=2,d=3,h=n.stackMixin(n.coordinateGridMixin({})),p=f,g=!1,m=!1;return n.override(h,"rescale",function(){return h._rescale(),u=void 0,h}),n.override(h,"render",function(){return h.round()&&g&&!m&&n.logger.warn("By default, brush rounding is disabled if bars are centered. See dc.js bar chart API documentation for details."),h._render()}),h.label(function(t){return n.utils.printSingleValue(t.y0+t.y)},!1),h.plotData=function(){var e=h.chartBodyG().selectAll("g.stack").data(h.data());s(),e.enter().append("g").attr("class",function(t,e){return"stack _"+e});var n=e.size()-1;e.each(function(e,r){var i=t.select(this);o(i,r,e),h.renderLabel()&&n===r&&a(i,r,e)})},h.fadeDeselectedArea=function(){var t=h.chartBodyG().selectAll("rect.bar"),e=h.brush().extent();if(h.isOrdinal())h.hasFilter()?(t.classed(n.constants.SELECTED_CLASS,function(t){return h.hasFilter(t.x)}),t.classed(n.constants.DESELECTED_CLASS,function(t){return!h.hasFilter(t.x)})):(t.classed(n.constants.SELECTED_CLASS,!1),t.classed(n.constants.DESELECTED_CLASS,!1));else if(h.brushIsEmpty(e))t.classed(n.constants.DESELECTED_CLASS,!1);else{var r=e[0],i=e[1];t.classed(n.constants.DESELECTED_CLASS,function(t){return t.x<r||t.x>=i})}},h.centerBar=function(t){return arguments.length?(g=t,h):g},n.override(h,"onClick",function(t){h._onClick(t.data)}),h.barPadding=function(t){return arguments.length?(h._rangeBandPadding(t),p=void 0,h):h._rangeBandPadding()},h._useOuterPadding=function(){return void 0===p},h.outerPadding=h._outerRangeBandPadding,h.gap=function(t){return arguments.length?(p=t,h):p},h.extendBrush=function(){var t=h.brush().extent();return!h.round()||g&&!m||(t[0]=t.map(h.round())[0],t[1]=t.map(h.round())[1],h.chartBodyG().select(".brush").call(h.brush().extent(t))),t},h.alwaysUseRounding=function(t){return arguments.length?(m=t,h):m},h.legendHighlight=function(t){h.isLegendableHidden(t)||h.g().selectAll("rect.bar").classed("highlight",l(t.color)).classed("fadeout",l(t.color,!0))},h.legendReset=function(){h.g().selectAll("rect.bar").classed("highlight",!1).classed("fadeout",!1)},n.override(h,"xAxisMax",function(){var t=this._xAxisMax();if("resolution"in h.xUnits()){var e=h.xUnits().resolution;t+=e}return t}),h.anchor(e,r)},n.lineChart=function(e,r){function i(t,e){return A.getColor.call(t,t.values,e)}function a(e,r){var a=t.svg.line().x(function(t){return A.x()(t.x)}).y(function(t){return A.y()(t.y+t.y0)}).interpolate(N).tension(L);y&&a.defined(y);var o=e.append("path").attr("class","line").attr("stroke",i);_&&o.attr("stroke-dasharray",_),n.transition(r.select("path.line"),A.transitionDuration()).attr("stroke",i).attr("d",function(t){return s(a(t.values))})}function o(e,r){if(E){var a=t.svg.area().x(function(t){return A.x()(t.x)}).y(function(t){return A.y()(t.y+t.y0)}).y0(function(t){return A.y()(t.y0)}).interpolate(N).tension(L);y&&a.defined(y),e.append("path").attr("class","area").attr("fill",i).attr("d",function(t){return s(a(t.values))}),n.transition(r.select("path.area"),A.transitionDuration()).attr("fill",i).attr("d",function(t){return s(a(t.values))})}}function s(t){return!t||t.indexOf("NaN")>=0?"M0,0":t}function l(e,r){if(!A.brushOn()&&A.xyTipsOn()){var i=x+"-list",a=e.select("g."+i);a.empty()&&(a=e.append("g").attr("class",i)),r.each(function(e,r){var i=e.values;y&&(i=i.filter(y));var o=a.select("g."+x+"._"+r);o.empty()&&(o=a.append("g").attr("class",x+" _"+r)),c(o);var s=o.selectAll("circle."+w).data(i,n.pluck("x"));s.enter().append("circle").attr("class",w).attr("r",h()).style("fill-opacity",P).style("stroke-opacity",O).attr("fill",A.getColor).on("mousemove",function(){var e=t.select(this);f(e),d(e,o)}).on("mouseout",function(){var e=t.select(this);p(e),g(o)}),s.call(m,e),n.transition(s,A.transitionDuration()).attr("cx",function(t){return n.utils.safeNumber(A.x()(t.x))}).attr("cy",function(t){return n.utils.safeNumber(A.y()(t.y+t.y0))}).attr("fill",A.getColor),s.exit().remove()})}}function u(e){e.each(function(e,r){var i=t.select(this),a=i.selectAll("text.lineLabel").data(e.values,n.pluck("x"));a.enter().append("text").attr("class","lineLabel").attr("text-anchor","middle"),n.transition(a,A.transitionDuration()).attr("x",function(t){return n.utils.safeNumber(A.x()(t.x))}).attr("y",function(t){var e=A.y()(t.y+t.y0)-T;return n.utils.safeNumber(e)}).text(function(t){return A.label()(t)}),n.transition(a.exit(),A.transitionDuration()).attr("height",0).remove()})}function c(t){var e=t.select("path."+C).empty()?t.append("path").attr("class",C):t.select("path."+C);e.style("display","none").attr("stroke-dasharray","5,5");var n=t.select("path."+k).empty()?t.append("path").attr("class",k):t.select("path."+k);n.style("display","none").attr("stroke-dasharray","5,5")}function f(t){return t.style("fill-opacity",.8),t.style("stroke-opacity",.8),t.attr("r",M),t}function d(t,e){var n=t.attr("cx"),r=t.attr("cy"),i=A._yAxisX()-A.margins().left,a="M"+i+" "+r+"L"+n+" "+r,o="M"+n+" "+A.yAxisHeight()+"L"+n+" "+r;e.select("path."+C).style("display","").attr("d",a),e.select("path."+k).style("display","").attr("d",o)}function h(){return D||M}function p(t){t.style("fill-opacity",P).style("stroke-opacity",O).attr("r",h())}function g(t){t.select("path."+C).style("display","none"),t.select("path."+k).style("display","none")}function m(t,e){A.renderTitle()&&(t.selectAll("title").remove(),t.append("title").text(n.pluck("data",A.title(e.name))))}function v(e,n,r){return function(){var i=t.select(this),a=i.attr("stroke")===e&&i.attr("stroke-dasharray")===(n instanceof Array?n.join(","):null)||i.attr("fill")===e;return r?!a:a}}var y,_,b=5,x="dc-tooltip",w="dot",C="yRef",k="xRef",S=1e-6,T=3,A=n.stackMixin(n.coordinateGridMixin({})),E=!1,M=b,D=null,P=S,O=S,N="linear",L=.7,I=!0;return A.transitionDuration(500),A._rangeBandPadding(1),A.plotData=function(){var t=A.chartBodyG(),e=t.selectAll("g.stack-list");e.empty()&&(e=t.append("g").attr("class","stack-list"));var n=e.selectAll("g.stack").data(A.data()),r=n.enter().append("g").attr("class",function(t,e){return"stack _"+e});a(r,n),o(r,n),l(t,n),A.renderLabel()&&u(n)},A.interpolate=function(t){return arguments.length?(N=t,A):N},A.tension=function(t){return arguments.length?(L=t,A):L},A.defined=function(t){return arguments.length?(y=t,A):y},A.dashStyle=function(t){return arguments.length?(_=t,A):_},A.renderArea=function(t){return arguments.length?(E=t,A):E},A.label(function(t){return n.utils.printSingleValue(t.y0+t.y)},!1),A.xyTipsOn=function(t){return arguments.length?(I=t,A):I},A.dotRadius=function(t){return arguments.length?(M=t,A):M},A.renderDataPoints=function(t){return arguments.length?(t?(P=t.fillOpacity||.8,O=t.strokeOpacity||.8,D=t.radius||2):(P=S,O=S,D=null),A):{fillOpacity:P,strokeOpacity:O,radius:D}},A.legendHighlight=function(t){A.isLegendableHidden(t)||A.g().selectAll("path.line, path.area").classed("highlight",v(t.color,t.dashstyle)).classed("fadeout",v(t.color,t.dashstyle,!0))},A.legendReset=function(){A.g().selectAll("path.line, path.area").classed("highlight",!1).classed("fadeout",!1)},n.override(A,"legendables",function(){var t=A._legendables();return _?t.map(function(t){return t.dashstyle=_,t}):t}),A.anchor(e,r)},n.dataCount=function(e,r){var i=t.format(",d"),a=n.baseMixin({}),o={some:"",all:""};return a.html=function(t){return arguments.length?(t.all&&(o.all=t.all),t.some&&(o.some=t.some),a):o},a.formatNumber=function(t){return arguments.length?(i=t,a):i},a._doRender=function(){var t=a.dimension().size(),e=a.group().value(),n=i(t),r=i(e);return t===e&&""!==o.all?a.root().html(o.all.replace("%total-count",n).replace("%filter-count",r)):""!==o.some?a.root().html(o.some.replace("%total-count",n).replace("%filter-count",r)):(a.selectAll(".total-count").text(n),a.selectAll(".filter-count").text(r)),a},a._doRedraw=function(){return a._doRender()},a.anchor(e,r)},n.dataTable=function(e,r){function i(){var t=!0;if(g.forEach(function(e){t&="function"==typeof e}),!t){var e=h.selectAll("thead").data([0]);e.enter().append("thead"),e.exit().remove();var n=e.selectAll("tr").data([0]);n.enter().append("tr"),n.exit().remove();var r=n.selectAll("th").data(g);r.enter().append("th"),r.exit().remove(),r.attr("class",d).html(function(t){return h._doColumnHeaderFormat(t)})}var i=h.root().selectAll("tbody").data(a(),function(t){return h.keyAccessor()(t)}),o=i.enter().append("tbody");return _===!0&&o.append("tr").attr("class",f).append("td").attr("class",l).attr("colspan",g.length).html(function(t){return h.keyAccessor()(t)}),i.exit().remove(),o}function a(){var e;return e=v===t.ascending?h.dimension().bottom(p):h.dimension().top(p),
t.nest().key(h.group()).sortKeys(v).entries(e.sort(function(t,e){return v(m(t),m(e))}).slice(y,s))}function o(t){var e=t.order().selectAll("tr."+u).data(function(t){return t.values}),n=e.enter().append("tr").attr("class",u);return g.forEach(function(t,e){n.append("td").attr("class",c+" _"+e).html(function(e){return h._doColumnValueFormat(t,e)})}),e.exit().remove(),e}var s,l="dc-table-label",u="dc-table-row",c="dc-table-column",f="dc-table-group",d="dc-table-head",h=n.baseMixin({}),p=25,g=[],m=function(t){return t},v=t.ascending,y=0,_=!0;return h._doRender=function(){return h.selectAll("tbody").remove(),o(i()),h},h._doColumnValueFormat=function(t,e){return"function"==typeof t?t(e):"string"==typeof t?e[t]:t.format(e)},h._doColumnHeaderFormat=function(t){return"function"==typeof t?h._doColumnHeaderFnToString(t):"string"==typeof t?h._doColumnHeaderCapitalize(t):String(t.label)},h._doColumnHeaderCapitalize=function(t){return t.charAt(0).toUpperCase()+t.slice(1)},h._doColumnHeaderFnToString=function(t){var e=String(t),n=e.indexOf("return ");if(n>=0){var r=e.lastIndexOf(";");if(r>=0){e=e.substring(n+7,r);var i=e.indexOf("numberFormat");i>=0&&(e=e.replace("numberFormat",""))}}return e},h._doRedraw=function(){return h._doRender()},h.size=function(t){return arguments.length?(p=t,h):p},h.beginSlice=function(t){return arguments.length?(y=t,h):y},h.endSlice=function(t){return arguments.length?(s=t,h):s},h.columns=function(t){return arguments.length?(g=t,h):g},h.sortBy=function(t){return arguments.length?(m=t,h):m},h.order=function(t){return arguments.length?(v=t,h):v},h.showGroups=function(t){return arguments.length?(_=t,h):_},h.anchor(e,r)},n.dataGrid=function(e,r){function i(){var t=d.root().selectAll("div."+f).data(a(),function(t){return d.keyAccessor()(t)}),e=t.enter().append("div").attr("class",f);return y&&e.html(function(t){return y(t)}),t.exit().remove(),e}function a(){var e=d.dimension().top(h);return t.nest().key(d.group()).sortKeys(m).entries(e.sort(function(t,e){return m(g(t),g(e))}).slice(v,s))}function o(t){var e=t.order().selectAll("div."+u).data(function(t){return t.values});return e.enter().append("div").attr("class",u).html(function(t){return p(t)}),e.exit().remove(),e}var s,l="dc-grid-label",u="dc-grid-item",c="dc-grid-group",f="dc-grid-top",d=n.baseMixin({}),h=999,p=function(t){return"you need to provide an html() handling param:  "+JSON.stringify(t)},g=function(t){return t},m=t.ascending,v=0,y=function(t){return"<div class='"+c+"'><h1 class='"+l+"'>"+d.keyAccessor()(t)+"</h1></div>"};return d._doRender=function(){return d.selectAll("div."+f).remove(),o(i()),d},d._doRedraw=function(){return d._doRender()},d.beginSlice=function(t){return arguments.length?(v=t,d):v},d.endSlice=function(t){return arguments.length?(s=t,d):s},d.size=function(t){return arguments.length?(h=t,d):h},d.html=function(t){return arguments.length?(p=t,d):p},d.htmlGroup=function(t){return arguments.length?(y=t,d):y},d.sortBy=function(t){return arguments.length?(g=t,d):g},d.order=function(t){return arguments.length?(m=t,d):m},d.anchor(e,r)},n.bubbleChart=function(e,r){function i(t){var e=t.enter().append("g");e.attr("class",u.BUBBLE_NODE_CLASS).attr("transform",d).append("circle").attr("class",function(t,e){return u.BUBBLE_CLASS+" _"+e}).on("click",u.onClick).attr("fill",u.getColor).attr("r",0),n.transition(t,u.transitionDuration()).selectAll("circle."+u.BUBBLE_CLASS).attr("r",function(t){return u.bubbleR(t)}).attr("opacity",function(t){return u.bubbleR(t)>0?1:0}),u._doRenderLabel(e),u._doRenderTitles(e)}function a(t){n.transition(t,u.transitionDuration()).attr("transform",d).selectAll("circle."+u.BUBBLE_CLASS).attr("fill",u.getColor).attr("r",function(t){return u.bubbleR(t)}).attr("opacity",function(t){return u.bubbleR(t)>0?1:0}),u.doUpdateLabels(t),u.doUpdateTitles(t)}function o(t){t.exit().remove()}function s(t){var e=u.x()(u.keyAccessor()(t));return isNaN(e)&&(e=0),e}function l(t){var e=u.y()(u.valueAccessor()(t));return isNaN(e)&&(e=0),e}var u=n.bubbleMixin(n.coordinateGridMixin({})),c=!1,f=!1;u.transitionDuration(750);var d=function(t){return"translate("+s(t)+","+l(t)+")"};return u.elasticRadius=function(t){return arguments.length?(c=t,u):c},u.sortBubbleSize=function(t){return arguments.length?(f=t,u):f},u.plotData=function(){c&&u.r().domain([u.rMin(),u.rMax()]),u.r().range([u.MIN_RADIUS,u.xAxisLength()*u.maxBubbleRelativeSize()]);var e=u.data();if(f){var n=u.radiusValueAccessor();e.sort(function(e,r){return t.descending(n(e),n(r))})}var r=u.chartBodyG().selectAll("g."+u.BUBBLE_NODE_CLASS).data(e,function(t){return t.key});f&&r.order(),i(r),a(r),o(r),u.fadeDeselectedArea()},u.renderBrush=function(){},u.redrawBrush=function(){u.fadeDeselectedArea()},u.anchor(e,r)},n.compositeChart=function(e,r){function i(t,e){var n,r,i,o,s;return t&&(n=d(),r=g()),e&&(i=h(),o=m()),w.alignYAxes()&&t&&e&&(s=a(n,r,i,o)),s||{lyAxisMin:n,lyAxisMax:r,ryAxisMin:i,ryAxisMax:o}}function a(t,e,n,r){var i=(r-n)/(e-t);return{lyAxisMin:Math.min(t,n/i),lyAxisMax:Math.max(e,r/i),ryAxisMin:Math.min(n,t*i),ryAxisMax:Math.max(r,e*i)}}function o(e){var n=void 0===w.rightY()||w.elasticY(),r=n||w.resizing();void 0===w.rightY()&&w.rightY(t.scale.linear()),n&&w.rightY().domain([e.ryAxisMin,e.ryAxisMax]),r&&w.rightY().rangeRound([w.yAxisHeight(),0]),w.rightY().range([w.yAxisHeight(),0]),w.rightYAxis(w.rightYAxis().scale(w.rightY())),w.rightYAxis().orient("right")}function s(e){var n=void 0===w.y()||w.elasticY(),r=n||w.resizing();void 0===w.y()&&w.y(t.scale.linear()),n&&w.y().domain([e.lyAxisMin,e.lyAxisMax]),r&&w.y().rangeRound([w.yAxisHeight(),0]),w.y().range([w.yAxisHeight(),0]),w.yAxis(w.yAxis().scale(w.y())),w.yAxis().orient("left")}function l(t,e){t._generateG(w.g()),t.g().attr("class",b+" _"+e)}function u(){return C.filter(function(t){return!t.useRightYAxis()})}function c(){return C.filter(function(t){return t.useRightYAxis()})}function f(t){return t.map(function(t){return t.yAxisMin()})}function d(){return t.min(f(u()))}function h(){return t.min(f(c()))}function p(t){return t.map(function(t){return t.yAxisMax()})}function g(){return n.utils.add(t.max(p(u())),w.yAxisPadding())}function m(){return n.utils.add(t.max(p(c())),w.yAxisPadding())}function v(){return C.map(function(t){return t.xAxisMin()})}function y(){return C.map(function(t){return t.xAxisMax()})}var _,b="sub",x=12,w=n.coordinateGridMixin({}),C=[],k={},S=!1,T=!0,A=!1,E=t.svg.axis(),M=0,D=x,P=!1;return w._mandatoryAttributes([]),w.transitionDuration(500),n.override(w,"_generateG",function(){for(var t=this.__generateG(),e=0;e<C.length;++e){var n=C[e];l(n,e),n.dimension()||n.dimension(w.dimension()),n.group()||n.group(w.group()),n.chartGroup(w.chartGroup()),n.svg(w.svg()),n.xUnits(w.xUnits()),n.transitionDuration(w.transitionDuration()),n.brushOn(w.brushOn()),n.renderTitle(w.renderTitle()),n.elasticX(w.elasticX())}return t}),w._brushing=function(){for(var t=w.extendBrush(),e=w.brushIsEmpty(t),n=0;n<C.length;++n)C[n].replaceFilter(e?null:t)},w._prepareYAxis=function(){var t=0!==u().length,e=0!==c().length,n=i(t,e);t&&s(n),e&&o(n),u().length>0&&!P?w._renderHorizontalGridLinesForAxis(w.g(),w.y(),w.yAxis()):c().length>0&&w._renderHorizontalGridLinesForAxis(w.g(),_,E)},w.renderYAxis=function(){0!==u().length&&(w.renderYAxisAt("y",w.yAxis(),w.margins().left),w.renderYAxisLabel("y",w.yAxisLabel(),-90)),0!==c().length&&(w.renderYAxisAt("yr",w.rightYAxis(),w.width()-w.margins().right),w.renderYAxisLabel("yr",w.rightYAxisLabel(),90,w.width()-D))},w.plotData=function(){for(var t=0;t<C.length;++t){var e=C[t];e.g()||l(e,t),S&&e.colors(w.colors()),e.x(w.x()),e.xAxis(w.xAxis()),e.useRightYAxis()?(e.y(w.rightY()),e.yAxis(w.rightYAxis())):(e.y(w.y()),e.yAxis(w.yAxis())),e.plotData(),e._activateRenderlets()}},w.useRightAxisGridLines=function(t){return arguments?(P=t,w):P},w.childOptions=function(t){return arguments.length?(k=t,C.forEach(function(t){t.options(k)}),w):k},w.fadeDeselectedArea=function(){for(var t=0;t<C.length;++t){var e=C[t];e.brush(w.brush()),e.fadeDeselectedArea()}},w.rightYAxisLabel=function(t,e){return arguments.length?(M=t,w.margins().right-=D,D=void 0===e?x:e,w.margins().right+=D,w):M},w.compose=function(t){return C=t,C.forEach(function(t){t.height(w.height()),t.width(w.width()),t.margins(w.margins()),T&&t.title(w.title()),t.options(k)}),w},w.children=function(){return C},w.shareColors=function(t){return arguments.length?(S=t,w):S},w.shareTitle=function(t){return arguments.length?(T=t,w):T},w.rightY=function(t){return arguments.length?(_=t,w.rescale(),w):_},w.alignYAxes=function(t){return arguments.length?(A=t,w.rescale(),w):A},delete w.yAxisMin,delete w.yAxisMax,n.override(w,"xAxisMin",function(){return n.utils.subtract(t.min(v()),w.xAxisPadding())}),n.override(w,"xAxisMax",function(){return n.utils.add(t.max(y()),w.xAxisPadding())}),w.legendables=function(){return C.reduce(function(t,e){return S&&e.colors(w.colors()),t.push.apply(t,e.legendables()),t},[])},w.legendHighlight=function(t){for(var e=0;e<C.length;++e){var n=C[e];n.legendHighlight(t)}},w.legendReset=function(t){for(var e=0;e<C.length;++e){var n=C[e];n.legendReset(t)}},w.legendToggle=function(){console.log("composite should not be getting legendToggle itself")},w.rightYAxis=function(t){return arguments.length?(E=t,w):E},w.anchor(e,r)},n.seriesChart=function(e,r){function i(e,n){return t.ascending(l.keyAccessor()(e),l.keyAccessor()(n))}function a(t){u[t].g()&&u[t].g().remove(),delete u[t]}function o(){Object.keys(u).map(a),u={}}var s,l=n.compositeChart(e,r),u={},c=n.lineChart,f=t.ascending,d=i;return l._mandatoryAttributes().push("seriesAccessor","chart"),l.shareColors(!0),l._preprocessData=function(){var e,n=[],i=t.nest().key(s);f&&i.sortKeys(f),d&&i.sortValues(d);var o=i.entries(l.data()),h=o.map(function(i,a){var o=u[i.key]||c.call(l,l,r,i.key,a);return u[i.key]||(e=!0),u[i.key]=o,n.push(i.key),o.dimension(l.dimension()).group({all:t.functor(i.values)},i.key).keyAccessor(l.keyAccessor()).valueAccessor(l.valueAccessor()).brushOn(l.brushOn())});Object.keys(u).filter(function(t){return-1===n.indexOf(t)}).forEach(function(t){a(t),e=!0}),l._compose(h),e&&l.legend()&&l.legend().render()},l.chart=function(t){return arguments.length?(c=t,o(),l):c},l.seriesAccessor=function(t){return arguments.length?(s=t,o(),l):s},l.seriesSort=function(t){return arguments.length?(f=t,o(),l):f},l.valueSort=function(t){return arguments.length?(d=t,o(),l):d},l._compose=l.compose,delete l.compose,l},n.geoChoroplethChart=function(e,r){function i(t){var e=a();if(o(t)){var n=s(t);h(n,t,e),p(n,t,e)}}function a(){for(var t={},e=g.data(),n=0;n<e.length;++n)t[g.keyAccessor()(e[n])]=g.valueAccessor()(e[n]);return t}function o(t){return d(t).keyAccessor}function s(t){var e=g.svg().selectAll(l(t)).classed("selected",function(e){return u(t,e)}).classed("deselected",function(e){return c(t,e)}).attr("class",function(e){var r=d(t).name,i=n.utils.nameToId(d(t).keyAccessor(e)),a=r+" "+i;return u(t,e)&&(a+=" selected"),c(t,e)&&(a+=" deselected"),a});return e}function l(t){return"g.layer"+t+" g."+d(t).name}function u(t,e){return g.hasFilter()&&g.hasFilter(f(t,e))}function c(t,e){return g.hasFilter()&&!g.hasFilter(f(t,e))}function f(t,e){return d(t).keyAccessor(e)}function d(t){return y[t]}function h(e,r,i){var a=e.select("path").attr("fill",function(){var e=t.select(this).attr("fill");return e?e:"none"}).on("click",function(t){return g.onClick(t,r)});n.transition(a,g.transitionDuration()).attr("fill",function(t,e){return g.getColor(i[d(r).keyAccessor(t)],e)})}function p(t,e,n){g.renderTitle()&&t.selectAll("title").text(function(t){var r=f(e,t),i=n[r];return g.title()({key:r,value:i})})}var g=n.colorMixin(n.baseMixin({}));g.colorAccessor(function(t){return t||0});var m,v=t.geo.path(),y=[];return g._doRender=function(){g.resetSvg();for(var t=0;t<y.length;++t){var e=g.svg().append("g").attr("class","layer"+t),n=e.selectAll("g."+d(t).name).data(d(t).data).enter().append("g").attr("class",d(t).name);n.append("path").attr("fill","white").attr("d",v),n.append("title"),i(t)}m=!1},g.onClick=function(t,e){var r=d(e).keyAccessor(t);n.events.trigger(function(){g.filter(r),g.redrawGroup()})},g._doRedraw=function(){for(var t=0;t<y.length;++t)i(t),m&&g.svg().selectAll("g."+d(t).name+" path").attr("d",v);m=!1},g.overlayGeoJson=function(t,e,n){for(var r=0;r<y.length;++r)if(y[r].name===e)return y[r].data=t,y[r].keyAccessor=n,g;return y.push({name:e,data:t,keyAccessor:n}),g},g.projection=function(t){return v.projection(t),m=!0,g},g.geoJsons=function(){return y},g.geoPath=function(){return v},g.removeGeoJson=function(t){for(var e=[],n=0;n<y.length;++n){var r=y[n];r.name!==t&&e.push(r)}return y=e,g},g.anchor(e,r)},n.bubbleOverlay=function(e,r){function i(){return u=h.select("g."+c),u.empty()&&(u=h.svg().append("g").attr("class",c)),u}function a(){var t=o();p.forEach(function(e){var r=s(e,t),i=r.select("circle."+d);i.empty()&&(i=r.append("circle").attr("class",d).attr("r",0).attr("fill",h.getColor).on("click",h.onClick)),n.transition(i,h.transitionDuration()).attr("r",function(t){return h.bubbleR(t)}),h._doRenderLabel(r),h._doRenderTitles(r)})}function o(){var t={};return h.data().forEach(function(e){t[h.keyAccessor()(e)]=e}),t}function s(t,e){var r=f+" "+n.utils.nameToId(t.name),i=u.select("g."+n.utils.nameToId(t.name));return i.empty()&&(i=u.append("g").attr("class",r).attr("transform","translate("+t.x+","+t.y+")")),i.datum(e[t.name]),i}function l(){var t=o();p.forEach(function(e){var r=s(e,t),i=r.select("circle."+d);n.transition(i,h.transitionDuration()).attr("r",function(t){return h.bubbleR(t)}).attr("fill",h.getColor),h.doUpdateLabels(r),h.doUpdateTitles(r)})}var u,c="bubble-overlay",f="node",d="bubble",h=n.bubbleMixin(n.baseMixin({})),p=[];return h.transitionDuration(750),h.radiusValueAccessor(function(t){return t.value}),h.point=function(t,e,n){return p.push({name:t,x:e,y:n}),h},h._doRender=function(){return u=i(),h.r().range([h.MIN_RADIUS,h.width()*h.maxBubbleRelativeSize()]),a(),h.fadeDeselectedArea(),h},h._doRedraw=function(){return l(),h.fadeDeselectedArea(),h},h.debug=function(e){if(e){var r=h.select("g."+n.constants.DEBUG_GROUP_CLASS);r.empty()&&(r=h.svg().append("g").attr("class",n.constants.DEBUG_GROUP_CLASS));var i=r.append("text").attr("x",10).attr("y",20);r.append("rect").attr("width",h.width()).attr("height",h.height()).on("mousemove",function(){var e=t.mouse(r.node()),n=e[0]+", "+e[1];i.text(n)})}else h.selectAll(".debug").remove();return h},h.anchor(e,r),h},n.rowChart=function(e,r){function i(){if(!_||b){var e=t.extent(x,O.cappedValueAccessor);e[0]>0&&(e[0]=0),e[1]<0&&(e[1]=0),_=t.scale.linear().domain(e).range([0,O.effectiveWidth()])}N.scale(_)}function a(){var t=y.select("g.axis");i(),t.empty()&&(t=y.append("g").attr("class","axis")),t.attr("transform","translate(0, "+O.effectiveHeight()+")"),n.transition(t,O.transitionDuration()).call(N)}function o(){y.selectAll("g.tick").select("line.grid-line").remove(),y.selectAll("g.tick").append("line").attr("class","grid-line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",function(){return-O.effectiveHeight()})}function s(){x=O.data(),a(),o();var t=y.selectAll("g."+M).data(x);l(t),u(t),f(t)}function l(t){var e=t.enter().append("g").attr("class",function(t,e){return M+" _"+e});e.append("rect").attr("width",0),h(e)}function u(t){t.exit().remove()}function c(){var t=_(0);return t===-(1/0)||t!==t?_(1):t}function f(t){var e,r=x.length;e=E?E:(O.effectiveHeight()-(r+1)*A)/r,k||(C=e/2);var i=t.attr("transform",function(t,n){return"translate(0,"+((n+1)*A+n*e)+")"}).select("rect").attr("height",e).attr("fill",O.getColor).on("click",g).classed("deselected",function(t){return!!O.hasFilter()&&!v(t)}).classed("selected",function(t){return!!O.hasFilter()&&v(t)});n.transition(i,O.transitionDuration()).attr("width",function(t){return Math.abs(c()-_(O.valueAccessor()(t)))}).attr("transform",m),d(t),p(t)}function d(t){O.renderTitle()&&(t.selectAll("title").remove(),t.append("title").text(O.title()))}function h(t){O.renderLabel()&&t.append("text").on("click",g),O.renderTitleLabel()&&t.append("text").attr("class",D).on("click",g)}function p(t){if(O.renderLabel()){var e=t.select("text").attr("x",w).attr("y",C).attr("dy",S).on("click",g).attr("class",function(t,e){return M+" _"+e}).text(function(t){return O.label()(t)});n.transition(e,O.transitionDuration()).attr("transform",m)}if(O.renderTitleLabel()){var r=t.select("."+D).attr("x",O.effectiveWidth()-T).attr("y",C).attr("dy",S).attr("text-anchor","end").on("click",g).attr("class",function(t,e){return D+" _"+e}).text(function(t){return O.title()(t)});n.transition(r,O.transitionDuration()).attr("transform",m)}}function g(t){O.onClick(t)}function m(t){var e=_(O.cappedValueAccessor(t)),n=c(),r=e>n?n:e;return"translate("+r+",0)"}function v(t){return O.hasFilter(O.cappedKeyAccessor(t))}var y,_,b,x,w=10,C=15,k=!1,S="0.35em",T=2,A=5,E=!1,M="row",D="titlerow",P=!1,O=n.capMixin(n.marginMixin(n.colorMixin(n.baseMixin({})))),N=t.svg.axis().orient("bottom");return O.rowsCap=O.cap,O._doRender=function(){return O.resetSvg(),y=O.svg().append("g").attr("transform","translate("+O.margins().left+","+O.margins().top+")"),s(),O},O.title(function(t){return O.cappedKeyAccessor(t)+": "+O.cappedValueAccessor(t)}),O.label(O.cappedKeyAccessor),O.x=function(t){return arguments.length?(_=t,O):_},O.renderTitleLabel=function(t){return arguments.length?(P=t,O):P},O._doRedraw=function(){return s(),O},O.xAxis=function(){return N},O.fixedBarHeight=function(t){return arguments.length?(E=t,O):E},O.gap=function(t){return arguments.length?(A=t,O):A},O.elasticX=function(t){return arguments.length?(b=t,O):b},O.labelOffsetX=function(t){return arguments.length?(w=t,O):w},O.labelOffsetY=function(t){return arguments.length?(C=t,k=!0,O):C},O.titleLabelOffsetX=function(t){return arguments.length?(T=t,O):T},O.anchor(e,r)},n.legend=function(){function t(){return u+l}var e,r,i=2,a={},o=0,s=0,l=12,u=5,c=!1,f=560,d=70,h=!1,p=n.pluck("name");return a.parent=function(t){return arguments.length?(e=t,a):e},a.render=function(){e.svg().select("g.dc-legend").remove(),r=e.svg().append("g").attr("class","dc-legend").attr("transform","translate("+o+","+s+")");var a=e.legendables(),g=r.selectAll("g.dc-legend-item").data(a).enter().append("g").attr("class","dc-legend-item").on("mouseover",function(t){e.legendHighlight(t)}).on("mouseout",function(t){e.legendReset(t)}).on("click",function(t){t.chart.legendToggle(t)});r.selectAll("g.dc-legend-item").classed("fadeout",function(t){return t.chart.isLegendableHidden(t)}),a.some(n.pluck("dashstyle"))?g.append("line").attr("x1",0).attr("y1",l/2).attr("x2",l).attr("y2",l/2).attr("stroke-width",2).attr("stroke-dasharray",n.pluck("dashstyle")).attr("stroke",n.pluck("color")):g.append("rect").attr("width",l).attr("height",l).attr("fill",function(t){return t?t.color:"blue"}),g.append("text").text(p).attr("x",l+i).attr("y",function(){return l/2+(this.clientHeight?this.clientHeight:13)/2-2});var m=0,v=0;g.attr("transform",function(e,n){if(c){var r="translate("+m+","+v*t()+")",i=h===!0?this.getBBox().width+u:d;return m+i>=f?(++v,m=0):m+=i,r}return"translate(0,"+n*t()+")"})},a.x=function(t){return arguments.length?(o=t,a):o},a.y=function(t){return arguments.length?(s=t,a):s},a.gap=function(t){return arguments.length?(u=t,a):u},a.itemHeight=function(t){return arguments.length?(l=t,a):l},a.horizontal=function(t){return arguments.length?(c=t,a):c},a.legendWidth=function(t){return arguments.length?(f=t,a):f},a.itemWidth=function(t){return arguments.length?(d=t,a):d},a.autoItemWidth=function(t){return arguments.length?(h=t,a):h},a.legendText=function(t){return arguments.length?(p=t,a):p},a},n.scatterPlot=function(e,r){function i(e,r){var i=a.selectAll(".chart-body path.symbol").filter(function(){return e(t.select(this))}),s=o.size();o.size(Math.pow(r,2)),n.transition(i,a.transitionDuration()).attr("d",o),o.size(s)}var a=n.coordinateGridMixin({}),o=t.svg.symbol(),s=function(t){return t.value},l=a.keyAccessor();a.keyAccessor(function(t){return l(t)[0]}),a.valueAccessor(function(t){return l(t)[1]}),a.colorAccessor(function(){return a._groupName});var u=function(t){return"translate("+a.x()(a.keyAccessor()(t))+","+a.y()(a.valueAccessor()(t))+")"},c=7,f=5,d=3,h=null,p=1,g=0,m=[];return o.size(function(t,e){return s(t)?m[e]?Math.pow(f,2):Math.pow(d,2):g}),n.override(a,"_filter",function(t){return arguments.length?a.__filter(n.filters.RangedTwoDimensionalFilter(t)):a.__filter()}),a.plotData=function(){var t=a.chartBodyG().selectAll("path.symbol").data(a.data());t.enter().append("path").attr("class","symbol").attr("opacity",0).attr("fill",a.getColor).attr("transform",u),t.each(function(t,e){m[e]=!a.filter()||a.filter().isFiltered([t.key[0],t.key[1]])}),n.transition(t,a.transitionDuration()).attr("opacity",function(t,e){return s(t)?m[e]?1:a.excludedOpacity():0}).attr("fill",function(t,e){return a.excludedColor()&&!m[e]?a.excludedColor():a.getColor(t)}).attr("transform",u).attr("d",o),n.transition(t.exit(),a.transitionDuration()).attr("opacity",0).remove()},a.existenceAccessor=function(t){return arguments.length?(s=t,this):s},a.symbol=function(t){return arguments.length?(o.type(t),a):o.type()},a.symbolSize=function(t){return arguments.length?(f=t,a):f},a.highlightedSize=function(t){return arguments.length?(c=t,a):c},a.excludedSize=function(t){return arguments.length?(d=t,a):d},a.excludedColor=function(t){return arguments.length?(h=t,a):h},a.excludedOpacity=function(t){return arguments.length?(p=t,a):p},a.hiddenSize=a.emptySize=function(t){return arguments.length?(g=t,a):g},a.legendables=function(){return[{chart:a,name:a._groupName,color:a.getColor()}]},a.legendHighlight=function(e){i(function(t){return t.attr("fill")===e.color},c),a.selectAll(".chart-body path.symbol").filter(function(){return t.select(this).attr("fill")!==e.color}).classed("fadeout",!0)},a.legendReset=function(e){i(function(t){return t.attr("fill")===e.color},f),a.selectAll(".chart-body path.symbol").filter(function(){return t.select(this).attr("fill")!==e.color}).classed("fadeout",!1)},a.setHandlePaths=function(){},a.extendBrush=function(){var t=a.brush().extent();return a.round()&&(t[0]=t[0].map(a.round()),t[1]=t[1].map(a.round()),a.g().select(".brush").call(a.brush().extent(t))),t},a.brushIsEmpty=function(t){return a.brush().empty()||!t||t[0][0]>=t[1][0]||t[0][1]>=t[1][1]},a._brushing=function(){var t=a.extendBrush();if(a.redrawBrush(a.g()),a.brushIsEmpty(t))n.events.trigger(function(){a.filter(null),a.redrawGroup()});else{var e=n.filters.RangedTwoDimensionalFilter(t);n.events.trigger(function(){a.filter(null),a.filter(e),a.redrawGroup()},n.constants.EVENT_DELAY)}},a.setBrushY=function(t){t.call(a.brush().y(a.y()))},a.anchor(e,r)},n.numberDisplay=function(e,r){var i,a="number-display",o=t.format(".2s"),s=n.baseMixin({}),l={one:"",some:"",none:""};return s._mandatoryAttributes(["group"]),s.html=function(t){return arguments.length?(t.none?l.none=t.none:t.one?l.none=t.one:t.some&&(l.none=t.some),t.one?l.one=t.one:t.some&&(l.one=t.some),t.some?l.some=t.some:t.one&&(l.some=t.one),s):l},s.value=function(){return s.data()},s.data(function(t){var e=t.value?t.value():t.top(1)[0];return s.valueAccessor()(e)}),s.transitionDuration(250),s._doRender=function(){var e=s.value(),n=s.selectAll("."+a);n.empty()&&(n=n.data([0]).enter().append("span").attr("class",a)),n.transition().duration(s.transitionDuration()).ease("quad-out-in").tween("text",function(){var n=isFinite(i)?i:0,r=t.interpolateNumber(n||0,e);return i=e,function(t){var n=null,i=s.formatNumber()(r(t));0===e&&""!==l.none?n=l.none:1===e&&""!==l.one?n=l.one:""!==l.some&&(n=l.some),this.innerHTML=n?n.replace("%number",i):i}})},s._doRedraw=function(){return s._doRender()},s.formatNumber=function(t){return arguments.length?(o=t,s):o},s.anchor(e,r)},n.heatMap=function(e,r){function i(t,e){var r=d.selectAll(".box-group").filter(function(n){return n.key[t]===e}),i=r.filter(function(t){return!d.hasFilter(t.key)});n.events.trigger(function(){i.empty()?r.each(function(t){d.filter(t.key)}):i.each(function(t){d.filter(t.key)}),d.redrawGroup()})}function a(t,e,n){return!e||n[e-1]!==t}var o,s,l,u=6.75,c=u,f=u,d=n.colorMixin(n.marginMixin(n.baseMixin({})));d._mandatoryAttributes(["group"]),d.title(d.colorAccessor());var h=function(t){return t},p=function(t){return t};d.colsLabel=function(t){return arguments.length?(h=t,d):h},d.rowsLabel=function(t){return arguments.length?(p=t,d):p};var g=function(t){i(0,t)},m=function(t){i(1,t)},v=function(t){var e=t.key;n.events.trigger(function(){d.filter(e),d.redrawGroup()})};return n.override(d,"filter",function(t){return arguments.length?d._filter(n.filters.TwoDimensionalFilter(t)):d._filter()}),d.rows=function(e){if(arguments.length)return l=e,d;if(l)return l;var n=d.data().map(d.valueAccessor());return n.sort(t.ascending),t.scale.ordinal().domain(n.filter(a))},d.cols=function(e){if(arguments.length)return s=e,d;if(s)return s;var n=d.data().map(d.keyAccessor());return n.sort(t.ascending),t.scale.ordinal().domain(n.filter(a))},d._doRender=function(){return d.resetSvg(),o=d.svg().append("g").attr("class","heatmap").attr("transform","translate("+d.margins().left+","+d.margins().top+")"),d._doRedraw()},d._doRedraw=function(){var t=d.rows(),e=d.cols(),r=t.domain().length,i=e.domain().length,a=Math.floor(d.effectiveWidth()/i),s=Math.floor(d.effectiveHeight()/r);e.rangeRoundBands([0,d.effectiveWidth()]),t.rangeRoundBands([d.effectiveHeight(),0]);var l=o.selectAll("g.box-group").data(d.data(),function(t,e){return d.keyAccessor()(t,e)+"\0"+d.valueAccessor()(t,e)}),u=l.enter().append("g").attr("class","box-group");u.append("rect").attr("class","heat-box").attr("fill","white").on("click",d.boxOnClick()),d.renderTitle()&&(u.append("title"),l.selectAll("title").text(d.title())),n.transition(l.selectAll("rect"),d.transitionDuration()).attr("x",function(t,n){return e(d.keyAccessor()(t,n))}).attr("y",function(e,n){return t(d.valueAccessor()(e,n))}).attr("rx",c).attr("ry",f).attr("fill",d.getColor).attr("width",a).attr("height",s),l.exit().remove();var h=o.selectAll("g.cols");h.empty()&&(h=o.append("g").attr("class","cols axis"));var p=h.selectAll("text").data(e.domain());p.enter().append("text").attr("x",function(t){return e(t)+a/2}).style("text-anchor","middle").attr("y",d.effectiveHeight()).attr("dy",12).on("click",d.xAxisOnClick()).text(d.colsLabel()),n.transition(p,d.transitionDuration()).text(d.colsLabel()).attr("x",function(t){return e(t)+a/2}).attr("y",d.effectiveHeight()),p.exit().remove();var g=o.selectAll("g.rows");g.empty()&&(g=o.append("g").attr("class","rows axis"));var m=g.selectAll("text").data(t.domain());return m.enter().append("text").attr("dy",6).style("text-anchor","end").attr("x",0).attr("dx",-2).on("click",d.yAxisOnClick()).text(d.rowsLabel()),n.transition(m,d.transitionDuration()).text(d.rowsLabel()).attr("y",function(e){return t(e)+s/2}),m.exit().remove(),d.hasFilter()?d.selectAll("g.box-group").each(function(t){d.isSelectedNode(t)?d.highlightSelected(this):d.fadeDeselected(this)}):d.selectAll("g.box-group").each(function(){d.resetHighlight(this)}),d},d.boxOnClick=function(t){return arguments.length?(v=t,d):v},d.xAxisOnClick=function(t){return arguments.length?(g=t,d):g},d.yAxisOnClick=function(t){return arguments.length?(m=t,d):m},d.xBorderRadius=function(t){return arguments.length?(c=t,d):c},d.yBorderRadius=function(t){return arguments.length?(f=t,d):f},d.isSelectedNode=function(t){return d.hasFilter(t.key)},d.anchor(e,r)},function(){function e(t){return[0,t.length-1]}function n(e){return[t.quantile(e,.25),t.quantile(e,.5),t.quantile(e,.75)]}t.box=function(){function r(e){e.each(function(e,n){e=e.map(l).sort(t.ascending);var r=t.select(this),d=e.length,h=e[0],p=e[d-1],g=e.quartiles=c(e),m=u&&u.call(this,e,n),v=m&&m.map(function(t){return e[t]}),y=m?t.range(0,m[0]).concat(t.range(m[1]+1,d)):t.range(d),_=t.scale.linear().domain(s&&s.call(this,e,n)||[h,p]).range([a,0]),b=this.__chart__||t.scale.linear().domain([0,1/0]).range(_.range());this.__chart__=_;var x=r.selectAll("line.center").data(v?[v]:[]);x.enter().insert("line","rect").attr("class","center").attr("x1",i/2).attr("y1",function(t){return b(t[0])}).attr("x2",i/2).attr("y2",function(t){return b(t[1])}).style("opacity",1e-6).transition().duration(o).style("opacity",1).attr("y1",function(t){return _(t[0])}).attr("y2",function(t){return _(t[1])}),x.transition().duration(o).style("opacity",1).attr("y1",function(t){return _(t[0])}).attr("y2",function(t){return _(t[1])}),x.exit().transition().duration(o).style("opacity",1e-6).attr("y1",function(t){return _(t[0])}).attr("y2",function(t){return _(t[1])}).remove();var w=r.selectAll("rect.box").data([g]);w.enter().append("rect").attr("class","box").attr("x",0).attr("y",function(t){return b(t[2])}).attr("width",i).attr("height",function(t){return b(t[0])-b(t[2])}).transition().duration(o).attr("y",function(t){return _(t[2])}).attr("height",function(t){return _(t[0])-_(t[2])}),w.transition().duration(o).attr("y",function(t){return _(t[2])}).attr("height",function(t){return _(t[0])-_(t[2])});var C=r.selectAll("line.median").data([g[1]]);C.enter().append("line").attr("class","median").attr("x1",0).attr("y1",b).attr("x2",i).attr("y2",b).transition().duration(o).attr("y1",_).attr("y2",_),C.transition().duration(o).attr("y1",_).attr("y2",_);var k=r.selectAll("line.whisker").data(v||[]);k.enter().insert("line","circle, text").attr("class","whisker").attr("x1",0).attr("y1",b).attr("x2",i).attr("y2",b).style("opacity",1e-6).transition().duration(o).attr("y1",_).attr("y2",_).style("opacity",1),k.transition().duration(o).attr("y1",_).attr("y2",_).style("opacity",1),k.exit().transition().duration(o).attr("y1",_).attr("y2",_).style("opacity",1e-6).remove();var S=r.selectAll("circle.outlier").data(y,Number);S.enter().insert("circle","text").attr("class","outlier").attr("r",5).attr("cx",i/2).attr("cy",function(t){return b(e[t])}).style("opacity",1e-6).transition().duration(o).attr("cy",function(t){return _(e[t])}).style("opacity",1),S.transition().duration(o).attr("cy",function(t){return _(e[t])}).style("opacity",1),S.exit().transition().duration(o).attr("cy",function(t){return _(e[t])}).style("opacity",1e-6).remove();var T=f||_.tickFormat(8),A=r.selectAll("text.box").data(g);A.enter().append("text").attr("class","box").attr("dy",".3em").attr("dx",function(t,e){return 1&e?6:-6}).attr("x",function(t,e){return 1&e?i:0}).attr("y",b).attr("text-anchor",function(t,e){return 1&e?"start":"end"}).text(T).transition().duration(o).attr("y",_),A.transition().duration(o).text(T).attr("y",_);var E=r.selectAll("text.whisker").data(v||[]);E.enter().append("text").attr("class","whisker").attr("dy",".3em").attr("dx",6).attr("x",i).attr("y",b).text(T).style("opacity",1e-6).transition().duration(o).attr("y",_).style("opacity",1),E.transition().duration(o).text(T).attr("y",_).style("opacity",1),E.exit().transition().duration(o).attr("y",_).style("opacity",1e-6).remove()}),t.timer.flush()}var i=1,a=1,o=0,s=null,l=Number,u=e,c=n,f=null;return r.width=function(t){return arguments.length?(i=t,r):i},r.height=function(t){return arguments.length?(a=t,r):a},r.tickFormat=function(t){return arguments.length?(f=t,r):f},r.duration=function(t){return arguments.length?(o=t,r):o},r.domain=function(e){return arguments.length?(s=null===e?e:t.functor(e),r):s},r.value=function(t){return arguments.length?(l=t,r):l},r.whiskers=function(t){return arguments.length?(u=t,r):u},r.quartiles=function(t){return arguments.length?(c=t,r):c},r}}(),n.boxPlot=function(e,r){function i(t){return function(e){var n=e.quartiles[0],r=e.quartiles[2],i=(r-n)*t,a=-1,o=e.length;do++a;while(e[a]<n-i);do--o;while(e[o]>r+i);return[a,o]}}function a(t){var e=t.enter().append("g");e.attr("class","box").attr("transform",g).call(d).on("click",function(t){l.filter(t.key),l.redrawGroup()})}function o(e){n.transition(e,l.transitionDuration()).attr("transform",g).call(d).each(function(){t.select(this).select("rect.box").attr("fill",l.getColor)})}function s(t){t.exit().remove().call(d);
}var l=n.coordinateGridMixin({}),u=1.5,c=i,f=c(u),d=t.box(),h=null,p=function(t,e){return l.isOrdinal()?l.x().rangeBand():t/(1+l.boxPadding())/e};l.yAxisPadding(12),l.x(t.scale.ordinal()),l.xUnits(n.units.ordinal),l.data(function(t){return t.all().map(function(t){return t.map=function(e){return e.call(t,t)},t}).filter(function(t){var e=l.valueAccessor()(t);return 0!==e.length})}),l.boxPadding=l._rangeBandPadding,l.boxPadding(.8),l.outerPadding=l._outerRangeBandPadding,l.outerPadding(.5),l.boxWidth=function(e){return arguments.length?(p=t.functor(e),l):p};var g=function(t,e){var n=l.x()(l.keyAccessor()(t,e));return"translate("+n+", 0)"};return l._preprocessData=function(){l.elasticX()&&l.x().domain([])},l.plotData=function(){var t=p(l.effectiveWidth(),l.xUnitCount());d.whiskers(f).width(t).height(l.effectiveHeight()).value(l.valueAccessor()).domain(l.y().domain()).duration(l.transitionDuration()).tickFormat(h);var e=l.chartBodyG().selectAll("g.box").data(l.data(),function(t){return t.key});a(e),o(e),s(e),l.fadeDeselectedArea()},l.fadeDeselectedArea=function(){l.hasFilter()?l.g().selectAll("g.box").each(function(t){l.isSelectedNode(t)?l.highlightSelected(this):l.fadeDeselected(this)}):l.g().selectAll("g.box").each(function(){l.resetHighlight(this)})},l.isSelectedNode=function(t){return l.hasFilter(t.key)},l.yAxisMin=function(){var e=t.min(l.data(),function(e){return t.min(l.valueAccessor()(e))});return n.utils.subtract(e,l.yAxisPadding())},l.yAxisMax=function(){var e=t.max(l.data(),function(e){return t.max(l.valueAccessor()(e))});return n.utils.add(e,l.yAxisPadding())},l.tickFormat=function(t){return arguments.length?(h=t,l):h},l.anchor(e,r)},n.abstractBubbleChart=n.bubbleMixin,n.baseChart=n.baseMixin,n.capped=n.capMixin,n.colorChart=n.colorMixin,n.coordinateGridChart=n.coordinateGridMixin,n.marginable=n.marginMixin,n.stackableChart=n.stackMixin,n.d3=t,n.crossfilter=e,n}if("function"==typeof define&&define.amd)define(["d3","crossfilter"],t);else if("object"==typeof module&&module.exports){var e=require("d3"),n=require("crossfilter2");"function"!=typeof n&&(n=n.crossfilter),module.exports=t(e,n)}else this.dc=t(d3,crossfilter)}();var hex_chr="0123456789abcdef";(function(){var t,e,n,r,i,a,o,s,l,u,c,f,d,h,p,g,m,v,y,_,b,x,w,C,k,S,T,A,E,M,D,P,O,N,L,I,R,B,z,F,q,H,U,j,V,$,W,G,X,Y,J,K,Z,Q,tt,et,nt={}.hasOwnProperty,rt=[].indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(e in this&&this[e]===t)return e;return-1},it=function(t,e){function n(){this.constructor=t}for(var r in e)nt.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},at=[].slice;if(C=function(){function t(){throw new Error("Not implemented. Did you mean to use Dropbox.Client?")}return t}(),C.Util=function(){function t(){}return t}(),C.Http=function(){function t(){}return t}(),C.File=function(){function t(){}return t}(),l="1.2.0","undefined"!=typeof global&&"undefined"!=typeof module&&"exports"in module)f=global,d=module.require.bind(module),module.exports=C;else if("undefined"!=typeof window&&"undefined"!=typeof navigator)f=window,d=null,window.Dropbox&&!function(){var t,e,n,r;n=window.Dropbox,r=[];for(t in n)nt.call(n,t)&&(e=n[t],r.push(C[t]=e));return r}(),window.Dropbox=C;else{if("undefined"==typeof self||"undefined"==typeof navigator)throw new Error("dropbox.js loaded in an unsupported JavaScript environment.");f=self,d=self.importScripts.bind(self),self.Dropbox=C}if(C.Env=function(){function t(){}return t.global=f,t.require=d,t}(),C.Util.EventSource=function(){function t(t){this._cancelable=t&&t.cancelable,this._listeners=[]}return t.prototype.addListener=function(t){if("function"!=typeof t)throw new TypeError("Invalid listener type; expected function");return rt.call(this._listeners,t)<0&&this._listeners.push(t),this},t.prototype.removeListener=function(t){var e,n,r,i,a,o;if(this._listeners.indexOf)n=this._listeners.indexOf(t),-1!==n&&this._listeners.splice(n,1);else for(o=this._listeners,e=i=0,a=o.length;a>i;e=++i)if(r=o[e],r===t){this._listeners.splice(e,1);break}return this},t.prototype.dispatch=function(t){var e,n,r,i,a;for(a=this._listeners,r=0,i=a.length;i>r;r++)if(e=a[r],n=e(t),this._cancelable&&n===!1)return!1;return!0},t}(),C.AccountInfo=function(){function t(t){var e;this._json=t,this.name=t.display_name,this.email=t.email,this.countryCode=t.country||null,this.uid=t.uid.toString(),t.public_app_url?(this.publicAppUrl=t.public_app_url,e=this.publicAppUrl.length-1,e>=0&&"/"===this.publicAppUrl.substring(e)&&(this.publicAppUrl=this.publicAppUrl.substring(0,e))):this.publicAppUrl=null,this.referralUrl=t.referral_link,this.quota=t.quota_info.quota,this.privateBytes=t.quota_info.normal||0,this.sharedBytes=t.quota_info.shared||0,this.usedQuota=this.privateBytes+this.sharedBytes}return t.parse=function(t){return t&&"object"==typeof t?new C.AccountInfo(t):t},t.prototype.name=null,t.prototype.email=null,t.prototype.countryCode=null,t.prototype.uid=null,t.prototype.referralUrl=null,t.prototype.publicAppUrl=null,t.prototype.quota=null,t.prototype.usedQuota=null,t.prototype.privateBytes=null,t.prototype.sharedBytes=null,t.prototype.json=function(){return this._json},t}(),C.ApiError=function(){function t(t,e,n){var r,i;if(this.method=e,this.url=n,this.status=t.status,t.responseType)try{r=t.response||t.responseText}catch(e){i=e;try{r=t.responseText}catch(t){i=t,r=null}}else try{r=t.responseText}catch(t){i=t,r=null}if(r)try{this.responseText=r.toString(),this.response=JSON.parse(r)}catch(t){i=t,this.response=null}else this.responseText="(no response)",this.response=null}return t.prototype.status=null,t.prototype.method=null,t.prototype.url=null,t.prototype.responseText=null,t.prototype.response=null,t.NETWORK_ERROR=0,t.NO_CONTENT=304,t.INVALID_PARAM=400,t.INVALID_TOKEN=401,t.OAUTH_ERROR=403,t.NOT_FOUND=404,t.INVALID_METHOD=405,t.NOT_ACCEPTABLE=406,t.CONFLICT=409,t.RATE_LIMITED=429,t.SERVER_ERROR=503,t.OVER_QUOTA=507,t.prototype.toString=function(){return"Dropbox API error "+this.status+" from "+this.method+" "+this.url+" :: "+this.responseText},t.prototype.inspect=function(){return this.toString()},t}(),C.AuthDriver=function(){function t(){}return t.prototype.authType=function(){return"code"},t.prototype.url=function(){return"https://some.url"},t.prototype.doAuthorize=function(t,e,n,r){return r({code:"access-code"})},t.prototype.getStateParam=function(t,e){return e(C.Util.Oauth.randomAuthStateParam())},t.prototype.resumeAuthorize=function(t,e,n){return n({code:"access-code"})},t.prototype.onAuthStateChange=function(t,e){return e()},t.oauthQueryParams=["access_token","expires_in","scope","token_type","code","error","error_description","error_uri","mac_key","mac_algorithm"].sort(),t}(),C.AuthDriver.autoConfigure=function(t){if("undefined"!=typeof chrome&&chrome.runtime&&chrome.runtime.id)return void(chrome.tabs&&chrome.tabs.create?t.authDriver(new C.AuthDriver.ChromeExtension):t.authDriver(new C.AuthDriver.ChromeApp));if("undefined"!=typeof window){if(window.cordova)return void t.authDriver(new C.AuthDriver.Cordova);window&&window.navigator&&t.authDriver(new C.AuthDriver.Redirect)}},C.AuthDriver.BrowserBase=function(){function t(t){t?(this.rememberUser=!("rememberUser"in t)||t.rememberUser,this.scope=t.scope||"default"):(this.rememberUser=!0,this.scope="default"),this.storageKey=null,this.storage=C.AuthDriver.BrowserBase.localStorage(),this.stateRe=/^[^#]+\#(.*&)?state=([^&]+)(&|$)/}return t.prototype.authType=function(){return"token"},t.prototype.onAuthStepChange=function(t,e){var n=this;switch(this.setStorageKey(t),t.authStep){case C.Client.RESET:return this.loadCredentials(function(r){return r?(t.setCredentials(r),t.authStep!==C.Client.DONE?e():n.rememberUser?(t.setCredentials(r),e()):n.forgetCredentials(e)):e()});case C.Client.DONE:return this.rememberUser?this.storeCredentials(t.credentials(),e):this.forgetCredentials(e);case C.Client.SIGNED_OUT:return this.forgetCredentials(e);case C.Client.ERROR:return this.forgetCredentials(e);default:return e(),this}},t.prototype.setStorageKey=function(t){return this.storageKey="dropbox-auth:"+this.scope+":"+t.appHash(),this},t.prototype.storeCredentials=function(t,e){var n,r,i,a;n=JSON.stringify(t);try{this.storage.setItem(this.storageKey,n)}catch(t){i=t,r=encodeURIComponent(this.storageKey),a=encodeURIComponent(n),document.cookie=""+r+"="+a+"; path=/"}return e(),this},t.prototype.loadCredentials=function(t){var e,n,r,i,a,o,s;try{r=this.storage.getItem(this.storageKey)}catch(t){s=t,r=null}if(null===r&&(a=encodeURIComponent(this.storageKey),o=a.replace(/[.*+()]/g,"\\$&"),e=new RegExp("(^|(;\\s*))"+a+"=([^;]*)(;|$)"),(i=e.exec(document.cookie))&&(r=decodeURIComponent(i[3]))),!r)return t(null),this;try{t(JSON.parse(r))}catch(e){n=e,t(null)}return this},t.prototype.forgetCredentials=function(t){var e,n,r;try{this.storage.removeItem(this.storageKey)}catch(t){r=t,n=encodeURIComponent(this.storageKey),e=new Date(0).toGMTString(),document.cookie=""+n+"={}; expires="+e+"; path=/"}return t(),this},t.prototype.locationStateParam=function(t){var e,n;return e=t||C.AuthDriver.BrowserBase.currentLocation(),n=this.stateRe.exec(e),n?decodeURIComponent(n[2]):null},t.prototype.replaceUrlBasename=function(t,e){var n,r,i;return r=t.indexOf("#"),-1!==r&&(t=t.substring(0,r)),i=t.indexOf("?"),-1!==i&&(t=t.substring(0,i)),n=t.split("/"),n[n.length-1]=e,n.join("/")},t.localStorage=function(){return"undefined"!=typeof window?window.localStorage:null},t.currentLocation=function(){return window.location.href},t.cleanupLocation=function(){var t,e;window.history&&window.history.replaceState?(e=this.currentLocation(),t=e.indexOf("#"),window.history.replaceState({},document.title,e.substring(0,t))):window.location.hash=""},t}(),C.AuthDriver.Redirect=function(t){function e(t){e.__super__.constructor.call(this,t),this.receiverUrl=this.baseUrl(t)}return it(e,t),e.prototype.baseUrl=function(t){var e,n;if(n=C.AuthDriver.BrowserBase.currentLocation(),t){if(t.redirectUrl)return t.redirectUrl;if(t.redirectFile)return this.replaceUrlBasename(n,t.redirectFile)}return e=n.indexOf("#"),-1!==e&&(n=n.substring(0,e)),n},e.prototype.url=function(){return this.receiverUrl},e.prototype.doAuthorize=function(t,e,n){return this.storeCredentials(n.credentials(),function(){return window.location.assign(t)})},e.prototype.resumeAuthorize=function(t,e,n){var r;return this.locationStateParam()===t?(r=C.AuthDriver.BrowserBase.currentLocation(),C.AuthDriver.BrowserBase.cleanupLocation(),n(C.Util.Oauth.queryParamsFromUrl(r))):this.forgetCredentials(function(){return n({error:"Authorization error"})})},e}(C.AuthDriver.BrowserBase),C.AuthDriver.Popup=function(t){function e(t){e.__super__.constructor.call(this,t),this.receiverUrl=this.baseUrl(t)}return it(e,t),e.prototype.url=function(){return this.receiverUrl},e.prototype.doAuthorize=function(t,e,n,r){return this.listenForMessage(e,r),this.openWindow(t)},e.prototype.baseUrl=function(t){var e;if(e=C.AuthDriver.BrowserBase.currentLocation(),t){if(t.receiverUrl)return t.receiverUrl;if(t.receiverFile)return this.replaceUrlBasename(e,t.receiverFile)}return e},e.prototype.openWindow=function(t){return window.open(t,"_dropboxOauthSigninWindow",this.popupWindowSpec(980,700))},e.prototype.popupWindowSpec=function(t,e){var n,r,i,a,o,s,l,u,c,f;return o=null!=(l=window.screenX)?l:window.screenLeft,s=null!=(u=window.screenY)?u:window.screenTop,a=null!=(c=window.outerWidth)?c:document.documentElement.clientWidth,n=null!=(f=window.outerHeight)?f:document.documentElement.clientHeight,r=Math.round(o+(a-t)/2),i=Math.round(s+(n-e)/2.5),o>r&&(r=o),s>i&&(i=s),"width="+t+",height="+e+","+("left="+r+",top="+i)+"dialog=yes,dependent=yes,scrollbars=yes,location=yes"},e.prototype.listenForMessage=function(t,e){var n,r=this;return n=function(i){var a,o,s;a=i.data?i.data:i;try{s=JSON.parse(a)._dropboxjs_oauth_info}catch(t){return void(o=t)}if(s)return r.locationStateParam(s)===t?(t=!1,window.removeEventListener("message",n),C.AuthDriver.Popup.onMessage.removeListener(n),e(C.Util.Oauth.queryParamsFromUrl(a))):void 0},window.addEventListener("message",n,!1),C.AuthDriver.Popup.onMessage.addListener(n)},e.locationOrigin=function(t){var e;return(e=/^(file:\/\/[^\?\#]*)(\?|\#|$)/.exec(t))?e[1]:(e=/^([^\:]+\:\/\/[^\/\?\#]*)(\/|\?|\#|$)/.exec(t),e?e[1]:t)},e.oauthReceiver=function(){window.addEventListener("load",function(){var t,e,n,r,i,a;if(a=window.location.href,n=JSON.stringify({_dropboxjs_oauth_info:a}),C.AuthDriver.BrowserBase.cleanupLocation(),r=window.opener,window.parent!==window.top&&(r||(r=window.parent)),r){try{i=window.location.origin||locationOrigin(a),r.postMessage(n,i),window.close()}catch(t){e=t}try{return r.Dropbox.AuthDriver.Popup.onMessage.dispatch(n),window.close()}catch(e){t=e}}})},e.onMessage=new C.Util.EventSource,e}(C.AuthDriver.BrowserBase),C.AuthDriver.ChromeBase=function(t){function e(t){e.__super__.constructor.call(this,t),this.storageKey="dropbox_js_"+this.scope+"_credentials"}return it(e,t),e.prototype.onAuthStepChange=function(t,e){switch(t.authStep){case C.Client.RESET:return this.loadCredentials(function(n){return n&&t.setCredentials(n),e()});case C.Client.DONE:return this.storeCredentials(t.credentials(),e);case C.Client.SIGNED_OUT:return this.forgetCredentials(e);case C.Client.ERROR:return this.forgetCredentials(e);default:return e()}},e.prototype.url=function(){return this.receiverUrl},e.prototype.storeCredentials=function(t,e){var n;return n={},n[this.storageKey]=t,chrome.storage.local.set(n,e),this},e.prototype.loadCredentials=function(t){var e=this;return chrome.storage.local.get(this.storageKey,function(n){return t(n[e.storageKey]||null)}),this},e.prototype.forgetCredentials=function(t){return chrome.storage.local.remove(this.storageKey,t),this},e}(C.AuthDriver.BrowserBase),C.AuthDriver.ChromeApp=function(t){function e(t){e.__super__.constructor.call(this,t),this.receiverUrl="https://"+chrome.runtime.id+".chromiumapp.org/"}return it(e,t),e.prototype.doAuthorize=function(t,e,n,r){var i=this;return chrome.identity.launchWebAuthFlow({url:t,interactive:!0},function(t){return i.locationStateParam(t)===e?(e=!1,r(C.Util.Oauth.queryParamsFromUrl(t))):void 0})},e}(C.AuthDriver.ChromeBase),C.AuthDriver.ChromeExtension=function(t){function e(t){var n;e.__super__.constructor.call(this,t),n=t&&t.receiverPath||"chrome_oauth_receiver.html",this.receiverUrl=chrome.runtime.getURL(n)}return it(e,t),e.prototype.doAuthorize=function(t,e,n,r){var i,a,o=this;return a=null,i=function(t,n){var s;if((!n||!n.tab||n.tab.url.substring(0,o.receiverUrl.length)===o.receiverUrl)&&t.dropbox_oauth_receiver_href)return s=t.dropbox_oauth_receiver_href,o.locationStateParam(s)===e?(e=!1,a&&chrome.tabs.remove(a.id),chrome.runtime.onMessage.removeListener(i),r(C.Util.Oauth.queryParamsFromUrl(s))):void 0},chrome.runtime.onMessage.addListener(i),chrome.tabs.create({url:t,active:!0,pinned:!1},function(t){return a=t})},e.oauthReceiver=function(){return window.addEventListener("load",function(){var t;return t=window.location.href,window.location.hash="",chrome.runtime.sendMessage({dropbox_oauth_receiver_href:t}),window.close?window.close():void 0})},e}(C.AuthDriver.ChromeBase),C.AuthDriver.Cordova=function(t){function e(t){e.__super__.constructor.call(this,t)}return it(e,t),e.prototype.url=function(){return"https://www.dropbox.com/1/oauth2/redirect_receiver"},e.prototype.doAuthorize=function(t,e,n,r){var i,a,o,s,l,u=this;return a=window.open(t,"_blank","location=yes,closebuttoncaption=Cancel"),s=!1,i=/^[^\/]*\/\/[^\/]*\//.exec(t)[0],l=!1,o=function(t){if(t.url&&u.locationStateParam(t.url)===e){if(l)return;return a.removeEventListener("loadstart",o),a.removeEventListener("loaderror",o),a.removeEventListener("loadstop",o),a.removeEventListener("exit",o),l=!0,window.setTimeout(function(){return a.close()},10),void r(C.Util.Oauth.queryParamsFromUrl(t.url))}if("exit"===t.type){if(l)return;a.removeEventListener("loadstart",o),a.removeEventListener("loaderror",o),a.removeEventListener("loadstop",o),a.removeEventListener("exit",o),l=!0,r(new AuthError("error=access_denied&error_description=User+closed+browser+window"))}},a.addEventListener("loadstart",o),a.addEventListener("loaderror",o),a.addEventListener("loadstop",o),a.addEventListener("exit",o)},e}(C.AuthDriver.BrowserBase),C.AuthDriver.NodeServer=function(){function t(t){this._port=(null!=t?t.port:void 0)||8912,(null!=t?t.tls:void 0)?(this._tlsOptions=t.tls,("string"==typeof this._tlsOptions||this._tlsOptions instanceof Buffer)&&(this._tlsOptions={key:this._tlsOptions,cert:this._tlsOptions})):this._tlsOptions=null,this._fs=C.Env.require("fs"),this._http=C.Env.require("http"),this._https=C.Env.require("https"),this._open=C.Env.require("open"),this._callbacks={},this._nodeUrl=C.Env.require("url"),this.createApp()}return t.prototype.authType=function(){return"code"},t.prototype.url=function(){var t;return t=null===this._tlsOptions?"http":"https",""+t+"://localhost:"+this._port+"/oauth_callback"},t.prototype.doAuthorize=function(t,e,n,r){return this._callbacks[e]=r,this.openBrowser(t)},t.prototype.openBrowser=function(t){if(!t.match(/^https?:\/\//))throw new Error("Not a http/https URL: "+t);return"BROWSER"in process.env?this._open(t,process.env.BROWSER):this._open(t)},t.prototype.createApp=function(){var t=this;return this._app=this._tlsOptions?this._https.createServer(this._tlsOptions,function(e,n){return t.doRequest(e,n)}):this._http.createServer(function(e,n){return t.doRequest(e,n)}),this._app.listen(this._port)},t.prototype.closeServer=function(){return this._app.close()},t.prototype.doRequest=function(t,e){var n,r,i,a=this;return i=this._nodeUrl.parse(t.url,!0),"/oauth_callback"===i.pathname&&(r=i.query.state,this._callbacks[r]&&(this._callbacks[r](i.query),delete this._callbacks[r])),n="",t.on("data",function(t){return n+=t}),t.on("end",function(){return a.closeBrowser(e)})},t.prototype.closeBrowser=function(t){var e;return e='<!doctype html>\n<script type="text/javascript">window.close();</script>\n<p>Please close this window.</p>',t.writeHead(200,{"Content-Length":e.length,"Content-Type":"text/html"}),t.write(e),t.end()},t}(),C.AuthError=function(){function t(t){var e;if(!t.error)throw new Error("Not an OAuth 2.0 error: "+JSON.stringify(t));e="object"==typeof t.error&&t.error.error?t.error:t,this.code=e.error,this.description=e.error_description||null,this.uri=e.error_uri||null}return t.prototype.code=null,t.prototype.description=null,t.prototype.uri=null,t.ACCESS_DENIED="access_denied",t.INVALID_REQUEST="invalid_request",t.UNAUTHORIZED_CLIENT="unauthorized_client",t.INVALID_GRANT="invalid_grant",t.INVALID_SCOPE="invalid_scope",t.UNSUPPORTED_GRANT_TYPE="unsupported_grant_type",t.UNSUPPORTED_RESPONSE_TYPE="unsupported_response_type",t.SERVER_ERROR="server_error",t.TEMPORARILY_UNAVAILABLE="temporarily_unavailable",t.prototype.toString=function(){return"Dropbox OAuth error "+this.code+" :: "+this.description},t.prototype.inspect=function(){return this.toString()},t}(),C.Client=function(){function t(t){var e=this;this._serverRoot=t.server||this._defaultServerRoot(),this._maxApiServer="maxApiServer"in t?t.maxApiServer:this._defaultMaxApiServer(),this._authServer=t.authServer||this._defaultAuthServer(),this._fileServer=t.fileServer||this._defaultFileServer(),this._downloadServer=t.downloadServer||this._defaultDownloadServer(),this._notifyServer=t.notifyServer||this._defaultNotifyServer(),this.onXhr=new C.Util.EventSource({cancelable:!0}),this.onError=new C.Util.EventSource,this.onAuthStepChange=new C.Util.EventSource,this._xhrOnErrorHandler=function(t,n){return e._handleXhrError(t,n)},this._oauth=new C.Util.Oauth(t),this._uid=t.uid||null,this.authStep=this._oauth.step(),this._driver=null,this.authError=null,this._credentials=null,this._datastoreManager=null,this.setupUrls()}return t.prototype.onXhr=null,t.prototype.onError=null,t.prototype.onAuthStepChange=null,t.prototype.authDriver=function(t){return this._driver=t,this},t.prototype.dropboxUid=function(){return this._uid},t.prototype.credentials=function(){return this._credentials||this._computeCredentials(),this._credentials},t.prototype.authenticate=function(t,e){var n,r,i,a,o,s=this;if(e||"function"!=typeof t||(e=t,t=null),n=!(t&&"interactive"in t)||t.interactive,!this._driver&&this.authStep!==c.DONE&&(C.AuthDriver.autoConfigure(this),!this._driver))throw new Error("OAuth driver auto-configuration failed. Call authDriver.");if(this.authStep===c.ERROR)throw new Error("Client got in an error state. Call reset() to reuse it!");return a=function(){return s.authStep=s._oauth.step(),s.authStep===c.ERROR&&(s.authError=s._oauth.error()),s._credentials=null,s.onAuthStepChange.dispatch(s),o()},i=function(){return s.authStep=c.ERROR,s._credentials=null,s.onAuthStepChange.dispatch(s),o()},r=null,o=function(){var t;if(r!==s.authStep&&(r=s.authStep,s._driver&&s._driver.onAuthStepChange))return void s._driver.onAuthStepChange(s,o);switch(s.authStep){case c.RESET:return n?(s._driver.getStateParam&&s._driver.getStateParam(function(t){return s.client.authStep===c.RESET&&s._oauth.setAuthStateParam(t),a()}),s._oauth.setAuthStateParam(C.Util.Oauth.randomAuthStateParam()),a()):void(e&&e(null,s));case c.PARAM_SET:return n?(t=s.authorizeUrl(),s._driver.doAuthorize(t,s._oauth.authStateParam(),s,function(t){return s._oauth.processRedirectParams(t),t.uid&&(s._uid=t.uid),a()})):void(e&&e(null,s));case c.PARAM_LOADED:return s._driver.resumeAuthorize?s._driver.resumeAuthorize(s._oauth.authStateParam(),s,function(t){return s._oauth.processRedirectParams(t),t.uid&&(s._uid=t.uid),a()}):(s._oauth.setAuthStateParam(s._oauth.authStateParam()),void a());case c.AUTHORIZED:return s.getAccessToken(function(t,e){return t?(s.authError=t,i()):(s._oauth.processRedirectParams(e),s._uid=e.uid,a())});case c.DONE:e&&e(null,s);break;case c.SIGNED_OUT:return s.authStep=c.RESET,s.reset(),o();case c.ERROR:e&&e(s.authError,s)}},o(),this},t.prototype.isAuthenticated=function(){return this.authStep===c.DONE},t.prototype.signOut=function(t,e){var n,r,i=this;if(e||"function"!=typeof t||(e=t,t=null),n=t&&t.mustInvalidate,this.authStep!==c.DONE)throw new Error("This client doesn't have a user's token");return r=new C.Util.Xhr("POST",this._urls.signOut),r.signWithOauth(this._oauth),this._dispatchXhr(r,function(t){if(t)if(t.status===C.ApiError.INVALID_TOKEN)t=null;else if(n)return void(e&&e(t));return i.authStep=c.RESET,i.reset(),i.authStep=c.SIGNED_OUT,i.onAuthStepChange.dispatch(i),i._driver&&i._driver.onAuthStepChange?i._driver.onAuthStepChange(i,function(){return e?e(null):void 0}):e?e(null):void 0})},t.prototype.signOff=function(t,e){return this.signOut(t,e)},t.prototype.getAccountInfo=function(t,e){var n,r;return e||"function"!=typeof t||(e=t,t=null),n=!1,t&&t.httpCache&&(n=!0),r=new C.Util.Xhr("GET",this._urls.accountInfo),r.signWithOauth(this._oauth,n),this._dispatchXhr(r,function(t,n){return e(t,C.AccountInfo.parse(n),n)})},t.prototype.getUserInfo=function(t,e){return this.getAccountInfo(t,e)},t.prototype.readFile=function(t,e,n){var r,i,a,o,s,l,u;return n||"function"!=typeof e||(n=e,e=null),i={},l="text",o=null,r=!1,e&&(e.versionTag?i.rev=e.versionTag:e.rev&&(i.rev=e.rev),e.arrayBuffer?l="arraybuffer":e.blob?l="blob":e.buffer?l="buffer":e.binary&&(l="b"),e.length?(null!=e.start?(s=e.start,a=e.start+e.length-1):(s="",a=e.length),o="bytes="+s+"-"+a):null!=e.start&&(o="bytes="+e.start+"-"),e.httpCache&&(r=!0)),u=new C.Util.Xhr("GET",""+this._urls.getFile+"/"+this._urlEncodePath(t)),u.setParams(i).signWithOauth(this._oauth,r),u.setResponseType(l),o&&(o&&u.setHeader("Range",o),u.reportResponseHeaders()),this._dispatchXhr(u,function(t,e,r,i){var a;return a=i?C.Http.RangeInfo.parse(i["content-range"]):null,n(t,e,C.File.Stat.parse(r),a)})},t.prototype.writeFile=function(t,e,n,r){var i;return r||"function"!=typeof n||(r=n,n=null),i=C.Util.Xhr.canSendForms&&"object"==typeof e,i?this._writeFileUsingForm(t,e,n,r):this._writeFileUsingPut(t,e,n,r)},t.prototype._writeFileUsingForm=function(t,e,n,r){var i,a,o,s;return o=t.lastIndexOf("/"),-1===o?(i=t,t=""):(i=t.substring(o),t=t.substring(0,o)),a={file:i},n&&(n.noOverwrite&&(a.overwrite="false"),n.lastVersionTag?a.parent_rev=n.lastVersionTag:(n.parentRev||n.parent_rev)&&(a.parent_rev=n.parentRev||n.parent_rev)),s=new C.Util.Xhr("POST",""+this._urls.postFile+"/"+this._urlEncodePath(t)),s.setParams(a).signWithOauth(this._oauth).setFileField("file",i,e,"application/octet-stream"),delete a.file,this._dispatchXhr(s,function(t,e){return r?r(t,C.File.Stat.parse(e)):void 0})},t.prototype._writeFileUsingPut=function(t,e,n,r){var i,a;return i={},n&&(n.noOverwrite&&(i.overwrite="false"),n.lastVersionTag?i.parent_rev=n.lastVersionTag:(n.parentRev||n.parent_rev)&&(i.parent_rev=n.parentRev||n.parent_rev)),a=new C.Util.Xhr("POST",""+this._urls.putFile+"/"+this._urlEncodePath(t)),a.setBody(e).setParams(i).signWithOauth(this._oauth),this._dispatchXhr(a,function(t,e){return r?r(t,C.File.Stat.parse(e)):void 0})},t.prototype.resumableUploadStep=function(t,e,n){var r,i;return e?(r={offset:e.offset},e.tag&&(r.upload_id=e.tag)):r={offset:0},i=new C.Util.Xhr("POST",this._urls.chunkedUpload),i.setBody(t).setParams(r).signWithOauth(this._oauth),this._dispatchXhr(i,function(t,e){return t&&t.status===C.ApiError.INVALID_PARAM&&t.response&&t.response.upload_id&&t.response.offset?n(null,C.Http.UploadCursor.parse(t.response)):n(t,C.Http.UploadCursor.parse(e))})},t.prototype.resumableUploadFinish=function(t,e,n,r){var i,a;return r||"function"!=typeof n||(r=n,n=null),i={upload_id:e.tag},n&&(n.lastVersionTag?i.parent_rev=n.lastVersionTag:(n.parentRev||n.parent_rev)&&(i.parent_rev=n.parentRev||n.parent_rev),n.noOverwrite&&(i.overwrite="false")),a=new C.Util.Xhr("POST",""+this._urls.commitChunkedUpload+"/"+this._urlEncodePath(t)),a.setParams(i).signWithOauth(this._oauth),this._dispatchXhr(a,function(t,e){return r?r(t,C.File.Stat.parse(e)):void 0})},t.prototype.stat=function(t,e,n){var r,i,a;return n||"function"!=typeof e||(n=e,e=null),i={},r=!1,e&&(e.versionTag?i.rev=e.versionTag:e.rev&&(i.rev=e.rev),e.contentHash?i.hash=e.contentHash:e.hash&&(i.hash=e.hash),(e.removed||e.deleted)&&(i.include_deleted="true"),e.readDir&&(i.list="true",e.readDir!==!0&&(i.file_limit=e.readDir.toString())),e.cacheHash&&(i.hash=e.cacheHash),e.httpCache&&(r=!0)),i.include_deleted||(i.include_deleted="false"),i.list||(i.list="false"),a=new C.Util.Xhr("GET",""+this._urls.metadata+"/"+this._urlEncodePath(t)),a.setParams(i).signWithOauth(this._oauth,r),this._dispatchXhr(a,function(t,e){var r,i,a;return a=C.File.Stat.parse(e),r=(null!=e?e.contents:void 0)?function(){var t,n,r,a;for(r=e.contents,a=[],t=0,n=r.length;n>t;t++)i=r[t],a.push(C.File.Stat.parse(i));return a}():void 0,n(t,a,r)})},t.prototype.readdir=function(t,e,n){var r;return n||"function"!=typeof e||(n=e,e=null),r={readDir:!0},e&&(null!=e.limit&&(r.readDir=e.limit),e.versionTag?r.versionTag=e.versionTag:e.rev&&(r.versionTag=e.rev),e.contentHash?r.contentHash=e.contentHash:e.hash&&(r.contentHash=e.hash),(e.removed||e.deleted)&&(r.removed=e.removed||e.deleted),e.httpCache&&(r.httpCache=e.httpCache)),this.stat(t,r,function(t,e,r){var i,a;return i=r?function(){var t,e,n;for(n=[],t=0,e=r.length;e>t;t++)a=r[t],n.push(a.name);return n}():null,n(t,i,e,r)})},t.prototype.metadata=function(t,e,n){return this.stat(t,e,n)},t.prototype.makeUrl=function(t,e,n){var r,i,a,o,s,l=this;return n||"function"!=typeof e||(n=e,e=null),i=e&&(e.long||e.longUrl||e.downloadHack)?{short_url:"false"}:{},t=this._urlEncodePath(t),a=""+this._urls.shares+"/"+t,r=!1,o=!1,e&&(e.downloadHack?(r=!0,o=!0):e.download&&(r=!0,a=""+this._urls.media+"/"+t)),s=new C.Util.Xhr("POST",a).setParams(i).signWithOauth(this._oauth),this._dispatchXhr(s,function(t,e){return o&&(null!=e?e.url:void 0)&&(e.url=e.url.replace(l._authServer,l._downloadServer)),n(t,C.File.ShareUrl.parse(e,r))})},t.prototype.history=function(t,e,n){var r,i,a;return n||"function"!=typeof e||(n=e,e=null),i={},r=!1,e&&(null!=e.limit&&(i.rev_limit=e.limit),e.httpCache&&(r=!0)),a=new C.Util.Xhr("GET",""+this._urls.revisions+"/"+this._urlEncodePath(t)),a.setParams(i).signWithOauth(this._oauth,r),this._dispatchXhr(a,function(t,e){var r,i;return i=e?function(){var t,n,i;for(i=[],t=0,n=e.length;n>t;t++)r=e[t],i.push(C.File.Stat.parse(r));return i}():void 0,n(t,i)})},t.prototype.revisions=function(t,e,n){return this.history(t,e,n)},t.prototype.thumbnailUrl=function(t,e){var n;return n=this.thumbnailXhr(t,e),n.paramsToUrl().url},t.prototype.readThumbnail=function(t,e,n){var r,i;return n||"function"!=typeof e||(n=e,e=null),r="b",e&&(e.blob&&(r="blob"),e.arrayBuffer&&(r="arraybuffer"),e.buffer&&(r="buffer")),i=this.thumbnailXhr(t,e),i.setResponseType(r),this._dispatchXhr(i,function(t,e,r){return n(t,e,C.File.Stat.parse(r))})},t.prototype.thumbnailXhr=function(t,e){var n,r;return n={},e&&(e.format?n.format=e.format:e.png&&(n.format="png"),e.size&&(n.size=e.size)),r=new C.Util.Xhr("GET",""+this._urls.thumbnails+"/"+this._urlEncodePath(t)),r.setParams(n).signWithOauth(this._oauth)},t.prototype.revertFile=function(t,e,n){var r;return r=new C.Util.Xhr("POST",""+this._urls.restore+"/"+this._urlEncodePath(t)),r.setParams({rev:e}).signWithOauth(this._oauth),this._dispatchXhr(r,function(t,e){return n?n(t,C.File.Stat.parse(e)):void 0})},t.prototype.restore=function(t,e,n){return this.revertFile(t,e,n)},t.prototype.findByName=function(t,e,n,r){var i,a,o;return r||"function"!=typeof n||(r=n,n=null),a={query:e},i=!1,n&&(null!=n.limit&&(a.file_limit=n.limit),(n.removed||n.deleted)&&(a.include_deleted=!0),n.httpCache&&(i=!0)),o=new C.Util.Xhr("GET",""+this._urls.search+"/"+this._urlEncodePath(t)),o.setParams(a).signWithOauth(this._oauth,i),this._dispatchXhr(o,function(t,e){var n,i;return i=e?function(){var t,r,i;for(i=[],t=0,r=e.length;r>t;t++)n=e[t],i.push(C.File.Stat.parse(n));return i}():void 0,r(t,i)})},t.prototype.search=function(t,e,n,r){return this.findByName(t,e,n,r)},t.prototype.makeCopyReference=function(t,e){var n;return n=new C.Util.Xhr("GET",""+this._urls.copyRef+"/"+this._urlEncodePath(t)),n.signWithOauth(this._oauth),this._dispatchXhr(n,function(t,n){return e(t,C.File.CopyReference.parse(n))})},t.prototype.copyRef=function(t,e){return this.makeCopyReference(t,e)},t.prototype.pullChanges=function(t,e){var n,r;return e||"function"!=typeof t||(e=t,t=null),n=t?t.cursorTag?{cursor:t.cursorTag}:{cursor:t}:{},r=new C.Util.Xhr("POST",this._urls.delta),r.setParams(n).signWithOauth(this._oauth),this._dispatchXhr(r,function(t,n){return e(t,C.Http.PulledChanges.parse(n))})},t.prototype.delta=function(t,e){return this.pullChanges(t,e)},t.prototype.pollForChanges=function(t,e,n){var r,i;return n||"function"!=typeof e||(n=e,e=null),r=t.cursorTag?{cursor:t.cursorTag}:{cursor:t},e&&"timeout"in e&&(r.timeout=e.timeout),i=new C.Util.Xhr("GET",this._urls.longpollDelta),i.setParams(r),this._dispatchXhr(i,function(t,e){var r;if("string"==typeof e)try{e=JSON.parse(e)}catch(t){r=t,e=null}return n(t,C.Http.PollResult.parse(e))})},t.prototype.mkdir=function(t,e){var n;return n=new C.Util.Xhr("POST",this._urls.fileopsCreateFolder),n.setParams({root:"auto",path:this._normalizePath(t)}).signWithOauth(this._oauth),this._dispatchXhr(n,function(t,n){return e?e(t,C.File.Stat.parse(n)):void 0})},t.prototype.remove=function(t,e){var n;return n=new C.Util.Xhr("POST",this._urls.fileopsDelete),n.setParams({root:"auto",path:this._normalizePath(t)}).signWithOauth(this._oauth),this._dispatchXhr(n,function(t,n){return e?e(t,C.File.Stat.parse(n)):void 0})},t.prototype.unlink=function(t,e){return this.remove(t,e)},t.prototype.delete=function(t,e){return this.remove(t,e)},t.prototype.copy=function(t,e,n){var r,i;return r={root:"auto",to_path:this._normalizePath(e)},t instanceof C.File.CopyReference?r.from_copy_ref=t.tag:r.from_path=this._normalizePath(t),i=new C.Util.Xhr("POST",this._urls.fileopsCopy),i.setParams(r).signWithOauth(this._oauth),this._dispatchXhr(i,function(t,e){return n?n(t,C.File.Stat.parse(e)):void 0})},t.prototype.move=function(t,e,n){
var r;return r=new C.Util.Xhr("POST",this._urls.fileopsMove),r.setParams({root:"auto",from_path:this._normalizePath(t),to_path:this._normalizePath(e)}).signWithOauth(this._oauth),this._dispatchXhr(r,function(t,e){return n?n(t,C.File.Stat.parse(e)):void 0})},t.prototype.appInfo=function(t,e){var n;return e||"function"!=typeof t||(e=t,t=this._oauth.credentials().key),n=new C.Util.Xhr("GET",this._urls.appsInfo),n.setParams({app_key:t}),this._dispatchXhr(n,function(n,r){return e(n,C.Http.AppInfo.parse(r,t))})},t.prototype.isAppDeveloper=function(t,e,n){var r;return"object"==typeof t&&"uid"in t&&(t=t.uid),n||"function"!=typeof e?"object"==typeof e&&"key"in e&&(e=e.key):(n=e,e=this._oauth.credentials().key),r=new C.Util.Xhr("GET",this._urls.appsCheckDeveloper),r.setParams({app_key:e,uid:t}),this._dispatchXhr(r,function(t,e){return e?n(t,e.is_developer):n(t)})},t.prototype.hasOauthRedirectUri=function(t,e,n){var r;return n||"function"!=typeof e?"object"==typeof e&&"key"in e&&(e=e.key):(n=e,e=this._oauth.credentials().key),r=new C.Util.Xhr("GET",this._urls.appsCheckRedirectUri),r.setParams({app_key:e,redirect_uri:t}),this._dispatchXhr(r,function(t,e){return e?n(t,e.has_redirect_uri):n(t)})},t.prototype.reset=function(){var t;return this._uid=null,this._oauth.reset(),t=this.authStep,this.authStep=this._oauth.step(),t!==this.authStep&&this.onAuthStepChange.dispatch(this),this.authError=null,this._credentials=null,this},t.prototype.setCredentials=function(t){var e;return e=this.authStep,this._oauth.setCredentials(t),this.authStep=this._oauth.step(),this._uid=t.uid||null,this.authError=null,this._credentials=null,e!==this.authStep&&this.onAuthStepChange.dispatch(this),this},t.prototype.appHash=function(){return this._oauth.appHash()},t.prototype.setupUrls=function(){return this._apiServer=this._chooseApiServer(),this._urls={authorize:""+this._authServer+"/1/oauth2/authorize",token:""+this._apiServer+"/1/oauth2/token",signOut:""+this._apiServer+"/1/unlink_access_token",accountInfo:""+this._apiServer+"/1/account/info",getFile:""+this._fileServer+"/1/files/auto",postFile:""+this._fileServer+"/1/files/auto",putFile:""+this._fileServer+"/1/files_put/auto",metadata:""+this._apiServer+"/1/metadata/auto",delta:""+this._apiServer+"/1/delta",longpollDelta:""+this._notifyServer+"/1/longpoll_delta",revisions:""+this._apiServer+"/1/revisions/auto",restore:""+this._apiServer+"/1/restore/auto",search:""+this._apiServer+"/1/search/auto",shares:""+this._apiServer+"/1/shares/auto",media:""+this._apiServer+"/1/media/auto",copyRef:""+this._apiServer+"/1/copy_ref/auto",thumbnails:""+this._fileServer+"/1/thumbnails/auto",chunkedUpload:""+this._fileServer+"/1/chunked_upload",commitChunkedUpload:""+this._fileServer+"/1/commit_chunked_upload/auto",fileopsCopy:""+this._apiServer+"/1/fileops/copy",fileopsCreateFolder:""+this._apiServer+"/1/fileops/create_folder",fileopsDelete:""+this._apiServer+"/1/fileops/delete",fileopsMove:""+this._apiServer+"/1/fileops/move",appsInfo:""+this._apiServer+"/1/apps/info",appsCheckDeveloper:""+this._apiServer+"/1/apps/check_developer",appsCheckRedirectUri:""+this._apiServer+"/1/apps/check_redirect_uri",getDb:""+this._apiServer+"/1/datastores/get_datastore",getOrCreateDb:""+this._apiServer+"/1/datastores/get_or_create_datastore",createDb:""+this._apiServer+"/1/datastores/create_datastore",listDbs:""+this._apiServer+"/1/datastores/list_datastores",deleteDb:""+this._apiServer+"/1/datastores/delete_datastore",getSnapshot:""+this._apiServer+"/1/datastores/get_snapshot",getDeltas:""+this._apiServer+"/1/datastores/get_deltas",putDelta:""+this._apiServer+"/1/datastores/put_delta",datastoreAwait:""+this._apiServer+"/1/datastores/await"},this},t.prototype._chooseApiServer=function(){var t,e;return e=Math.floor(Math.random()*(this._maxApiServer+1)),t=0===e?"":e.toString(),this._serverRoot.replace("$",t)},t.prototype.authStep=null,t.ERROR=0,t.RESET=1,t.PARAM_SET=2,t.PARAM_LOADED=3,t.AUTHORIZED=4,t.DONE=5,t.SIGNED_OUT=6,t.prototype._urlEncodePath=function(t){return C.Util.Xhr.urlEncodeValue(this._normalizePath(t)).replace(/%2F/gi,"/")},t.prototype._normalizePath=function(t){var e;if("/"===t.substring(0,1)){for(e=1;"/"===t.substring(e,e+1);)e+=1;return t.substring(e)}return t},t.prototype.authorizeUrl=function(){var t;return t=this._oauth.authorizeUrlParams(this._driver.authType(),this._driver.url()),this._urls.authorize+"?"+C.Util.Xhr.urlEncode(t)},t.prototype.getAccessToken=function(t){var e,n;return e=this._oauth.accessTokenParams(this._driver.url()),n=new C.Util.Xhr("POST",this._urls.token).setParams(e).addOauthParams(this._oauth),this._dispatchXhr(n,function(e,n){return e&&e.status===C.ApiError.INVALID_PARAM&&e.response&&e.response.error&&(e=new C.AuthError(e.response)),t(e,n)})},t.prototype._dispatchLongPollXhr=function(t,e,n){return null==n&&(n=6e4),this._dispatchXhr(t,e,n)},t.prototype._dispatchXhr=function(t,e,n){var r,i,a=this;return null==n&&(n=1e4),r=setTimeout(function(){return a._handleLongRequest(t)},2*n),t.setCallback(function(t,n,i,a){return clearTimeout(r),e(t,n,i,a)}),t.onError=this._xhrOnErrorHandler,t.prepare(),i=t.xhr,this.onXhr.dispatch(t)&&t.send(),i},t.prototype._handleXhrError=function(t,e){var n=this;return t.status===C.ApiError.INVALID_TOKEN&&this.authStep===c.DONE&&(this.authError=t,this.authStep=c.ERROR,this.onAuthStepChange.dispatch(this),this._driver&&this._driver.onAuthStepChange)?(this._driver.onAuthStepChange(this,function(){return n.onError.dispatch(t),e(t)}),null):(this.onError.dispatch(t),void e(t))},t.prototype._handleLongRequest=function(){return this.setupUrls()},t.prototype._defaultServerRoot=function(){return"https://api$.dropbox.com"},t.prototype._defaultAuthServer=function(){return this._serverRoot.replace("api$","www")},t.prototype._defaultFileServer=function(){return this._serverRoot.replace("api$","api-content")},t.prototype._defaultDownloadServer=function(){return"https://dl.dropboxusercontent.com"},t.prototype._defaultNotifyServer=function(){return this._serverRoot.replace("api$","api-notify")},t.prototype._defaultMaxApiServer=function(){return 30},t.prototype._computeCredentials=function(){var t;t=this._oauth.credentials(),this._uid&&(t.uid=this._uid),this._serverRoot!==this._defaultServerRoot()&&(t.server=this._serverRoot),this._maxApiServer!==this._defaultMaxApiServer()&&(t.maxApiServer=this._maxApiServer),this._authServer!==this._defaultAuthServer()&&(t.authServer=this._authServer),this._fileServer!==this._defaultFileServer()&&(t.fileServer=this._fileServer),this._downloadServer!==this._defaultDownloadServer()&&(t.downloadServer=this._downloadServer),this._notifyServer!==this._defaultNotifyServer()&&(t.notifyServer=this._notifyServer),this._credentials=t},t}(),c=C.Client,C.Datastore=function(){function t(t,e){var n=this;this._datastore_manager=t,this._managed_datastore=e,this._dsid=this._managed_datastore.get_dsid(),this._handle=this._managed_datastore.get_handle(),this._record_cache=new j(this),this._last_used_timestamp=0,this.recordsChanged=new C.Util.EventSource,this.syncStatusChanged=new C.Util.EventSource,this._timeoutWrapper=function(t){return t},this._evt_mgr=new k,this._evt_mgr.register(this._managed_datastore.syncStateChanged,function(){return n._syncSoon(),n.syncStatusChanged.dispatch(null)}),this._syncPending=!1,this._closed=!1,this._metadata_table=new C.Datastore.Table(this,":info"),this._metadata_table.setResolutionRule("mtime","max")}return t.DATASTORE_SIZE_LIMIT=10485760,t.RECORD_COUNT_LIMIT=1e5,t.BASE_DATASTORE_SIZE=1e3,t.TEAM="team",t.PUBLIC="public",t.OWNER="owner",t.EDITOR="editor",t.VIEWER="viewer",t.NONE="none",t.prototype.recordsChanged=null,t.prototype.syncStatusChanged=null,t.int64=function(t){var e,n;if(J.is_number(t)&&null!=t[tt.INT64_TAG])return tt.validateInt64(t);if(J.is_string(t)){if(!tt.is_valid_int64_string(t))throw new Error("Not a valid int64 in string form: "+t);return n=new Number(parseInt(t,10)),n[tt.INT64_TAG]=t,tt.validateInt64(n)}if(!J.is_number(t)||!isFinite(t))throw new Error("Not a finite number: "+t);if(Number(t)!==Math.round(t))throw new Error("Number is not an integer: "+t);if(e=t.toFixed(),!tt.is_valid_int64_string(e))throw new Error("Number not in int64 range: "+t);return n=new Number(t),n[tt.INT64_TAG]=e,tt.validateInt64(n)},t.isInt64=function(t){return tt.isInt64(t)},t.prototype.getModifiedTime=function(){var t;return t=this._metadata_table.get("info"),null==t?null:t.get("mtime")},t.prototype.getTitle=function(){var t;return t=this._metadata_table.get("info"),null==t?null:t.get("title")},t.prototype.setTitle=function(t){var e;if(null!=t&&!J.string(t))throw new Error("Title must be a string or null!");return e=this._metadata_table.getOrInsert("info",{}),e.set("title",t)},t.prototype.isShareable=function(){return"."===this._dsid[0]},t.prototype._checkShareable=function(){if(!this.isShareable())throw new Error("Datastore is not shareable")},t.prototype.getEffectiveRole=function(){var t;return this.isShareable()?(t=this._managed_datastore.get_effective_role(),C.Datastore._roleFromInt(t)):C.Datastore.OWNER},t.prototype.isWritable=function(){var t;return t=this.getEffectiveRole(),t===C.Datastore.OWNER||t===C.Datastore.EDITOR},t.prototype._checkWritable=function(){if(!this.isWritable())throw new Error("Datastore is not writable")},t.prototype._checkRole=function(t){if(t!==C.Datastore.EDITOR&&t!==C.Datastore.VIEWER)throw new Error("Invalid role: "+t)},t.prototype._checkPrincipal=function(t){if(t!==C.Datastore.TEAM&&t!==C.Datastore.PUBLIC&&!t.match(/^u[1-9][0-9]*$/))throw new Error("Invalid principal: "+t)},t.prototype._getRole=function(t){var e,n,r;return e=null!=(n=this.getTable(tt.ACL_TID))&&null!=(r=n.get(t))?r.get("role"):void 0,null==e?C.Datastore.NONE:C.Datastore._roleFromInt(e)},t.prototype.getRole=function(t){return this._checkShareable(),this._checkPrincipal(t),this._getRole(t)},t.prototype.setRole=function(t,e){var n;return e===C.Datastore.NONE?void this.deleteRole(t):(this._checkShareable(),this._checkPrincipal(t),this._checkRole(e),this._checkWritable(),n=C.Datastore.int64(C.Datastore._intFromRole(e)),this.getTable(tt.ACL_TID).getOrInsert(t).update({role:n}))},t.prototype.deleteRole=function(t){var e;return this._checkShareable(),this._checkPrincipal(t),this._checkWritable(),null!=(e=this.getTable(tt.ACL_TID).get(t))?e.deleteRecord():void 0},t.prototype.listRoles=function(){var t,e,n,r,i,a;for(this._checkShareable(),n={},a=this.getTable(tt.ACL_TID).query(),r=0,i=a.length;i>r;r++)e=a[r],t=e.getId(),n[t]=this._getRole(t);return n},t._roleFromInt=function(t){switch(!1){case!(t>=tt.ROLE_OWNER):return C.Datastore.OWNER;case!(t>=tt.ROLE_EDITOR):return C.Datastore.EDITOR;case!(t>=tt.ROLE_VIEWER):return C.Datastore.VIEWER;default:return C.Datastore.NONE}},t._intFromRole=function(t){switch(t){case C.Datastore.OWNER:return tt.ROLE_OWNER;case C.Datastore.EDITOR:return tt.ROLE_EDITOR;case C.Datastore.VIEWER:return tt.ROLE_VIEWER;default:return 0}},t.prototype.getTable=function(t){if(this._checkNotClosed(),!C.Datastore.Table.isValidId(t))throw new Error("Invalid table ID: "+t);return new C.Datastore.Table(this,t)},t.prototype.listTableIds=function(){return this._checkNotClosed(),this._managed_datastore.list_tables()},t.prototype.getRecordCount=function(){return this._managed_datastore.get_record_count()},t.prototype.getSize=function(){return this._managed_datastore.get_size()},t.prototype.toString=function(){var t;return t=this._closed?"[closed] ":"","Datastore("+t+this._dsid+" ["+this._handle+"])"},t.prototype.close=function(){return this._closed=!0,this._evt_mgr.unregister_all(),this._listeners=[],void this._datastore_manager._obj_manager.close(this._dsid)},t.prototype.getId=function(){return this._dsid},t.prototype.getSyncStatus=function(){return{uploading:this._managed_datastore.get_outgoing_delta_count()>0}},t.isValidId=function(t){var e;return e=new RegExp(J.DS_ID_REGEX),J.is_string(t)&&e.test(t)},t.isValidShareableId=function(t){return this.isValidId(t)&&"."===t[0]},t.prototype._generateRid=function(){var t,e,n,r;for(r="_",e="_js_",n=Math.round(1e3*Date.now()),n<=this._last_used_timestamp&&(n=this._last_used_timestamp+1),this._last_used_timestamp=n,t=n.toString(32);t.length<11;)t="0"+t;return r+t+e+tt.randomWeb64String(5)},t.prototype._syncSoon=function(){var t=this;if(this._managed_datastore.is_deleted())throw new Error("Cannot sync deleted datastore "+this._dsid);return this._checkNotClosed(),void(this._syncPending||(this._syncPending=!0,setTimeout(this._timeoutWrapper(function(){return t._syncPending=!1,t._sync()}),0)))},t.prototype._sync=function(){var t,e,n,r,i,a,o,s,l;this._checkNotClosed(),i=this._managed_datastore.sync(),r=this._resolveAffectedRecordMap(i),t=!1;for(o in r)for(n=r[o],s=0,l=n.length;l>s;s++)e=n[s],Q(o===e._tid,"tid mismatch"),t=!0,a=e._rid,this._managed_datastore.query(o,a)||(e._deleted=!0,this._record_cache.remove(o,a));return void(t&&this.recordsChanged.dispatch(new $(r,(!1))))},t.prototype._resolveAffectedRecordMap=function(t){var e,n,r,i,a;n={};for(a in t){i=t[a];for(r in i)e=this._record_cache.getOrCreate(a,r),null==n[a]&&(n[a]=[]),n[a].push(e)}return n},t.prototype._recordsChangedLocally=function(t){return void(t.length>0&&(this.recordsChanged.dispatch($._fromRecordList(t,!0)),this._syncSoon()))},t.prototype._checkNotClosed=function(){if(this._closed||!this._managed_datastore._open)throw new Error("Datastore is already closed: "+this)},t}(),tt=C.Datastore.impl={},J=C.Datastore.impl.T={},J.identity=function(t){return t},J.get_coerce_fn=function(t){return null!=t.coerce?t.coerce:null!=t.load_json?function(e){return e instanceof t?e:t.load_json(e)}:J.identity},J.get_T_fn=function(t){return null!=t.Type?t.Type:t},J.str=function(t){return J.is_string(t)?t:J.is_function(t)?t():JSON.stringify(t)},J.assert=function(t,e){if(!t)throw new Error(J.str(e))},Q=J.assert,J.check=function(t,e,n,r,i,a){if(t)return n;throw J.fail(e,n,r,i,a),new Error("unreachable")},J.safe_to_string=function(t){var e,n;try{if(n=t.toString(),"[object Object]"!==n)return n}catch(t){e=t}try{return JSON.stringify(t)}catch(t){e=t}try{if(n=t.constructor.name,null!=n?n.match(/^[A-Za-z0-9_]+$/):void 0)return n}catch(t){e=t}return"[T.safe_to_string failed]"},J.fail=function(t,e,n,r,i){var a,o;throw o=null!=n?null!=r?null!=i?"Wanted "+J.str(r)+", but "+J.str(n)+" in "+J.str(i)+" "+J.str(t):"Wanted "+J.str(r)+", but "+J.str(n)+" "+J.str(t):""+J.str(n)+" "+J.str(t):null!=r?null!=i?"Wanted "+J.str(r)+", but in "+J.str(i)+" "+J.str(t):"Wanted "+J.str(r)+", but "+J.str(t):""+J.str(t),a=new Error(""+o+": "+J.safe_to_string(e)),console.error(a),a},J.any=function(t){return t},J.defined=function(t,e,n,r){return null==n&&(n="defined"),J.check("undefined"!=typeof t,"is undefined",t,e,n,r),t},J.nonnull=function(t,e,n,r){return null==n&&(n="nonnull"),J.defined(t,e,n,r),J.check(null!=t,"is null",t,e,n,r),t},J.member=function(t){var e,n;return n="value in "+JSON.stringify(t),e="not in "+JSON.stringify(t),function(r,i,a,o){return null==a&&(a=n),J.check(rt.call(t,r)>=0,e,r,i,a,o)}},J.object=function(t,e,n,r){return null==n&&(n="object"),J.nonnull(t,e,n,r),J.check("object"==typeof t,"not an object",t,e,n,r),t},J.bool=function(t,e,n,r){return null==n&&(n="bool"),J.nonnull(t,e,n,r),J.check(t===!0||t===!1,"is not bool",t,e,n,r),t},J.string=function(t,e,n,r){return null==n&&(n="string"),J.nonnull(t,e,n,r),J.check(J.is_string(t),"is not a string",t,e,n,r),t},J.num=function(t,e,n,r){return null==n&&(n="num"),J.nonnull(t,e,n,r),J.check("number"==typeof t,"is not numeric",t,e,n,r),t},J.int=function(t,e,n,r){return null==n&&(n="int"),J.num(t,e,n,r),J.check(0===t%1,"is not an integer",t,e,n,r),t},J.uint=function(t,e,n,r){return null==n&&(n="uint"),J.int(t,e,n,r),J.check(t>=0,"is negative",t,e,n,r),t},J.nullable=function(t){var e,n;return n="nullable("+t+")",e=function(e,r,i,a){return null==i&&(i=function(){return n}),J.defined(e,r,i,a),null!=e&&J.get_T_fn(t)(e,r,i,a),e},e.toString=function(){return n},e.coerce=function(e){return null!=e?J.get_coerce_fn(t)(e):null},e.fromJSON=function(n){return null!=n?null!=t.fromJSON?t.fromJSON(n):e.coerce(n):null},e},J.array=function(t,e,n,r){return null==n&&(n="array"),J.nonnull(t,e,n,r),J.check(J.is_array(t),"is not an array",t,e,n,r),t},J.arrayOf=function(t){var e,n;return n="arrayOf("+t+")",e=function(e,r,i,a){var o,s,l,u,c;for(null==i&&(i=n),J.array(e,r,i,a),l=u=0,c=e.length;c>u;l=++u)o=e[l],s=function(){return null!=r?"element "+l+" of "+J.str(r):"element "+l},J.get_T_fn(t)(o,s,i,a);return e},e.toString=function(){return n},e.coerce=function(e){var r,i,a,o;for(J.array(e,null,n),o=[],i=0,a=e.length;a>i;i++)r=e[i],o.push(J.get_coerce_fn(t)(r));return o},e.fromJSON=function(r){var i,a,o,s;if(J.array(r,"fromJSON input",n),null!=t.fromJSON){for(s=[],a=0,o=r.length;o>a;a++)i=r[a],s.push(t.fromJSON(i));return s}return e.coerce(r)},e},J.instance=function(t,e,n,r,i){var a;if(!(e instanceof Function))throw new Error("Invalid type given: "+e);return t instanceof e||(null==r&&(r=e.name),J.check(!1,"got instance of "+(null!=t&&null!=(a=t.constructor)?a.name:void 0),t,n,r,i)),t},J.unimplemented=function(t){return function(){throw new Error("unimplemented "+t)}},J.startsWith=function(t,e){return 0===t.lastIndexOf(e,0)},J.string_matching=function(t){var e;return J.string(t),J.check(/^[^].*[$]$/.test(t),"does not start with ^ and end with $",t),e="does not match regex "+t,function(n,r,i,a){return J.string(n,r,i,a),J.check(new RegExp(t).test(n),e,n,r,i,a),n}},J.is_defined=function(t){return"undefined"!=typeof t},J.is_bool=function(t){return t===!0||t===!1||t&&"object"==typeof t&&t.constructor===Boolean},J.is_number=function(t){return"number"==typeof t||t&&"object"==typeof t&&t.constructor===Number},J.is_json_number=function(t){return J.is_number(t)&&!isNaN(t)&&isFinite(t)},J.is_string=function(t){return"string"==typeof t||t&&"object"==typeof t&&t.constructor===String},J.is_function=function(t){return"function"==typeof t},J.is_object=function(t){return null!=t&&"object"==typeof t},J.is_array=function(t){return"[object Array]"===Object.prototype.toString.call(t)},J.is_empty=function(t){return 0===Object.keys(t).length},J.is_date=function(t){return"[object Date]"===Object.prototype.toString.call(t)},J.isUint8Array=function(t){return"[object Uint8Array]"===Object.prototype.toString.call(t)},J.is_simple_map=function(t){var e,n;if(null==t||"object"!=typeof t)return!1;for(e in t)if(n=t[e],!Object.prototype.hasOwnProperty.call(t,e))return!1;return!0},J.simple_map=function(t,e,n,r){var i,a;null==n&&(n="simple map"),J.object(t,e,n,r);for(i in t)a=t[i],J.check(Object.prototype.hasOwnProperty.call(t,i),function(){return"property "+i+" is inherited"},t,e,n,t);return t},J.simple_typed_map=function(t,e,n){var r,i,a;return r=J.get_coerce_fn(e),i=J.get_coerce_fn(n),a=function(r,i,a,o){var s,l;null==a&&(a=t),J.simple_map(r,i,a,o);for(s in r)l=r[s],J.get_T_fn(e)(s,"property",null,r),J.get_T_fn(n)(l,function(){return"value of property "+s},null,r);return r},a.coerce=function(e){var n,a,o;J.simple_map(e,null,t),a={};for(n in e)o=e[n],a[r(n)]=i(o);return a},a.fromJSON=function(e){var i,a,o;J.simple_map(e,null,t),a={};for(i in e)o=e[i],a[r(i)]=null!=n.fromJSON?n.fromJSON(o):o;return a},a},J.DS_ID_REGEX="^[-_a-z0-9]([-_a-z0-9.]{0,62}[-_a-z0-9])?$|^[.][-_a-zA-Z0-9]{1,63}$",J.dsid=function(t,e,n,r){return null==n&&(n="dsid"),J.string_matching(J.DS_ID_REGEX)(t,e,n,r),t},J.SS_ID_REGEX="^[-._+/=a-zA-Z0-9]{1,64}$|^:[-._+/=a-zA-Z0-9]{1,63}$",J.tid=function(t,e,n,r){return null==n&&(n="tid"),J.string_matching(J.SS_ID_REGEX)(t,e,n,r),t},J.rowid=function(t,e,n,r){return null==n&&(n="rowid"),J.string_matching(J.SS_ID_REGEX)(t,e,n,r),t},J.field_name=function(t,e,n,r){return null==n&&(n="field name"),J.string_matching(J.SS_ID_REGEX)(t,e,n,r),t},function(){var t,e,n;n=[];for(t in J)e=J[t],J.hasOwnProperty(t)?n.push(function(t){return e.toString=function(){return"T."+t}}(t)):n.push(void 0);return n}(),tt.struct=et={},et.define=function(t,e){var n,r,i,a,o,s,l,u,c,f,d,h,p,g,m,v;for(J.string(t,"struct name"),J.array(e,"fields"),g=[],p={},o=m=0,v=e.length;v>m;o=++m){i=e[o],J.array(i,"field","field descriptor",e),J.check(2<=i.length&&i.length<=3,"does not have length 2 or 3",i,"field descriptor"),f=J.string(i[0],"field name","field descriptor",e),h=J.nonnull(i[1],"field type","field descriptor",e),d=i.length<=2?{}:J.nonnull(i[2],"map of field options","field descriptor",e);for(u in d)"init"!==u&&"initFn"!==u&&J.fail("unknown option "+u,d,"field options","field descrptor",e);rt.call(d,"init")>=0&&rt.call(d,"initFn")>=0&&J.fail("both 'init' and 'initFn' specified",d,"field options","field descriptor",e),l="initFn"in d?d.initFn:"init"in d?(s=d.init,function(t){return function(){return t}}(s)):null,n={name:f,type:h,initFn:l},a="undefined"!=typeof G&&null!==G?new G(n):n,g.push(a),p[f]=a}return c="initializer for "+t+" (fields "+function(){var t,e,n;for(n=[],t=0,e=g.length;e>t;t++)i=g[t],n.push(i.name);return n}().join(", ")+")",r=function(t){var e,n,i;J.defined(t,"x","initializer");for(f in t)e=t[f],t.hasOwnProperty(f)&&J.check(null!=p[f],function(){return"has an unexpected field "+f},t,"initializer");for(n=0,i=g.length;i>n;n++)a=g[n],t[a.name]&&!t.hasOwnProperty(a.name)&&J.fail("Has an indirect property "+a.name,t,"initializer"),t.hasOwnProperty(a.name)?(e=t[a.name],this[a.name]=J.get_coerce_fn(a.type)(e)):null!=a.initFn?this[a.name]=a.initFn():J.fail("lacks the field "+a.name,t,"initializer");return r.Type(this,"initializer",c,this),this},r.Type=function(e,n,i,o){var s,l,u;for(J.defined(e,n,i,o),J.check(e instanceof r,function(){return"is not an instance of "+t},e,n,i,o),l=0,u=g.length;u>l;l++)a=g[l],J.check(e.hasOwnProperty(a.name),function(){return"lacks the field "+a.name},e,n,i,o),J.get_T_fn(a.type)(e[a.name],a.name,i,o);for(f in e)s=e[f],e.hasOwnProperty(f)&&J.check(null!=p[f],"has an unexpected field",f,n,i,o);return e},r.coerce=function(t){return t instanceof r?(r.Type(t),t):new r(t)},r.prototype.toString=function(){var t,e,n,r,i;for(e=this,t=[],r=0,i=g.length;i>r;r++)a=g[r],n=e[a.name],t.push(""+a.name+": "+(J.is_object(n)&&J.is_function(n.toString)?n.toString():JSON.stringify(n)));return"{"+t.join(", ")+"}"},r.prototype.toJSON=function(){var t,e,n,r;for(t=this,e=function(){return""+t},n=0,r=g.length;r>n;n++)a=g[n],J.get_T_fn(a.type)(this[a.name],a.name,null,e);return this},r.fromJSON=function(t){var e,n;J.simple_map(t,"input"),e={};for(u in t)n=t[u],a=p[u],null!=a&&(h=a.type,e[u]=null!=h.fromJSON?h.fromJSON(n):n);return new r(e)},r.toString=function(){return"struct "+t},r},G=et.define("StructField",[["name",J.string],["type",J.defined],["initFn",J.defined]]),et.toJSO=function(t){var e,n,r,i;if("object"!=typeof t)return t;if(J.is_array(t))return function(){var n,r,i;for(i=[],n=0,r=t.length;r>n;n++)e=t[n],i.push(et.toJSO(e));return i}();r={};for(n in t)i=t[n],t.hasOwnProperty(n)&&(r[n]=et.toJSO(i));return r},et.union_as_list=function(t,e){var n,r,i,a,o,s,l,u,c,f,d;for(J.string(t,"union name"),J.array(e,"variants"),r=function(){throw new Error("Use "+t+".from_array instead")},u={},l=[],c=function(e,n,i){var a;return a=et.define(""+t+"."+e,i),a.prototype.tag=function(){return e},a.prototype.toString=function(){return""+t+"."+e+"("+JSON.stringify(this)+")"},a.prototype.toJSON=function(){var t,r,i,a,o,s;for(t=[e],o=0,s=n.length;s>o;o++)r=n[o],i=r[0],a=r[1],J.get_T_fn(a)(this[i],i),t.push(this[i]);return t},a.from_array=function(r){var i,o,s,l,u,c,f;for(u="initializer for "+t,J.array(r,"initializer",u),J.check(r.length===n.length+1,"does not have length "+(n.length+1),r,"initializer",u),J.check(r[0]===e,"does not have tag "+e,r,"initializer",u),i={_tag:e},s=c=0,f=n.length;f>c;s=++c)o=n[s],l=o[0],i[l]=r[s+1];return new a(i)},a.fromJSON=function(t){return t.length>n.length+1&&(t=t.slice(0,n.length+1)),a.from_array(t)},a.coerce=function(t){return t instanceof a?(a.Type(t),t):a.from_array(t)},u[e]=a,r[e]=a},f=0,d=e.length;d>f;f++)i=e[f],J.array(i,"variant","variant descriptor",e),J.check(2===i.length,"does not have length 2",i,"variant descriptor",e),s=J.string(i[0],"tag","tag",e),a=J.array(i[1],"fields","variant descriptor",e),o=a.slice(0),o.unshift(["_tag",J.member([s])]),c(s,a,o),l.push(s);return n="initializer for "+t+" (variants "+l.join(", ")+")",r.from_array=function(e){var n,r;return r="initializer for "+t,J.array(e,"initializer",r),J.check(e.length>=1,"lacks a tag",e,"initializer",r),n=e[0],J.string(n,"tag",r,e),J.member(l)(n),u[n].from_array(e)},r.fromJSON=function(e){var n,r;return r="initializer for "+t,J.array(e,"initializer",r),J.check(e.length>=1,"lacks a tag",e,"initializer",r),n=e[0],J.string(n,"tag",r,e),J.member(l)(n),u[n].fromJSON(e)},r.Type=function(e,n,r,i){var a;return null==r&&(r=""+t+".Type"),J.defined(e,n,r,i),J.defined(e.tag,"tag",r,i),a=e.tag(),J.string(a,"tag","initializer",e),J.member(l)(a),u[a].Type(e,null,"object of type "+t),e},r.coerce=function(t){var e,n;for(n in u)if(e=u[n],t instanceof e)return e.Type(t),t;return r.from_array(t)},r.toString=function(){return"union "+t},r},tt.nonzero_int64_approximate_regex=new RegExp("^-?[1-9][0-9]{0,18}$"),tt.int64_max_str="9223372036854775807",tt.int64_min_str="-9223372036854775808",tt.ACL_TID=":acl",tt.ROLE_OWNER=3e3,tt.ROLE_EDITOR=2e3,tt.ROLE_VIEWER=1e3,tt.int64_string_less_than=function(t,e){var n,r,i;return t!==e&&(r="0"===t.charAt(0),i="0"===e.charAt(0),!(!r||i)||!(i&&!r)&&(n=t.length===e.length?t>e:t.length>e.length,r&&i?n:!n))},tt.is_valid_int64_string=function(t){return!!J.is_string(t)&&("0"===t||!!tt.nonzero_int64_approximate_regex.test(t)&&("-"===t.charAt(0)?t.length<tt.int64_min_str.length||t<=tt.int64_min_str:t.length<tt.int64_max_str.length||t<=tt.int64_max_str))},tt.is_wrapped_atomic_field_value=function(t){var e,n,r,i;if(!J.is_simple_map(t))return!1;if(e=Object.keys(t),1!==e.length)return!1;switch(e[0]){case"B":return J.is_string(t.B);case"N":return"nan"===(r=t.N)||"+inf"===r||"-inf"===r;case"I":case"T":return n=null!=(i=t.I)?i:t.T,tt.is_valid_int64_string(n);default:return!1}},tt.is_atomic_field_value=function(t){return J.is_bool(t)||J.is_json_number(t)||J.is_string(t)||tt.is_wrapped_atomic_field_value(t)},tt.is_list_value=function(t){var e,n,r;if(J.is_array(t)){for(n=0,r=t.length;r>n;n++)if(e=t[n],!tt.is_atomic_field_value(e))return!1;return!0}return!1},tt.is_compound_field_value=function(t){return tt.is_atomic_field_value(t)||tt.is_list_value(t)},tt.atomic_field_value=function(t,e,n,r){return null==n&&(n="atomic field value"),J.check(tt.is_atomic_field_value(t),"is not an atomic field value",t,e,n,r),t},tt.list_value=function(t,e,n,r){return null==n&&(n="list value"),J.arrayOf(tt.atomic_field_value)(t,e,n,r),t},tt.compound_field_value=function(t,e,n,r){return null==n&&(n="field value"),J.is_array(t)?tt.list_value(t,e,n,r):tt.atomic_field_value(t,e,n,r)},tt.FieldOp=T=et.union_as_list("FieldOp",[["P",[["value",tt.compound_field_value]]],["D",[]],["LC",[]],["LP",[["at",J.uint],["value",tt.atomic_field_value]]],["LI",[["before",J.uint],["value",tt.atomic_field_value]]],["LD",[["at",J.uint]]],["LM",[["from",J.uint],["to",J.uint]]]]),tt.datadict=J.simple_typed_map("datadict",J.field_name,tt.compound_field_value),tt.update_datadict=J.simple_typed_map("update_datadict",J.field_name,T),tt.Change=r=et.union_as_list("Change",[["I",[["tid",J.tid],["rowid",J.rowid],["fields",tt.datadict]]],["U",[["tid",J.tid],["rowid",J.rowid],["updates",tt.update_datadict]]],["D",[["tid",J.tid],["rowid",J.rowid]]]]),tt.Delta=w=et.define("Delta",[["rev",J.uint],["changes",J.arrayOf(r)],["nonce",J.string]]),L=et.define("ListDatastoresResponseItem",[["dsid",J.string],["handle",J.string],["rev",J.uint],["role",J.nullable(J.uint),{init:null}],["info",J.nullable(tt.datadict),{init:null}]]),tt.ListDatastoresResponse=N=et.define("ListDatastoresResponse",[["token",J.string],["datastores",J.arrayOf(L)]]),O=et.define("GetSnapshotResponseRow",[["tid",J.string],["rowid",J.string],["data",tt.datadict]]),P=et.define("GetSnapshotResponse",[["rev",J.uint],["role",J.nullable(J.uint),{init:null}],["rows",J.arrayOf(O)]]),o=et.define("CreateDatastoreResponse",[["handle",J.string],["rev",J.uint],["created",J.bool],["role",J.nullable(J.uint),{init:null}]]),M=et.define("GetDatastoreResponse",[["handle",J.nullable(J.string),{init:null}],["rev",J.nullable(J.uint),{init:null}],["role",J.nullable(J.uint),{init:null}],["notfound",J.nullable(J.string),{init:null}]]),x=et.define("DeleteDatastoresResponse",[["ok",J.string]]),H=et.define("PutDeltaResponse",[["rev",J.nullable(J.uint),{init:null}],["role",J.nullable(J.uint),{init:null}],["conflict",J.nullable(J.string),{init:null}],["notfound",J.nullable(J.string),{init:null}],["access_denied",J.nullable(J.string),{init:null}]]),D=et.define("GetDeltasResponse",[["deltas",J.nullable(J.arrayOf(w)),{init:null}],["role",J.nullable(J.uint),{init:null}],["notfound",J.nullable(J.string),{init:null}]]),e=et.define("AwaitResponseDeltas",[["deltas",J.simple_typed_map("deltas map",J.string,D)]]),tt.AwaitResponse=t=et.define("AwaitResponse",[["get_deltas",J.nullable(e),{init:null}],["list_datastores",J.nullable(N),{init:null}]]),n=function(){function t(){this.min_delay_millis=500,this.max_delay_millis=9e4,this.base=1.5,this._failures=0,this.log=!1}return t.prototype.set_log=function(t){this.log=t},t.prototype.set_max_delay_millis=function(t){this.max_delay_millis=t},t.prototype.get_backoff_millis=function(){var t,e;return this._failures+=1,e=Math.min(this.max_delay_millis,this.min_delay_millis*Math.pow(this.base,this._failures-1)),t=(.5+Math.random())*e,this.log&&console.log("get_backoff_millis: failures="+this._failures+", target_delay_millis="+e+", delay_millis="+t),t},t.prototype.reset=function(){return this._failures=0},t}(),W=function(){function t(){this.backoff=new n}var e,r;return r=6e4,e=0,t.prototype.run=function(t,e,n){var i,a,o,s,l,u,c,f=this;return o=null!=(u=e.do_retry)?u:function(){return!0},s=null!=(c=e.giveup_after_ms)?c:r,l=Date.now()+s,a=!1,i=function(){return a?void 0:t(function(){var t,e,r;return t=arguments[0],e=2<=arguments.length?at.call(arguments,1):[],a?void 0:t&&o(t)?Date.now()>l?(console.error("Giving up due to error",t),n(t)):(r=f.backoff.get_backoff_millis(),console.warn("Retrying in "+r+" ms due to error",t),setTimeout(i,r)):n.apply(null,[t].concat(at.call(e)))})},i(),function(){return a=!0}},t}(),E=function(){function t(t){this.client=t,this._retry=new W}var e,n;return n=10,e=2419200,t.prototype._run_with_retries=function(t,e,n){var r;return r={giveup_after_ms:1e3*t,do_retry:function(t){var e;return 0===t.status||500<=(e=t.status)&&600>e}},this._retry.run(n,r,e)},t.prototype.delete_db=function(t,e){var r=this;return this._run_with_retries(n,e,function(e){return r.client._deleteDatastore(t,function(t,n){return null!=t?e(t):e(null,n)})})},t.prototype.list_dbs=function(t){var n=this;return this._run_with_retries(e,t,function(t){return n.client._listDatastores(function(e,n){return null!=e?t(e):t(null,n)})})},t.prototype.get_or_create_db=function(t,e){var r=this;return this._run_with_retries(n,e,function(e){return r.client._getOrCreateDatastore(t,function(t,n){return null!=t?e(t):e(null,n)})})},t.prototype.create_db=function(t,e,r){var i=this;return this._run_with_retries(n,r,function(n){return i.client._createDatastore(t,e,function(t,e){return null!=t?n(t):n(null,e)})})},t.prototype.get_db=function(t,e){var r=this;return this._run_with_retries(n,e,function(e){return r.client._getDatastore(t,function(t,n){return null!=t?e(t):e(null,n)})})},t.prototype.await=function(t,n,r){var i,a=this;return i=this._run_with_retries(e,r,function(e){return a.client._datastoreAwait(t,n,function(t,n){return null!=t?e(t):e(null,n)})})},t.prototype.put_delta=function(t,n,r){var i=this;return this._run_with_retries(e,r,function(e){return i.client._putDelta(t,n,function(t,n){return null!=t?e(t):e(null,n)})})},t.prototype.get_snapshot=function(t,e){var r=this;return this._run_with_retries(n,e,function(e){return r.client._getSnapshot(t,function(t,n){return null!=t?e(t):e(null,n)})})},t}(),I=function(){
function t(t,e){var n,r,i;for(J.assert(t.length===e.length,function(){return""+t.length+" changes, "+e.length+" undo_extras"}),this.changes=[],this.undo_extras=[],this._last_simple_mtime_update=null,n=r=0,i=t.length;i>=0?i>r:r>i;n=i>=0?++r:--r)this.add_change(t[n],e[n])}var e;return e=function(t,e){var n,i,a,o,s;switch(o=null,i=null,t.tag()){case"I":o="D";break;case"U":o="U",i={};for(a in e)s=e[a],i[a]=null==s?["D"]:["P",s];break;case"D":o="I",i=tt.clone(e);break;default:throw new Error("Unknown change tag: "+t.tag())}return n=[o,t.tid,t.rowid],null!=i&&n.push(i),r.from_array(n)},t._is_simple_mtime_update=function(t){var e,n;switch(t.tag()){case"I":case"D":return!1;case"U":if(":info"!==t.tid||"info"!==t.rowid)return!1;if(n=Object.keys(t.updates),1!==n.length)return!1;if("mtime"!==n[0])return!1;switch(e=t.updates.mtime,e.tag()){case"P":return!0;case"D":case"LC":case"LP":case"LI":case"LD":case"LM":return!1;default:throw new Error("Unknown field op: "+e.tag())}break;default:throw new Error("Unknown change tag: "+t.tag())}},t._affects_mtime=function(t){if(":info"!==t.tid||"info"!==t.rowid)return!1;switch(t.tag()){case"I":case"D":return!0;case"U":return"mtime"in t.updates;default:throw new Error("Unknown change tag: "+t.tag())}},t.prototype.add_change=function(e,n){return this.changes.push(e),this.undo_extras.push(n),void(t._affects_mtime(e)&&(t._is_simple_mtime_update(e)?(null!=this._last_simple_mtime_update&&(this.changes.splice(this._last_simple_mtime_update,1),this.undo_extras.splice(this._last_simple_mtime_update,1)),this._last_simple_mtime_update=this.changes.length-1):this._last_simple_mtime_update=null))},t.prototype.inverse_changes=function(){var t,n,r,i,a,o;for(r=[],o=this.changes,n=i=0,a=o.length;a>i;n=++i)t=o[n],r.push(e(t,this.undo_extras[n]));return r.reverse(),r},t}(),tt.LocalDelta=I,B=10,z=B,tt.make_nonce=function(){return tt.randomWeb64String(B)},tt.value_size=function(t){var e,n,r,i;if(J.is_string(t))return C.Util.countUtf8Bytes(t);if(J.is_bool(t))return 0;if(J.is_number(t))return 0;if(J.is_array(t)){for(e=C.Datastore.List.BASE_ITEM_SIZE*t.length,r=0,i=t.length;i>r;r++)n=t[r],e+=tt.value_size(n);return e}if("object"!=typeof t)throw new Error("Unexpected value: "+t);if(null!=t.I)return 0;if(null!=t.N)return 0;if(null!=t.B)return Math.ceil(3*t.B.length/4);if(null!=t.T)return 0;throw new Error("Unexpected object: "+JSON.stringify(t))},tt.size_difference_for_field_op=function(t,e,n){var r,i,a,o;switch(r=t.get(e),n.tag()){case"P":return i=n.value,null==r?C.Datastore.Record.BASE_FIELD_SIZE+tt.value_size(i):tt.value_size(i)-tt.value_size(r);case"D":return null!=r?-(C.Datastore.Record.BASE_FIELD_SIZE+tt.value_size(r)):0;case"LC":return Q(null==r,"can't create list for field that already exists"),C.Datastore.Record.BASE_FIELD_SIZE;case"LP":return Q(J.is_array(r),"LP on non-list"),Q(0<=(a=n.at)&&a<r.length,"bad index for LP"),tt.value_size(n.value)-tt.value_size(r[n.at]);case"LI":return(null!=r?0:C.Datastore.Record.BASE_FIELD_SIZE)+C.Datastore.List.BASE_ITEM_SIZE+tt.value_size(n.value);case"LD":return Q(J.is_array(r),"LD on non-list"),Q(0<=(o=n.at)&&o<r.length,"bad index for LD"),-(C.Datastore.List.BASE_ITEM_SIZE+tt.value_size(r[n.at]));case"LM":return 0;default:throw new Error("unexpected field op type "+n.tag())}},tt.size_difference_for_change=function(t,e){var n,r,i,a,o,s,l;return o=function(){var o,u;switch(e.tag()){case"I":a=C.Datastore.Record.BASE_RECORD_SIZE,o=e.fields;for(n in o)l=o[n],a+=C.Datastore.Record.BASE_FIELD_SIZE+tt.value_size(l);return a;case"U":i=t.get_record(e.tid,e.rowid),J.assert(null!=i,function(){return"record not found: "+JSON.stringify(e)}),s=0,u=e.updates;for(n in u)r=u[n],s+=tt.size_difference_for_field_op(i,n,r);return s;case"D":return-t.get_record(e.tid,e.rowid)._size;default:throw new Error("unrecognized tag "+e.tag())}}()},V=function(){function t(t,e,n){var r,i;this._tid=t,this._rid=e,null==n&&(n={}),this._fields={},this._size=C.Datastore.Record.BASE_RECORD_SIZE;for(r in n)i=n[r],this._fields[r]=tt.clone(i),this._size+=C.Datastore.Record.BASE_FIELD_SIZE+tt.value_size(i)}return t.prototype.get=function(t){return this._fields[t]},t.prototype.get_all=function(){return this._fields},t.prototype.put=function(t,e){return void(null!=e?this._fields[t]=tt.clone(e):delete this._fields[t])},t.prototype.apply_field_op=function(t,e){var n,r,i,a,o,s,l;switch(n=this._fields[t],e.tag()){case"P":this._fields[t]=tt.clone(e.value);break;case"D":delete this._fields[t];break;case"LC":Q(null==n,"can't create list for field that already exists"),this._fields[t]=[];break;case"LP":Q(J.is_array(n),"LP on non-list"),Q(0<=(i=e.at)&&i<n.length,"bad index for LP"),n[e.at]=tt.clone(e.value);break;case"LI":null!=n?(Q(J.is_array(n),"LI on non-list"),Q(0<=(a=e.before)&&a<=n.length,"bad index for LI"),n.splice(e.before,0,tt.clone(e.value))):(Q(0===e.before,"bad index for LI on nonexistent field"),this._fields[t]=[tt.clone(e.value)]);break;case"LD":Q(J.is_array(n),"LD on non-list"),Q(0<=(o=e.at)&&o<n.length,"bad index for LD"),n.splice(e.at,1);break;case"LM":Q(J.is_array(n),"LM on non-list"),Q(0<=(s=e.from)&&s<n.length,"bad from index for LM"),Q(0<=(l=e.to)&&l<n.length,"bad to index for LM"),r=n[e.from],n.splice(e.from,1),n.splice(e.to,0,r);break;default:throw new Error("unexpected field op type "+e.tag())}},t.prototype.size=function(){return this._size},t}(),K=function(){function t(){this._records={}}return t.prototype.get=function(t){return this._records[t]},t.prototype.put=function(t,e){return void(null!=e?this._records[t]=e:delete this._records[t])},t.prototype.has=function(t){return null!=this._records[t]},t.prototype.is_empty=function(){var t;for(t in this._records)return!1;return!0},t.prototype.list_record_ids=function(){var t,e;e=[];for(t in this._records)e.push(t);return e},t}(),u=function(){function t(t,e){var n,r,i,a,o,s;this._tables={},this._record_count=0,this._size=C.Datastore.BASE_DATASTORE_SIZE;for(s in e){i=e[s],o=this._get_table(s);for(a in i)n=i[a],r=new V(s,a,n),this._check_record_size(t,s,a,r._size),o.put(a,r),this._record_count+=1,this._size+=r._size}this._check_datastore_size(t,this._size),this._changedInfoFields={}}return t.from_get_snapshot_resp=function(e){var n,r,i,a,o,s;for(n={},s=e.rows,i=0,a=s.length;a>i;i++)r=s[i],n[o=r.tid]||(n[o]={}),n[r.tid][r.rowid]=r.data;return new t((!1),n)},t.prototype._size_limit_exceeded=function(t,e){var n;if(t)throw n=new Error(e),n.code="SIZE_LIMIT_EXCEEDED",n;return void console.warn(e)},t.prototype._check_record_size=function(t,e,n,r){return void(r>C.Datastore.Record.RECORD_SIZE_LIMIT&&this._size_limit_exceeded(t,"Record ("+e+", "+n+") too large: "+r+" bytes"))},t.prototype._check_datastore_size=function(t,e){return void(e>C.Datastore.DATASTORE_SIZE_LIMIT&&this._size_limit_exceeded(t,"Datastore too large: "+e+" bytes"))},t.prototype._TEST_calculate_size_from_scratch=function(){var t,e,n,r,i,a,o,s,l,u,c,f;r=0,u=this._tables;for(a in u)for(i=u[a],c=i.list_record_ids(),s=0,l=c.length;l>s;s++){n=c[s],e=i.get(n),r+=C.Datastore.Record.BASE_RECORD_SIZE,f=e.get_all();for(t in f)o=f[t],r+=C.Datastore.Record.BASE_FIELD_SIZE+tt.value_size(o)}return r},t.prototype.raw_data=function(){var t,e,n,r,i,a,o,s;t={},o=this._tables;for(r in o)for(n=o[r],t[r]={},s=n.list_record_ids(),i=0,a=s.length;a>i;i++)e=s[i],t[r][e]=tt.clone(n.get(e).get_all());return t},t.prototype.get_record=function(t,e){var n;return null!=(n=this._tables[t])?n.get(e):void 0},t.prototype.clearInfoFields=function(){return this._changedInfoFields={}},t.prototype.updateInfoFieldsFromChange=function(t){var e,n,r,i,a,o,s,l,u;switch(J.assert(":info"===t.tid,function(){return"updateInfoField: table must be :info, got "+t.tid}),J.assert("info"===t.rowid,function(){return"updateInfoField: row must be info, got "+t.rowid}),t.tag()){case"I":a=t.fields,s=[];for(e in a)r=a[e],s.push(this._changedInfoFields[e]=!0);return s;case"U":o=t.updates,l=[];for(e in o)i=o[e],l.push(this._changedInfoFields[e]=!0);return l;case"D":if(n=this.get_record(":info","info"),null!=n){u=[];for(e in n.get_all())u.push(this._changedInfoFields[e]=!0);return u}break;default:throw new Error("Unknown change tag: "+t.tag())}},t.prototype.updateDatastoreInfo=function(t){var e,n;t=tt.clone(t||{}),e=this.query(":info","info")||{};for(n in this._changedInfoFields)n in e?t[n]=e[n]:delete t[n];return t},t.prototype.getLocalInfoData=function(){return tt.clone(this.query(":info","info")||{})},t.prototype.apply_change=function(t,e){var n,r,i;switch(n=tt.size_difference_for_change(this,e),n>=0&&this._check_datastore_size(t,this._size+n),":info"===e.tid&&"info"===e.rowid&&this.updateInfoFieldsFromChange(e),e.tag()){case"I":this._check_record_size(t,e.tid,e.rowid,n),this._record_count+=1,i=this._apply_insert(e);break;case"U":r=this.get_record(e.tid,e.rowid),J.assert(null!=r,function(){return"apply_change: record does not exist: "+JSON.stringify(e)}),n>=0&&this._check_record_size(t,e.tid,e.rowid,r._size+n),i=this._apply_update(r,e),r._size+=n;break;case"D":this._record_count-=1,i=this._apply_delete(e);break;default:throw new Error("unrecognized tag "+e.tag())}return this._size+=n,i},t.prototype._get_table=function(t){return null==this._tables[t]&&(this._tables[t]=new K),this._tables[t]},t.prototype._apply_insert=function(t){var e,n;return n=this._get_table(t.tid),J.assert(!n.has(t.rowid),function(){return"_apply_insert: record already exists: "+JSON.stringify(t)}),e=new V(t.tid,t.rowid,t.fields),n.put(t.rowid,e),null},t.prototype._apply_update=function(t,e){var n,r,i,a,o,s,l;a={};try{s=e.updates;for(r in s)i=s[r],o=tt.clone(null!=(l=t.get(r))?l:null),t.apply_field_op(r,i),a[r]=o}catch(e){n=e;for(r in a)o=a[r],t.put(!1,r,o);throw n}return a},t.prototype._apply_delete=function(t){var e,n,r;return r=this._get_table(t.tid),J.assert(r.has(t.rowid),function(){return"_apply_delete: record does not exist: "+JSON.stringify(t)}),n=r.get(t.rowid),e=tt.clone(n.get_all()),r.put(t.rowid,null),r.is_empty()&&delete this._tables[t.tid],e},t.prototype.query=function(t,e){var n,r;return r=this._tables[t],null==r?null:(n=r.get(e),null==n?null:tt.clone(n.get_all()))},t.prototype.list_tables=function(){var t,e;return t=function(){var t;t=[];for(e in this._tables)t.push(e);return t}.call(this),t.sort(),t},t.prototype.list_rows_for_table=function(t){var e,n;return n=this._tables[t],null==n?[]:(e=n.list_record_ids(),e.sort(),e)},t.prototype.record_count=function(){return this._record_count},t.prototype.size=function(){return this._size},t}(),R=function(){function t(t,e,n,r,i,a,o,s){this.dbid=t,this.handle=e,this.role=n,this.datastore_model=r,this.resolver=i,this.sync_state=a,this.flob_client=o,this._dslist_listener=s,this.syncStateChanged=new C.Util.EventSource,this._deleted=!1,this._open=!0,this._put_delta_queue=new X,this._update_mtime_on_change=!0}return t.fresh_managed_datastore=function(e,n,r,i,a,o,s,l){var u;return u=new Y(a),new t(e,n,r,i,o,u,s,l)},t.prototype.get_dsid=function(){return this.dbid},t.prototype.get_handle=function(){return this.handle},t.prototype.get_effective_role=function(){return this.role},t.prototype.is_deleted=function(){return this._deleted},t.prototype.mark_deleted=function(){return this._deleted=!0},t.prototype.open=function(){if(this._open)throw new Error("Attempt to open datastore multiple times");return this._open=!0},t.prototype.close=function(){if(!this._open)throw new Error("Attempt to close datastore multiple times");return this._open=!1},t.prototype.is_closed=function(){return!this._open},t.prototype._updateInfoFieldsAfterSync=function(){var t,e,n,r,i,a;for(this.datastore_model.clearInfoFields(),i=this.sync_state.unsynced_deltas,a=[],n=0,r=i.length;r>n;n++)e=i[n],a.push(function(){var n,r,i,a;for(i=e.changes,a=[],n=0,r=i.length;r>n;n++)t=i[n],":info"===t.tid&&"info"===t.rowid?a.push(this.datastore_model.updateInfoFieldsFromChange(t)):a.push(void 0);return a}.call(this));return a},t.prototype._should_notify_dslist_listener_for=function(t){var e,n;if(e=function(t){var e;for(e in t)if("mtime"!==e)return!0;return!1},":info"!==t.tid||"info"!==t.rowid)return!1;switch(t.tag()){case"D":if(n=this.datastore_model.get_record(t.tid,t.rowid),null==n)throw new Error("Record not found: "+t.tid+" "+t.rowid);return e(n.get_all());case"U":return e(t.updates);case"I":return e(t.fields);default:throw new Error("unknown change tag: "+t.tag())}},t.prototype._rollback_unsynced_deltas=function(t){var e,n,r,i,a,o,s,l,u,c,f,d;for(e={},o=this.sync_state.unsynced_deltas.slice().reverse(),s=0,c=o.length;c>s;s++){for(a=o[s],i=a.inverse_changes(),l=0,f=i.length;f>l;l++)r=i[l],this.datastore_model.apply_change(!1,r);if(t)for(u=0,d=i.length;d>u;u++)n=i[u],n.tid in e||(e[n.tid]={}),e[n.tid][n.rowid]=!0}return e},t.prototype._do_sync=function(){var t,e,n,r,i,a,o,s,l,u,c,f,d,h,p,g,m,v;if(a=this.sync_state.get_server_deltas(),0===a.length)return{};for(i=this.resolver.resolve(this.sync_state.unsynced_deltas,a),r=i.rebased_deltas,t=i.affected_records,o=!1,this._rollback_unsynced_deltas(!1),l=0,d=a.length;d>l;l++)for(n=a[l],m=n.changes,u=0,h=m.length;h>u;u++)e=m[u],o|=this._should_notify_dslist_listener_for(e),this.datastore_model.apply_change(!1,e);for(c=0,p=r.length;p>c;c++)for(n=r[c],n.undo_extras=[],v=n.changes,f=0,g=v.length;g>f;f++)e=v[f],o|=this._should_notify_dslist_listener_for(e),s=this.datastore_model.apply_change(!1,e),n.undo_extras.push(s);return this.sync_state.update_unsynced_deltas(r),o&&this._dslist_listener(),t},t.prototype._do_put_delta=function(){var t,e=this;if(!this.sync_state.delta_pending()&&(t=this.sync_state.get_delta_to_put(),null!=t))return this._put_delta_queue.request(function(){return e.flob_client.put_delta(e.handle,t,function(n,r){return null==n&&(null!=r.rev&&(e.sync_state.put_succeeded(t),e.syncStateChanged.dispatch(null)),null!=r.access_denied&&(console.log("Write access denied, reverting pending changes. Reason:",r.access_denied),e._affected_records_from_access_denied=e._rollback_unsynced_deltas(!0),e.sync_state.clear_unsynced_deltas(),e.role=tt.ROLE_VIEWER,e.syncStateChanged.dispatch(null))),e._put_delta_queue.finish()})})},t.prototype._apply_and_queue_local_change=function(t,e){var n,r;return n=this._should_notify_dslist_listener_for(e),r=this.datastore_model.apply_change(t,e),this.sync_state.add_unsynced_change(e,r),void(n&&this._dslist_listener())},t.prototype._clock=function(){return new Date},t.prototype._update_mtime=function(){var t;return this._update_mtime_on_change?(t=null!=this.datastore_model.query(":info","info")?r.from_array(["U",":info","info",{mtime:["P",tt.toDsValue(this._clock())]}]):r.from_array(["I",":info","info",{mtime:tt.toDsValue(this._clock())}]),this._apply_and_queue_local_change(!1,t)):null},t.prototype.perform_local_change=function(t){return this._apply_and_queue_local_change(!0,t),this._update_mtime(),this.syncStateChanged.dispatch(null)},t.prototype.sync=function(){var t;return t=this._affected_records_from_access_denied,null!=t?(delete this._affected_records_from_access_denied,t):(this.has_unfinalized_changes()&&this.sync_state.finalize(),t=this._do_sync(),this._do_put_delta(),this._updateInfoFieldsAfterSync(),t)},t.prototype.get_outgoing_delta_count=function(){return this.sync_state.unsynced_deltas.length},t.prototype.get_incoming_delta_count=function(){return this.sync_state.get_server_deltas().length},t.prototype.has_unfinalized_changes=function(){return this.sync_state.has_unfinalized_changes()},t.prototype.receive_server_delta=function(t){return this.sync_state.receive_server_delta(t),void this.syncStateChanged.dispatch(null)},t.prototype.query=function(t,e){return this.datastore_model.query(t,e)},t.prototype.list_tables=function(){var t;return function(){var e,n,r,i;for(r=this.datastore_model.list_tables(),i=[],e=0,n=r.length;n>e;e++)t=r[e],":info"!==t&&t!==tt.ACL_TID&&i.push(t);return i}.call(this)},t.prototype.list_rows_for_table=function(t){return this.datastore_model.list_rows_for_table(t)},t.prototype.get_record_count=function(){return this.datastore_model.record_count()},t.prototype.get_record_size=function(t,e){return this.datastore_model.get_record(t,e).size()},t.prototype.get_size=function(){return this.datastore_model.size()},t}(),Y=function(){function t(t){this._server_rev=t,J.uint(this._server_rev,"_server_rev"),this._pending_delta=null,this._server_deltas=[],this.unsynced_deltas=[],this._last_unsynced_delta_unfinalized=!1}return t.prototype.get_server_rev=function(){return this._server_rev},t.prototype.is_current=function(){return 0===this.unsynced_deltas.length&&0===this._server_deltas.length},t.prototype.get_server_deltas=function(){return this._server_deltas},t.prototype.add_unsynced_change=function(t,e){var n;return n=this.unsynced_deltas.length,void(this._last_unsynced_delta_unfinalized?this.unsynced_deltas[n-1].add_change(t,e):(this.unsynced_deltas.push(new I([t],[e])),this._last_unsynced_delta_unfinalized=!0))},t.prototype._compact_deltas=function(){var t,e,n,r,i,a,o,s,l,u,c,f,d,h,p,g;if(Q(null==this._pending_delta,"delta pending"),r=this.unsynced_deltas.length,!(1>=r)){for(o=this._last_unsynced_delta_unfinalized?this.unsynced_deltas.pop():null,e=[],a=[],h=this.unsynced_deltas,s=0,c=h.length;c>s;s++){for(n=h[s],p=n.changes,l=0,f=p.length;f>l;l++)t=p[l],e.push(t);for(g=n.undo_extras,u=0,d=g.length;d>u;u++)i=g[u],a.push(i)}return this.unsynced_deltas=[new I(e,a)],void(null!=o&&this.unsynced_deltas.push(o))}},t.prototype.get_delta_to_put=function(){var t,e;return Q(null==this._pending_delta,"delta pending"),t=this.unsynced_deltas.length,0===t||1===t&&this._last_unsynced_delta_unfinalized?null:(this._compact_deltas(),this._last_unsynced_delta_unfinalized&&Q(this.unsynced_deltas.length>1,"the only delta is unfinalized"),e=this.unsynced_deltas[0],this._pending_delta=new w({changes:e.changes.slice(),nonce:tt.make_nonce(),rev:this._server_rev}),this._pending_delta)},t.prototype.delta_pending=function(){return null!=this._pending_delta},t.prototype.has_unfinalized_changes=function(){return this._last_unsynced_delta_unfinalized},t.prototype.finalize=function(){return void(this._last_unsynced_delta_unfinalized=!1)},t.prototype.update_unsynced_deltas=function(t){return this.unsynced_deltas=t,this._server_rev+=this._server_deltas.length,this._server_deltas=[]},t.prototype._is_our_pending=function(t){return null!=this._pending_delta&&this._pending_delta.nonce===t.nonce},t.prototype._ack=function(t){return Q(this._is_our_pending(t),"not ours"),Q(0===this._server_deltas.length,"server deltas exist"),this._pending_delta=null,this.unsynced_deltas.shift(),this._server_rev++},t.prototype.put_succeeded=function(t){return this._is_our_pending(t)?this._ack(t):void 0},t.prototype.clear_unsynced_deltas=function(){return this._pending_delta=null,this.unsynced_deltas=[],this._last_unsynced_delta_unfinalized=!1},t.prototype.receive_server_delta=function(t){var e,n;return n=this._server_deltas.length,e=n>0?this._server_deltas[n-1].rev+1:this._server_rev,Q(t.rev<=e,"was expecting rev "+e+", but got "+t.rev+" instead!"),t.rev<e?void 0:void(this._is_our_pending(t)?this._ack(t):(this._server_deltas.push(t),this._pending_delta=null))},t}(),tt.DatastoreModel=u,q=function(){function t(t){this.update_manager=t,this.cancelled=!1,this.cancel_fn=null}return t.prototype.cancel=function(){return null!=this.cancel_fn&&this.cancel_fn(),this.cancelled=!0},t.prototype.poll=function(){var t,e=this;return(t=function(){var n;if(!e.cancelled)return n=tt.clone(e.update_manager._handle_version_map),e.cancel_fn=e.update_manager.flob_client.await(n,e.update_manager._last_dslist_token,function(r,i){var a,o,s,l,u,c,f,d,h,p;if(e.cancel_fn=null,r)return 0===r.status?(console.log("await deltas failed (offline):",r),setTimeout(t,1e4)):r.status&&500<=(d=r.status)&&599>=d?(console.log("server error:",r),setTimeout(t,2e3)):(console.error("Got error in longpoll:",r),setTimeout(t,1e4));if(null!=i.get_deltas){h=i.get_deltas.deltas;for(l in h)if(o=h[l],null!=o.notfound)e.update_manager._data_queue.push({handle:l,notfound:o.notfound}),delete e.update_manager._handle_version_map[l];else if(null!=o.deltas){for(null!=o.role&&e.update_manager._data_queue.push({handle:l,role:o.role}),p=o.deltas,c=0,f=p.length;f>c;c++)s=p[c],e.update_manager._data_queue.push({handle:l,delta:s});u=n[l]+o.deltas.length,a=e.update_manager._handle_version_map[l],null!=a&&(e.update_manager._handle_version_map[l]=Math.max(a,u))}}return null!=i.list_datastores&&(e.update_manager._last_dslist_token=i.list_datastores.token,e.update_manager._data_queue.push({dslist:i.list_datastores})),setTimeout(t,0)})})()},t}(),S=function(){function t(t){this.flob_client=t,this._data_queue=null,this._handle_version_map={},this._last_dslist_token=".",this._pending_poll=null,this._running=!1}return t.prototype.run=function(t){return this._data_queue=new a(t),this._running=!0,this._do_longpoll()},t.prototype.stop=function(){return this._pending_poll?this._pending_poll.cancel():void 0},t.prototype.add_poll=function(t,e){var n,r;return Q(this._running,"update manager is not running"),n=this._handle_version_map[t],r=e,null!=n&&(r=Math.max(e,n)),this._handle_version_map[t]=r,this._do_longpoll()},t.prototype.remove_poll=function(t){return Q(this._running,"update manager is not running"),t in this._handle_version_map?(delete this._handle_version_map[t],this._do_longpoll()):void 0},t.prototype._do_longpoll=function(){return Q(this._running,"update manager is not running"),this._pending_poll&&(this._pending_poll.cancel(),this._pending_poll=null),this._pending_poll=new q(this),this._pending_poll.poll()},t}(),F=function(){function t(t,e,n,r){this.update_manager=t,this.flob_client=e,this._dslist_listener_server=n,this._dslist_listener_local=r,this.update_manager.run(this._handle_server_update.bind(this)),this._cached_objects={},this._handle_to_dsid_map={}}return t.prototype.destroy=function(){var t;for(t in this._cached_objects)this._cached_objects[t].close();return this.update_manager.stop()},t.prototype.getAllCachedUndeletedDatastoreIDs=function(){var t,e;return function(){var n,r;n=this._cached_objects,r=[];for(e in n)t=n[e],t.is_deleted()||r.push(e);return r}.call(this)},t.prototype.getCachedDatastore=function(t){return this._cached_objects[t]},t.prototype._evict=function(t){var e,n;return e=this._handle_to_dsid_map[t],null!=e?(delete this._handle_to_dsid_map[t],e in this._cached_objects&&(n=this._cached_objects[e],n.mark_deleted(),n.is_closed()&&delete this._cached_objects[e]),this.update_manager.remove_poll(t)):void 0},t.prototype.close=function(t){var e,n;if(!(t in this._cached_objects))throw new Error("Attempt to close unknown datastore: "+t);return e=this._cached_objects[t].get_handle(),n=this._cached_objects[t],n.close(),n.is_deleted()?delete this._cached_objects[t]:void 0},t.prototype._handle_server_update=function(t,e){var n,r,i;return t.dslist?(this._dslist_listener_server&&this._dslist_listener_server(t.dslist),e(null)):(i=t.handle,n=this._handle_to_dsid_map[i],null==n?(console.log("unknown handle "+i+" (maybe datastore was evicted)",t,this._handle_to_dsid_map,this._cached_objects),e(null)):null==t.delta?(null!=t.notfound?this._evict(i):null!=t.role&&null!=this._cached_objects[n]&&(this._cached_objects[n].role=t.role),e(null)):(r=t.delta,this._retrieve(n,i,function(t,n){return t?e(t):(n.receive_server_delta(r),e(null))})))},t.prototype.open=function(t,e,n){return this._cached_objects[t]&&this._cached_objects[t].open(),this._retrieve(t,e,n)},t.prototype._retrieve=function(t,e,n){var r,i=this;return r=this._cached_objects[t],null!=r?n(null,r):(this._handle_to_dsid_map[e]=t,this.flob_client.get_snapshot(e,function(r,a){var o,s,l;return null!=r?n(r):null!=i._cached_objects[t]?n(null,i._cached_objects[t]):(o=u.from_get_snapshot_resp(a),l=new b,s=R.fresh_managed_datastore(t,e,a.role,o,a.rev,l,i.flob_client,i._dslist_listener_local),i.update_manager.add_poll(e,s.sync_state.get_server_rev()),i._cached_objects[t]=s,n(null,s))}))},t}(),A=function(){function t(t){var i,a,o,s,u,c,f,d,h,v,y,_=this;for(this.rule_name=null!=t?t:"default",this.precedence=r[this.rule_name],this._transforms={},o=0,c=n.length;c>o;o++)a=n[o],this._transforms[a]={};for(y=["P","D"],s=0,f=y.length;f>s;s++)for(a=y[s],u=0,d=e.length;d>u;u++)i=e[u],this._transforms[a][i]=p,this._transforms[i][a]=g;for(v=0,h=e.length;h>v;v++)i=e[v],"LC"===i?this._transforms.LC.LC=function(){return[null,null]}:(this._transforms.LC[i]=g,this._transforms[i].LC=p);this._transforms.P.P=function(t,e){var n;return n=_.precedence(t.value,e.value),"left"===n?[t,null]:[null,e]},this._transforms.P.D=function(t,e){var n;return n=_.precedence(t.value,null),"left"===n?[t,null]:[null,e]},this._transforms.D.P=function(t,e){var n;return n=_.precedence(null,e.value),"left"===n?[t,null]:[null,e]},this._transforms.D.D=function(t,e){var n;return n=_.precedence(null,null),"left"===n?[t,null]:[null,e]},this._transforms.LP.LP=function(t,e){var n;return t.at!==e.at?[t,e]:(n=_.precedence(t.value,e.value),"left"===n?[t,null]:[null,e])},this._transforms.LP.LI=function(t,e){var n;return n=l(t),n.at+=e.before<=t.at?1:0,[n,e]},this._transforms.LP.LD=function(t,e){var n;return t.at===e.at?[null,e]:(n=l(t),n.at-=e.at<t.at?1:0,[n,e])},this._transforms.LP.LM=function(t,e){var n;return n=l(t),t.at===e.from?n.at=e.to:(n.at-=e.from<n.at?1:0,n.at+=e.to<=n.at?1:0),[n,e]},this._transforms.LI.LP=m(this._transforms.LP.LI),this._transforms.LI.LI=function(t,e){var n,r,i;return i=[l(t),l(e)],n=i[0],r=i[1],t.before<e.before?r.before+=1:n.before+=1,[n,r]},this._transforms.LI.LD=function(t,e){var n,r,i;return i=[l(t),l(e)],n=i[0],r=i[1],n.before-=e.at<t.before?1:0,r.at+=t.before<=e.at?1:0,[n,r]},this._transforms.LI.LM=function(t,e){var n,r,i,a;return a=[l(t),l(e)],r=a[0],i=a[1],t.before===e.to+1&&e.from<=e.to?[t,e]:t.before===e.to&&e.from>e.to?(r.before++,i.from++,[r,i]):(n=e.from<t.before?t.before-1:t.before,i.from+=t.before<=e.from?1:0,r.before=e.to<n?n+1:n,i.to+=n<=e.to?1:0,[r,i])},this._transforms.LD.LP=m(this._transforms.LP.LD),this._transforms.LD.LI=m(this._transforms.LI.LD),this._transforms.LD.LD=function(t,e){var n,r,i;return t.at===e.at?[null,null]:(i=[l(t),l(e)],n=i[0],r=i[1],t.at<e.at?r.at-=1:n.at-=1,[n,r])},this._transforms.LD.LM=function(t,e){var n,r,i;return t.at===e.from?(n=l(t),n.at=e.to,[n,null]):(i=[l(t),l(e)],n=i[0],r=i[1],n.at-=e.from<n.at?1:0,n.at+=e.to<=n.at?1:0,r.to+=r.from<r.to?1:0,r.from-=t.at<r.from?1:0,r.to-=t.at<r.to?1:0,r.to-=r.from<r.to?1:0,[n,r])},this._transforms.LM.LP=m(this._transforms.LP.LM),this._transforms.LM.LI=function(t,e){var n,r,i,a;return a=[l(t),l(e)],r=a[0],i=a[1],e.before===t.to+1&&t.from<=t.to?[t,e]:e.before===t.to&&t.from>t.to?(r.from++,r.to++,[r,i]):(n=t.from<e.before?e.before-1:e.before,r.from+=e.before<=t.from?1:0,i.before=t.to<n?n+1:n,r.to+=n<=t.to?1:0,[r,i])},this._transforms.LM.LD=m(this._transforms.LD.LM),this._transforms.LM.LM=function(t,e){var n,r,i,a,o,s,u,c,f,d,h;return t.from===e.from?t.to===e.to?[null,null]:e.from===e.to?[t,e]:(a=l(e),a.from=t.to,[null,a]):t.to===t.from?(i=l(t),i.from+=(e.to<=t.from)-(e.from<t.from),t.from===e.to&&e.from<e.to&&i.from--,i.to=i.from,[i,e]):e.to===e.from?(a=l(e),a.from+=(t.to<=e.from)-(t.from<e.from),a.to=a.from,[t,a]):(u=[l(t),l(e)],i=u[0],a=u[1],t.to===e.to&&t.from>t.to&&e.from>e.to?(i.to++,e.from>t.from?i.from++:a.from++,[i,a]):t.from===e.to&&e.from===t.to&&t.from<t.to?(a.from--,i.from++,[i,a]):t.from>t.to&&e.from<e.to&&e.to+1===t.to?[t,e]:(c=[t.to,t.from],o=c[0],n=c[1],o+=t.from<o?1:0,o-=e.from<o?1:0,o+=e.to<o?1:0,n-=e.from<n?1:0,n+=e.to<=n?1:0,o-=o>n?1:0,f=[e.to,e.from],s=f[0],r=f[1],s+=e.from<s?1:0,s-=t.from<s?1:0,s+=t.to<=s?1:0,r-=t.from<r?1:0,r+=t.to<=r?1:0,s-=s>r?1:0,d=[o,n],i.to=d[0],i.from=d[1],h=[s,r],a.to=h[0],a.from=h[1],[i,a]))}}var e,n,r,i,a,o,s,l,u,c,f,d,h,p,g,m,v,y,_;for(m=function(t){return Q(null!=t),function(e,n){var r,i,a;return a=t(n,e),r=a[0],i=a[1],[i,r]}},i=["null","bool","num","str","blob","ts","list"],a={},c=y=0,_=i.length;_>y;c=++y)v=i[c],a[v]=c;return u=function(t){if(null==t)return"null";if(J.is_bool(t))return"bool";if(null!=t.I||J.is_number(t))return"num";if(J.is_string(t))return"str";if(null!=t.B)return"blob";if(null!=t.T)return"ts";if(J.is_array(t))return"list";throw new Error("Unrecognized value "+t)},h=function(t){return J.is_number(t)||null!=t.I},o=function(t){return null!=t.I?parseInt(t.I):t},d=function(t,e){var n,r,i;for(n=r=0,i=t.length;i>=0?i>r:r>i;n=i>=0?++r:--r){if(n>=e.length)return!1;if(f(t[n],e[n]))return!0;if(f(e[n],t[n]))return!1}return e.length>t.length},t._is_less_than=f=function(t,e){var n,r;if(n=u(t),r=u(e),n!==r)return a[n]<a[r];if("null"===n)return!1;if("bool"===n)return e&&!t;if("num"===n)return null!=t.I&&null!=e.I?tt.int64_string_less_than(t.I,e.I):o(t)<o(e);if("str"===n)return e>t;if("blob"===n)return t.B<e.B;if("ts"===n)return parseInt(t.T,10)<parseInt(e.T,10);if("list"===n)return d(t,e);throw new Error("unknown type "+n)},t._compute_sum=s=function(t,e,n){var r,i,a,o,s,l;return r=null!=t.I&&null!=e.I&&null!=n.I,null!=t.I&&(t=parseInt(t.I)),null!=e.I&&(e=parseInt(e.I)),null!=n.I&&(n=parseInt(n.I)),o=0x8000000000000000,s=0x10000000000000000,l=0xfffffffffffff800,i=e-t,a=n+i,r&&(a>=o&&(a-=l),-o>a&&(a+=l),a={I:""+a}),a},g=function(t,e){return[null,e]},p=function(t){return[t,null]},n=["P","D","LC","LP","LI","LD","LM"],e=["LC","LP","LI","LD","LM"],t.copy=l=function(t){return T.from_array(JSON.parse(JSON.stringify(t)))},r={default:function(){return"right"},remote:function(){return"right"},local:function(){return"left"},min:function(t,e){return f(t,e)?"left":"right"},max:function(t,e){return f(t,e)?"right":"left"},sum:function(){return"right"}},t.prototype.transform=function(t,e,n){var r,i,a,o,l;return null==n&&(n=null),"sum"===this.rule_name&&"P"===t.tag()&&"P"===e.tag()&&(null==n&&(n={I:"0"}),h(n)&&h(t.value)&&h(e.value))?(a=s(n,t.value,e.value),r=i=T.from_array(["P",a]),[r,i,e.value]):(o=this._transforms[t.tag()][e.tag()](t,e),l=function(){switch(e.tag()){case"P":return e.value;case"D":return null;default:return{L:!0}}}(),o.push(l),o)},t}(),tt.FieldOpTransformer=A,i=function(){function t(){this._transform_rules={},this._default_transformer=new A}var e,n,i,a,o,s,l,u;for(e={},u=["default","local","remote","min","max","sum"],s=0,l=u.length;l>s;s++)i=u[s],e[i]=new A(i);return o=function(t){return Q(null!=t),function(e,n){var r,i,a;return a=t(n,e),r=a[0],i=a[1],[i,r]}},n=function(t){return t instanceof Array?t.slice():t},a=function(t,e){return t.tid===e.tid&&t.rowid===e.rowid},t.is_no_op=function(t){var e,n,r;if("U"!==t.tag())return!1;r=t.updates;for(n in r)return e=r[n],!1;return!0},t.compact=function(t){var e,n,r,i;for(e=[],r=0,i=t.length;i>r;r++)n=t[r],this.is_no_op(n)||e.push(n);return e},t.prototype.set_field_transformer=function(t,n,r){var i;return null==(i=this._transform_rules)[t]&&(i[t]={}),this._transform_rules[t][n]=e[r]},t.prototype.get_field_transformer=function(t,n){var r;return t in this._transform_rules?null!=(r=this._transform_rules[t][n])?r:this._default_transformer:e.default},t.prototype.transform_ii=function(t,e){var i,o,s;return a(t,e)?(i=function(t){var e,i,a,o,s;a={},s=t.fields;for(i in s)o=s[i],a[i]=T.from_array(["P",n(o)]);return e=r.from_array(["U",t.tid,t.rowid,a]),e.undo_extra={},e},o=i(t),s=i(e),this.transform_uu(o,s)):[[t],[e]]},t.prototype.transform_iu=function(t,e){return a(t,e)?Q(!1,"Couldn't have updated a row that hasn't been inserted yet!"):[[t],[e]]},t.prototype.transform_id=function(t,e){return a(t,e)?Q(!1,"Couldn't have deleted a row that hasn't been inserted yet!"):[[t],[e]]},t.prototype.transform_ui=o(t.prototype.transform_iu),t.prototype.transform_uu=function(t,e){var n,i,o,s,l,u,c,f,d,h,p,g,m,v,y,_,b,x,w;if(!a(t,e))return[[t],[e]];v=[{},{}],d=v[0],h=v[1],f={},y=t.updates;for(o in y)n=y[o],o in e.updates?(i=e.updates[o],p=null!=(b=t.undo_extra[o])?b:null,g=this.get_field_transformer(t.tid,o),x=g.transform(n,i,p),s=x[0],l=x[1],m=x[2],null!=s&&(d[o]=s,f[o]=null!=m?m:null),null!=l&&(h[o]=l)):(d[o]=n,f[o]=null!=(_=t.undo_extra[o])?_:null);w=e.updates;for(o in w)i=w[o],o in t.updates||(h[o]=i);return u=r.from_array(["U",t.tid,t.rowid,d]),
u.undo_extra=f,c=r.from_array(["U",e.tid,e.rowid,h]),[[u],[c]]},t.prototype.transform_ud=function(t,e){return a(t,e)?[[],[e]]:[[t],[e]]},t.prototype.transform_di=o(t.prototype.transform_id),t.prototype.transform_du=o(t.prototype.transform_ud),t.prototype.transform_dd=function(t,e){return a(t,e)?[[],[]]:[[t],[e]]},t}(),tt.ChangeTransformer=i,b=function(){function t(){this._change_transformer=new i}return t.prototype.add_resolution_rule=function(t,e,n){return this._change_transformer.set_field_transformer(t,e,n)},t.prototype._transform_one=function(t,e){var n,r,a,o,s;return n=function(t){switch(t.tag()){case"I":return"i";case"U":return"u";case"D":return"d";default:throw new Error("unrecognized op type "+t.tag())}},o="transform_"+n(t)+n(e),s=this._change_transformer[o](t,e),r=s[0],a=s[1],r=i.compact(r),a=i.compact(a),[r,a]},t.prototype._transform_list=function(t,e){var n,r,i,a,o,s,l,u,c,f,d,h,p,g;if(0===t.length)return[[],e];if(0===e.length)return[t,[]];for(n=t[0],r=e[0],h=this._transform_one(n,r),a=h[0],o=h[1],p=this._transform_list(t.slice(1),o),i=p[0],o=p[1],u=0,f=i.length;f>u;u++)s=i[u],a.push(s);for(g=this._transform_list(a,e.slice(1)),a=g[0],l=g[1],c=0,d=l.length;d>c;c++)s=l[c],o.push(s);return[a,o]},t.prototype._resolve=function(t,e){var n,r,i,a,o,s,l;for(a=e.slice(),r=[],o=0,s=t.length;s>o;o++)i=t[o],l=this._transform_list(i,a),n=l[0],a=l[1],r.push(n);return[r,a]},t.prototype.resolve=function(t,e){var n,i,a,o,s,l,u,c,f,d,h,p,g,m,v,y,_,b,x,w,C,k,S,T,A,E,M,D,P,O,N;for(d=[],v=0,x=t.length;x>v;v++){for(c=t[v],i=[],P=c.changes,f=y=0,w=P.length;w>y;f=++y)o=P[f],l=r.from_array(JSON.parse(JSON.stringify(o))),l.undo_extra=tt.clone(c.undo_extras[f]),i.push(l);d.push(i)}for(g=[],_=0,C=e.length;C>_;_++)for(c=e[_],O=c.changes,b=0,k=O.length;k>b;b++)a=O[b],g.push(a);for(N=this._resolve(d,g),h=N[0],u=N[1],p=[],f=E=0,S=h.length;S>E;f=++E){for(s=h[f],m=function(){var t,e,n;for(n=[],e=0,t=s.length;t>e;e++)o=s[e],n.push(null);return n}(),M=0,T=s.length;T>M;M++)o=s[M],delete o.undo_extra;s.length>0&&p.push(new I(s,m))}for(n={},D=0,A=u.length;A>D;D++)a=u[D],a.tid in n||(n[a.tid]={}),n[a.tid][a.rowid]=!0;return{rebased_deltas:p,affected_records:n}},t}(),tt.DefaultResolver=b,X=function(){function t(){this._waiting=[],this._running=!1}return t.prototype._run_next=function(){var t;this._running||this._waiting.length>0&&(t=this._waiting[0],this._waiting.shift(),this._running=!0,t())},t.prototype.request=function(t){return this._waiting.push(t),this._run_next()},t.prototype.finish=function(){return this._running=!1,setTimeout(this._run_next.bind(this),0)},t}(),a=function(){function t(t){this.consumer=t,this.items=[],this.sync_queue=new X}return t.prototype.consume=function(){var t=this;return this.sync_queue.request(function(){var e;return 0===t.items.length?t.sync_queue.finish():(e=t.items.shift(),t.consumer(e,function(e){if(e)throw e;return t.sync_queue.finish(),t.consume()}))})},t.prototype.push=function(t){return this.items.push(t),this.consume()},t.prototype.run=function(){return this.consume()},t}(),tt.clone=function(t){var e,n,r,i,a,o,s;if(t instanceof Array){for(s=[],a=0,o=t.length;o>a;a++)e=t[a],s.push(tt.clone(e));return s}if(null!=t&&"object"==typeof t){r={};for(n in t)i=t[n],r[n]=tt.clone(i);return r}return t},tt.WEB64_ALPHABET="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",tt.randomElement=function(t){return t[Math.floor(Math.random()*t.length)]},tt.randomWeb64String=function(t){var e;return function(){var n,r;for(r=[],e=n=0;t>=0?t>n:n>t;e=t>=0?++n:--n)r.push(tt.randomElement(tt.WEB64_ALPHABET));return r}().join("")},tt.uint8ArrayFromBase64String=function(t){var e,n,r,i,a;for(t=t.replace(/-/g,"+").replace(/_/g,"/"),e=C.Util.atob(t),r=e.length,i=new Uint8Array(r),n=a=0;r>=0?r>a:a>r;n=r>=0?++a:--a)i[n]=e.charCodeAt(n);return i},tt.dbase64FromBase64=function(t){return t.replace(/[+]/g,"-").replace(/[\/]/g,"_").replace(/[\=]+$/g,"")},tt.base64StringFromUint8Array=function(t){var e,n,r,i,a;for(n="",i=0,a=t.length;a>i;i++)e=t[i],n+=String.fromCharCode(e);return r=C.Util.btoa(n),tt.dbase64FromBase64(r)},tt.INT64_TAG="dbxInt64",tt.isInt64=function(t){var e;return!(!t||"object"!=typeof t||t.constructor!==Number||!isFinite(t))&&(e=t[tt.INT64_TAG],!(!J.is_string(e)||"0"!==e&&!tt.nonzero_int64_approximate_regex.test(e)))},tt.validateInt64=function(t){var e,n;if(!t&&"object"==typeof t&&t.constructor===Number&&isFinite(t))throw new Error("Not a finite boxed number: "+t);if(n=t[tt.INT64_TAG],!J.is_string(n)||"0"!==n&&!tt.nonzero_int64_approximate_regex.test(n))throw new Error("Missing or invalid tag in int64: "+n);if(e=parseInt(n,10),e!==Number(t))throw new Error("Tag in int64 does not match value "+Number(t)+": "+n);return t},tt.toDsValue=function(t,e){var n,r;if(null==e&&(e=!0),null===t||"undefined"==typeof t)throw new Error("Bad value: "+t);if(J.is_string(t))return t;if(J.is_bool(t))return t;if(J.is_number(t)){if(null!=t[tt.INT64_TAG])return tt.validateInt64(t),{I:t[tt.INT64_TAG]};if(isFinite(t))return t;if(isNaN(t))return{N:"nan"};if(1/0===Number(t))return{N:"+inf"};if(Number(t)===-1/0)return{N:"-inf"};throw new Error("Unexpected number: "+t)}if(J.is_array(t)){if(e)return function(){var e,n,i;for(i=[],e=0,n=t.length;n>e;e++)r=t[e],i.push(tt.toDsValue(r,!1));return i}();throw new Error("Nested array not allowed: "+JSON.stringify(t))}if(J.is_date(t))return n=Math.round(t.getTime()),{T:""+n};if(J.isUint8Array(t))return{B:tt.base64StringFromUint8Array(t)};throw new Error("Unexpected value: "+J.safe_to_string(t))},tt.fromDsValue=function(t,e,n,r){if(J.is_string(r))return r;if(J.is_bool(r))return r;if(J.is_number(r))return r;if(J.is_array(r))return new C.Datastore.List(t,e,n);if("object"!=typeof r)throw new Error("Unexpected value: "+r);if(null!=r.I)return C.Datastore.int64(r.I);if(null==r.N){if(null!=r.B)return tt.uint8ArrayFromBase64String(r.B);if(null!=r.T)return new Date(parseInt(r.T,10));throw new Error("Unexpected object: "+JSON.stringify(r))}switch(r.N){case"nan":return NaN;case"+inf":return 1/0;case"-inf":return-1/0;default:throw new Error("Unexpected object: "+JSON.stringify(r))}},tt.matchDsValues=function(t,e){var n,r,i,a,o;r=function(t,e){if(null==t)throw new Error("Unexpected object: "+t);return null!=e&&n(t,e)},n=function(t,e){var n,i,a,o,s,l;if(tt.toDsValue(t),J.is_string(t)&&J.is_string(e))return String(t)===String(e);if(J.is_bool(t)&&J.is_bool(e))return"object"==typeof t&&(t=t.valueOf()),"object"==typeof e&&(e=e.valueOf()),Boolean(t)===Boolean(e);if(J.is_number(t)&&(J.is_number(e)||null!=e.N||null!=e.I))return e=tt.fromDsValue(void 0,void 0,void 0,e),t[tt.INT64_TAG]&&e[tt.INT64_TAG]?(o=[C.Datastore.int64(t),C.Datastore.int64(e)],t=o[0],e=o[1],String(t[tt.INT64_TAG])===String(e[tt.INT64_TAG])):!(!isNaN(t)||!isNaN(e))||Number(t)===Number(e);if(J.is_array(t)&&J.is_array(e)){if(t.length!==e.length)return!1;for(n=i=0,s=t.length-1;s>=0?s>=i:i>=s;n=s>=0?++i:--i)if(!r(t[n],e[n]))return!1;return!0}if(J.is_date(t)&&(J.is_date(e)||null!=e.T))return null!=e.T&&(e=tt.fromDsValue(void 0,void 0,void 0,e)),t-0===e-0;if(J.isUint8Array(t)&&(J.isUint8Array(e)||null!=e.B)){if(null!=e.B&&(e=tt.fromDsValue(void 0,void 0,void 0,e)),t.length!==e.length)return!1;for(n=a=0,l=t.length-1;l>=0?l>=a:a>=l;n=l>=0?++a:--a)if(t[n]!==e[n])return!1;return!0}return!1};for(i in t)if(o=t[i],a=r(o,e[i]),!a)return a;return!0},j=function(){function t(t){this._datastore=t,this._cache={}}return t.prototype.get=function(t,e){return null==this._cache[t]?null:this._cache[t][e]},t.prototype.getOrCreate=function(t,e){var n;return null==this._cache[t]&&(this._cache[t]={}),n=this._cache[t][e],null==n&&(n=this._cache[t][e]=new C.Datastore.Record(this._datastore,t,e)),n},t.prototype.remove=function(t,e){return delete this._cache[t][e],void(J.is_empty(this._cache[t])&&delete this._cache[t])},t}(),k=function(){function t(){this._registered_handlers=[]}return t.prototype.register=function(t,e){return t.addListener(e),void this._registered_handlers.push([t,e])},t.prototype.unregister_all=function(){var t,e,n,r,i,a;for(i=this._registered_handlers,n=0,r=i.length;r>n;n++)a=i[n],e=a[0],t=a[1],e.removeListener(t)},t}(),C.Datastore.DatastoreInfo=function(){function t(t,e,n,r){this._dsid=t,this._handle=e,this._info_record_data=n,this._role=r}return t.prototype.toString=function(){return"Datastore.DatastoreInfo("+this._dsid+" "+JSON.stringify(this._info_record_data||{})+" "+this.getEffectiveRole()+")"},t.prototype.getId=function(){return this._dsid},t.prototype.isShareable=function(){return"."===this._dsid[0]},t.prototype.getHandle=function(){return this._handle},t.prototype.getTitle=function(){var t;return null==(null!=(t=this._info_record_data)?t.title:void 0)?null:this._info_record_data.title},t.prototype.getModifiedTime=function(){var t;return null==(null!=(t=this._info_record_data)?t.mtime:void 0)?null:this._info_record_data.mtime},t.prototype.getEffectiveRole=function(){return this.isShareable()&&null!=this._role?C.Datastore._roleFromInt(this._role):C.Datastore.OWNER},t.prototype.isWritable=function(){var t;return t=this.getEffectiveRole(),t===C.Datastore.OWNER||t===C.Datastore.EDITOR},t}(),C.Datastore.DatastoreListChanged=function(){function t(t){this._dsinfos=t}return t.prototype.toString=function(){return"Datastore.DatastoreListChanged("+this._dsinfos.length+" datastores)"},t.prototype.getDatastoreInfos=function(){return this._dsinfos},t}(),C.Datastore.impl.EventSourceWithInitialData=function(t){function e(t){this.options=t,e.__super__.constructor.call(this,t),this._have_event=!1,this._last_event=null,this._listenersChanged=new C.Util.EventSource}return it(e,t),e.prototype._clearLastEvent=function(){return this._have_event=!1,this._last_event=null},e.prototype.addListener=function(t){var n;return n=e.__super__.addListener.call(this,t),this._have_event&&t(this._last_event),this._listenersChanged.dispatch(this._listeners),n},e.prototype.removeListener=function(t){var n;return n=e.__super__.removeListener.call(this,t),this._listenersChanged.dispatch(this._listeners),n},e.prototype.dispatch=function(t){return this._last_event=t,this._have_event=!0,e.__super__.dispatch.call(this,t)},e}(C.Util.EventSource),s="default",C.Datastore.DatastoreManager=function(){function t(t){var e=this;if(!t.isAuthenticated())throw new Error("DatastoreManager requires an authenticated Dropbox.Client!");this.datastoreListChanged=new C.Datastore.impl.EventSourceWithInitialData,this._flob_client=new E(t),this._lastListDsServerResponse=null,this._obj_manager=new F(new S(this._flob_client),this._flob_client,function(t){return e._handleRemoteDslistUpdate(t)},function(){return e._handleLocalDslistUpdate()})}return t.prototype.datastoreListChanged=null,t.prototype.close=function(){return this._obj_manager.destroy()},t.prototype.toString=function(){return"Datastore.DatastoreManager()"},t.prototype._dispatchDslistEvent=function(){var t;return t=this._lastListDsServerResponse||new N({datastores:[],token:"dummy"}),void this.datastoreListChanged.dispatch(new C.Datastore.DatastoreListChanged(this._getOverlaidDatastoreInfosFromListResponse(t)))},t.prototype._handleLocalDslistUpdate=function(){return void this._dispatchDslistEvent()},t.prototype._handleRemoteDslistUpdate=function(t){return this._lastListDsServerResponse=t,void this._dispatchDslistEvent()},t.prototype._getOverlaidDatastoreInfo=function(t,e){var n,r,i,a,o,s,l,u,c;n=this._obj_manager.getCachedDatastore(t),o=(null!=e?e.info:void 0)||{},a=null==n?tt.clone(o):null==e||e.rev<n.sync_state.get_server_rev()?n.datastore_model.getLocalInfoData():n.datastore_model.updateDatastoreInfo(o);for(r in a)u=a[r],a[r]=J.is_array(u)?function(){var t,e,n;for(n=[],t=0,e=u.length;e>t;t++)l=u[t],n.push(tt.fromDsValue(null,null,null,l));return n}():tt.fromDsValue(null,null,null,u);return J.is_empty(a)&&(a=null),i=null!=(null!=e?e.handle:void 0)?e.handle:n.get_handle(),s=null!=(c=null!=e?e.role:void 0)?c:tt.ROLE_OWNER,new C.Datastore.DatastoreInfo(t,i,a,s)},t.prototype._getOverlaidDatastoreInfosFromListResponse=function(t){var e,n,r,i,a,o,s,l,u,c,f;for(N.Type(t),e=this._obj_manager.getAllCachedUndeletedDatastoreIDs(),o={},s=0,u=e.length;u>s;s++)i=e[s],o[i]=null;for(f=t.datastores,l=0,c=f.length;c>l;l++)r=f[l],o[r.dsid]=r;return function(){var t;t=[];for(a in o)n=o[a],t.push(this._getOverlaidDatastoreInfo(a,n));return t}.call(this)},t.prototype._wrapDatastore=function(t,e){return e&&(t._update_mtime(),t.sync()),new C.Datastore(this,t)},t.prototype._getOrCreateDatastoreByDsid=function(t,e){var n=this;return void this._flob_client.get_or_create_db(t,function(r,i){return null!=r?e(r):null==i.handle?e(new Error("get_or_create_datastore failed for "+t)):n._obj_manager.open(t,i.handle,function(t,r){return null!=t?e(t):e(null,n._wrapDatastore(r,i.created))})})},t.prototype._createDatastore=function(t,e,n){var r=this;return void this._flob_client.create_db(t,e,function(e,i){return null!=e?n(e):null==i.handle?n(new Error("create_datastore failed for "+t)):r._obj_manager.open(t,i.handle,function(t,e){return null!=t?n(t):n(null,r._wrapDatastore(e,i.created))})})},t.prototype._getExistingDatastoreByDsid=function(t,e){var n=this;return void this._flob_client.get_db(t,function(r,i){return null!=r?e(r):null==i.handle?e(new Error("Datastore "+t+" not found or not accessible")):n._obj_manager.open(t,i.handle,function(t,r){return null!=t?e(t):e(null,new C.Datastore(n,r))})})},t.prototype.openDefaultDatastore=function(t){return void this._getOrCreateDatastoreByDsid(s,t)},t.prototype.openOrCreateDatastore=function(t,e){return void this._getOrCreateDatastoreByDsid(t,e)},t.prototype.openDatastore=function(t,e){return void this._getExistingDatastoreByDsid(t,e)},t.prototype.createDatastore=function(t){var e,n;return n=tt.randomWeb64String(Math.ceil(256/6)),e="."+tt.dbase64FromBase64(C.Util.sha256(n)),void this._createDatastore(e,n,t)},t.prototype.deleteDatastore=function(t,e){var n=this;return void this._flob_client.get_db(t,function(r,i){return null!=r?e(r):null==i.handle?e(new Error("Datastore "+t+" not found or not accessible")):n._flob_client.delete_db(i.handle,function(t){return e(null!=t?t:null)})})},t.prototype.listDatastores=function(t){var e=this;return null!=this._lastListDsServerResponse?t(null,this._getOverlaidDatastoreInfosFromListResponse(this._lastListDsServerResponse)):void this._flob_client.list_dbs(function(n,r){return null!=n?t(n):t(null,e._getOverlaidDatastoreInfosFromListResponse(r))})},t}(),C.Datastore.List=function(){function t(t,e,n){this._datastore=t,this._record=e,this._field=n}return t.BASE_ITEM_SIZE=20,t.prototype.toString=function(){return"Datastore.List(("+this._record._tid+", "+this._record._rid+", "+this._field+"): "+JSON.stringify(this._array)+")"},t.prototype._array=function(){return this._record._rawFieldValues()[this._field]},t.prototype._checkValid=function(){if(this._record._checkNotDeleted(),!J.is_array(this._array()))throw new Error("Attempt to operate on deleted list ("+this._record._tid+", "+this._record._rid+", "+this._field+")")},t.prototype._storeUpdate=function(t){var e;return e={},e[this._field]=t,void this._record._storeUpdate(e)},t.prototype._fixInsertionIndex=function(t){var e,n;if(!J.is_json_number(t))throw new RangeError("Index not a number: "+t);if(e=this._array().length,n=t>=0?t:e+t,n>=0&&e>=n)return n;throw new RangeError("Bad index for list of length "+e+": "+t)},t.prototype._fixIndex=function(t){var e,n;if(n=this._fixInsertionIndex(t),e=this._array().length,e>n)return n;throw new RangeError("Bad index for list of length "+e+": "+t)},t.prototype.get=function(t){var e;return this._checkValid(),e=tt.clone(this._array()[this._fixIndex(t)]),tt.fromDsValue(void 0,void 0,void 0,e)},t.prototype.set=function(t,e){return this._checkValid(),t=this._fixIndex(t),void this._storeUpdate(["LP",t,tt.toDsValue(e,!1)])},t.prototype.length=function(){return this._checkValid(),this._array().length},t.prototype.pop=function(){if(this._checkValid(),0===this._array().length)throw new Error("List is empty");return this.remove(this._array.length-1)},t.prototype.push=function(t){return this._checkValid(),void this.insert(this._array().length,t)},t.prototype.shift=function(){if(this._checkValid(),0===this._array().length)throw new Error("List is empty");return this.remove(0)},t.prototype.unshift=function(t){return void this.insert(0,t)},t.prototype.splice=function(){var t,e,n,r,i,a,o,s,l;if(r=arguments[0],e=arguments[1],t=3<=arguments.length?at.call(arguments,2):[],this._checkValid(),!J.is_json_number(e)||0>e)throw new RangeError("Bad second arg to splice: "+r+", "+e);for(r=this._fixInsertionIndex(r),i=this.slice(r,r+e),n=o=0;e>=0?e>o:o>e;n=e>=0?++o:--o)this.remove(r);for(s=0,l=t.length;l>s;s++)a=t[s],this.insert(r,a),r++;return i},t.prototype.move=function(t,e){return this._checkValid(),t=this._fixIndex(t),e=this._fixIndex(e),t===e?void 0:void this._storeUpdate(["LM",t,e])},t.prototype.remove=function(t){var e;return this._checkValid(),t=this._fixIndex(t),e=this.get(t),this._storeUpdate(["LD",t]),e},t.prototype.insert=function(t,e){return this._checkValid(),t=this._fixInsertionIndex(t),void this._storeUpdate(["LI",t,tt.toDsValue(e,!1)])},t.prototype.slice=function(t,e){var n;return this._checkValid(),function(){var r,i,a,o;for(a=this._array().slice(t,e),o=[],r=0,i=a.length;i>r;r++)n=a[r],o.push(tt.fromDsValue(void 0,void 0,void 0,n));return o}.call(this)},t.prototype.toArray=function(){var t;return this._checkValid(),function(){var e,n,r,i;for(r=this._array().slice(),i=[],e=0,n=r.length;n>e;e++)t=r[e],i.push(tt.fromDsValue(void 0,void 0,void 0,t));return i}.call(this)},t}(),C.Datastore.Record=function(){function t(t,e,n){this._datastore=t,this._tid=e,this._rid=n,this._deleted=!1,this._record_cache=this._datastore._record_cache,this._managed_datastore=this._datastore._managed_datastore}return t.RECORD_SIZE_LIMIT=102400,t.BASE_RECORD_SIZE=100,t.BASE_FIELD_SIZE=100,t.prototype.get=function(t){var e;return this._checkNotDeleted(),e=this._rawFieldValues(),t in e?tt.fromDsValue(this._datastore,this,t,e[t]):null},t.prototype.set=function(t,e){var n;return n={},n[t]=e,this.update(n)},t.prototype.getOrCreateList=function(t){var e,n;if(this._checkNotDeleted(),n=this._rawFieldValues(),null==n[t])e={},e[t]=["LC"],this._storeUpdate(e),n=this._rawFieldValues();else if(!J.is_array(n[t]))throw new Error("Can't call getOrCreateList on field "+t+" for record ("+this.tid+", "+this.rid+"): existing value "+n[t]+" is not a list");return tt.fromDsValue(this._datastore,this,t,n[t])},t.prototype.getFields=function(){var t,e,n,r;this._checkNotDeleted(),t={},r=this._rawFieldValues();for(e in r)n=r[e],t[e]=tt.fromDsValue(this._datastore,this,e,n);return t},t.prototype.getSize=function(){return this._managed_datastore.get_record_size(this._tid,this._rid)},t.prototype.update=function(t){var e,n,r;this._datastore._checkWritable(),this._checkNotDeleted(),e={};for(n in t)r=t[n],null!=r?e[n]=["P",tt.toDsValue(r)]:null!=this.get(n)&&(e[n]=["D"]);return J.is_empty(e)||this._storeUpdate(e),this},t.prototype.deleteRecord=function(){var t;return this._datastore._checkWritable(),this._checkNotDeleted(),this._deleted=!0,this._record_cache.remove(this._tid,this._rid),t=r.from_array(["D",this._tid,this._rid]),this._managed_datastore.perform_local_change(t),this._datastore._recordsChangedLocally([this]),this},t.prototype.has=function(t){var e;return this._checkNotDeleted(),e=this._rawFieldValues(),t in e},t.prototype.getId=function(){return this._rid},t.prototype.getTable=function(){return this._datastore.getTable(this._tid)},t.prototype.isDeleted=function(){return this._deleted},t.prototype.toString=function(){var t;return t=this.isDeleted()?"deleted":JSON.stringify(this.getFields()),"Datastore.Record(("+this._tid+", "+this._rid+"): "+t+")"},t.prototype._rawFieldValues=function(){return this._managed_datastore.query(this._tid,this._rid)},t.prototype._storeUpdate=function(t){var e;e=r.from_array(["U",this._tid,this._rid,t]),this._managed_datastore.perform_local_change(e),this._datastore._recordsChangedLocally([this])},t.isValidId=function(t){var e;return e=new RegExp(J.SS_ID_REGEX),J.is_string(t)&&e.test(t)},t.prototype._checkNotDeleted=function(){if(this._deleted)throw new Error("Attempt to operate on deleted record ("+this._tid+", "+this._rid+")")},t}(),C.Datastore.RecordsChanged=function(){function t(t,e){this._recordsByTable=t,this._local=e}return t.prototype.toString=function(){var t,e,n,r,i,a,o;i=0,n=0,o=this._recordsByTable;for(a in o)t=o[a],i+=1,n+=t.length;return r=""+i+" "+(1===i?"table":"tables"),e=""+n+" "+(1===n?"record":"records"),"Datastore.RecordsChanged("+e+" in "+r+" changed "+(this._local?"locally":"remotely")+")"},t._fromRecordList=function(e,n){var r,i,a,o,s;for(i={},o=0,s=e.length;s>o;o++)r=e[o],a=r._tid,null==i[a]&&(i[a]=[]),i[a].push(r);return new t(i,n)},t.prototype.affectedRecordsByTable=function(){return this._recordsByTable},t.prototype.affectedRecordsForTable=function(t){var e;return null!=(e=this._recordsByTable[t])?e:[]},t.prototype.isLocal=function(){return this._local},t}(),$=C.Datastore.RecordsChanged,C.Datastore.Table=function(){function t(t,e){this._datastore=t,this._tid=e,this._record_cache=this._datastore._record_cache,this._managed_datastore=this._datastore._managed_datastore}return t.prototype.getId=function(){return this._tid},t.prototype.get=function(t){var e,n;if(!C.Datastore.Record.isValidId(t))throw new Error("Invalid record ID: "+t);return n=this._record_cache.get(this._tid,t),null!=n?(Q(!n._deleted),n):(e=this._managed_datastore.query(this._tid,t),null==e?null:this._record_cache.getOrCreate(this._tid,t))},t.prototype.getOrInsert=function(t,e){var n;return this._datastore._checkWritable(),n=this.get(t),n?n:this._insertWithId(t,e)},t.prototype.insert=function(t){var e;return this._datastore._checkWritable(),e=this._datastore._generateRid(),Q(null==this.get(e)),this._insertWithId(e,t)},t.prototype.query=function(t){var e,n,r,i,a,o,s;for(a=this._managed_datastore.list_rows_for_table(this._tid),r=[],o=0,s=a.length;s>o;o++)i=a[o],e=this._managed_datastore.query(this._tid,i),(null==t||tt.matchDsValues(t,e))&&(n=this.get(i),Q(null!=n),r.push(n));return r},t.prototype.setResolutionRule=function(t,e){if("remote"!==e&&"local"!==e&&"min"!==e&&"max"!==e&&"sum"!==e)throw new Error(""+e+" is not a valid resolution rule. Valid rules are 'remote', 'local', 'min', 'max', and 'sum'.");return this._managed_datastore.resolver.add_resolution_rule(this._tid,t,e),this},t.isValidId=function(t){var e;return e=new RegExp(J.SS_ID_REGEX),J.is_string(t)&&e.test(t)},t.prototype.toString=function(){return"Datastore.Table("+this._tid+")"},t.prototype._insertWithId=function(t,e){var n,i,a,o,s;i={};for(a in e)s=e[a],i[a]=tt.toDsValue(s);return n=r.from_array(["I",this._tid,t,i]),this._managed_datastore.perform_local_change(n),o=this._record_cache.getOrCreate(this._tid,t),this._datastore._recordsChangedLocally([o]),o},t}(),C.File.ShareUrl=function(){function t(t,e){this.url=t.url,this.expiresAt=C.Util.parseDate(t.expires),this.isDirect=e===!0||e!==!1&&("direct"in t?t.direct:Date.now()-this.expiresAt<=864e5),this.isPreview=!this.isDirect,this._json=null}return t.parse=function(t,e){return t&&"object"==typeof t?new C.File.ShareUrl(t,e):t},t.prototype.url=null,t.prototype.expiresAt=null,t.prototype.isDirect=null,t.prototype.isPreview=null,t.prototype.json=function(){return this._json||(this._json={url:this.url,expires:this.expiresAt.toUTCString(),direct:this.isDirect})},t}(),C.File.CopyReference=function(){function t(t){"object"==typeof t?(this.tag=t.copy_ref,this.expiresAt=C.Util.parseDate(t.expires),this._json=t):(this.tag=t,this.expiresAt=new Date(1e3*Math.ceil(Date.now()/1e3)),this._json=null)}return t.parse=function(t){return!t||"object"!=typeof t&&"string"!=typeof t?t:new C.File.CopyReference(t)},t.prototype.tag=null,t.prototype.expiresAt=null,t.prototype.json=function(){return this._json||(this._json={copy_ref:this.tag,expires:this.expiresAt.toUTCString()})},t}(),C.File.Stat=function(){function t(t){var e,n,r,i;switch(this._json=t,this.path=t.path,"/"!==this.path.substring(0,1)&&(this.path="/"+this.path),e=this.path.length-1,e>=0&&"/"===this.path.substring(e)&&(this.path=this.path.substring(0,e)),n=this.path.lastIndexOf("/"),this.name=this.path.substring(n+1),this.isFolder=t.is_dir||!1,this.isFile=!this.isFolder,this.isRemoved=t.is_deleted||!1,this.typeIcon=t.icon,this.modifiedAt=(null!=(r=t.modified)?r.length:void 0)?C.Util.parseDate(t.modified):null,this.clientModifiedAt=(null!=(i=t.client_mtime)?i.length:void 0)?C.Util.parseDate(t.client_mtime):null,t.root){case"dropbox":this.inAppFolder=!1;break;case"app_folder":this.inAppFolder=!0;break;default:this.inAppFolder=null}this.size=t.bytes||0,this.humanSize=t.size||"",this.hasThumbnail=t.thumb_exists||!1,this.versionTag=t.rev,this.contentHash=t.hash||null,this.mimeType=this.isFolder?t.mime_type||"inode/directory":t.mime_type||"application/octet-stream"}return t.parse=function(t){return t&&"object"==typeof t?new C.File.Stat(t):t},t.prototype.path=null,t.prototype.name=null,t.prototype.inAppFolder=null,t.prototype.isFolder=null,t.prototype.isFile=null,t.prototype.isRemoved=null,t.prototype.typeIcon=null,t.prototype.versionTag=null,t.prototype.contentHash=null,t.prototype.mimeType=null,t.prototype.size=null,t.prototype.humanSize=null,t.prototype.hasThumbnail=null,t.prototype.modifiedAt=null,t.prototype.clientModifiedAt=null,t.prototype.json=function(){return this._json},t}(),C.Http.AppInfo=function(){function t(t,e){var n;this.name=t.name,this._icons=t.icons,n=t.permissions||{},this.canUseDatastores=!!n.datastores,this.canUseFiles=!!n.files,this.canUseFullDropbox="full_dropbox"===n.files,this.hasAppFolder="app_folder"===n.files,this.key=e?e:t.key||null}return t.parse=function(t,e){return t?new C.Http.AppInfo(t,e):t},t.prototype.name=void 0,t.prototype.key=void 0,t.prototype.canUseDatastores=void 0,t.prototype.canUseFiles=void 0,t.prototype.hasAppFolder=void 0,t.prototype.canUseFullDropbox=void 0,t.prototype.icon=function(t,e){return e||(e=t),this._icons[""+t+"x"+e]||null},t.ICON_SMALL=64,t.ICON_LARGE=256,t}(),C.Http.PulledChanges=function(){function t(t){var e;this.blankSlate=t.reset||!1,this.cursorTag=t.cursor,this.shouldPullAgain=t.has_more,this.shouldBackOff=!this.shouldPullAgain,this.changes=t.cursor&&t.cursor.length?function(){var n,r,i,a;for(i=t.entries,a=[],n=0,r=i.length;r>n;n++)e=i[n],a.push(C.Http.PulledChange.parse(e));return a}():[]}return t.parse=function(t){return t&&"object"==typeof t?new C.Http.PulledChanges(t):t},t.prototype.blankSlate=void 0,t.prototype.cursorTag=void 0,t.prototype.changes=void 0,t.prototype.shouldPullAgain=void 0,t.prototype.shouldBackOff=void 0,t.prototype.cursor=function(){return this.cursorTag},t}(),C.Http.PulledChange=function(){function t(t){this.path=t[0],this.stat=C.File.Stat.parse(t[1]),this.stat?this.wasRemoved=!1:(this.stat=null,this.wasRemoved=!0)}return t.parse=function(t){return t&&"object"==typeof t?new C.Http.PulledChange(t):t},t.prototype.path=void 0,t.prototype.wasRemoved=void 0,t.prototype.stat=void 0,t}(),C.Http.PollResult=function(){function t(t){this.hasChanges=t.changes,this.retryAfter=t.backoff||0}return t.parse=function(t){return t?new C.Http.PollResult(t):t},t.prototype.hasChanges=void 0,t.prototype.retryAfter=void 0,t}(),C.Http.RangeInfo=function(){function t(t){var e;(e=/^bytes (\d*)-(\d*)\/(.*)$/.exec(t))?(this.start=parseInt(e[1]),this.end=parseInt(e[2]),this.size="*"===e[3]?null:parseInt(e[3])):(this.start=0,this.end=0,this.size=null)}return t.parse=function(t){return"string"==typeof t?new C.Http.RangeInfo(t):t},t.prototype.start=null,t.prototype.size=null,t.prototype.end=null,t}(),C.Http.UploadCursor=function(){function t(t){this.replace(t)}return t.parse=function(t){return!t||"object"!=typeof t&&"string"!=typeof t?t:new C.Http.UploadCursor(t)},t.prototype.tag=null,t.prototype.offset=null,t.prototype.expiresAt=null,t.prototype.json=function(){return this._json||(this._json={upload_id:this.tag,offset:this.offset,expires:this.expiresAt.toUTCString()})},t.prototype.replace=function(t){return"object"==typeof t?(this.tag=t.upload_id||null,this.offset=t.offset||0,this.expiresAt=C.Util.parseDate(t.expires)||Date.now(),this._json=t):(this.tag=t||null,this.offset=0,this.expiresAt=new Date(1e3*Math.floor(Date.now()/1e3)),this._json=null),this},t}(),"function"==typeof C.Env.global.atob&&"function"==typeof C.Env.global.btoa?(C.Util.atob=function(t){return C.Env.global.atob(t)},C.Util.btoa=function(t){return C.Env.global.btoa(t)}):C.Env.global.require&&C.Env.global.Buffer?(C.Util.atob=function(t){var e,n;return e=new Buffer(t,"base64"),function(){var t,r,i;for(i=[],n=t=0,r=e.length;r>=0?r>t:t>r;n=r>=0?++t:--t)i.push(String.fromCharCode(e[n]));return i}().join("")},C.Util.btoa=function(t){var e,n;return e=new Buffer(function(){var e,r,i;for(i=[],n=e=0,r=t.length;r>=0?r>e:e>r;n=r>=0?++e:--e)i.push(t.charCodeAt(n));return i}()),e.toString("base64")}):!function(){var t,e,n;return e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n=function(t,n,r){var i,a;for(a=3-n,t<<=8*a,i=3;i>=a;)r.push(e.charAt(63&t>>6*i)),i-=1;for(i=n;3>i;)r.push("="),i+=1;return null},t=function(t,e,n){var r,i;for(i=4-e,t<<=6*i,r=2;r>=i;)n.push(String.fromCharCode(255&t>>8*r)),r-=1;return null},C.Util.btoa=function(t){var e,r,i,a,o,s;for(a=[],e=0,r=0,i=o=0,s=t.length;s>=0?s>o:o>s;i=s>=0?++o:--o)e=e<<8|t.charCodeAt(i),r+=1,3===r&&(n(e,r,a),e=r=0);return r>0&&n(e,r,a),a.join("")},C.Util.atob=function(n){var r,i,a,o,s,l,u;for(s=[],r=0,a=0,o=l=0,u=n.length;(u>=0?u>l:l>u)&&(i=n.charAt(o),"="!==i);o=u>=0?++l:--l)r=r<<6|e.indexOf(i),a+=1,4===a&&(t(r,a,s),r=a=0);return a>0&&t(r,a,s),s.join("")}}(),function(){var t,e,n,r,i,a,o,s,l,u,c;if(C.Util.hmac=function(e,r){return t(n(l(e),l(r),e.length,r.length))},C.Util.sha1=function(e){return t(i(l(e),e.length))},C.Util.sha256=function(e){return t(a(l(e),e.length))},C.Env.require)try{e=C.Env.require("crypto"),e.createHmac&&e.createHash&&(C.Util.hmac=function(t,n){var r;return r=e.createHmac("sha1",n),r.update(t),r.digest("base64")},C.Util.sha1=function(t){var n;return n=e.createHash("sha1"),n.update(t),n.digest("base64")},C.Util.sha256=function(t){var n;return n=e.createHash("sha256"),n.update(t),n.digest("base64")})}catch(t){r=t}return n=function(t,e,n,r){var a,o,s,l;return e.length>16&&(e=i(e,r)),s=function(){var t,n;for(n=[],o=t=0;16>t;o=++t)n.push(909522486^e[o]);return n}(),l=function(){var t,n;for(n=[],o=t=0;16>t;o=++t)n.push(1549556828^e[o]);return n}(),a=i(s.concat(t),64+n),i(l.concat(a),84)},i=function(t,e){var n,r,i,a,o,s,l,u,c,f,d,h,p,g,m,v,y;for(t[e>>2]|=1<<31-((3&e)<<3),t[(e+8>>6<<4)+15]=e<<3,m=Array(80),n=1732584193,i=4023233417,o=2562383102,l=271733878,c=3285377520,d=0,p=t.length;p>d;){for(r=n,a=i,s=o,u=l,f=c,h=y=0;80>y;h=++y)16>h?m[h]=0|t[d+h<<2>>2]:(g=(0|m[h-3<<2>>2])^(0|m[h-8<<2>>2])^(0|m[h-14<<2>>2])^(0|m[h-16<<2>>2]),m[h]=g<<1|g>>>31),v=0|(0|(n<<5|n>>>27)+c)+m[h<<2>>2],v=20>h?0|v+(0|(i&o|~i&l)+1518500249):40>h?0|v+(0|(i^o^l)+1859775393):60>h?0|(0|v+((i&o|i&l|o&l)-1894007588)):0|v+(0|(i^o^l)-899497514),c=l,l=o,o=i<<30|i>>>2,i=n,n=v;n=0|r+n,i=0|a+i,o=0|s+o,l=0|u+l,c=0|f+c,d=0|d+16}return[n,i,o,l,c]},a=function(t,e){var n,r,i,a,l,u,c,f,d,h,p,g,m,v,y,_,b,x,w,C,k,S,T,A,E,M,D,P,O,N,L,I;for(t[e>>2]|=1<<31-((3&e)<<3),t[(e+8>>6<<4)+15]=e<<3,O=Array(80),n=o[0],i=o[1],l=o[2],f=o[3],h=o[4],g=o[5],v=o[6],C=o[7],S=0,A=t.length;A>S;){for(r=n,a=i,u=l,d=f,p=h,m=g,y=v,k=C,T=I=0;64>I;T=++I)16>T?P=O[T]=0|t[S+T<<2>>2]:(b=0|O[T-15<<2>>2],_=(b<<25|b>>>7)^(b<<14|b>>>18)^b>>>3,w=0|O[T-2<<2>>2],x=(w<<15|w>>>17)^(w<<13|w>>>19)^w>>>10,P=O[T]=0|(0|_+(0|O[T-7<<2>>2]))+(0|x+(0|O[T-16<<2>>2]))),c=h&g^~h&v,E=n&i^n&l^i&l,M=(n<<30|n>>>2)^(n<<19|n>>>13)^(n<<10|n>>>22),D=(h<<26|h>>>6)^(h<<21|h>>>11)^(h<<7|h>>>25),N=0|(0|(0|C+D)+(0|c+P))+(0|s[T<<2>>2]),L=0|M+E,C=v,v=g,g=h,h=0|f+N,f=l,l=i,i=n,n=0|N+L;n=0|r+n,i=0|a+i,l=0|u+l,f=0|d+f,h=0|p+h,g=0|m+g,v=0|y+v,C=0|k+C,S+=16}return[n,i,l,f,h,g,v,C]},u=function(t){return 0>t&&(t=4*(1<<30)+t),t.toString(16)},
o=[],s=[],function(){var t,e,n,r,i,a,l;for(e=function(t){return 0|4294967296*(t-Math.floor(t))},i=2,l=[],n=a=0;64>a;n=++a){for(;;){for(r=!0,t=2;i>=t*t;){if(0===i%t){r=!1;break}t+=1}if(r)break;i+=1}8>n&&(o[n]=e(Math.pow(i,.5))),s[n]=e(Math.pow(i,1/3)),l.push(i+=1)}return l}(),t=function(t){var e,n,r,i,a;for(i="",e=0,r=4*t.length;r>e;)n=e,a=(255&t[n>>2]>>(3-(3&n)<<3))<<16,n+=1,a|=(255&t[n>>2]>>(3-(3&n)<<3))<<8,n+=1,a|=255&t[n>>2]>>(3-(3&n)<<3),i+=c[63&a>>18],i+=c[63&a>>12],e+=1,i+=e>=r?"=":c[63&a>>6],e+=1,i+=e>=r?"=":c[63&a],e+=1;return i},c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",l=function(t){var e,n,r,i,a;for(e=[],r=255,n=i=0,a=t.length;a>=0?a>i:i>a;n=a>=0?++i:--i)e[n>>2]|=(t.charCodeAt(n)&r)<<(3-(3&n)<<3);return e}}(),C.Util.Oauth=function(){function t(t){this._id=null,this._secret=null,this._stateParam=null,this._authCode=null,this._token=null,this._tokenKey=null,this._tokenKid=null,this._error=null,this._appHash=null,this._loaded=null,this.setCredentials(t)}return t.prototype.setCredentials=function(t){if(t.key)this._id=t.key;else{if(!t.token)throw new Error("No API key supplied");this._id=null}return this._secret=t.secret||null,this._appHash=null,this._error=null,this._loaded=!0,this.reset(),t.token?(this._token=t.token,t.tokenKey&&(this._tokenKey=t.tokenKey,this._tokenKid=t.tokenKid)):t.oauthCode?this._authCode=t.oauthCode:t.oauthStateParam&&(this._stateParam=t.oauthStateParam),this},t.prototype.credentials=function(){var t;return t={},this._id&&(t.key=this._id),this._secret&&(t.secret=this._secret),null!==this._token?(t.token=this._token,this._tokenKey&&(t.tokenKey=this._tokenKey,t.tokenKid=this._tokenKid)):null!==this._authCode?t.oauthCode=this._authCode:null!==this._stateParam&&(t.oauthStateParam=this._stateParam),t},t.prototype.step=function(){return null!==this._token?C.Client.DONE:null!==this._authCode?C.Client.AUTHORIZED:null!==this._stateParam?this._loaded?C.Client.PARAM_LOADED:C.Client.PARAM_SET:null!==this._error?C.Client.ERROR:C.Client.RESET},t.prototype.setAuthStateParam=function(t){if(null===this._id)throw new Error("No API key supplied, cannot do authorization");return this.reset(),this._loaded=!1,this._stateParam=t,this},t.prototype.checkAuthStateParam=function(t){return this._stateParam===t&&null!==this._stateParam},t.prototype.authStateParam=function(){return this._stateParam},t.prototype.error=function(){return this._error},t.prototype.processRedirectParams=function(t){var e;if(t.error){if(null===this._id)throw new Error("No API key supplied, cannot process errors");return this.reset(),this._error=new C.AuthError(t),!0}if(t.code){if(null===this._id)throw new Error("No API key supplied, cannot do Authorization Codes");return this.reset(),this._loaded=!1,this._authCode=t.code,!0}if(e=t.token_type){if(e=e.toLowerCase(),"bearer"!==e&&"mac"!==e)throw new Error("Unimplemented token type "+e);if(this.reset(),this._loaded=!1,"mac"===e){if("hmac-sha-1"!==t.mac_algorithm)throw new Error("Unimplemented MAC algorithms "+t.mac_algorithm);this._tokenKey=t.mac_key,this._tokenKid=t.kid}return this._token=t.access_token,!0}return!1},t.prototype.authHeader=function(t,e,n){var r,i;return null===this._token?(i=null===this._secret?C.Util.btoa(""+this._id+":"):C.Util.btoa(""+this._id+":"+this._secret),"Basic "+i):null===this._tokenKey?"Bearer "+this._token:(r=this.macParams(t,e,n),"MAC kid="+r.kid+" ts="+r.ts+" "+("access_token="+this._token+" mac="+r.mac))},t.prototype.addAuthParams=function(t,e,n){var r;return null===this._token?(n.client_id=this._id,null!==this._secret&&(n.client_secret=this._secret)):(null!==this._tokenKey&&(r=this.macParams(t,e,n),n.kid=r.kid,n.ts=r.ts,n.mac=r.mac),n.access_token=this._token),n},t.prototype.authorizeUrlParams=function(t,e){var n;if("token"!==t&&"code"!==t)throw new Error("Unimplemented /authorize response type "+t);return n={client_id:this._id,state:this._stateParam,response_type:t},e&&(n.redirect_uri=e),n},t.prototype.accessTokenParams=function(t){var e;return e={grant_type:"authorization_code",code:this._authCode},t&&(e.redirect_uri=t),e},t.queryParamsFromUrl=function(t){var e,n,r,i,a,o,s,l,u,c;if(i=/^[^?#]+(\?([^\#]*))?(\#(.*))?$/.exec(t),!i)return{};for(s=i[2]||"","/"===s.substring(0,1)&&(s=s.substring(1)),e=i[4]||"",n=e.indexOf("?"),-1!==n&&(e=e.substring(n+1)),"/"===e.substring(0,1)&&(e=e.substring(1)),o={},c=s.split("&").concat(e.split("&")),l=0,u=c.length;u>l;l++)r=c[l],a=r.indexOf("="),-1!==a&&(o[decodeURIComponent(r.substring(0,a))]=decodeURIComponent(r.substring(a+1)));return o},t.prototype.macParams=function(t,e,n){var r,i;return r={kid:this._tokenKid,ts:C.Util.Oauth.timestamp()},i=t.toUpperCase()+"&"+C.Util.Xhr.urlEncodeValue(e)+"&"+C.Util.Xhr.urlEncodeValue(C.Util.Xhr.urlEncode(n)),r.mac=C.Util.hmac(i,this._tokenKey),r},t.prototype.appHash=function(){return this._appHash?this._appHash:this._appHash=C.Util.sha1("oauth2-"+this._id).replace(/[\/+=]/g,"")},t.prototype.reset=function(){return this._stateParam=null,this._authCode=null,this._token=null,this._tokenKey=null,this._tokenKid=null,this._error=null,this},t.timestamp=function(){return Math.floor(Date.now()/1e3)},t.randomAuthStateParam=function(){return["oas",Date.now().toString(36),Math.random().toString(36)].join("_")},t}(),null==Date.now&&(C.Util.Oauth.timestamp=function(){return Math.floor((new Date).getTime()/1e3)}),2274814865e3===new Date("Fri, 31 Jan 2042 21:01:05 +0000").valueOf()?C.Util.parseDate=function(t){return new Date(t)}:2274814865e3===Date.parse("Fri, 31 Jan 2042 21:01:05 +0000")?C.Util.parseDate=function(t){return new Date(Date.parse(t))}:!function(){var t,e;return e=/^\w+\, (\d+) (\w+) (\d+) (\d+)\:(\d+)\:(\d+) (\+\d+|UTC|GMT)$/,t={Jan:0,Feb:1,Mar:2,Apr:3,May:4,Jun:5,Jul:6,Aug:7,Sep:8,Oct:9,Nov:10,Dec:11},C.Util.parseDate=function(n){var r;return(r=e.exec(n))?new Date(Date.UTC(parseInt(r[3]),t[r[2]],parseInt(r[1]),parseInt(r[4]),parseInt(r[5]),parseInt(r[6]),0)):NaN}}(),C.Util.countUtf8Bytes=function(t){var e,n,r,i,a;for(e=0,r=i=0,a=t.length;a>=0?a>i:i>a;r=a>=0?++i:--i)n=t.charCodeAt(r),127>=n?e+=1:2047>=n?e+=2:n>=55296&&57343>=n?e+=2:65535>=n?e+=3:Q(!1);return e},C.Env.global.XMLHttpRequest?(!C.Env.global.XDomainRequest||"withCredentials"in new XMLHttpRequest?(v=XMLHttpRequest,m=!1,p="undefined"!=typeof FormData&&-1===navigator.userAgent.indexOf("Firefox")):(v=XDomainRequest,m=!0,p=!1),g=!0):(v=C.Env.require("xhr2"),m=!1,p=!1,g=!1),C.Env.global.Uint8Array)if(Object.getPrototypeOf?h=Object.getPrototypeOf(Object.getPrototypeOf(new Uint8Array(0))).constructor:Object.__proto__&&(h=new Uint8Array(0).__proto__.__proto__.constructor),C.Env.global.Blob){try{!function(){return 2===new Blob([new Uint8Array(2)]).size?(_=!0,y=!0):(y=!1,_=2===new Blob([new ArrayBuffer(2)]).size)}()}catch(t){y=!1,_=!1,C.Env.global.WebKitBlobBuilder&&-1!==navigator.userAgent.indexOf("Android")&&(p=!1)}h===Object&&(y=!1)}else _=!1,y=!0;else h=null,_=!1,y=!1;C.Util.Xhr=function(){function t(t,e){this.method=t,this.isGet="GET"===this.method,this.url=e,this.wantHeaders=!1,this.headers={},this.params=null,this.body=null,this.preflight=!(this.isGet||"POST"===this.method),this.signed=!1,this.completed=!1,this.responseType=null,this.callback=null,this.xhr=null,this.onError=null}return t.Request=v,t.ieXdr=m,t.canSendForms=p,t.doesPreflight=g,t.ArrayBufferView=h,t.sendArrayBufferView=y,t.wrapBlob=_,t.prototype.xhr=null,t.prototype.onError=null,t.prototype.setParams=function(t){if(this.signed)throw new Error("setParams called after addOauthParams or addOauthHeader");if(this.params)throw new Error("setParams cannot be called twice");return this.params=t,this},t.prototype.setCallback=function(t){return this.callback=t,this},t.prototype.signWithOauth=function(t,e){return C.Util.Xhr.ieXdr?this.addOauthParams(t):this.preflight||!C.Util.Xhr.doesPreflight?this.addOauthHeader(t):this.isGet&&e?this.addOauthHeader(t):this.addOauthParams(t)},t.prototype.addOauthParams=function(t){if(this.signed)throw new Error("Request already has an OAuth signature");return this.params||(this.params={}),t.addAuthParams(this.method,this.url,this.params),this.signed=!0,this},t.prototype.addOauthHeader=function(t){if(this.signed)throw new Error("Request already has an OAuth signature");return this.params||(this.params={}),this.signed=!0,this.setHeader("Authorization",t.authHeader(this.method,this.url,this.params))},t.prototype.setBody=function(t){if(this.isGet)throw new Error("setBody cannot be called on GET requests");if(null!==this.body)throw new Error("Request already has a body");return"string"==typeof t||"undefined"!=typeof FormData&&t instanceof FormData||(this.headers["Content-Type"]="application/octet-stream",this.preflight=!0),this.body=t,this},t.prototype.setResponseType=function(t){return this.responseType=t,this},t.prototype.setHeader=function(t,e){var n;if(this.headers[t])throw n=this.headers[t],new Error("HTTP header "+t+" already set to "+n);if("Content-Type"===t)throw new Error("Content-Type is automatically computed based on setBody");return this.preflight=!0,this.headers[t]=e,this},t.prototype.reportResponseHeaders=function(){return this.wantHeaders=!0},t.prototype.setFileField=function(t,e,n,r){var i,a,o,s,l;if(null!==this.body)throw new Error("Request already has a body");if(this.isGet)throw new Error("setFileField cannot be called on GET requests");if("object"==typeof n){"undefined"!=typeof ArrayBuffer&&(n instanceof ArrayBuffer?C.Util.Xhr.sendArrayBufferView&&(n=new Uint8Array(n)):!C.Util.Xhr.sendArrayBufferView&&0===n.byteOffset&&n.buffer instanceof ArrayBuffer&&(n=n.buffer)),r||(r="application/octet-stream");try{n=new Blob([n],{type:r})}catch(t){a=t,window.WebKitBlobBuilder&&(s=new WebKitBlobBuilder,s.append(n),(i=s.getBlob(r))&&(n=i))}"undefined"!=typeof File&&n instanceof File&&(n=new Blob([n],{type:n.type})),l=n instanceof Blob}else l=!1;return l?(this.body=new FormData,this.body.append(t,n,e)):(r||(r="application/octet-stream"),o=this.multipartBoundary(),this.headers["Content-Type"]="multipart/form-data; boundary="+o,this.body=["--",o,"\r\n",'Content-Disposition: form-data; name="',t,'"; filename="',e,'"\r\n',"Content-Type: ",r,"\r\n","Content-Transfer-Encoding: binary\r\n\r\n",n,"\r\n","--",o,"--","\r\n"].join(""))},t.prototype.multipartBoundary=function(){return[Date.now().toString(36),Math.random().toString(36)].join("----")},t.prototype.paramsToUrl=function(){var t;return this.params&&(t=C.Util.Xhr.urlEncode(this.params),0!==t.length&&(this.url=[this.url,"?",t].join("")),this.params=null),this},t.prototype.paramsToBody=function(){if(this.params){if(null!==this.body)throw new Error("Request already has a body");if(this.isGet)throw new Error("paramsToBody cannot be called on GET requests");this.headers["Content-Type"]="application/x-www-form-urlencoded",this.body=C.Util.Xhr.urlEncode(this.params),this.params=null}return this},t.prototype.prepare=function(){var t,e,n,r,i=this;if(e=C.Util.Xhr.ieXdr,this.isGet||null!==this.body||e?(this.paramsToUrl(),null!==this.body&&"string"==typeof this.body&&(this.headers["Content-Type"]="text/plain; charset=utf8")):this.paramsToBody(),this.xhr=new C.Util.Xhr.Request,e?(this.xhr.onload=function(){return i.onXdrLoad()},this.xhr.onerror=function(){return i.onXdrError()},this.xhr.ontimeout=function(){return i.onXdrError()},this.xhr.onprogress=function(){}):this.xhr.onreadystatechange=function(){return i.onReadyStateChange()},this.xhr.open(this.method,this.url,!0),!e){r=this.headers;for(t in r)nt.call(r,t)&&(n=r[t],this.xhr.setRequestHeader(t,n))}return this.responseType&&("b"===this.responseType?this.xhr.overrideMimeType&&this.xhr.overrideMimeType("text/plain; charset=x-user-defined"):this.xhr.responseType=this.responseType),this},t.prototype.send=function(t){var e,n;if(this.callback=t||this.callback,null!==this.body){e=this.body,C.Util.Xhr.sendArrayBufferView?e instanceof ArrayBuffer&&(e=new Uint8Array(e)):0===e.byteOffset&&e.buffer instanceof ArrayBuffer&&(e=e.buffer);try{this.xhr.send(e)}catch(t){if(n=t,C.Util.Xhr.sendArrayBufferView||!C.Util.Xhr.wrapBlob)throw n;e=new Blob([e],{type:"application/octet-stream"}),this.xhr.send(e)}}else this.xhr.send();return this},t.urlEncode=function(t){var e,n,r;e=[];for(n in t)r=t[n],e.push(this.urlEncodeValue(n)+"="+this.urlEncodeValue(r));return e.sort().join("&")},t.urlEncodeValue=function(t){return encodeURIComponent(t.toString()).replace(/\!/g,"%21").replace(/'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/\*/g,"%2A")},t.urlDecode=function(t){var e,n,r,i,a,o;for(n={},o=t.split("&"),i=0,a=o.length;a>i;i++)r=o[i],e=r.split("="),n[decodeURIComponent(e[0])]=decodeURIComponent(e[1]);return n},t.prototype.onReadyStateChange=function(){var t,e,n,r,i,a,o,s,l,u,c,f,d,h,p;if(4!==this.xhr.readyState)return!0;if(this.completed)return!0;if(this.completed=!0,this.xhr.status<200||this.xhr.status>=300)return e=new C.ApiError(this.xhr,this.method,this.url),this.onError?this.onError(e,this.callback):this.callback(e),!0;if(this.wantHeaders?(t=this.xhr.getAllResponseHeaders(),o=t?C.Util.Xhr.parseResponseHeaders(t):this.guessResponseHeaders(),c=o["x-dropbox-metadata"]):(o=void 0,c=this.xhr.getResponseHeader("x-dropbox-metadata")),null!=c?c.length:void 0)try{u=JSON.parse(c)}catch(t){if(l=t,a=c.search(/\}\,\s*\{/),-1!==a)try{c=c.substring(0,a+1),u=JSON.parse(c)}catch(t){l=t,u=void 0}else u=void 0}else u=void 0;if(this.responseType){if("b"===this.responseType){for(i=null!=this.xhr.responseText?this.xhr.responseText:this.xhr.response,n=[],s=h=0,p=i.length;p>=0?p>h:h>p;s=p>=0?++h:--h)n.push(String.fromCharCode(255&i.charCodeAt(s)));d=n.join(""),this.callback(null,d,u,o)}else this.callback(null,this.xhr.response,u,o);return!0}switch(d=null!=this.xhr.responseText?this.xhr.responseText:this.xhr.response,r=this.xhr.getResponseHeader("Content-Type"),r&&(f=r.indexOf(";"),-1!==f&&(r=r.substring(0,f))),r){case"application/x-www-form-urlencoded":this.callback(null,C.Util.Xhr.urlDecode(d),u,o);break;case"application/json":case"text/javascript":this.callback(null,JSON.parse(d),u,o);break;default:this.callback(null,d,u,o)}return!0},t.parseResponseHeaders=function(t){var e,n,r,i,a,o,s,l;for(r={},n=t.split("\n"),s=0,l=n.length;l>s;s++)i=n[s],e=i.indexOf(":"),a=i.substring(0,e).trim().toLowerCase(),o=i.substring(e+1).trim(),r[a]=o;return r},t.prototype.guessResponseHeaders=function(){var t,e,n,r,i,a;for(t={},a=["cache-control","content-language","content-range","content-type","expires","last-modified","pragma","x-dropbox-metadata"],r=0,i=a.length;i>r;r++)e=a[r],n=this.xhr.getResponseHeader(e),n&&(t[e]=n);return t},t.prototype.onXdrLoad=function(){var t,e,n;if(this.completed)return!0;if(this.completed=!0,n=this.xhr.responseText,t=this.wantHeaders?{"content-type":this.xhr.contentType}:void 0,e=void 0,this.responseType)return this.callback(null,n,e,t),!0;switch(this.xhr.contentType){case"application/x-www-form-urlencoded":this.callback(null,C.Util.Xhr.urlDecode(n),e,t);break;case"application/json":case"text/javascript":this.callback(null,JSON.parse(n),e,t);break;default:this.callback(null,n,e,t)}return!0},t.prototype.onXdrError=function(){var t;return!!this.completed||(this.completed=!0,t=new C.ApiError(this.xhr,this.method,this.url),this.onError?this.onError(t,this.callback):this.callback(t),!0)},t}(),Z="X-Dropbox-User-Agent",U="X-Dropbox-Request-Id",C.DatastoresClient={_dispatchDatastoreXhr:function(t,e,n,r,i,a){var o,s,u;return u=new C.Util.Xhr(t,e),i.setRequestId&&(s="xxxxxxxxxxxxxxxx".replace(/x/g,function(){return Math.floor(16*Math.random()).toString(16)}),u.setHeader(U,s)),Q(null==n[Z]),n=tt.clone(n),n[Z]="dropbox-js-datastore-sdk/"+l,u.setParams(n),u.signWithOauth(this._oauth,!1),o=function(t,e){return null!=t?a(t):a(null,r.fromJSON(e))},i.isLongPoll?this._dispatchLongPollXhr(u,o):this._dispatchXhr(u,o),u},_listDatastores:function(t){return this._dispatchDatastoreXhr("GET",this._urls.listDbs,{},N,{},t)},_getOrCreateDatastore:function(t,e){return this._dispatchDatastoreXhr("POST",this._urls.getOrCreateDb,{dsid:t},o,{},e)},_createDatastore:function(t,e,n){return this._dispatchDatastoreXhr("POST",this._urls.createDb,{dsid:t,key:e},o,{},n)},_getDatastore:function(t,e){return this._dispatchDatastoreXhr("GET",this._urls.getDb,{dsid:t},M,{},e)},_deleteDatastore:function(t,e){return this._dispatchDatastoreXhr("POST",this._urls.deleteDb,{handle:t},x,{setRequestId:!0},e)},_putDelta:function(t,e,n){return this._dispatchDatastoreXhr("POST",this._urls.putDelta,{handle:t,rev:e.rev,nonce:e.nonce,changes:JSON.stringify(e.changes)},H,{setRequestId:!0},n)},_getSnapshot:function(t,e){return this._dispatchDatastoreXhr("GET",this._urls.getSnapshot,{handle:t},P,{},e)},_datastoreAwait:function(e,n,r){return this._dispatchDatastoreXhr("POST",this._urls.datastoreAwait,{get_deltas:JSON.stringify({cursors:e}),list_datastores:JSON.stringify({token:n})},t,{isLongPoll:!0,setRequestId:!0},r)},getDatastoreManager:function(){var t,e=this;return null==this._datastoreManager&&(this._datastoreManager=new C.Datastore.DatastoreManager(this),t=function(){return e.authStep===C.Client.SIGNED_OUT?(e._datastoreManager.close(),e._datastoreManager=null,e.onAuthStepChange.removeListener(t)):void 0},this.onAuthStepChange.addListener(t)),this._datastoreManager}},function(){var t,e,n,r;n=C.DatastoresClient,r=[];for(e in n)t=n[e],r.push(C.Client.prototype[e]=t);return r}()}).call(this);var FileDB,bind=function(t,e){return function(){return t.apply(e,arguments)}},hasProp={}.hasOwnProperty;FileDB=function(){function t(t){this.apiKey=t,this.allTables={}}var e,n,r,i,a,o,s;return s=0,t.file=e,i=null,t.prototype.setupDropbox=function(t){return i=new Dropbox.Client({key:this.apiKey}),i.authenticate(null,function(e){return function(n){if(null!=n)throw n;return e.loadTables(t)}}(this))},t.prototype.query=function(t,e,n){return null==e&&(e=null),null==n&&(n=null),this.allTables[t].query(e,n)},t.prototype.queryAll=function(t,e){var n,r,i,a,o;return i=null!=e?e:{argQuery:null,argSort:null},n=null!=(a=i.argQuery)?a:null,r=null!=(o=i.argSort)?o:null,this.query(t,n,r)},t.prototype.rowCount=function(t){return this.query(t).length},t.prototype.createTable=function(t){return this.allTables[t]=new n(t,(!0))},t.prototype.createTableWithData=function(t,e){var n,r,i;for(this.createTable(t),r=0,i=e.length;r<i;r++)n=e[r],this.insert(t,n);return this.query(t)},t.prototype.insert=function(t,e){return this.allTables[t].insert(e)},t.prototype.isNew=function(){return 0===Object.keys(this.allTables).length},t.prototype.loadTables=function(t){return i.readdir("/",function(e){return function(r,i){var a,l,u;for(s++,l=0,u=i.length;l<u;l++)a=i[l],"_"!==a[0]&&(s++,e.allTables[a]=new n(a,(!1),function(){return o(t)}));return o(t)}}(this))},a=function(t){var e,n;return n=JSON.stringify(t),e=JSON.parse(n)},o=function(t){if(s--,0===s)return setTimeout(t,0)},r=function(t){return"function"==typeof t?t():void 0},n=function(){function t(t,n,i){var a,o;null==n&&(n=!1),this.tableFileData={},this.dataFileObjects=[],this.data=[],o=new e(t),n?(o.readFile(),this.data[0]={},this.data[0].maxSize=62500,this.data[0].dataFiles=[],a=this.createNewDatafile(),this.dataFileObjects.push(a),this.data[0].dataFiles.push(a.getName()),o.insert(this.data[0]),this.tableFileData=this.data[0],r(i)):o.readFile(function(t){return function(){var n,r,a,s,l,u;for(t.data=o.getDataArray(),t.tableFileData=t.data[0],l=t.tableFileData.data_files,u=[],a=0,s=l.length;a<s;a++)n=l[a],r=new e(n),t.dataFileObjects.push(r),u.push(r.readFile(i));return u}}(this))}return t.prototype.updateTableData=function(){var t,e,n,r,i;for(t=[],i=this.dataFileObjects,n=0,r=i.length;n<r;n++)e=i[n],t.push(e.getName());return tableFile.update(void 0,{data_files:dataFiles})},t.prototype.insert=function(t){var e;return e=this.dataFileObjects[this.dataFileObjects.length-1],e.getSize()>this.tableFileData.maxSize&&(e=createNewDatafile(),this.dataFileObjects.push(e),this.tableFileData.dataFiles.push(e.getName()),this.updateTableData()),e.insert(t)},t.prototype.query=function(t,e){var n,r,i,a,o,s,l,u;for(null==t&&(t=null),null==e&&(e=null),l=[],s=this.dataFileObjects,r=0,a=s.length;r<a;r++)n=s[r],l=l.concat(n.query(t));if((null!=e)instanceof Array)for(i=0,o=e.length;i<o;i++)u=e[i],l.sort(sortResults(u[0],u[1]));return l},t.prototype.createNewDatafile=function(){var t,n;return n="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){return function(t){var e,n;return e=16*Math.random()|0,n="x"===t?e:3&e|8,n.toString(16)}}(this)),t=new e("_"+n),t.readFile(),t},t.prototype.sortResults=function(t,e){return null==e&&(e=null),function(n){return function(n,r){var i,a;return i=n[t],a=r[t],i("string")&&(i=i.toLowerCase()),a("string")&&(a=a.toLowerCase()),"DESC"===e?i===a?0:i<a?1:-1:i===a?0:i>a?1:-1}}(this)},t}(),e=function(){function t(t){this.fileName=t,this.sync=bind(this.sync,this),this.syncing=!1,this.syncingAddedData=null,this.timeExtension=0,this.timeLastRead=0,this.fileStats=null,this.dataObject={}}var e,n,o;return t.prototype.query=function(t){return this.toDataArray(e(t))},e=function(t){return"function"==typeof t?n(t):null==t?this.dataObject:o(t)},t.prototype.remove=function(t){var n,r;this.scheduleSync(),r=e(t);for(n in r)hasProp.call(r,n)&&delete this.dataObject[n];return this.query(t)},t.prototype.update=function(t,n){var r,i,o,s,l,u;s=e(t);for(i in s)if(hasProp.call(s,i)){l=s[i],o=a(l);for(r in n)hasProp.call(n,r)&&(u=n[r],o[r]=u);this.remove(this.dataObject[i]),this.insert(o)}return this.query(t)},t.prototype.insert=function(t){var e;return this.scheduleSync(),e=this.getNextId(),this.dataObject[e]=t},n=function(t){var e,n,r,i;r={},n=this.dataObject;for(e in n)hasProp.call(n,e)&&(i=n[e],t(a(i))===!0&&(r[e]=i));return r},o=function(t){var e,n,r,i,o,s,l;s={},o=this.dataObject;for(i in o)if(hasProp.call(o,i)){l=o[i],r=!1;for(n in t)hasProp.call(t,n)&&(e=t[n],l[n]===e(r=!0)||(r=!1));r&&(s[i]=a(l))}return s},t.prototype.getNextId=function(){var t,e;return e=(new Date).getTime(),this.timeExtension++,t=this.timeExtension%1e3,t<10?e+"00"+t:t<100?e+"0"+t:""+e+t},t.prototype.scheduleSync=function(){if(!this.syncing)return this.syncing=!0,setTimeout(this.sync,0)},t.prototype.sync=function(){var t,e;return this.syncing=!1,e=(new Date).getTime(),t="0",null!=this.fileStats&&(t=this.fileStats.versionTag),this.readStat(function(n){return function(){var r;if(t!==n.fileStats.versionTag)return r=a(n.dataObject),n.readFile(function(){return n.dataObject=n.merge(r,n.dataObject),n.timeLastRead=e,n.writeFile()})}}(this))},t.prototype.getVersionTag=function(){return this.fileStats.versionTag},t.prototype.getSize=function(){var t;return t=0,null!=this.syncingAddedData&&(t=JSON.stringify(this.syncingAddedData).length),JSON.stringify(this.dataObject).length+t},t.prototype.getName=function(){return this.fileName},t.prototype.getData=function(){return a(this.dataObject)},t.prototype.getDataArray=function(){return this.toDataArray(this.dataObject)},t.prototype.toDataArray=function(t){var e,n;e=[];for(n in t)e.push(t[n]);return a(e)},t.prototype.readFile=function(t){return i.readFile(this.fileName,function(e){return function(n,i,a){if(e.error(n,t))return e.dataObject=JSON.parse(i),e.fileStats=a,r(t)}}(this))},t.prototype.writeFile=function(t){return i.writeFile(this.fileName,JSON.stringify(this.dataObject),function(e){return function(n,i){var a;if(e.error(n,t))return a=i,r(t)}}(this))},t.prototype.readStat=function(t){return i.stat(this.fileName,function(e){return function(n,i){if(e.error(n,t))return e.fileStats=i,r(t)}}(this))},t.prototype.error=function(t,e){var n;if(n=!0,null!=t)switch(t.status){case 404:n=!1,console.log("File not found - creating new file"),this.writeFile(e);break;case 503:n=!1,console.log("Too many requests - try again in 1000ms"),setTimeout(this.sync,1e3);break;default:console.error(t),n=!1}return n},t.prototype.merge=function(t,e){var n,r,i;console.log("MERGING"),r={},i=0;for(n in e)hasProp.call(e,n)&&(null!=t[n]&&(r[n]=e[n]),null==t[n]&&(i=parseInt(n.slice(0,13)),i>this.timeLastRead&&(r[n]=t[n])));return r},t}(),t}();var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};window.i18n={month:["January","February","March","April","May","June","July","August","September","October","November","December"],weekday:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},window.globals={properties:{version:"0.3",appname:"ExpenSync",appkey:"z0bumu7k3mv0nu3",developer:"Stephan Giesau",website:"http://www.stephan-giesau.de/",debug:!1},icons:["icon-ion-ios7-more","icon-ion-ios7-cart","icon-ion-fork","icon-ion-ios7-wineglass","icon-ion-ios7-musical-notes","icon-ion-ios7-pricetags","icon-ion-model-s","icon-ion-plane","icon-ion-map","icon-ion-ios7-home","icon-ion-ios7-briefcase","icon-ion-cash","icon-ion-ios7-medkit","icon-ion-university","icon-ion-ios7-home","icon-ion-ios7-telephone","icon-smile-o","icon-frown-o","icon-meh-o","icon-code","icon-question","icon-info","icon-anchor","icon-euro","icon-gbp","icon-dollar","icon-child","icon-ion-bag","icon-ion-beer","icon-ion-card","icon-ion-document-text","icon-ion-earth","icon-ion-female","icon-ion-game-controller-b","icon-ion-hammer","icon-ion-icecream","icon-ion-ios7-alarm","icon-ion-ios7-albums","icon-ion-ios7-americanfootball","icon-ion-ios7-baseball","icon-ion-ios7-bell","icon-ion-ios7-bolt","icon-ion-ios7-bookmarks","icon-ion-ios7-box","icon-ion-ios7-calendar","icon-ion-ios7-camera","icon-ion-ios7-chatboxes","icon-ion-ios7-chatbubble","icon-ion-ios7-checkmark-outline","icon-ion-ios7-cloud","icon-ion-ios7-cloudy-night","icon-ion-ios7-contact-outline","icon-ion-ios7-copy","icon-ion-ios7-drag","icon-ion-ios7-email","icon-ion-ios7-filing","icon-ion-ios7-flag","icon-ion-ios7-folder","icon-ion-ios7-football-outline","icon-ion-ios7-gear-outline","icon-ion-ios7-glasses","icon-ion-ios7-heart","icon-ion-ios7-lightbulb","icon-ion-ios7-location","icon-ion-ios7-locked","icon-ion-ios7-mic","icon-ion-ios7-monitor","icon-ion-ios7-paper","icon-ion-ios7-paperplane","icon-ion-ios7-partlysunny","icon-ion-ios7-paw","icon-ion-ios7-people","icon-ion-ios7-person","icon-ion-ios7-pie","icon-ion-ios7-printer","icon-ion-ios7-pulse-strong","icon-ion-ios7-rainy","icon-ion-ios7-search-strong","icon-ion-ios7-snowy","icon-ion-ios7-star","icon-ion-ios7-sunny","icon-ion-ios7-time","icon-ion-ios7-trash","icon-ion-ios7-unlocked","icon-ion-ios7-videocam","icon-ion-ipad","icon-ion-iphone","icon-ion-ipod","icon-ion-jet","icon-ion-key","icon-ion-knife","icon-ion-laptop","icon-ion-leaf","icon-ion-mouse","icon-ion-music-note","icon-ion-no-smoking","icon-ion-pizza","icon-ion-playstation","icon-ion-social-dropbox","icon-ion-social-usd","icon-ion-stats-bars","icon-ion-wifi","icon-ion-woman","icon-ion-wrench","icon-directions","icon-feather","icon-flashlight","icon-tools","icon-droplet","icon-hourglass","icon-cup","icon-rocket","icon-brush","icon-keyboard","icon-database","icon-clipboard","icon-graph","icon-archive"],static:{infiniteScrollItemsPerLoad:20},state:{blockedInput:!1,infiniteScrollLoading:!1},temp:{}};var Charts={filter:{timestamp:{start:0,end:Date.now()},account:""},filterFunc:{timestamp:function(t){return Charts.filter.timestamp.start<=t.timestamp&&Charts.filter.timestamp.end>=t.timestamp},account:function(){return""===Charts.filter.account||Charts.filter.account==item.account},all:function(t){return Charts.filterFunc.timestamp(t)&&Charts.filterFunc.account(t)}},draw:function(){this.categoryPie(),this.weekdayBar()},categoryPie:function(){var t={labels:[],series:[]},e=0,n=db.queryAll("category",{sort:[["order","ASC"]]});$.each(n,function(n,r){var i=db.query("item",function(t){return 0==t.deleted&&t.price<0&&t.category===r.uniqueid&&Charts.filterFunc.all(t)});if(i.length>0){var a=t.labels.length;t.labels[a]=r.description,t.series[a]=0,$.each(i,function(e,n){t.series[a]+=n.price}),e+=t.series[a]}});var r={labelInterpolationFnc:function(n,r){return n+": "+Math.round(t.series[r]/e*100)+"%"},labelOffset:40};new Chartist.Pie(".exp-stats-pie",t,r)},weekdayBar:function(){var t={labels:[],series:[[0,0,0,0,0,0,0]]};t.labels=i18n.weekday;var e={high:50,low:-50},n=db.query("item",Charts.filterFunc.all);$.each(n,function(e,n){t.series[0][new Date(n.timestamp).getDay()]+=n.price}),$.each(t.series[0],function(t,n){e.high=n>e.high?n:e.high,e.low=n<e.low?n:e.low}),new Chartist.Bar(".exp-stats-weekday",t,e)}},DROPBOX_APP_KEY="sf6zic5mzuzi7k4";window.client=null;var ds=null,dsTable=null,_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t},expApp=new Framework7({init:!1,modalTitle:"ExpenSync",notificationCloseOnClick:!0}),$$=Dom7,leftView=expApp.addView(".view-left",{dynamicNavbar:!0}),mainView=expApp.addView(".view-main",{dynamicNavbar:!0}),db=new FileDB(window.globals.properties.appkey);db.setupDropbox(function(){db.isNew()&&createLocalDatabase(),initApp()});