function rhex(e){for(str="",j=0;j<=3;j++)str+=hex_chr.charAt(e>>8*j+4&15)+hex_chr.charAt(e>>8*j&15);return str}function str2blks_MD5(e){for(nblk=(e.length+8>>6)+1,blks=new Array(16*nblk),i=0;i<16*nblk;i++)blks[i]=0;for(i=0;i<e.length;i++)blks[i>>2]|=e.charCodeAt(i)<<i%4*8;return blks[i>>2]|=128<<i%4*8,blks[16*nblk-2]=8*e.length,blks}function add(e,t){var n=(65535&e)+(65535&t),r=(e>>16)+(t>>16)+(n>>16);return r<<16|65535&n}function rol(e,t){return e<<t|e>>>32-t}function cmn(e,t,n,r,a,i){return add(rol(add(add(t,e),add(r,i)),a),n)}function ff(e,t,n,r,a,i,o){return cmn(t&n|~t&r,e,t,a,i,o)}function gg(e,t,n,r,a,i,o){return cmn(t&r|n&~r,e,t,a,i,o)}function hh(e,t,n,r,a,i,o){return cmn(t^n^r,e,t,a,i,o)}function ii(e,t,n,r,a,i,o){return cmn(n^(t|~r),e,t,a,i,o)}function calcMD5(e){for(x=str2blks_MD5(e),a=1732584193,b=-271733879,c=-1732584194,d=271733878,i=0;i<x.length;i+=16)olda=a,oldb=b,oldc=c,oldd=d,a=ff(a,b,c,d,x[i+0],7,-680876936),d=ff(d,a,b,c,x[i+1],12,-389564586),c=ff(c,d,a,b,x[i+2],17,606105819),b=ff(b,c,d,a,x[i+3],22,-1044525330),a=ff(a,b,c,d,x[i+4],7,-176418897),d=ff(d,a,b,c,x[i+5],12,1200080426),c=ff(c,d,a,b,x[i+6],17,-1473231341),b=ff(b,c,d,a,x[i+7],22,-45705983),a=ff(a,b,c,d,x[i+8],7,1770035416),d=ff(d,a,b,c,x[i+9],12,-1958414417),c=ff(c,d,a,b,x[i+10],17,-42063),b=ff(b,c,d,a,x[i+11],22,-1990404162),a=ff(a,b,c,d,x[i+12],7,1804603682),d=ff(d,a,b,c,x[i+13],12,-40341101),c=ff(c,d,a,b,x[i+14],17,-1502002290),b=ff(b,c,d,a,x[i+15],22,1236535329),a=gg(a,b,c,d,x[i+1],5,-165796510),d=gg(d,a,b,c,x[i+6],9,-1069501632),c=gg(c,d,a,b,x[i+11],14,643717713),b=gg(b,c,d,a,x[i+0],20,-373897302),a=gg(a,b,c,d,x[i+5],5,-701558691),d=gg(d,a,b,c,x[i+10],9,38016083),c=gg(c,d,a,b,x[i+15],14,-660478335),b=gg(b,c,d,a,x[i+4],20,-405537848),a=gg(a,b,c,d,x[i+9],5,568446438),d=gg(d,a,b,c,x[i+14],9,-1019803690),c=gg(c,d,a,b,x[i+3],14,-187363961),b=gg(b,c,d,a,x[i+8],20,1163531501),a=gg(a,b,c,d,x[i+13],5,-1444681467),d=gg(d,a,b,c,x[i+2],9,-51403784),c=gg(c,d,a,b,x[i+7],14,1735328473),b=gg(b,c,d,a,x[i+12],20,-1926607734),a=hh(a,b,c,d,x[i+5],4,-378558),d=hh(d,a,b,c,x[i+8],11,-2022574463),c=hh(c,d,a,b,x[i+11],16,1839030562),b=hh(b,c,d,a,x[i+14],23,-35309556),a=hh(a,b,c,d,x[i+1],4,-1530992060),d=hh(d,a,b,c,x[i+4],11,1272893353),c=hh(c,d,a,b,x[i+7],16,-155497632),b=hh(b,c,d,a,x[i+10],23,-1094730640),a=hh(a,b,c,d,x[i+13],4,681279174),d=hh(d,a,b,c,x[i+0],11,-358537222),c=hh(c,d,a,b,x[i+3],16,-722521979),b=hh(b,c,d,a,x[i+6],23,76029189),a=hh(a,b,c,d,x[i+9],4,-640364487),d=hh(d,a,b,c,x[i+12],11,-421815835),c=hh(c,d,a,b,x[i+15],16,530742520),b=hh(b,c,d,a,x[i+2],23,-995338651),a=ii(a,b,c,d,x[i+0],6,-198630844),d=ii(d,a,b,c,x[i+7],10,1126891415),c=ii(c,d,a,b,x[i+14],15,-1416354905),b=ii(b,c,d,a,x[i+5],21,-57434055),a=ii(a,b,c,d,x[i+12],6,1700485571),d=ii(d,a,b,c,x[i+3],10,-1894986606),c=ii(c,d,a,b,x[i+10],15,-1051523),b=ii(b,c,d,a,x[i+1],21,-2054922799),a=ii(a,b,c,d,x[i+8],6,1873313359),d=ii(d,a,b,c,x[i+15],10,-30611744),c=ii(c,d,a,b,x[i+6],15,-1560198380),b=ii(b,c,d,a,x[i+13],21,1309151649),a=ii(a,b,c,d,x[i+4],6,-145523070),d=ii(d,a,b,c,x[i+11],10,-1120210379),c=ii(c,d,a,b,x[i+2],15,718787259),b=ii(b,c,d,a,x[i+9],21,-343485551),a=add(a,olda),b=add(b,oldb),c=add(c,oldc),d=add(d,oldd);return rhex(a)+rhex(b)+rhex(c)+rhex(d)}!function(e,t){"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(e,t){function n(e){var t=!!e&&"length"in e&&e.length,n=ie.type(e);return"function"!==n&&!ie.isWindow(e)&&("array"===n||0===t||"number"==typeof t&&t>0&&t-1 in e)}function r(e,t,n){if(ie.isFunction(t))return ie.grep(e,function(e,r){return!!t.call(e,r,e)!==n});if(t.nodeType)return ie.grep(e,function(e){return e===t!==n});if("string"==typeof t){if(ge.test(t))return ie.filter(t,e,n);t=ie.filter(t,e)}return ie.grep(e,function(e){return Q.call(t,e)>-1!==n})}function a(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}function i(e){var t={};return ie.each(e.match(we)||[],function(e,n){t[n]=!0}),t}function o(){J.removeEventListener("DOMContentLoaded",o),e.removeEventListener("load",o),ie.ready()}function s(){this.expando=ie.expando+s.uid++}function l(e,t,n){var r;if(void 0===n&&1===e.nodeType)if(r="data-"+t.replace(De,"-$&").toLowerCase(),n=e.getAttribute(r),"string"==typeof n){try{n="true"===n||"false"!==n&&("null"===n?null:+n+""===n?+n:Ae.test(n)?ie.parseJSON(n):n)}catch(e){}ke.set(e,t,n)}else n=void 0;return n}function u(e,t,n,r){var a,i=1,o=20,s=r?function(){return r.cur()}:function(){return ie.css(e,t,"")},l=s(),u=n&&n[3]||(ie.cssNumber[t]?"":"px"),c=(ie.cssNumber[t]||"px"!==u&&+l)&&Pe.exec(ie.css(e,t));if(c&&c[3]!==u){u=u||c[3],n=n||[],c=+l||1;do i=i||".5",c/=i,ie.style(e,t,c+u);while(i!==(i=s()/l)&&1!==i&&--o)}return n&&(c=+c||+l||0,a=n[1]?c+(n[1]+1)*n[2]:+n[2],r&&(r.unit=u,r.start=c,r.end=a)),a}function c(e,t){var n="undefined"!=typeof e.getElementsByTagName?e.getElementsByTagName(t||"*"):"undefined"!=typeof e.querySelectorAll?e.querySelectorAll(t||"*"):[];return void 0===t||t&&ie.nodeName(e,t)?ie.merge([e],n):n}function d(e,t){for(var n=0,r=e.length;r>n;n++)Se.set(e[n],"globalEval",!t||Se.get(t[n],"globalEval"))}function p(e,t,n,r,a){for(var i,o,s,l,u,p,f=t.createDocumentFragment(),h=[],g=0,m=e.length;m>g;g++)if(i=e[g],i||0===i)if("object"===ie.type(i))ie.merge(h,i.nodeType?[i]:i);else if(Be.test(i)){for(o=o||f.appendChild(t.createElement("div")),s=(Me.exec(i)||["",""])[1].toLowerCase(),l=Re[s]||Re._default,o.innerHTML=l[1]+ie.htmlPrefilter(i)+l[2],p=l[0];p--;)o=o.lastChild;ie.merge(h,o.childNodes),o=f.firstChild,o.textContent=""}else h.push(t.createTextNode(i));for(f.textContent="",g=0;i=h[g++];)if(r&&ie.inArray(i,r)>-1)a&&a.push(i);else if(u=ie.contains(i.ownerDocument,i),o=c(f.appendChild(i),"script"),u&&d(o),n)for(p=0;i=o[p++];)Ne.test(i.type||"")&&n.push(i);return f}function f(){return!0}function h(){return!1}function g(){try{return J.activeElement}catch(e){}}function m(e,t,n,r,a,i){var o,s;if("object"==typeof t){"string"!=typeof n&&(r=r||n,n=void 0);for(s in t)m(e,s,n,r,t[s],i);return e}if(null==r&&null==a?(a=n,r=n=void 0):null==a&&("string"==typeof n?(a=r,r=void 0):(a=r,r=n,n=void 0)),a===!1)a=h;else if(!a)return e;return 1===i&&(o=a,a=function(e){return ie().off(e),o.apply(this,arguments)},a.guid=o.guid||(o.guid=ie.guid++)),e.each(function(){ie.event.add(this,t,a,r,n)})}function v(e,t){return ie.nodeName(e,"table")&&ie.nodeName(11!==t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function y(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function _(e){var t=Ve.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function b(e,t){var n,r,a,i,o,s,l,u;if(1===t.nodeType){if(Se.hasData(e)&&(i=Se.access(e),o=Se.set(t,i),u=i.events)){delete o.handle,o.events={};for(a in u)for(n=0,r=u[a].length;r>n;n++)ie.event.add(t,a,u[a][n])}ke.hasData(e)&&(s=ke.access(e),l=ie.extend({},s),ke.set(t,l))}}function w(e,t){var n=t.nodeName.toLowerCase();"input"===n&&Ie.test(e.type)?t.checked=e.checked:"input"!==n&&"textarea"!==n||(t.defaultValue=e.defaultValue)}function x(e,t,n,r){t=$.apply([],t);var a,i,o,s,l,u,d=0,f=e.length,h=f-1,g=t[0],m=ie.isFunction(g);if(m||f>1&&"string"==typeof g&&!re.checkClone&&qe.test(g))return e.each(function(a){var i=e.eq(a);m&&(t[0]=g.call(this,a,i.html())),x(i,t,n,r)});if(f&&(a=p(t,e[0].ownerDocument,!1,e,r),i=a.firstChild,1===a.childNodes.length&&(a=i),i||r)){for(o=ie.map(c(a,"script"),y),s=o.length;f>d;d++)l=a,d!==h&&(l=ie.clone(l,!0,!0),s&&ie.merge(o,c(l,"script"))),n.call(e[d],l,d);if(s)for(u=o[o.length-1].ownerDocument,ie.map(o,_),d=0;s>d;d++)l=o[d],Ne.test(l.type||"")&&!Se.access(l,"globalEval")&&ie.contains(u,l)&&(l.src?ie._evalUrl&&ie._evalUrl(l.src):ie.globalEval(l.textContent.replace(Ge,"")))}return e}function C(e,t,n){for(var r,a=t?ie.filter(t,e):e,i=0;null!=(r=a[i]);i++)n||1!==r.nodeType||ie.cleanData(c(r)),r.parentNode&&(n&&ie.contains(r.ownerDocument,r)&&d(c(r,"script")),r.parentNode.removeChild(r));return e}function T(e,t){var n=ie(t.createElement(e)).appendTo(t.body),r=ie.css(n[0],"display");return n.detach(),r}function S(e){var t=J,n=Xe[e];return n||(n=T(e,t),"none"!==n&&n||(We=(We||ie("<iframe frameborder='0' width='0' height='0'/>")).appendTo(t.documentElement),t=We[0].contentDocument,t.write(),t.close(),n=T(e,t),We.detach()),Xe[e]=n),n}function k(e,t,n){var r,a,i,o,s=e.style;return n=n||Ke(e),o=n?n.getPropertyValue(t)||n[t]:void 0,""!==o&&void 0!==o||ie.contains(e.ownerDocument,e)||(o=ie.style(e,t)),n&&!re.pixelMarginRight()&&Je.test(o)&&Ye.test(t)&&(r=s.width,a=s.minWidth,i=s.maxWidth,s.minWidth=s.maxWidth=s.width=o,o=n.width,s.width=r,s.minWidth=a,s.maxWidth=i),void 0!==o?o+"":o}function A(e,t){return{get:function(){return e()?void delete this.get:(this.get=t).apply(this,arguments)}}}function D(e){if(e in rt)return e;for(var t=e[0].toUpperCase()+e.slice(1),n=nt.length;n--;)if(e=nt[n]+t,e in rt)return e}function E(e,t,n){var r=Pe.exec(t);return r?Math.max(0,r[2]-(n||0))+(r[3]||"px"):t}function P(e,t,n,r,a){for(var i=n===(r?"border":"content")?4:"width"===t?1:0,o=0;4>i;i+=2)"margin"===n&&(o+=ie.css(e,n+Oe[i],!0,a)),r?("content"===n&&(o-=ie.css(e,"padding"+Oe[i],!0,a)),"margin"!==n&&(o-=ie.css(e,"border"+Oe[i]+"Width",!0,a))):(o+=ie.css(e,"padding"+Oe[i],!0,a),"padding"!==n&&(o+=ie.css(e,"border"+Oe[i]+"Width",!0,a)));return o}function O(e,t,n){var r=!0,a="width"===t?e.offsetWidth:e.offsetHeight,i=Ke(e),o="border-box"===ie.css(e,"boxSizing",!1,i);if(0>=a||null==a){if(a=k(e,t,i),(0>a||null==a)&&(a=e.style[t]),Je.test(a))return a;r=o&&(re.boxSizingReliable()||a===e.style[t]),a=parseFloat(a)||0}return a+P(e,t,n||(o?"border":"content"),r,i)+"px"}function L(e,t){for(var n,r,a,i=[],o=0,s=e.length;s>o;o++)r=e[o],r.style&&(i[o]=Se.get(r,"olddisplay"),n=r.style.display,t?(i[o]||"none"!==n||(r.style.display=""),""===r.style.display&&Le(r)&&(i[o]=Se.access(r,"olddisplay",S(r.nodeName)))):(a=Le(r),"none"===n&&a||Se.set(r,"olddisplay",a?n:ie.css(r,"display"))));for(o=0;s>o;o++)r=e[o],r.style&&(t&&"none"!==r.style.display&&""!==r.style.display||(r.style.display=t?i[o]||"":"none"));return e}function I(e,t,n,r,a){return new I.prototype.init(e,t,n,r,a)}function M(){return e.setTimeout(function(){at=void 0}),at=ie.now()}function N(e,t){var n,r=0,a={height:e};for(t=t?1:0;4>r;r+=2-t)n=Oe[r],a["margin"+n]=a["padding"+n]=e;return t&&(a.opacity=a.width=e),a}function R(e,t,n){for(var r,a=(H.tweeners[t]||[]).concat(H.tweeners["*"]),i=0,o=a.length;o>i;i++)if(r=a[i].call(n,t,e))return r}function B(e,t,n){var r,a,i,o,s,l,u,c,d=this,p={},f=e.style,h=e.nodeType&&Le(e),g=Se.get(e,"fxshow");n.queue||(s=ie._queueHooks(e,"fx"),null==s.unqueued&&(s.unqueued=0,l=s.empty.fire,s.empty.fire=function(){s.unqueued||l()}),s.unqueued++,d.always(function(){d.always(function(){s.unqueued--,ie.queue(e,"fx").length||s.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(n.overflow=[f.overflow,f.overflowX,f.overflowY],u=ie.css(e,"display"),c="none"===u?Se.get(e,"olddisplay")||S(e.nodeName):u,"inline"===c&&"none"===ie.css(e,"float")&&(f.display="inline-block")),n.overflow&&(f.overflow="hidden",d.always(function(){f.overflow=n.overflow[0],f.overflowX=n.overflow[1],f.overflowY=n.overflow[2]}));for(r in t)if(a=t[r],ot.exec(a)){if(delete t[r],i=i||"toggle"===a,a===(h?"hide":"show")){if("show"!==a||!g||void 0===g[r])continue;h=!0}p[r]=g&&g[r]||ie.style(e,r)}else u=void 0;if(ie.isEmptyObject(p))"inline"===("none"===u?S(e.nodeName):u)&&(f.display=u);else{g?"hidden"in g&&(h=g.hidden):g=Se.access(e,"fxshow",{}),i&&(g.hidden=!h),h?ie(e).show():d.done(function(){ie(e).hide()}),d.done(function(){var t;Se.remove(e,"fxshow");for(t in p)ie.style(e,t,p[t])});for(r in p)o=R(h?g[r]:0,r,d),r in g||(g[r]=o.start,h&&(o.end=o.start,o.start="width"===r||"height"===r?1:0))}}function F(e,t){var n,r,a,i,o;for(n in e)if(r=ie.camelCase(n),a=t[r],i=e[n],ie.isArray(i)&&(a=i[1],i=e[n]=i[0]),n!==r&&(e[r]=i,delete e[n]),o=ie.cssHooks[r],o&&"expand"in o){i=o.expand(i),delete e[r];for(n in i)n in e||(e[n]=i[n],t[n]=a)}else t[r]=a}function H(e,t,n){var r,a,i=0,o=H.prefilters.length,s=ie.Deferred().always(function(){delete l.elem}),l=function(){if(a)return!1;for(var t=at||M(),n=Math.max(0,u.startTime+u.duration-t),r=n/u.duration||0,i=1-r,o=0,l=u.tweens.length;l>o;o++)u.tweens[o].run(i);return s.notifyWith(e,[u,i,n]),1>i&&l?n:(s.resolveWith(e,[u]),!1)},u=s.promise({elem:e,props:ie.extend({},t),opts:ie.extend(!0,{specialEasing:{},easing:ie.easing._default},n),originalProperties:t,originalOptions:n,startTime:at||M(),duration:n.duration,tweens:[],createTween:function(t,n){var r=ie.Tween(e,u.opts,t,n,u.opts.specialEasing[t]||u.opts.easing);return u.tweens.push(r),r},stop:function(t){var n=0,r=t?u.tweens.length:0;if(a)return this;for(a=!0;r>n;n++)u.tweens[n].run(1);return t?(s.notifyWith(e,[u,1,0]),s.resolveWith(e,[u,t])):s.rejectWith(e,[u,t]),this}}),c=u.props;for(F(c,u.opts.specialEasing);o>i;i++)if(r=H.prefilters[i].call(u,e,c,u.opts))return ie.isFunction(r.stop)&&(ie._queueHooks(u.elem,u.opts.queue).stop=ie.proxy(r.stop,r)),r;return ie.map(c,R,u),ie.isFunction(u.opts.start)&&u.opts.start.call(e,u),ie.fx.timer(ie.extend(l,{elem:e,anim:u,queue:u.opts.queue})),u.progress(u.opts.progress).done(u.opts.done,u.opts.complete).fail(u.opts.fail).always(u.opts.always)}function z(e){return e.getAttribute&&e.getAttribute("class")||""}function U(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var r,a=0,i=t.toLowerCase().match(we)||[];if(ie.isFunction(n))for(;r=i[a++];)"+"===r[0]?(r=r.slice(1)||"*",(e[r]=e[r]||[]).unshift(n)):(e[r]=e[r]||[]).push(n)}}function j(e,t,n,r){function a(s){var l;return i[s]=!0,ie.each(e[s]||[],function(e,s){var u=s(t,n,r);return"string"!=typeof u||o||i[u]?o?!(l=u):void 0:(t.dataTypes.unshift(u),a(u),!1)}),l}var i={},o=e===kt;return a(t.dataTypes[0])||!i["*"]&&a("*")}function q(e,t){var n,r,a=ie.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((a[n]?e:r||(r={}))[n]=t[n]);return r&&ie.extend(!0,e,r),e}function V(e,t,n){for(var r,a,i,o,s=e.contents,l=e.dataTypes;"*"===l[0];)l.shift(),void 0===r&&(r=e.mimeType||t.getResponseHeader("Content-Type"));if(r)for(a in s)if(s[a]&&s[a].test(r)){l.unshift(a);break}if(l[0]in n)i=l[0];else{for(a in n){if(!l[0]||e.converters[a+" "+l[0]]){i=a;break}o||(o=a)}i=i||o}return i?(i!==l[0]&&l.unshift(i),n[i]):void 0}function G(e,t,n,r){var a,i,o,s,l,u={},c=e.dataTypes.slice();if(c[1])for(o in e.converters)u[o.toLowerCase()]=e.converters[o];for(i=c.shift();i;)if(e.responseFields[i]&&(n[e.responseFields[i]]=t),!l&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=i,i=c.shift())if("*"===i)i=l;else if("*"!==l&&l!==i){if(o=u[l+" "+i]||u["* "+i],!o)for(a in u)if(s=a.split(" "),s[1]===i&&(o=u[l+" "+s[0]]||u["* "+s[0]])){o===!0?o=u[a]:u[a]!==!0&&(i=s[0],c.unshift(s[1]));break}if(o!==!0)if(o&&e.throws)t=o(t);else try{t=o(t)}catch(e){return{state:"parsererror",error:o?e:"No conversion from "+l+" to "+i}}}return{state:"success",data:t}}function W(e,t,n,r){var a;if(ie.isArray(t))ie.each(t,function(t,a){n||Pt.test(e)?r(e,a):W(e+"["+("object"==typeof a&&null!=a?t:"")+"]",a,n,r)});else if(n||"object"!==ie.type(t))r(e,t);else for(a in t)W(e+"["+a+"]",t[a],n,r)}function X(e){return ie.isWindow(e)?e:9===e.nodeType&&e.defaultView}var Y=[],J=e.document,K=Y.slice,$=Y.concat,Z=Y.push,Q=Y.indexOf,ee={},te=ee.toString,ne=ee.hasOwnProperty,re={},ae="2.2.4",ie=function(e,t){return new ie.fn.init(e,t)},oe=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,se=/^-ms-/,le=/-([\da-z])/gi,ue=function(e,t){return t.toUpperCase()};ie.fn=ie.prototype={jquery:ae,constructor:ie,selector:"",length:0,toArray:function(){return K.call(this)},get:function(e){return null!=e?0>e?this[e+this.length]:this[e]:K.call(this)},pushStack:function(e){var t=ie.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e){return ie.each(this,e)},map:function(e){return this.pushStack(ie.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return this.pushStack(K.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(0>e?t:0);return this.pushStack(n>=0&&t>n?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:Z,sort:Y.sort,splice:Y.splice},ie.extend=ie.fn.extend=function(){var e,t,n,r,a,i,o=arguments[0]||{},s=1,l=arguments.length,u=!1;for("boolean"==typeof o&&(u=o,o=arguments[s]||{},s++),"object"==typeof o||ie.isFunction(o)||(o={}),s===l&&(o=this,s--);l>s;s++)if(null!=(e=arguments[s]))for(t in e)n=o[t],r=e[t],o!==r&&(u&&r&&(ie.isPlainObject(r)||(a=ie.isArray(r)))?(a?(a=!1,i=n&&ie.isArray(n)?n:[]):i=n&&ie.isPlainObject(n)?n:{},o[t]=ie.extend(u,i,r)):void 0!==r&&(o[t]=r));return o},ie.extend({expando:"jQuery"+(ae+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return"function"===ie.type(e)},isArray:Array.isArray,isWindow:function(e){return null!=e&&e===e.window},isNumeric:function(e){var t=e&&e.toString();return!ie.isArray(e)&&t-parseFloat(t)+1>=0},isPlainObject:function(e){var t;if("object"!==ie.type(e)||e.nodeType||ie.isWindow(e))return!1;if(e.constructor&&!ne.call(e,"constructor")&&!ne.call(e.constructor.prototype||{},"isPrototypeOf"))return!1;for(t in e);return void 0===t||ne.call(e,t)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?ee[te.call(e)]||"object":typeof e},globalEval:function(e){var t,n=eval;e=ie.trim(e),e&&(1===e.indexOf("use strict")?(t=J.createElement("script"),t.text=e,J.head.appendChild(t).parentNode.removeChild(t)):n(e))},camelCase:function(e){return e.replace(se,"ms-").replace(le,ue)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t){var r,a=0;if(n(e))for(r=e.length;r>a&&t.call(e[a],a,e[a])!==!1;a++);else for(a in e)if(t.call(e[a],a,e[a])===!1)break;return e},trim:function(e){return null==e?"":(e+"").replace(oe,"")},makeArray:function(e,t){var r=t||[];return null!=e&&(n(Object(e))?ie.merge(r,"string"==typeof e?[e]:e):Z.call(r,e)),r},inArray:function(e,t,n){return null==t?-1:Q.call(t,e,n)},merge:function(e,t){for(var n=+t.length,r=0,a=e.length;n>r;r++)e[a++]=t[r];return e.length=a,e},grep:function(e,t,n){for(var r,a=[],i=0,o=e.length,s=!n;o>i;i++)r=!t(e[i],i),r!==s&&a.push(e[i]);return a},map:function(e,t,r){var a,i,o=0,s=[];if(n(e))for(a=e.length;a>o;o++)i=t(e[o],o,r),null!=i&&s.push(i);else for(o in e)i=t(e[o],o,r),null!=i&&s.push(i);return $.apply([],s)},guid:1,proxy:function(e,t){var n,r,a;return"string"==typeof t&&(n=e[t],t=e,e=n),ie.isFunction(e)?(r=K.call(arguments,2),a=function(){return e.apply(t||this,r.concat(K.call(arguments)))},a.guid=e.guid=e.guid||ie.guid++,a):void 0},now:Date.now,support:re}),"function"==typeof Symbol&&(ie.fn[Symbol.iterator]=Y[Symbol.iterator]),ie.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){ee["[object "+t+"]"]=t.toLowerCase()});var ce=function(e){function t(e,t,n,r){var a,i,o,s,l,u,d,f,h=t&&t.ownerDocument,g=t?t.nodeType:9;if(n=n||[],"string"!=typeof e||!e||1!==g&&9!==g&&11!==g)return n;if(!r&&((t?t.ownerDocument||t:z)!==L&&O(t),t=t||L,M)){if(11!==g&&(u=ve.exec(e)))if(a=u[1]){if(9===g){if(!(o=t.getElementById(a)))return n;if(o.id===a)return n.push(o),n}else if(h&&(o=h.getElementById(a))&&F(t,o)&&o.id===a)return n.push(o),n}else{if(u[2])return Z.apply(n,t.getElementsByTagName(e)),n;if((a=u[3])&&w.getElementsByClassName&&t.getElementsByClassName)return Z.apply(n,t.getElementsByClassName(a)),n}if(w.qsa&&!G[e+" "]&&(!N||!N.test(e))){if(1!==g)h=t,f=e;else if("object"!==t.nodeName.toLowerCase()){for((s=t.getAttribute("id"))?s=s.replace(_e,"\\$&"):t.setAttribute("id",s=H),d=S(e),i=d.length,l=pe.test(s)?"#"+s:"[id='"+s+"']";i--;)d[i]=l+" "+p(d[i]);f=d.join(","),h=ye.test(e)&&c(t.parentNode)||t}if(f)try{return Z.apply(n,h.querySelectorAll(f)),n}catch(e){}finally{s===H&&t.removeAttribute("id")}}}return A(e.replace(se,"$1"),t,n,r)}function n(){function e(n,r){return t.push(n+" ")>x.cacheLength&&delete e[t.shift()],e[n+" "]=r}var t=[];return e}function r(e){return e[H]=!0,e}function a(e){var t=L.createElement("div");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function i(e,t){for(var n=e.split("|"),r=n.length;r--;)x.attrHandle[n[r]]=t}function o(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||X)-(~e.sourceIndex||X);if(r)return r;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function s(e){return function(t){var n=t.nodeName.toLowerCase();return"input"===n&&t.type===e}}function l(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function u(e){return r(function(t){return t=+t,r(function(n,r){for(var a,i=e([],n.length,t),o=i.length;o--;)n[a=i[o]]&&(n[a]=!(r[a]=n[a]))})})}function c(e){return e&&"undefined"!=typeof e.getElementsByTagName&&e}function d(){}function p(e){for(var t=0,n=e.length,r="";n>t;t++)r+=e[t].value;return r}function f(e,t,n){var r=t.dir,a=n&&"parentNode"===r,i=j++;return t.first?function(t,n,i){for(;t=t[r];)if(1===t.nodeType||a)return e(t,n,i)}:function(t,n,o){var s,l,u,c=[U,i];if(o){for(;t=t[r];)if((1===t.nodeType||a)&&e(t,n,o))return!0}else for(;t=t[r];)if(1===t.nodeType||a){if(u=t[H]||(t[H]={}),l=u[t.uniqueID]||(u[t.uniqueID]={}),(s=l[r])&&s[0]===U&&s[1]===i)return c[2]=s[2];if(l[r]=c,c[2]=e(t,n,o))return!0}}}function h(e){return e.length>1?function(t,n,r){for(var a=e.length;a--;)if(!e[a](t,n,r))return!1;return!0}:e[0]}function g(e,n,r){for(var a=0,i=n.length;i>a;a++)t(e,n[a],r);return r}function m(e,t,n,r,a){for(var i,o=[],s=0,l=e.length,u=null!=t;l>s;s++)(i=e[s])&&(n&&!n(i,r,a)||(o.push(i),u&&t.push(s)));return o}function v(e,t,n,a,i,o){return a&&!a[H]&&(a=v(a)),i&&!i[H]&&(i=v(i,o)),r(function(r,o,s,l){var u,c,d,p=[],f=[],h=o.length,v=r||g(t||"*",s.nodeType?[s]:s,[]),y=!e||!r&&t?v:m(v,p,e,s,l),_=n?i||(r?e:h||a)?[]:o:y;if(n&&n(y,_,s,l),a)for(u=m(_,f),a(u,[],s,l),c=u.length;c--;)(d=u[c])&&(_[f[c]]=!(y[f[c]]=d));if(r){if(i||e){if(i){for(u=[],c=_.length;c--;)(d=_[c])&&u.push(y[c]=d);i(null,_=[],u,l)}for(c=_.length;c--;)(d=_[c])&&(u=i?ee(r,d):p[c])>-1&&(r[u]=!(o[u]=d))}}else _=m(_===o?_.splice(h,_.length):_),i?i(null,o,_,l):Z.apply(o,_)})}function y(e){for(var t,n,r,a=e.length,i=x.relative[e[0].type],o=i||x.relative[" "],s=i?1:0,l=f(function(e){return e===t},o,!0),u=f(function(e){return ee(t,e)>-1},o,!0),c=[function(e,n,r){var a=!i&&(r||n!==D)||((t=n).nodeType?l(e,n,r):u(e,n,r));return t=null,a}];a>s;s++)if(n=x.relative[e[s].type])c=[f(h(c),n)];else{if(n=x.filter[e[s].type].apply(null,e[s].matches),n[H]){for(r=++s;a>r&&!x.relative[e[r].type];r++);return v(s>1&&h(c),s>1&&p(e.slice(0,s-1).concat({value:" "===e[s-2].type?"*":""})).replace(se,"$1"),n,r>s&&y(e.slice(s,r)),a>r&&y(e=e.slice(r)),a>r&&p(e))}c.push(n)}return h(c)}function _(e,n){var a=n.length>0,i=e.length>0,o=function(r,o,s,l,u){var c,d,p,f=0,h="0",g=r&&[],v=[],y=D,_=r||i&&x.find.TAG("*",u),b=U+=null==y?1:Math.random()||.1,w=_.length;for(u&&(D=o===L||o||u);h!==w&&null!=(c=_[h]);h++){if(i&&c){for(d=0,o||c.ownerDocument===L||(O(c),s=!M);p=e[d++];)if(p(c,o||L,s)){l.push(c);break}u&&(U=b)}a&&((c=!p&&c)&&f--,r&&g.push(c))}if(f+=h,a&&h!==f){for(d=0;p=n[d++];)p(g,v,o,s);if(r){if(f>0)for(;h--;)g[h]||v[h]||(v[h]=K.call(l));v=m(v)}Z.apply(l,v),u&&!r&&v.length>0&&f+n.length>1&&t.uniqueSort(l)}return u&&(U=b,D=y),g};return a?r(o):o}var b,w,x,C,T,S,k,A,D,E,P,O,L,I,M,N,R,B,F,H="sizzle"+1*new Date,z=e.document,U=0,j=0,q=n(),V=n(),G=n(),W=function(e,t){return e===t&&(P=!0),0},X=1<<31,Y={}.hasOwnProperty,J=[],K=J.pop,$=J.push,Z=J.push,Q=J.slice,ee=function(e,t){for(var n=0,r=e.length;r>n;n++)if(e[n]===t)return n;return-1},te="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",ne="[\\x20\\t\\r\\n\\f]",re="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",ae="\\["+ne+"*("+re+")(?:"+ne+"*([*^$|!~]?=)"+ne+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+re+"))|)"+ne+"*\\]",ie=":("+re+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+ae+")*)|.*)\\)|)",oe=new RegExp(ne+"+","g"),se=new RegExp("^"+ne+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ne+"+$","g"),le=new RegExp("^"+ne+"*,"+ne+"*"),ue=new RegExp("^"+ne+"*([>+~]|"+ne+")"+ne+"*"),ce=new RegExp("="+ne+"*([^\\]'\"]*?)"+ne+"*\\]","g"),de=new RegExp(ie),pe=new RegExp("^"+re+"$"),fe={ID:new RegExp("^#("+re+")"),CLASS:new RegExp("^\\.("+re+")"),TAG:new RegExp("^("+re+"|[*])"),ATTR:new RegExp("^"+ae),PSEUDO:new RegExp("^"+ie),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ne+"*(even|odd|(([+-]|)(\\d*)n|)"+ne+"*(?:([+-]|)"+ne+"*(\\d+)|))"+ne+"*\\)|)","i"),bool:new RegExp("^(?:"+te+")$","i"),needsContext:new RegExp("^"+ne+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ne+"*((?:-\\d)?\\d*)"+ne+"*\\)|)(?=[^-]|$)","i")},he=/^(?:input|select|textarea|button)$/i,ge=/^h\d$/i,me=/^[^{]+\{\s*\[native \w/,ve=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ye=/[+~]/,_e=/'|\\/g,be=new RegExp("\\\\([\\da-f]{1,6}"+ne+"?|("+ne+")|.)","ig"),we=function(e,t,n){var r="0x"+t-65536;return r!==r||n?t:0>r?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,1023&r|56320)},xe=function(){O()};try{Z.apply(J=Q.call(z.childNodes),z.childNodes),J[z.childNodes.length].nodeType}catch(e){Z={apply:J.length?function(e,t){$.apply(e,Q.call(t))}:function(e,t){for(var n=e.length,r=0;e[n++]=t[r++];);e.length=n-1}}}w=t.support={},T=t.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return!!t&&"HTML"!==t.nodeName},O=t.setDocument=function(e){var t,n,r=e?e.ownerDocument||e:z;return r!==L&&9===r.nodeType&&r.documentElement?(L=r,I=L.documentElement,M=!T(L),(n=L.defaultView)&&n.top!==n&&(n.addEventListener?n.addEventListener("unload",xe,!1):n.attachEvent&&n.attachEvent("onunload",xe)),w.attributes=a(function(e){return e.className="i",!e.getAttribute("className")}),w.getElementsByTagName=a(function(e){return e.appendChild(L.createComment("")),!e.getElementsByTagName("*").length}),w.getElementsByClassName=me.test(L.getElementsByClassName),w.getById=a(function(e){return I.appendChild(e).id=H,!L.getElementsByName||!L.getElementsByName(H).length}),w.getById?(x.find.ID=function(e,t){if("undefined"!=typeof t.getElementById&&M){var n=t.getElementById(e);return n?[n]:[]}},x.filter.ID=function(e){var t=e.replace(be,we);return function(e){return e.getAttribute("id")===t}}):(delete x.find.ID,x.filter.ID=function(e){var t=e.replace(be,we);return function(e){var n="undefined"!=typeof e.getAttributeNode&&e.getAttributeNode("id");return n&&n.value===t}}),x.find.TAG=w.getElementsByTagName?function(e,t){return"undefined"!=typeof t.getElementsByTagName?t.getElementsByTagName(e):w.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,r=[],a=0,i=t.getElementsByTagName(e);if("*"===e){for(;n=i[a++];)1===n.nodeType&&r.push(n);return r}return i},x.find.CLASS=w.getElementsByClassName&&function(e,t){return"undefined"!=typeof t.getElementsByClassName&&M?t.getElementsByClassName(e):void 0},R=[],N=[],(w.qsa=me.test(L.querySelectorAll))&&(a(function(e){I.appendChild(e).innerHTML="<a id='"+H+"'></a><select id='"+H+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&N.push("[*^$]="+ne+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||N.push("\\["+ne+"*(?:value|"+te+")"),e.querySelectorAll("[id~="+H+"-]").length||N.push("~="),e.querySelectorAll(":checked").length||N.push(":checked"),e.querySelectorAll("a#"+H+"+*").length||N.push(".#.+[+~]")}),a(function(e){var t=L.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&N.push("name"+ne+"*[*^$|!~]?="),e.querySelectorAll(":enabled").length||N.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),N.push(",.*:")})),(w.matchesSelector=me.test(B=I.matches||I.webkitMatchesSelector||I.mozMatchesSelector||I.oMatchesSelector||I.msMatchesSelector))&&a(function(e){w.disconnectedMatch=B.call(e,"div"),B.call(e,"[s!='']:x"),R.push("!=",ie)}),N=N.length&&new RegExp(N.join("|")),R=R.length&&new RegExp(R.join("|")),t=me.test(I.compareDocumentPosition),F=t||me.test(I.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},W=t?function(e,t){if(e===t)return P=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n?n:(n=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1,1&n||!w.sortDetached&&t.compareDocumentPosition(e)===n?e===L||e.ownerDocument===z&&F(z,e)?-1:t===L||t.ownerDocument===z&&F(z,t)?1:E?ee(E,e)-ee(E,t):0:4&n?-1:1)}:function(e,t){if(e===t)return P=!0,0;var n,r=0,a=e.parentNode,i=t.parentNode,s=[e],l=[t];if(!a||!i)return e===L?-1:t===L?1:a?-1:i?1:E?ee(E,e)-ee(E,t):0;if(a===i)return o(e,t);for(n=e;n=n.parentNode;)s.unshift(n);for(n=t;n=n.parentNode;)l.unshift(n);for(;s[r]===l[r];)r++;return r?o(s[r],l[r]):s[r]===z?-1:l[r]===z?1:0},L):L},t.matches=function(e,n){return t(e,null,null,n)},t.matchesSelector=function(e,n){if((e.ownerDocument||e)!==L&&O(e),n=n.replace(ce,"='$1']"),w.matchesSelector&&M&&!G[n+" "]&&(!R||!R.test(n))&&(!N||!N.test(n)))try{var r=B.call(e,n);if(r||w.disconnectedMatch||e.document&&11!==e.document.nodeType)return r}catch(e){}return t(n,L,null,[e]).length>0},t.contains=function(e,t){return(e.ownerDocument||e)!==L&&O(e),F(e,t)},t.attr=function(e,t){(e.ownerDocument||e)!==L&&O(e);var n=x.attrHandle[t.toLowerCase()],r=n&&Y.call(x.attrHandle,t.toLowerCase())?n(e,t,!M):void 0;return void 0!==r?r:w.attributes||!M?e.getAttribute(t):(r=e.getAttributeNode(t))&&r.specified?r.value:null},t.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},t.uniqueSort=function(e){var t,n=[],r=0,a=0;if(P=!w.detectDuplicates,E=!w.sortStable&&e.slice(0),e.sort(W),P){for(;t=e[a++];)t===e[a]&&(r=n.push(a));for(;r--;)e.splice(n[r],1)}return E=null,e},C=t.getText=function(e){var t,n="",r=0,a=e.nodeType;if(a){if(1===a||9===a||11===a){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=C(e)}else if(3===a||4===a)return e.nodeValue}else for(;t=e[r++];)n+=C(t);return n},x=t.selectors={cacheLength:50,createPseudo:r,match:fe,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(be,we),e[3]=(e[3]||e[4]||e[5]||"").replace(be,we),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||t.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&t.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return fe.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&de.test(n)&&(t=S(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(be,we).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=q[e+" "];return t||(t=new RegExp("(^|"+ne+")"+e+"("+ne+"|$)"))&&q(e,function(e){return t.test("string"==typeof e.className&&e.className||"undefined"!=typeof e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(e,n,r){return function(a){var i=t.attr(a,e);return null==i?"!="===n:!n||(i+="","="===n?i===r:"!="===n?i!==r:"^="===n?r&&0===i.indexOf(r):"*="===n?r&&i.indexOf(r)>-1:"$="===n?r&&i.slice(-r.length)===r:"~="===n?(" "+i.replace(oe," ")+" ").indexOf(r)>-1:"|="===n&&(i===r||i.slice(0,r.length+1)===r+"-"));
}},CHILD:function(e,t,n,r,a){var i="nth"!==e.slice(0,3),o="last"!==e.slice(-4),s="of-type"===t;return 1===r&&0===a?function(e){return!!e.parentNode}:function(t,n,l){var u,c,d,p,f,h,g=i!==o?"nextSibling":"previousSibling",m=t.parentNode,v=s&&t.nodeName.toLowerCase(),y=!l&&!s,_=!1;if(m){if(i){for(;g;){for(p=t;p=p[g];)if(s?p.nodeName.toLowerCase()===v:1===p.nodeType)return!1;h=g="only"===e&&!h&&"nextSibling"}return!0}if(h=[o?m.firstChild:m.lastChild],o&&y){for(p=m,d=p[H]||(p[H]={}),c=d[p.uniqueID]||(d[p.uniqueID]={}),u=c[e]||[],f=u[0]===U&&u[1],_=f&&u[2],p=f&&m.childNodes[f];p=++f&&p&&p[g]||(_=f=0)||h.pop();)if(1===p.nodeType&&++_&&p===t){c[e]=[U,f,_];break}}else if(y&&(p=t,d=p[H]||(p[H]={}),c=d[p.uniqueID]||(d[p.uniqueID]={}),u=c[e]||[],f=u[0]===U&&u[1],_=f),_===!1)for(;(p=++f&&p&&p[g]||(_=f=0)||h.pop())&&((s?p.nodeName.toLowerCase()!==v:1!==p.nodeType)||!++_||(y&&(d=p[H]||(p[H]={}),c=d[p.uniqueID]||(d[p.uniqueID]={}),c[e]=[U,_]),p!==t)););return _-=a,_===r||_%r===0&&_/r>=0}}},PSEUDO:function(e,n){var a,i=x.pseudos[e]||x.setFilters[e.toLowerCase()]||t.error("unsupported pseudo: "+e);return i[H]?i(n):i.length>1?(a=[e,e,"",n],x.setFilters.hasOwnProperty(e.toLowerCase())?r(function(e,t){for(var r,a=i(e,n),o=a.length;o--;)r=ee(e,a[o]),e[r]=!(t[r]=a[o])}):function(e){return i(e,0,a)}):i}},pseudos:{not:r(function(e){var t=[],n=[],a=k(e.replace(se,"$1"));return a[H]?r(function(e,t,n,r){for(var i,o=a(e,null,r,[]),s=e.length;s--;)(i=o[s])&&(e[s]=!(t[s]=i))}):function(e,r,i){return t[0]=e,a(t,null,i,n),t[0]=null,!n.pop()}}),has:r(function(e){return function(n){return t(e,n).length>0}}),contains:r(function(e){return e=e.replace(be,we),function(t){return(t.textContent||t.innerText||C(t)).indexOf(e)>-1}}),lang:r(function(e){return pe.test(e||"")||t.error("unsupported lang: "+e),e=e.replace(be,we).toLowerCase(),function(t){var n;do if(n=M?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return n=n.toLowerCase(),n===e||0===n.indexOf(e+"-");while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===I},focus:function(e){return e===L.activeElement&&(!L.hasFocus||L.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!x.pseudos.empty(e)},header:function(e){return ge.test(e.nodeName)},input:function(e){return he.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:u(function(){return[0]}),last:u(function(e,t){return[t-1]}),eq:u(function(e,t,n){return[0>n?n+t:n]}),even:u(function(e,t){for(var n=0;t>n;n+=2)e.push(n);return e}),odd:u(function(e,t){for(var n=1;t>n;n+=2)e.push(n);return e}),lt:u(function(e,t,n){for(var r=0>n?n+t:n;--r>=0;)e.push(r);return e}),gt:u(function(e,t,n){for(var r=0>n?n+t:n;++r<t;)e.push(r);return e})}},x.pseudos.nth=x.pseudos.eq;for(b in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})x.pseudos[b]=s(b);for(b in{submit:!0,reset:!0})x.pseudos[b]=l(b);return d.prototype=x.filters=x.pseudos,x.setFilters=new d,S=t.tokenize=function(e,n){var r,a,i,o,s,l,u,c=V[e+" "];if(c)return n?0:c.slice(0);for(s=e,l=[],u=x.preFilter;s;){r&&!(a=le.exec(s))||(a&&(s=s.slice(a[0].length)||s),l.push(i=[])),r=!1,(a=ue.exec(s))&&(r=a.shift(),i.push({value:r,type:a[0].replace(se," ")}),s=s.slice(r.length));for(o in x.filter)!(a=fe[o].exec(s))||u[o]&&!(a=u[o](a))||(r=a.shift(),i.push({value:r,type:o,matches:a}),s=s.slice(r.length));if(!r)break}return n?s.length:s?t.error(e):V(e,l).slice(0)},k=t.compile=function(e,t){var n,r=[],a=[],i=G[e+" "];if(!i){for(t||(t=S(e)),n=t.length;n--;)i=y(t[n]),i[H]?r.push(i):a.push(i);i=G(e,_(a,r)),i.selector=e}return i},A=t.select=function(e,t,n,r){var a,i,o,s,l,u="function"==typeof e&&e,d=!r&&S(e=u.selector||e);if(n=n||[],1===d.length){if(i=d[0]=d[0].slice(0),i.length>2&&"ID"===(o=i[0]).type&&w.getById&&9===t.nodeType&&M&&x.relative[i[1].type]){if(t=(x.find.ID(o.matches[0].replace(be,we),t)||[])[0],!t)return n;u&&(t=t.parentNode),e=e.slice(i.shift().value.length)}for(a=fe.needsContext.test(e)?0:i.length;a--&&(o=i[a],!x.relative[s=o.type]);)if((l=x.find[s])&&(r=l(o.matches[0].replace(be,we),ye.test(i[0].type)&&c(t.parentNode)||t))){if(i.splice(a,1),e=r.length&&p(i),!e)return Z.apply(n,r),n;break}}return(u||k(e,d))(r,t,!M,n,!t||ye.test(e)&&c(t.parentNode)||t),n},w.sortStable=H.split("").sort(W).join("")===H,w.detectDuplicates=!!P,O(),w.sortDetached=a(function(e){return 1&e.compareDocumentPosition(L.createElement("div"))}),a(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||i("type|href|height|width",function(e,t,n){return n?void 0:e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),w.attributes&&a(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||i("value",function(e,t,n){return n||"input"!==e.nodeName.toLowerCase()?void 0:e.defaultValue}),a(function(e){return null==e.getAttribute("disabled")})||i(te,function(e,t,n){var r;return n?void 0:e[t]===!0?t.toLowerCase():(r=e.getAttributeNode(t))&&r.specified?r.value:null}),t}(e);ie.find=ce,ie.expr=ce.selectors,ie.expr[":"]=ie.expr.pseudos,ie.uniqueSort=ie.unique=ce.uniqueSort,ie.text=ce.getText,ie.isXMLDoc=ce.isXML,ie.contains=ce.contains;var de=function(e,t,n){for(var r=[],a=void 0!==n;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(a&&ie(e).is(n))break;r.push(e)}return r},pe=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},fe=ie.expr.match.needsContext,he=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,ge=/^.[^:#\[\.,]*$/;ie.filter=function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===r.nodeType?ie.find.matchesSelector(r,e)?[r]:[]:ie.find.matches(e,ie.grep(t,function(e){return 1===e.nodeType}))},ie.fn.extend({find:function(e){var t,n=this.length,r=[],a=this;if("string"!=typeof e)return this.pushStack(ie(e).filter(function(){for(t=0;n>t;t++)if(ie.contains(a[t],this))return!0}));for(t=0;n>t;t++)ie.find(e,a[t],r);return r=this.pushStack(n>1?ie.unique(r):r),r.selector=this.selector?this.selector+" "+e:e,r},filter:function(e){return this.pushStack(r(this,e||[],!1))},not:function(e){return this.pushStack(r(this,e||[],!0))},is:function(e){return!!r(this,"string"==typeof e&&fe.test(e)?ie(e):e||[],!1).length}});var me,ve=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,ye=ie.fn.init=function(e,t,n){var r,a;if(!e)return this;if(n=n||me,"string"==typeof e){if(r="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:ve.exec(e),!r||!r[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(r[1]){if(t=t instanceof ie?t[0]:t,ie.merge(this,ie.parseHTML(r[1],t&&t.nodeType?t.ownerDocument||t:J,!0)),he.test(r[1])&&ie.isPlainObject(t))for(r in t)ie.isFunction(this[r])?this[r](t[r]):this.attr(r,t[r]);return this}return a=J.getElementById(r[2]),a&&a.parentNode&&(this.length=1,this[0]=a),this.context=J,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):ie.isFunction(e)?void 0!==n.ready?n.ready(e):e(ie):(void 0!==e.selector&&(this.selector=e.selector,this.context=e.context),ie.makeArray(e,this))};ye.prototype=ie.fn,me=ie(J);var _e=/^(?:parents|prev(?:Until|All))/,be={children:!0,contents:!0,next:!0,prev:!0};ie.fn.extend({has:function(e){var t=ie(e,this),n=t.length;return this.filter(function(){for(var e=0;n>e;e++)if(ie.contains(this,t[e]))return!0})},closest:function(e,t){for(var n,r=0,a=this.length,i=[],o=fe.test(e)||"string"!=typeof e?ie(e,t||this.context):0;a>r;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(o?o.index(n)>-1:1===n.nodeType&&ie.find.matchesSelector(n,e))){i.push(n);break}return this.pushStack(i.length>1?ie.uniqueSort(i):i)},index:function(e){return e?"string"==typeof e?Q.call(ie(e),this[0]):Q.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(ie.uniqueSort(ie.merge(this.get(),ie(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),ie.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return de(e,"parentNode")},parentsUntil:function(e,t,n){return de(e,"parentNode",n)},next:function(e){return a(e,"nextSibling")},prev:function(e){return a(e,"previousSibling")},nextAll:function(e){return de(e,"nextSibling")},prevAll:function(e){return de(e,"previousSibling")},nextUntil:function(e,t,n){return de(e,"nextSibling",n)},prevUntil:function(e,t,n){return de(e,"previousSibling",n)},siblings:function(e){return pe((e.parentNode||{}).firstChild,e)},children:function(e){return pe(e.firstChild)},contents:function(e){return e.contentDocument||ie.merge([],e.childNodes)}},function(e,t){ie.fn[e]=function(n,r){var a=ie.map(this,t,n);return"Until"!==e.slice(-5)&&(r=n),r&&"string"==typeof r&&(a=ie.filter(r,a)),this.length>1&&(be[e]||ie.uniqueSort(a),_e.test(e)&&a.reverse()),this.pushStack(a)}});var we=/\S+/g;ie.Callbacks=function(e){e="string"==typeof e?i(e):ie.extend({},e);var t,n,r,a,o=[],s=[],l=-1,u=function(){for(a=e.once,r=t=!0;s.length;l=-1)for(n=s.shift();++l<o.length;)o[l].apply(n[0],n[1])===!1&&e.stopOnFalse&&(l=o.length,n=!1);e.memory||(n=!1),t=!1,a&&(o=n?[]:"")},c={add:function(){return o&&(n&&!t&&(l=o.length-1,s.push(n)),function t(n){ie.each(n,function(n,r){ie.isFunction(r)?e.unique&&c.has(r)||o.push(r):r&&r.length&&"string"!==ie.type(r)&&t(r)})}(arguments),n&&!t&&u()),this},remove:function(){return ie.each(arguments,function(e,t){for(var n;(n=ie.inArray(t,o,n))>-1;)o.splice(n,1),l>=n&&l--}),this},has:function(e){return e?ie.inArray(e,o)>-1:o.length>0},empty:function(){return o&&(o=[]),this},disable:function(){return a=s=[],o=n="",this},disabled:function(){return!o},lock:function(){return a=s=[],n||(o=n=""),this},locked:function(){return!!a},fireWith:function(e,n){return a||(n=n||[],n=[e,n.slice?n.slice():n],s.push(n),t||u()),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!r}};return c},ie.extend({Deferred:function(e){var t=[["resolve","done",ie.Callbacks("once memory"),"resolved"],["reject","fail",ie.Callbacks("once memory"),"rejected"],["notify","progress",ie.Callbacks("memory")]],n="pending",r={state:function(){return n},always:function(){return a.done(arguments).fail(arguments),this},then:function(){var e=arguments;return ie.Deferred(function(n){ie.each(t,function(t,i){var o=ie.isFunction(e[t])&&e[t];a[i[1]](function(){var e=o&&o.apply(this,arguments);e&&ie.isFunction(e.promise)?e.promise().progress(n.notify).done(n.resolve).fail(n.reject):n[i[0]+"With"](this===r?n.promise():this,o?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?ie.extend(e,r):r}},a={};return r.pipe=r.then,ie.each(t,function(e,i){var o=i[2],s=i[3];r[i[1]]=o.add,s&&o.add(function(){n=s},t[1^e][2].disable,t[2][2].lock),a[i[0]]=function(){return a[i[0]+"With"](this===a?r:this,arguments),this},a[i[0]+"With"]=o.fireWith}),r.promise(a),e&&e.call(a,a),a},when:function(e){var t,n,r,a=0,i=K.call(arguments),o=i.length,s=1!==o||e&&ie.isFunction(e.promise)?o:0,l=1===s?e:ie.Deferred(),u=function(e,n,r){return function(a){n[e]=this,r[e]=arguments.length>1?K.call(arguments):a,r===t?l.notifyWith(n,r):--s||l.resolveWith(n,r)}};if(o>1)for(t=new Array(o),n=new Array(o),r=new Array(o);o>a;a++)i[a]&&ie.isFunction(i[a].promise)?i[a].promise().progress(u(a,n,t)).done(u(a,r,i)).fail(l.reject):--s;return s||l.resolveWith(r,i),l.promise()}});var xe;ie.fn.ready=function(e){return ie.ready.promise().done(e),this},ie.extend({isReady:!1,readyWait:1,holdReady:function(e){e?ie.readyWait++:ie.ready(!0)},ready:function(e){(e===!0?--ie.readyWait:ie.isReady)||(ie.isReady=!0,e!==!0&&--ie.readyWait>0||(xe.resolveWith(J,[ie]),ie.fn.triggerHandler&&(ie(J).triggerHandler("ready"),ie(J).off("ready"))))}}),ie.ready.promise=function(t){return xe||(xe=ie.Deferred(),"complete"===J.readyState||"loading"!==J.readyState&&!J.documentElement.doScroll?e.setTimeout(ie.ready):(J.addEventListener("DOMContentLoaded",o),e.addEventListener("load",o))),xe.promise(t)},ie.ready.promise();var Ce=function(e,t,n,r,a,i,o){var s=0,l=e.length,u=null==n;if("object"===ie.type(n)){a=!0;for(s in n)Ce(e,t,s,n[s],!0,i,o)}else if(void 0!==r&&(a=!0,ie.isFunction(r)||(o=!0),u&&(o?(t.call(e,r),t=null):(u=t,t=function(e,t,n){return u.call(ie(e),n)})),t))for(;l>s;s++)t(e[s],n,o?r:r.call(e[s],s,t(e[s],n)));return a?e:u?t.call(e):l?t(e[0],n):i},Te=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};s.uid=1,s.prototype={register:function(e,t){var n=t||{};return e.nodeType?e[this.expando]=n:Object.defineProperty(e,this.expando,{value:n,writable:!0,configurable:!0}),e[this.expando]},cache:function(e){if(!Te(e))return{};var t=e[this.expando];return t||(t={},Te(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var r,a=this.cache(e);if("string"==typeof t)a[t]=n;else for(r in t)a[r]=t[r];return a},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][t]},access:function(e,t,n){var r;return void 0===t||t&&"string"==typeof t&&void 0===n?(r=this.get(e,t),void 0!==r?r:this.get(e,ie.camelCase(t))):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,r,a,i=e[this.expando];if(void 0!==i){if(void 0===t)this.register(e);else{ie.isArray(t)?r=t.concat(t.map(ie.camelCase)):(a=ie.camelCase(t),t in i?r=[t,a]:(r=a,r=r in i?[r]:r.match(we)||[])),n=r.length;for(;n--;)delete i[r[n]]}(void 0===t||ie.isEmptyObject(i))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!ie.isEmptyObject(t)}};var Se=new s,ke=new s,Ae=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,De=/[A-Z]/g;ie.extend({hasData:function(e){return ke.hasData(e)||Se.hasData(e)},data:function(e,t,n){return ke.access(e,t,n)},removeData:function(e,t){ke.remove(e,t)},_data:function(e,t,n){return Se.access(e,t,n)},_removeData:function(e,t){Se.remove(e,t)}}),ie.fn.extend({data:function(e,t){var n,r,a,i=this[0],o=i&&i.attributes;if(void 0===e){if(this.length&&(a=ke.get(i),1===i.nodeType&&!Se.get(i,"hasDataAttrs"))){for(n=o.length;n--;)o[n]&&(r=o[n].name,0===r.indexOf("data-")&&(r=ie.camelCase(r.slice(5)),l(i,r,a[r])));Se.set(i,"hasDataAttrs",!0)}return a}return"object"==typeof e?this.each(function(){ke.set(this,e)}):Ce(this,function(t){var n,r;if(i&&void 0===t){if(n=ke.get(i,e)||ke.get(i,e.replace(De,"-$&").toLowerCase()),void 0!==n)return n;if(r=ie.camelCase(e),n=ke.get(i,r),void 0!==n)return n;if(n=l(i,r,void 0),void 0!==n)return n}else r=ie.camelCase(e),this.each(function(){var n=ke.get(this,r);ke.set(this,r,t),e.indexOf("-")>-1&&void 0!==n&&ke.set(this,e,t)})},null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){ke.remove(this,e)})}}),ie.extend({queue:function(e,t,n){var r;return e?(t=(t||"fx")+"queue",r=Se.get(e,t),n&&(!r||ie.isArray(n)?r=Se.access(e,t,ie.makeArray(n)):r.push(n)),r||[]):void 0},dequeue:function(e,t){t=t||"fx";var n=ie.queue(e,t),r=n.length,a=n.shift(),i=ie._queueHooks(e,t),o=function(){ie.dequeue(e,t)};"inprogress"===a&&(a=n.shift(),r--),a&&("fx"===t&&n.unshift("inprogress"),delete i.stop,a.call(e,o,i)),!r&&i&&i.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return Se.get(e,n)||Se.access(e,n,{empty:ie.Callbacks("once memory").add(function(){Se.remove(e,[t+"queue",n])})})}}),ie.fn.extend({queue:function(e,t){var n=2;return"string"!=typeof e&&(t=e,e="fx",n--),arguments.length<n?ie.queue(this[0],e):void 0===t?this:this.each(function(){var n=ie.queue(this,e,t);ie._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&ie.dequeue(this,e)})},dequeue:function(e){return this.each(function(){ie.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,r=1,a=ie.Deferred(),i=this,o=this.length,s=function(){--r||a.resolveWith(i,[i])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";o--;)n=Se.get(i[o],e+"queueHooks"),n&&n.empty&&(r++,n.empty.add(s));return s(),a.promise(t)}});var Ee=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Pe=new RegExp("^(?:([+-])=|)("+Ee+")([a-z%]*)$","i"),Oe=["Top","Right","Bottom","Left"],Le=function(e,t){return e=t||e,"none"===ie.css(e,"display")||!ie.contains(e.ownerDocument,e)},Ie=/^(?:checkbox|radio)$/i,Me=/<([\w:-]+)/,Ne=/^$|\/(?:java|ecma)script/i,Re={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Re.optgroup=Re.option,Re.tbody=Re.tfoot=Re.colgroup=Re.caption=Re.thead,Re.th=Re.td;var Be=/<|&#?\w+;/;!function(){var e=J.createDocumentFragment(),t=e.appendChild(J.createElement("div")),n=J.createElement("input");n.setAttribute("type","radio"),n.setAttribute("checked","checked"),n.setAttribute("name","t"),t.appendChild(n),re.checkClone=t.cloneNode(!0).cloneNode(!0).lastChild.checked,t.innerHTML="<textarea>x</textarea>",re.noCloneChecked=!!t.cloneNode(!0).lastChild.defaultValue}();var Fe=/^key/,He=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,ze=/^([^.]*)(?:\.(.+)|)/;ie.event={global:{},add:function(e,t,n,r,a){var i,o,s,l,u,c,d,p,f,h,g,m=Se.get(e);if(m)for(n.handler&&(i=n,n=i.handler,a=i.selector),n.guid||(n.guid=ie.guid++),(l=m.events)||(l=m.events={}),(o=m.handle)||(o=m.handle=function(t){return"undefined"!=typeof ie&&ie.event.triggered!==t.type?ie.event.dispatch.apply(e,arguments):void 0}),t=(t||"").match(we)||[""],u=t.length;u--;)s=ze.exec(t[u])||[],f=g=s[1],h=(s[2]||"").split(".").sort(),f&&(d=ie.event.special[f]||{},f=(a?d.delegateType:d.bindType)||f,d=ie.event.special[f]||{},c=ie.extend({type:f,origType:g,data:r,handler:n,guid:n.guid,selector:a,needsContext:a&&ie.expr.match.needsContext.test(a),namespace:h.join(".")},i),(p=l[f])||(p=l[f]=[],p.delegateCount=0,d.setup&&d.setup.call(e,r,h,o)!==!1||e.addEventListener&&e.addEventListener(f,o)),d.add&&(d.add.call(e,c),c.handler.guid||(c.handler.guid=n.guid)),a?p.splice(p.delegateCount++,0,c):p.push(c),ie.event.global[f]=!0)},remove:function(e,t,n,r,a){var i,o,s,l,u,c,d,p,f,h,g,m=Se.hasData(e)&&Se.get(e);if(m&&(l=m.events)){for(t=(t||"").match(we)||[""],u=t.length;u--;)if(s=ze.exec(t[u])||[],f=g=s[1],h=(s[2]||"").split(".").sort(),f){for(d=ie.event.special[f]||{},f=(r?d.delegateType:d.bindType)||f,p=l[f]||[],s=s[2]&&new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"),o=i=p.length;i--;)c=p[i],!a&&g!==c.origType||n&&n.guid!==c.guid||s&&!s.test(c.namespace)||r&&r!==c.selector&&("**"!==r||!c.selector)||(p.splice(i,1),c.selector&&p.delegateCount--,d.remove&&d.remove.call(e,c));o&&!p.length&&(d.teardown&&d.teardown.call(e,h,m.handle)!==!1||ie.removeEvent(e,f,m.handle),delete l[f])}else for(f in l)ie.event.remove(e,f+t[u],n,r,!0);ie.isEmptyObject(l)&&Se.remove(e,"handle events")}},dispatch:function(e){e=ie.event.fix(e);var t,n,r,a,i,o=[],s=K.call(arguments),l=(Se.get(this,"events")||{})[e.type]||[],u=ie.event.special[e.type]||{};if(s[0]=e,e.delegateTarget=this,!u.preDispatch||u.preDispatch.call(this,e)!==!1){for(o=ie.event.handlers.call(this,e,l),t=0;(a=o[t++])&&!e.isPropagationStopped();)for(e.currentTarget=a.elem,n=0;(i=a.handlers[n++])&&!e.isImmediatePropagationStopped();)e.rnamespace&&!e.rnamespace.test(i.namespace)||(e.handleObj=i,e.data=i.data,r=((ie.event.special[i.origType]||{}).handle||i.handler).apply(a.elem,s),void 0!==r&&(e.result=r)===!1&&(e.preventDefault(),e.stopPropagation()));return u.postDispatch&&u.postDispatch.call(this,e),e.result}},handlers:function(e,t){var n,r,a,i,o=[],s=t.delegateCount,l=e.target;if(s&&l.nodeType&&("click"!==e.type||isNaN(e.button)||e.button<1))for(;l!==this;l=l.parentNode||this)if(1===l.nodeType&&(l.disabled!==!0||"click"!==e.type)){for(r=[],n=0;s>n;n++)i=t[n],a=i.selector+" ",void 0===r[a]&&(r[a]=i.needsContext?ie(a,this).index(l)>-1:ie.find(a,this,null,[l]).length),r[a]&&r.push(i);r.length&&o.push({elem:l,handlers:r})}return s<t.length&&o.push({elem:this,handlers:t.slice(s)}),o},props:"altKey bubbles cancelable ctrlKey currentTarget detail eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,t){var n,r,a,i=t.button;return null==e.pageX&&null!=t.clientX&&(n=e.target.ownerDocument||J,r=n.documentElement,a=n.body,e.pageX=t.clientX+(r&&r.scrollLeft||a&&a.scrollLeft||0)-(r&&r.clientLeft||a&&a.clientLeft||0),e.pageY=t.clientY+(r&&r.scrollTop||a&&a.scrollTop||0)-(r&&r.clientTop||a&&a.clientTop||0)),e.which||void 0===i||(e.which=1&i?1:2&i?3:4&i?2:0),e}},fix:function(e){if(e[ie.expando])return e;var t,n,r,a=e.type,i=e,o=this.fixHooks[a];for(o||(this.fixHooks[a]=o=He.test(a)?this.mouseHooks:Fe.test(a)?this.keyHooks:{}),r=o.props?this.props.concat(o.props):this.props,e=new ie.Event(i),t=r.length;t--;)n=r[t],e[n]=i[n];return e.target||(e.target=J),3===e.target.nodeType&&(e.target=e.target.parentNode),o.filter?o.filter(e,i):e},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==g()&&this.focus?(this.focus(),!1):void 0},delegateType:"focusin"},blur:{trigger:function(){return this===g()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&ie.nodeName(this,"input")?(this.click(),!1):void 0},_default:function(e){return ie.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},ie.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},ie.Event=function(e,t){return this instanceof ie.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&e.returnValue===!1?f:h):this.type=e,t&&ie.extend(this,t),this.timeStamp=e&&e.timeStamp||ie.now(),void(this[ie.expando]=!0)):new ie.Event(e,t)},ie.Event.prototype={constructor:ie.Event,isDefaultPrevented:h,isPropagationStopped:h,isImmediatePropagationStopped:h,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=f,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=f,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=f,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},ie.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){ie.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=this,a=e.relatedTarget,i=e.handleObj;return a&&(a===r||ie.contains(r,a))||(e.type=i.origType,n=i.handler.apply(this,arguments),e.type=t),n}}}),ie.fn.extend({on:function(e,t,n,r){return m(this,e,t,n,r)},one:function(e,t,n,r){return m(this,e,t,n,r,1)},off:function(e,t,n){var r,a;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,ie(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof e){for(a in e)this.off(a,t,e[a]);return this}return t!==!1&&"function"!=typeof t||(n=t,t=void 0),n===!1&&(n=h),this.each(function(){ie.event.remove(this,e,n,t)})}});var Ue=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,je=/<script|<style|<link/i,qe=/checked\s*(?:[^=]|=\s*.checked.)/i,Ve=/^true\/(.*)/,Ge=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;ie.extend({htmlPrefilter:function(e){return e.replace(Ue,"<$1></$2>")},clone:function(e,t,n){var r,a,i,o,s=e.cloneNode(!0),l=ie.contains(e.ownerDocument,e);if(!(re.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||ie.isXMLDoc(e)))for(o=c(s),i=c(e),r=0,a=i.length;a>r;r++)w(i[r],o[r]);if(t)if(n)for(i=i||c(e),o=o||c(s),r=0,a=i.length;a>r;r++)b(i[r],o[r]);else b(e,s);return o=c(s,"script"),o.length>0&&d(o,!l&&c(e,"script")),s},cleanData:function(e){for(var t,n,r,a=ie.event.special,i=0;void 0!==(n=e[i]);i++)if(Te(n)){if(t=n[Se.expando]){if(t.events)for(r in t.events)a[r]?ie.event.remove(n,r):ie.removeEvent(n,r,t.handle);n[Se.expando]=void 0}n[ke.expando]&&(n[ke.expando]=void 0)}}}),ie.fn.extend({domManip:x,detach:function(e){return C(this,e,!0)},remove:function(e){return C(this,e)},text:function(e){return Ce(this,function(e){return void 0===e?ie.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)})},null,e,arguments.length)},append:function(){return x(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=v(this,e);t.appendChild(e)}})},prepend:function(){return x(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=v(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return x(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return x(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(ie.cleanData(c(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return ie.clone(this,e,t)})},html:function(e){return Ce(this,function(e){var t=this[0]||{},n=0,r=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!je.test(e)&&!Re[(Me.exec(e)||["",""])[1].toLowerCase()]){e=ie.htmlPrefilter(e);try{for(;r>n;n++)t=this[n]||{},1===t.nodeType&&(ie.cleanData(c(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=[];return x(this,arguments,function(t){var n=this.parentNode;ie.inArray(this,e)<0&&(ie.cleanData(c(this)),n&&n.replaceChild(t,this))},e)}}),ie.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){ie.fn[e]=function(e){for(var n,r=[],a=ie(e),i=a.length-1,o=0;i>=o;o++)n=o===i?this:this.clone(!0),ie(a[o])[t](n),Z.apply(r,n.get());return this.pushStack(r)}});var We,Xe={HTML:"block",BODY:"block"},Ye=/^margin/,Je=new RegExp("^("+Ee+")(?!px)[a-z%]+$","i"),Ke=function(t){var n=t.ownerDocument.defaultView;return n&&n.opener||(n=e),n.getComputedStyle(t)},$e=function(e,t,n,r){var a,i,o={};for(i in t)o[i]=e.style[i],e.style[i]=t[i];a=n.apply(e,r||[]);for(i in t)e.style[i]=o[i];return a},Ze=J.documentElement;!function(){function t(){s.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",s.innerHTML="",Ze.appendChild(o);var t=e.getComputedStyle(s);n="1%"!==t.top,i="2px"===t.marginLeft,r="4px"===t.width,s.style.marginRight="50%",a="4px"===t.marginRight,Ze.removeChild(o)}var n,r,a,i,o=J.createElement("div"),s=J.createElement("div");s.style&&(s.style.backgroundClip="content-box",s.cloneNode(!0).style.backgroundClip="",re.clearCloneStyle="content-box"===s.style.backgroundClip,o.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",o.appendChild(s),ie.extend(re,{pixelPosition:function(){return t(),n},boxSizingReliable:function(){return null==r&&t(),r},pixelMarginRight:function(){return null==r&&t(),a},reliableMarginLeft:function(){return null==r&&t(),i},reliableMarginRight:function(){var t,n=s.appendChild(J.createElement("div"));return n.style.cssText=s.style.cssText="-webkit-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",n.style.marginRight=n.style.width="0",s.style.width="1px",Ze.appendChild(o),t=!parseFloat(e.getComputedStyle(n).marginRight),Ze.removeChild(o),s.removeChild(n),t}}))}();var Qe=/^(none|table(?!-c[ea]).+)/,et={position:"absolute",visibility:"hidden",display:"block"},tt={letterSpacing:"0",fontWeight:"400"},nt=["Webkit","O","Moz","ms"],rt=J.createElement("div").style;ie.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=k(e,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:"cssFloat"},style:function(e,t,n,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var a,i,o,s=ie.camelCase(t),l=e.style;return t=ie.cssProps[s]||(ie.cssProps[s]=D(s)||s),o=ie.cssHooks[t]||ie.cssHooks[s],void 0===n?o&&"get"in o&&void 0!==(a=o.get(e,!1,r))?a:l[t]:(i=typeof n,"string"===i&&(a=Pe.exec(n))&&a[1]&&(n=u(e,t,a),i="number"),void(null!=n&&n===n&&("number"===i&&(n+=a&&a[3]||(ie.cssNumber[s]?"":"px")),re.clearCloneStyle||""!==n||0!==t.indexOf("background")||(l[t]="inherit"),o&&"set"in o&&void 0===(n=o.set(e,n,r))||(l[t]=n))))}},css:function(e,t,n,r){var a,i,o,s=ie.camelCase(t);return t=ie.cssProps[s]||(ie.cssProps[s]=D(s)||s),o=ie.cssHooks[t]||ie.cssHooks[s],o&&"get"in o&&(a=o.get(e,!0,n)),void 0===a&&(a=k(e,t,r)),"normal"===a&&t in tt&&(a=tt[t]),""===n||n?(i=parseFloat(a),n===!0||isFinite(i)?i||0:a):a}}),ie.each(["height","width"],function(e,t){ie.cssHooks[t]={get:function(e,n,r){return n?Qe.test(ie.css(e,"display"))&&0===e.offsetWidth?$e(e,et,function(){return O(e,t,r)}):O(e,t,r):void 0},set:function(e,n,r){var a,i=r&&Ke(e),o=r&&P(e,t,r,"border-box"===ie.css(e,"boxSizing",!1,i),i);return o&&(a=Pe.exec(n))&&"px"!==(a[3]||"px")&&(e.style[t]=n,n=ie.css(e,t)),E(e,n,o)}}}),ie.cssHooks.marginLeft=A(re.reliableMarginLeft,function(e,t){return t?(parseFloat(k(e,"marginLeft"))||e.getBoundingClientRect().left-$e(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px":void 0}),ie.cssHooks.marginRight=A(re.reliableMarginRight,function(e,t){return t?$e(e,{display:"inline-block"},k,[e,"marginRight"]):void 0}),ie.each({margin:"",padding:"",border:"Width"},function(e,t){ie.cssHooks[e+t]={expand:function(n){for(var r=0,a={},i="string"==typeof n?n.split(" "):[n];4>r;r++)a[e+Oe[r]+t]=i[r]||i[r-2]||i[0];return a}},Ye.test(e)||(ie.cssHooks[e+t].set=E)}),ie.fn.extend({css:function(e,t){return Ce(this,function(e,t,n){var r,a,i={},o=0;if(ie.isArray(t)){for(r=Ke(e),a=t.length;a>o;o++)i[t[o]]=ie.css(e,t[o],!1,r);return i}return void 0!==n?ie.style(e,t,n):ie.css(e,t)},e,t,arguments.length>1)},show:function(){return L(this,!0)},hide:function(){return L(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){Le(this)?ie(this).show():ie(this).hide()})}}),ie.Tween=I,I.prototype={constructor:I,init:function(e,t,n,r,a,i){this.elem=e,this.prop=n,this.easing=a||ie.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=i||(ie.cssNumber[n]?"":"px")},cur:function(){var e=I.propHooks[this.prop];return e&&e.get?e.get(this):I.propHooks._default.get(this)},run:function(e){var t,n=I.propHooks[this.prop];return this.options.duration?this.pos=t=ie.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):I.propHooks._default.set(this),this}},I.prototype.init.prototype=I.prototype,I.propHooks={_default:{get:function(e){
var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=ie.css(e.elem,e.prop,""),t&&"auto"!==t?t:0)},set:function(e){ie.fx.step[e.prop]?ie.fx.step[e.prop](e):1!==e.elem.nodeType||null==e.elem.style[ie.cssProps[e.prop]]&&!ie.cssHooks[e.prop]?e.elem[e.prop]=e.now:ie.style(e.elem,e.prop,e.now+e.unit)}}},I.propHooks.scrollTop=I.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},ie.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},ie.fx=I.prototype.init,ie.fx.step={};var at,it,ot=/^(?:toggle|show|hide)$/,st=/queueHooks$/;ie.Animation=ie.extend(H,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return u(n.elem,e,Pe.exec(t),n),n}]},tweener:function(e,t){ie.isFunction(e)?(t=e,e=["*"]):e=e.match(we);for(var n,r=0,a=e.length;a>r;r++)n=e[r],H.tweeners[n]=H.tweeners[n]||[],H.tweeners[n].unshift(t)},prefilters:[B],prefilter:function(e,t){t?H.prefilters.unshift(e):H.prefilters.push(e)}}),ie.speed=function(e,t,n){var r=e&&"object"==typeof e?ie.extend({},e):{complete:n||!n&&t||ie.isFunction(e)&&e,duration:e,easing:n&&t||t&&!ie.isFunction(t)&&t};return r.duration=ie.fx.off?0:"number"==typeof r.duration?r.duration:r.duration in ie.fx.speeds?ie.fx.speeds[r.duration]:ie.fx.speeds._default,null!=r.queue&&r.queue!==!0||(r.queue="fx"),r.old=r.complete,r.complete=function(){ie.isFunction(r.old)&&r.old.call(this),r.queue&&ie.dequeue(this,r.queue)},r},ie.fn.extend({fadeTo:function(e,t,n,r){return this.filter(Le).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var a=ie.isEmptyObject(e),i=ie.speed(t,n,r),o=function(){var t=H(this,ie.extend({},e),i);(a||Se.get(this,"finish"))&&t.stop(!0)};return o.finish=o,a||i.queue===!1?this.each(o):this.queue(i.queue,o)},stop:function(e,t,n){var r=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=t,t=e,e=void 0),t&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,a=null!=e&&e+"queueHooks",i=ie.timers,o=Se.get(this);if(a)o[a]&&o[a].stop&&r(o[a]);else for(a in o)o[a]&&o[a].stop&&st.test(a)&&r(o[a]);for(a=i.length;a--;)i[a].elem!==this||null!=e&&i[a].queue!==e||(i[a].anim.stop(n),t=!1,i.splice(a,1));!t&&n||ie.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var t,n=Se.get(this),r=n[e+"queue"],a=n[e+"queueHooks"],i=ie.timers,o=r?r.length:0;for(n.finish=!0,ie.queue(this,e,[]),a&&a.stop&&a.stop.call(this,!0),t=i.length;t--;)i[t].elem===this&&i[t].queue===e&&(i[t].anim.stop(!0),i.splice(t,1));for(t=0;o>t;t++)r[t]&&r[t].finish&&r[t].finish.call(this);delete n.finish})}}),ie.each(["toggle","show","hide"],function(e,t){var n=ie.fn[t];ie.fn[t]=function(e,r,a){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(N(t,!0),e,r,a)}}),ie.each({slideDown:N("show"),slideUp:N("hide"),slideToggle:N("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){ie.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),ie.timers=[],ie.fx.tick=function(){var e,t=0,n=ie.timers;for(at=ie.now();t<n.length;t++)e=n[t],e()||n[t]!==e||n.splice(t--,1);n.length||ie.fx.stop(),at=void 0},ie.fx.timer=function(e){ie.timers.push(e),e()?ie.fx.start():ie.timers.pop()},ie.fx.interval=13,ie.fx.start=function(){it||(it=e.setInterval(ie.fx.tick,ie.fx.interval))},ie.fx.stop=function(){e.clearInterval(it),it=null},ie.fx.speeds={slow:600,fast:200,_default:400},ie.fn.delay=function(t,n){return t=ie.fx?ie.fx.speeds[t]||t:t,n=n||"fx",this.queue(n,function(n,r){var a=e.setTimeout(n,t);r.stop=function(){e.clearTimeout(a)}})},function(){var e=J.createElement("input"),t=J.createElement("select"),n=t.appendChild(J.createElement("option"));e.type="checkbox",re.checkOn=""!==e.value,re.optSelected=n.selected,t.disabled=!0,re.optDisabled=!n.disabled,e=J.createElement("input"),e.value="t",e.type="radio",re.radioValue="t"===e.value}();var lt,ut=ie.expr.attrHandle;ie.fn.extend({attr:function(e,t){return Ce(this,ie.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){ie.removeAttr(this,e)})}}),ie.extend({attr:function(e,t,n){var r,a,i=e.nodeType;if(3!==i&&8!==i&&2!==i)return"undefined"==typeof e.getAttribute?ie.prop(e,t,n):(1===i&&ie.isXMLDoc(e)||(t=t.toLowerCase(),a=ie.attrHooks[t]||(ie.expr.match.bool.test(t)?lt:void 0)),void 0!==n?null===n?void ie.removeAttr(e,t):a&&"set"in a&&void 0!==(r=a.set(e,n,t))?r:(e.setAttribute(t,n+""),n):a&&"get"in a&&null!==(r=a.get(e,t))?r:(r=ie.find.attr(e,t),null==r?void 0:r))},attrHooks:{type:{set:function(e,t){if(!re.radioValue&&"radio"===t&&ie.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,r,a=0,i=t&&t.match(we);if(i&&1===e.nodeType)for(;n=i[a++];)r=ie.propFix[n]||n,ie.expr.match.bool.test(n)&&(e[r]=!1),e.removeAttribute(n)}}),lt={set:function(e,t,n){return t===!1?ie.removeAttr(e,n):e.setAttribute(n,n),n}},ie.each(ie.expr.match.bool.source.match(/\w+/g),function(e,t){var n=ut[t]||ie.find.attr;ut[t]=function(e,t,r){var a,i;return r||(i=ut[t],ut[t]=a,a=null!=n(e,t,r)?t.toLowerCase():null,ut[t]=i),a}});var ct=/^(?:input|select|textarea|button)$/i,dt=/^(?:a|area)$/i;ie.fn.extend({prop:function(e,t){return Ce(this,ie.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[ie.propFix[e]||e]})}}),ie.extend({prop:function(e,t,n){var r,a,i=e.nodeType;if(3!==i&&8!==i&&2!==i)return 1===i&&ie.isXMLDoc(e)||(t=ie.propFix[t]||t,a=ie.propHooks[t]),void 0!==n?a&&"set"in a&&void 0!==(r=a.set(e,n,t))?r:e[t]=n:a&&"get"in a&&null!==(r=a.get(e,t))?r:e[t]},propHooks:{tabIndex:{get:function(e){var t=ie.find.attr(e,"tabindex");return t?parseInt(t,10):ct.test(e.nodeName)||dt.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),re.optSelected||(ie.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),ie.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){ie.propFix[this.toLowerCase()]=this});var pt=/[\t\r\n\f]/g;ie.fn.extend({addClass:function(e){var t,n,r,a,i,o,s,l=0;if(ie.isFunction(e))return this.each(function(t){ie(this).addClass(e.call(this,t,z(this)))});if("string"==typeof e&&e)for(t=e.match(we)||[];n=this[l++];)if(a=z(n),r=1===n.nodeType&&(" "+a+" ").replace(pt," ")){for(o=0;i=t[o++];)r.indexOf(" "+i+" ")<0&&(r+=i+" ");s=ie.trim(r),a!==s&&n.setAttribute("class",s)}return this},removeClass:function(e){var t,n,r,a,i,o,s,l=0;if(ie.isFunction(e))return this.each(function(t){ie(this).removeClass(e.call(this,t,z(this)))});if(!arguments.length)return this.attr("class","");if("string"==typeof e&&e)for(t=e.match(we)||[];n=this[l++];)if(a=z(n),r=1===n.nodeType&&(" "+a+" ").replace(pt," ")){for(o=0;i=t[o++];)for(;r.indexOf(" "+i+" ")>-1;)r=r.replace(" "+i+" "," ");s=ie.trim(r),a!==s&&n.setAttribute("class",s)}return this},toggleClass:function(e,t){var n=typeof e;return"boolean"==typeof t&&"string"===n?t?this.addClass(e):this.removeClass(e):ie.isFunction(e)?this.each(function(n){ie(this).toggleClass(e.call(this,n,z(this),t),t)}):this.each(function(){var t,r,a,i;if("string"===n)for(r=0,a=ie(this),i=e.match(we)||[];t=i[r++];)a.hasClass(t)?a.removeClass(t):a.addClass(t);else void 0!==e&&"boolean"!==n||(t=z(this),t&&Se.set(this,"__className__",t),this.setAttribute&&this.setAttribute("class",t||e===!1?"":Se.get(this,"__className__")||""))})},hasClass:function(e){var t,n,r=0;for(t=" "+e+" ";n=this[r++];)if(1===n.nodeType&&(" "+z(n)+" ").replace(pt," ").indexOf(t)>-1)return!0;return!1}});var ft=/\r/g,ht=/[\x20\t\r\n\f]+/g;ie.fn.extend({val:function(e){var t,n,r,a=this[0];return arguments.length?(r=ie.isFunction(e),this.each(function(n){var a;1===this.nodeType&&(a=r?e.call(this,n,ie(this).val()):e,null==a?a="":"number"==typeof a?a+="":ie.isArray(a)&&(a=ie.map(a,function(e){return null==e?"":e+""})),t=ie.valHooks[this.type]||ie.valHooks[this.nodeName.toLowerCase()],t&&"set"in t&&void 0!==t.set(this,a,"value")||(this.value=a))})):a?(t=ie.valHooks[a.type]||ie.valHooks[a.nodeName.toLowerCase()],t&&"get"in t&&void 0!==(n=t.get(a,"value"))?n:(n=a.value,"string"==typeof n?n.replace(ft,""):null==n?"":n)):void 0}}),ie.extend({valHooks:{option:{get:function(e){var t=ie.find.attr(e,"value");return null!=t?t:ie.trim(ie.text(e)).replace(ht," ")}},select:{get:function(e){for(var t,n,r=e.options,a=e.selectedIndex,i="select-one"===e.type||0>a,o=i?null:[],s=i?a+1:r.length,l=0>a?s:i?a:0;s>l;l++)if(n=r[l],(n.selected||l===a)&&(re.optDisabled?!n.disabled:null===n.getAttribute("disabled"))&&(!n.parentNode.disabled||!ie.nodeName(n.parentNode,"optgroup"))){if(t=ie(n).val(),i)return t;o.push(t)}return o},set:function(e,t){for(var n,r,a=e.options,i=ie.makeArray(t),o=a.length;o--;)r=a[o],(r.selected=ie.inArray(ie.valHooks.option.get(r),i)>-1)&&(n=!0);return n||(e.selectedIndex=-1),i}}}}),ie.each(["radio","checkbox"],function(){ie.valHooks[this]={set:function(e,t){return ie.isArray(t)?e.checked=ie.inArray(ie(e).val(),t)>-1:void 0}},re.checkOn||(ie.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})});var gt=/^(?:focusinfocus|focusoutblur)$/;ie.extend(ie.event,{trigger:function(t,n,r,a){var i,o,s,l,u,c,d,p=[r||J],f=ne.call(t,"type")?t.type:t,h=ne.call(t,"namespace")?t.namespace.split("."):[];if(o=s=r=r||J,3!==r.nodeType&&8!==r.nodeType&&!gt.test(f+ie.event.triggered)&&(f.indexOf(".")>-1&&(h=f.split("."),f=h.shift(),h.sort()),u=f.indexOf(":")<0&&"on"+f,t=t[ie.expando]?t:new ie.Event(f,"object"==typeof t&&t),t.isTrigger=a?2:3,t.namespace=h.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=r),n=null==n?[t]:ie.makeArray(n,[t]),d=ie.event.special[f]||{},a||!d.trigger||d.trigger.apply(r,n)!==!1)){if(!a&&!d.noBubble&&!ie.isWindow(r)){for(l=d.delegateType||f,gt.test(l+f)||(o=o.parentNode);o;o=o.parentNode)p.push(o),s=o;s===(r.ownerDocument||J)&&p.push(s.defaultView||s.parentWindow||e)}for(i=0;(o=p[i++])&&!t.isPropagationStopped();)t.type=i>1?l:d.bindType||f,c=(Se.get(o,"events")||{})[t.type]&&Se.get(o,"handle"),c&&c.apply(o,n),c=u&&o[u],c&&c.apply&&Te(o)&&(t.result=c.apply(o,n),t.result===!1&&t.preventDefault());return t.type=f,a||t.isDefaultPrevented()||d._default&&d._default.apply(p.pop(),n)!==!1||!Te(r)||u&&ie.isFunction(r[f])&&!ie.isWindow(r)&&(s=r[u],s&&(r[u]=null),ie.event.triggered=f,r[f](),ie.event.triggered=void 0,s&&(r[u]=s)),t.result}},simulate:function(e,t,n){var r=ie.extend(new ie.Event,n,{type:e,isSimulated:!0});ie.event.trigger(r,null,t)}}),ie.fn.extend({trigger:function(e,t){return this.each(function(){ie.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];return n?ie.event.trigger(e,t,n,!0):void 0}}),ie.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){ie.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),ie.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),re.focusin="onfocusin"in e,re.focusin||ie.each({focus:"focusin",blur:"focusout"},function(e,t){var n=function(e){ie.event.simulate(t,e.target,ie.event.fix(e))};ie.event.special[t]={setup:function(){var r=this.ownerDocument||this,a=Se.access(r,t);a||r.addEventListener(e,n,!0),Se.access(r,t,(a||0)+1)},teardown:function(){var r=this.ownerDocument||this,a=Se.access(r,t)-1;a?Se.access(r,t,a):(r.removeEventListener(e,n,!0),Se.remove(r,t))}}});var mt=e.location,vt=ie.now(),yt=/\?/;ie.parseJSON=function(e){return JSON.parse(e+"")},ie.parseXML=function(t){var n;if(!t||"string"!=typeof t)return null;try{n=(new e.DOMParser).parseFromString(t,"text/xml")}catch(e){n=void 0}return n&&!n.getElementsByTagName("parsererror").length||ie.error("Invalid XML: "+t),n};var _t=/#.*$/,bt=/([?&])_=[^&]*/,wt=/^(.*?):[ \t]*([^\r\n]*)$/gm,xt=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Ct=/^(?:GET|HEAD)$/,Tt=/^\/\//,St={},kt={},At="*/".concat("*"),Dt=J.createElement("a");Dt.href=mt.href,ie.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:mt.href,type:"GET",isLocal:xt.test(mt.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":At,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":ie.parseJSON,"text xml":ie.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?q(q(e,ie.ajaxSettings),t):q(ie.ajaxSettings,e)},ajaxPrefilter:U(St),ajaxTransport:U(kt),ajax:function(t,n){function r(t,n,r,s){var u,d,y,_,w,C=n;2!==b&&(b=2,l&&e.clearTimeout(l),a=void 0,o=s||"",x.readyState=t>0?4:0,u=t>=200&&300>t||304===t,r&&(_=V(p,x,r)),_=G(p,_,x,u),u?(p.ifModified&&(w=x.getResponseHeader("Last-Modified"),w&&(ie.lastModified[i]=w),w=x.getResponseHeader("etag"),w&&(ie.etag[i]=w)),204===t||"HEAD"===p.type?C="nocontent":304===t?C="notmodified":(C=_.state,d=_.data,y=_.error,u=!y)):(y=C,!t&&C||(C="error",0>t&&(t=0))),x.status=t,x.statusText=(n||C)+"",u?g.resolveWith(f,[d,C,x]):g.rejectWith(f,[x,C,y]),x.statusCode(v),v=void 0,c&&h.trigger(u?"ajaxSuccess":"ajaxError",[x,p,u?d:y]),m.fireWith(f,[x,C]),c&&(h.trigger("ajaxComplete",[x,p]),--ie.active||ie.event.trigger("ajaxStop")))}"object"==typeof t&&(n=t,t=void 0),n=n||{};var a,i,o,s,l,u,c,d,p=ie.ajaxSetup({},n),f=p.context||p,h=p.context&&(f.nodeType||f.jquery)?ie(f):ie.event,g=ie.Deferred(),m=ie.Callbacks("once memory"),v=p.statusCode||{},y={},_={},b=0,w="canceled",x={readyState:0,getResponseHeader:function(e){var t;if(2===b){if(!s)for(s={};t=wt.exec(o);)s[t[1].toLowerCase()]=t[2];t=s[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===b?o:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return b||(e=_[n]=_[n]||e,y[e]=t),this},overrideMimeType:function(e){return b||(p.mimeType=e),this},statusCode:function(e){var t;if(e)if(2>b)for(t in e)v[t]=[v[t],e[t]];else x.always(e[x.status]);return this},abort:function(e){var t=e||w;return a&&a.abort(t),r(0,t),this}};if(g.promise(x).complete=m.add,x.success=x.done,x.error=x.fail,p.url=((t||p.url||mt.href)+"").replace(_t,"").replace(Tt,mt.protocol+"//"),p.type=n.method||n.type||p.method||p.type,p.dataTypes=ie.trim(p.dataType||"*").toLowerCase().match(we)||[""],null==p.crossDomain){u=J.createElement("a");try{u.href=p.url,u.href=u.href,p.crossDomain=Dt.protocol+"//"+Dt.host!=u.protocol+"//"+u.host}catch(e){p.crossDomain=!0}}if(p.data&&p.processData&&"string"!=typeof p.data&&(p.data=ie.param(p.data,p.traditional)),j(St,p,n,x),2===b)return x;c=ie.event&&p.global,c&&0===ie.active++&&ie.event.trigger("ajaxStart"),p.type=p.type.toUpperCase(),p.hasContent=!Ct.test(p.type),i=p.url,p.hasContent||(p.data&&(i=p.url+=(yt.test(i)?"&":"?")+p.data,delete p.data),p.cache===!1&&(p.url=bt.test(i)?i.replace(bt,"$1_="+vt++):i+(yt.test(i)?"&":"?")+"_="+vt++)),p.ifModified&&(ie.lastModified[i]&&x.setRequestHeader("If-Modified-Since",ie.lastModified[i]),ie.etag[i]&&x.setRequestHeader("If-None-Match",ie.etag[i])),(p.data&&p.hasContent&&p.contentType!==!1||n.contentType)&&x.setRequestHeader("Content-Type",p.contentType),x.setRequestHeader("Accept",p.dataTypes[0]&&p.accepts[p.dataTypes[0]]?p.accepts[p.dataTypes[0]]+("*"!==p.dataTypes[0]?", "+At+"; q=0.01":""):p.accepts["*"]);for(d in p.headers)x.setRequestHeader(d,p.headers[d]);if(p.beforeSend&&(p.beforeSend.call(f,x,p)===!1||2===b))return x.abort();w="abort";for(d in{success:1,error:1,complete:1})x[d](p[d]);if(a=j(kt,p,n,x)){if(x.readyState=1,c&&h.trigger("ajaxSend",[x,p]),2===b)return x;p.async&&p.timeout>0&&(l=e.setTimeout(function(){x.abort("timeout")},p.timeout));try{b=1,a.send(y,r)}catch(e){if(!(2>b))throw e;r(-1,e)}}else r(-1,"No Transport");return x},getJSON:function(e,t,n){return ie.get(e,t,n,"json")},getScript:function(e,t){return ie.get(e,void 0,t,"script")}}),ie.each(["get","post"],function(e,t){ie[t]=function(e,n,r,a){return ie.isFunction(n)&&(a=a||r,r=n,n=void 0),ie.ajax(ie.extend({url:e,type:t,dataType:a,data:n,success:r},ie.isPlainObject(e)&&e))}}),ie._evalUrl=function(e){return ie.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,throws:!0})},ie.fn.extend({wrapAll:function(e){var t;return ie.isFunction(e)?this.each(function(t){ie(this).wrapAll(e.call(this,t))}):(this[0]&&(t=ie(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this)},wrapInner:function(e){return ie.isFunction(e)?this.each(function(t){ie(this).wrapInner(e.call(this,t))}):this.each(function(){var t=ie(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=ie.isFunction(e);return this.each(function(n){ie(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){ie.nodeName(this,"body")||ie(this).replaceWith(this.childNodes)}).end()}}),ie.expr.filters.hidden=function(e){return!ie.expr.filters.visible(e)},ie.expr.filters.visible=function(e){return e.offsetWidth>0||e.offsetHeight>0||e.getClientRects().length>0};var Et=/%20/g,Pt=/\[\]$/,Ot=/\r?\n/g,Lt=/^(?:submit|button|image|reset|file)$/i,It=/^(?:input|select|textarea|keygen)/i;ie.param=function(e,t){var n,r=[],a=function(e,t){t=ie.isFunction(t)?t():null==t?"":t,r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(void 0===t&&(t=ie.ajaxSettings&&ie.ajaxSettings.traditional),ie.isArray(e)||e.jquery&&!ie.isPlainObject(e))ie.each(e,function(){a(this.name,this.value)});else for(n in e)W(n,e[n],t,a);return r.join("&").replace(Et,"+")},ie.fn.extend({serialize:function(){return ie.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=ie.prop(this,"elements");return e?ie.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!ie(this).is(":disabled")&&It.test(this.nodeName)&&!Lt.test(e)&&(this.checked||!Ie.test(e))}).map(function(e,t){var n=ie(this).val();return null==n?null:ie.isArray(n)?ie.map(n,function(e){return{name:t.name,value:e.replace(Ot,"\r\n")}}):{name:t.name,value:n.replace(Ot,"\r\n")}}).get()}}),ie.ajaxSettings.xhr=function(){try{return new e.XMLHttpRequest}catch(e){}};var Mt={0:200,1223:204},Nt=ie.ajaxSettings.xhr();re.cors=!!Nt&&"withCredentials"in Nt,re.ajax=Nt=!!Nt,ie.ajaxTransport(function(t){var n,r;return re.cors||Nt&&!t.crossDomain?{send:function(a,i){var o,s=t.xhr();if(s.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(o in t.xhrFields)s[o]=t.xhrFields[o];t.mimeType&&s.overrideMimeType&&s.overrideMimeType(t.mimeType),t.crossDomain||a["X-Requested-With"]||(a["X-Requested-With"]="XMLHttpRequest");for(o in a)s.setRequestHeader(o,a[o]);n=function(e){return function(){n&&(n=r=s.onload=s.onerror=s.onabort=s.onreadystatechange=null,"abort"===e?s.abort():"error"===e?"number"!=typeof s.status?i(0,"error"):i(s.status,s.statusText):i(Mt[s.status]||s.status,s.statusText,"text"!==(s.responseType||"text")||"string"!=typeof s.responseText?{binary:s.response}:{text:s.responseText},s.getAllResponseHeaders()))}},s.onload=n(),r=s.onerror=n("error"),void 0!==s.onabort?s.onabort=r:s.onreadystatechange=function(){4===s.readyState&&e.setTimeout(function(){n&&r()})},n=n("abort");try{s.send(t.hasContent&&t.data||null)}catch(e){if(n)throw e}},abort:function(){n&&n()}}:void 0}),ie.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return ie.globalEval(e),e}}}),ie.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),ie.ajaxTransport("script",function(e){if(e.crossDomain){var t,n;return{send:function(r,a){t=ie("<script>").prop({charset:e.scriptCharset,src:e.url}).on("load error",n=function(e){t.remove(),n=null,e&&a("error"===e.type?404:200,e.type)}),J.head.appendChild(t[0])},abort:function(){n&&n()}}}});var Rt=[],Bt=/(=)\?(?=&|$)|\?\?/;ie.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Rt.pop()||ie.expando+"_"+vt++;return this[e]=!0,e}}),ie.ajaxPrefilter("json jsonp",function(t,n,r){var a,i,o,s=t.jsonp!==!1&&(Bt.test(t.url)?"url":"string"==typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&Bt.test(t.data)&&"data");return s||"jsonp"===t.dataTypes[0]?(a=t.jsonpCallback=ie.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,s?t[s]=t[s].replace(Bt,"$1"+a):t.jsonp!==!1&&(t.url+=(yt.test(t.url)?"&":"?")+t.jsonp+"="+a),t.converters["script json"]=function(){return o||ie.error(a+" was not called"),o[0]},t.dataTypes[0]="json",i=e[a],e[a]=function(){o=arguments},r.always(function(){void 0===i?ie(e).removeProp(a):e[a]=i,t[a]&&(t.jsonpCallback=n.jsonpCallback,Rt.push(a)),o&&ie.isFunction(i)&&i(o[0]),o=i=void 0}),"script"):void 0}),ie.parseHTML=function(e,t,n){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(n=t,t=!1),t=t||J;var r=he.exec(e),a=!n&&[];return r?[t.createElement(r[1])]:(r=p([e],t,a),a&&a.length&&ie(a).remove(),ie.merge([],r.childNodes))};var Ft=ie.fn.load;ie.fn.load=function(e,t,n){if("string"!=typeof e&&Ft)return Ft.apply(this,arguments);var r,a,i,o=this,s=e.indexOf(" ");return s>-1&&(r=ie.trim(e.slice(s)),e=e.slice(0,s)),ie.isFunction(t)?(n=t,t=void 0):t&&"object"==typeof t&&(a="POST"),o.length>0&&ie.ajax({url:e,type:a||"GET",dataType:"html",data:t}).done(function(e){i=arguments,o.html(r?ie("<div>").append(ie.parseHTML(e)).find(r):e)}).always(n&&function(e,t){o.each(function(){n.apply(this,i||[e.responseText,t,e])})}),this},ie.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){ie.fn[t]=function(e){return this.on(t,e)}}),ie.expr.filters.animated=function(e){return ie.grep(ie.timers,function(t){return e===t.elem}).length},ie.offset={setOffset:function(e,t,n){var r,a,i,o,s,l,u,c=ie.css(e,"position"),d=ie(e),p={};"static"===c&&(e.style.position="relative"),s=d.offset(),i=ie.css(e,"top"),l=ie.css(e,"left"),u=("absolute"===c||"fixed"===c)&&(i+l).indexOf("auto")>-1,u?(r=d.position(),o=r.top,a=r.left):(o=parseFloat(i)||0,a=parseFloat(l)||0),ie.isFunction(t)&&(t=t.call(e,n,ie.extend({},s))),null!=t.top&&(p.top=t.top-s.top+o),null!=t.left&&(p.left=t.left-s.left+a),"using"in t?t.using.call(e,p):d.css(p)}},ie.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){ie.offset.setOffset(this,e,t)});var t,n,r=this[0],a={top:0,left:0},i=r&&r.ownerDocument;return i?(t=i.documentElement,ie.contains(t,r)?(a=r.getBoundingClientRect(),n=X(i),{top:a.top+n.pageYOffset-t.clientTop,left:a.left+n.pageXOffset-t.clientLeft}):a):void 0},position:function(){if(this[0]){var e,t,n=this[0],r={top:0,left:0};return"fixed"===ie.css(n,"position")?t=n.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),ie.nodeName(e[0],"html")||(r=e.offset()),r.top+=ie.css(e[0],"borderTopWidth",!0),r.left+=ie.css(e[0],"borderLeftWidth",!0)),{top:t.top-r.top-ie.css(n,"marginTop",!0),left:t.left-r.left-ie.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent;e&&"static"===ie.css(e,"position");)e=e.offsetParent;return e||Ze})}}),ie.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var n="pageYOffset"===t;ie.fn[e]=function(r){return Ce(this,function(e,r,a){var i=X(e);return void 0===a?i?i[t]:e[r]:void(i?i.scrollTo(n?i.pageXOffset:a,n?a:i.pageYOffset):e[r]=a)},e,r,arguments.length)}}),ie.each(["top","left"],function(e,t){ie.cssHooks[t]=A(re.pixelPosition,function(e,n){return n?(n=k(e,t),Je.test(n)?ie(e).position()[t]+"px":n):void 0})}),ie.each({Height:"height",Width:"width"},function(e,t){ie.each({padding:"inner"+e,content:t,"":"outer"+e},function(n,r){ie.fn[r]=function(r,a){var i=arguments.length&&(n||"boolean"!=typeof r),o=n||(r===!0||a===!0?"margin":"border");return Ce(this,function(t,n,r){var a;return ie.isWindow(t)?t.document.documentElement["client"+e]:9===t.nodeType?(a=t.documentElement,Math.max(t.body["scroll"+e],a["scroll"+e],t.body["offset"+e],a["offset"+e],a["client"+e])):void 0===r?ie.css(t,n,o):ie.style(t,n,r,o)},t,i?r:void 0,i,null)}})}),ie.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)},size:function(){return this.length}}),ie.fn.andSelf=ie.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return ie});var Ht=e.jQuery,zt=e.$;return ie.noConflict=function(t){return e.$===ie&&(e.$=zt),t&&e.jQuery===ie&&(e.jQuery=Ht),ie},t||(e.jQuery=e.$=ie),ie}),!function(){"use strict";window.Framework7=function(t){function n(e){var t=e.replace(/^./,function(e){return e.toUpperCase()});i["onPage"+t]=function(t,n){return i.onPage(e,t,n)}}function r(){var e,t=s(this),n=t[0].scrollTop,r=t[0].scrollHeight,a=t[0].offsetHeight,i=t[0].getAttribute("data-distance"),o=t.find(".virtual-list"),l=t.hasClass("infinite-scroll-top");if(i||(i=50),"string"==typeof i&&i.indexOf("%")>=0&&(i=parseInt(i,10)/100*a),i>a&&(i=a),l)i>n&&t.trigger("infinite");else if(n+a>=r-i){if(o.length>0&&(e=o[0].f7VirtualList,e&&!e.reachEnd))return;t.trigger("infinite")}}function a(){i.device.ipad&&(document.body.scrollLeft=0,setTimeout(function(){document.body.scrollLeft=0},0))}var i=this;i.version="1.0.1",i.params={cache:!0,cacheIgnore:[],cacheIgnoreGetParameters:!1,cacheDuration:6e5,preloadPreviousPage:!0,uniqueHistory:!1,uniqueHistoryIgnoreGetParameters:!1,dynamicPageUrl:"content-{{index}}",allowDuplicateUrls:!1,router:!0,pushState:!1,pushStateRoot:void 0,pushStateNoAnimation:!1,pushStateSeparator:"#!/",fastClicks:!0,fastClicksDistanceThreshold:0,fastClicksDelayBetweenClicks:50,activeState:!0,activeStateElements:"a, button, label, span",animateNavBackIcon:!1,swipeBackPage:!0,swipeBackPageThreshold:0,swipeBackPageActiveArea:30,swipeBackPageAnimateShadow:!0,swipeBackPageAnimateOpacity:!0,ajaxLinks:void 0,externalLinks:".external",sortable:!0,hideNavbarOnPageScroll:!1,hideToolbarOnPageScroll:!1,hideTabbarOnPageScroll:!1,showBarsOnPageScrollEnd:!0,swipeout:!0,swipeoutActionsNoFold:!1,swipeoutNoFollow:!1,smartSelectBackTemplate:'<div class="left sliding"><a href="#" class="back link"><i class="icon icon-back"></i><span>{{backText}}</span></a></div>',smartSelectBackText:"Back",smartSelectInPopup:!1,smartSelectPopupCloseTemplate:'<div class="left"><a href="#" class="link close-popup"><i class="icon icon-back"></i><span>{{closeText}}</span></a></div>',smartSelectPopupCloseText:"Close",smartSelectSearchbar:!1,smartSelectBackOnSelect:!1,searchbarHideDividers:!0,searchbarHideGroups:!0,scrollTopOnNavbarClick:!1,scrollTopOnStatusbarClick:!1,swipePanel:!1,swipePanelActiveArea:0,swipePanelCloseOpposite:!0,swipePanelOnlyClose:!1,swipePanelNoFollow:!1,swipePanelThreshold:0,panelsCloseByOutside:!0,modalButtonOk:"OK",modalButtonCancel:"Cancel",modalUsernamePlaceholder:"Username",modalPasswordPlaceholder:"Password",modalTitle:"Framework7",modalCloseByOutside:!1,actionsCloseByOutside:!0,popupCloseByOutside:!0,modalPreloaderTitle:"Loading... ",modalStack:!0,imagesLazyLoadThreshold:0,imagesLazyLoadSequential:!0,viewClass:"view",viewMainClass:"view-main",viewsClass:"views",notificationCloseOnClick:!1,notificationCloseIcon:!0,animatePages:!0,templates:{},template7Data:{},template7Pages:!1,precompileTemplates:!1,init:!0};for(var o in t)i.params[o]=t[o];var s=e,l=Template7;i._compiledTemplates={},i.touchEvents={start:i.support.touch?"touchstart":"mousedown",move:i.support.touch?"touchmove":"mousemove",end:i.support.touch?"touchend":"mouseup"},i.ls=localStorage,i.rtl="rtl"===s("body").css("direction"),i.rtl&&s("html").attr("dir","rtl"),"undefined"!=typeof i.params.statusbarOverlay&&(i.params.statusbarOverlay?s("html").addClass("with-statusbar-overlay"):s("html").removeClass("with-statusbar-overlay")),i.views=[];var u=function(e,t){var n,r={dynamicNavbar:!1,domCache:!1,linksView:void 0,reloadPages:!1,uniqueHistory:i.params.uniqueHistory,uniqueHistoryIgnoreGetParameters:i.params.uniqueHistoryIgnoreGetParameters,allowDuplicateUrls:i.params.allowDuplicateUrls,swipeBackPage:i.params.swipeBackPage,swipeBackPageAnimateShadow:i.params.swipeBackPageAnimateShadow,swipeBackPageAnimateOpacity:i.params.swipeBackPageAnimateOpacity,swipeBackPageActiveArea:i.params.swipeBackPageActiveArea,swipeBackPageThreshold:i.params.swipeBackPageThreshold,animatePages:i.params.animatePages,preloadPreviousPage:i.params.preloadPreviousPage};t=t||{};for(var a in r)"undefined"==typeof t[a]&&(t[a]=r[a]);var o=this;o.params=t,o.selector=e;var l=s(e);if(o.container=l[0],o.contentCache={},o.pagesCache={},l[0].f7View=o,o.pagesContainer=l.find(".pages")[0],o.initialPages=[],o.initialNavbars=[],o.params.domCache){var u=l.find(".page");for(n=0;n<u.length;n++)o.initialPages.push(u[n]);if(o.params.dynamicNavbar){var c=l.find(".navbar-inner");for(n=0;n<c.length;n++)o.initialNavbars.push(c[n])}}o.allowPageChange=!0;var d=document.location.href;o.history=[];var p=d,f=i.params.pushStateSeparator,h=i.params.pushStateRoot;i.params.pushState&&(h?p=h:p.indexOf(f)>=0&&p.indexOf(f+"#")<0&&(p=p.split(f)[0]));var g,m;o.activePage||(g=s(o.pagesContainer).find(".page-on-center"),0===g.length&&(g=s(o.pagesContainer).find(".page:not(.cached)"),g=g.eq(g.length-1)),g.length>0&&(m=g[0].f7PageData)),o.params.domCache&&g?(o.url=l.attr("data-url")||o.params.url||"#"+g.attr("data-page"),o.pagesCache[o.url]=g.attr("data-page")):o.url=l.attr("data-url")||o.params.url||p,m&&(m.view=o,m.url=o.url,o.activePage=m,g[0].f7PageData=m),o.url&&o.history.push(o.url),o.main=l.hasClass(i.params.viewMainClass);var v,y,_,b,w,x,C,T,S,k,A=!1,D=!1,E={},P=[],O=[],L=!0,I=[],M=[];if(o.handleTouchStart=function(e){L&&o.params.swipeBackPage&&!A&&!i.swipeoutOpenedEl&&(D=!1,A=!0,v=void 0,E.x="touchstart"===e.type?e.targetTouches[0].pageX:e.pageX,E.y="touchstart"===e.type?e.targetTouches[0].pageY:e.pageY,b=(new Date).getTime(),S=o.params.dynamicNavbar&&l.find(".navbar-inner").length>1)},o.handleTouchMove=function(e){if(A){var t="touchmove"===e.type?e.targetTouches[0].pageX:e.pageX,n="touchmove"===e.type?e.targetTouches[0].pageY:e.pageY;if("undefined"==typeof v&&(v=!!(v||Math.abs(n-E.y)>Math.abs(t-E.x))),v||e.f7PreventSwipeBack||i.preventSwipeBack)return void(A=!1);if(!D){var r=!1;y=l.width();var a=s(e.target),u=a.hasClass("swipeout")?a:a.parents(".swipeout");u.length>0&&(!i.rtl&&u.find(".swipeout-actions-left").length>0&&(r=!0),i.rtl&&u.find(".swipeout-actions-right").length>0&&(r=!0)),P=a.is(".page")?a:a.parents(".page"),P.hasClass("no-swipeback")&&(r=!0),O=l.find(".page-on-left:not(.cached)");var c=E.x-l.offset().left>o.params.swipeBackPageActiveArea;if(c=i.rtl?E.x<l.offset().left-l[0].scrollLeft+y-o.params.swipeBackPageActiveArea:E.x-l.offset().left>o.params.swipeBackPageActiveArea,c&&(r=!0),(0===O.length||0===P.length)&&(r=!0),r)return void(A=!1);S&&(I=l.find(".navbar-on-center:not(.cached)"),M=l.find(".navbar-on-left:not(.cached)"),w=I.find(".left, .center, .right, .subnavbar, .fading"),x=M.find(".left, .center, .right, .subnavbar, .fading"),i.params.animateNavBackIcon&&(C=I.find(".left.sliding .back .icon"),T=M.find(".left.sliding .back .icon")))}e.f7PreventPanelSwipe=!0,D=!0,e.preventDefault();var d=i.rtl?-1:1;_=(t-E.x-o.params.swipeBackPageThreshold)*d,0>_&&(_=0);var p=_/y,f={percentage:p,activePage:P[0],previousPage:O[0],activeNavbar:I[0],
previousNavbar:M[0]};o.params.onSwipeBackMove&&o.params.onSwipeBackMove(f),l.trigger("swipebackmove",f);var h=_*d,g=(_/5-y/5)*d;if(1===i.device.pixelRatio&&(h=Math.round(h),g=Math.round(g)),P.transform("translate3d("+h+"px,0,0)"),o.params.swipeBackPageAnimateShadow&&"android"!==i.device.os&&(P[0].style.boxShadow="0px 0px 12px rgba(0,0,0,"+(.5-.5*p)+")"),O.transform("translate3d("+g+"px,0,0)"),o.params.swipeBackPageAnimateOpacity&&(O[0].style.opacity=.9+.1*p),S){var m;for(m=0;m<w.length;m++)if(k=s(w[m]),k.is(".subnavbar.sliding")||(k[0].style.opacity=1-1.3*p),k[0].className.indexOf("sliding")>=0){var b=p*k[0].f7NavbarRightOffset;1===i.device.pixelRatio&&(b=Math.round(b)),k.transform("translate3d("+b+"px,0,0)"),i.params.animateNavBackIcon&&k[0].className.indexOf("left")>=0&&C.length>0&&C.transform("translate3d("+-b+"px,0,0)")}for(m=0;m<x.length;m++)if(k=s(x[m]),k.is(".subnavbar.sliding")||(k[0].style.opacity=1.3*p-.3),k[0].className.indexOf("sliding")>=0){var L=k[0].f7NavbarLeftOffset*(1-p);1===i.device.pixelRatio&&(L=Math.round(L)),k.transform("translate3d("+L+"px,0,0)"),i.params.animateNavBackIcon&&k[0].className.indexOf("left")>=0&&T.length>0&&T.transform("translate3d("+-L+"px,0,0)")}}}},o.handleTouchEnd=function(){if(!A||!D)return A=!1,void(D=!1);if(A=!1,D=!1,0===_)return s([P[0],O[0]]).transform("").css({opacity:"",boxShadow:""}),void(S&&(w.transform("").css({opacity:""}),x.transform("").css({opacity:""}),C&&C.length>0&&C.transform(""),T&&C.length>0&&T.transform("")));var e=(new Date).getTime()-b,t=!1;if((300>e&&_>10||e>=300&&_>y/2)&&(P.removeClass("page-on-center").addClass("page-on-right"),O.removeClass("page-on-left").addClass("page-on-center"),S&&(I.removeClass("navbar-on-center").addClass("navbar-on-right"),M.removeClass("navbar-on-left").addClass("navbar-on-center")),t=!0),s([P[0],O[0]]).transform("").css({opacity:"",boxShadow:""}).addClass("page-transitioning"),S&&(w.css({opacity:""}).each(function(){var e=t?this.f7NavbarRightOffset:0,n=s(this);n.transform("translate3d("+e+"px,0,0)"),i.params.animateNavBackIcon&&n.hasClass("left")&&C.length>0&&C.addClass("page-transitioning").transform("translate3d("+-e+"px,0,0)")}).addClass("page-transitioning"),x.transform("").css({opacity:""}).each(function(){var e=t?0:this.f7NavbarLeftOffset,n=s(this);n.transform("translate3d("+e+"px,0,0)"),i.params.animateNavBackIcon&&n.hasClass("left")&&T.length>0&&T.addClass("page-transitioning").transform("translate3d("+-e+"px,0,0)")}).addClass("page-transitioning")),L=!1,o.allowPageChange=!1,t){var n=o.history[o.history.length-2];o.url=n,i.pageBackCallbacks("before",o,{pageContainer:P[0],url:n,position:"center",newPage:O,oldPage:P,swipeBack:!0}),i.pageAnimCallbacks("before",o,{pageContainer:O[0],url:n,position:"left",newPage:O,oldPage:P,swipeBack:!0})}P.transitionEnd(function(){s([P[0],O[0]]).removeClass("page-transitioning"),S&&(w.removeClass("page-transitioning").css({opacity:""}),x.removeClass("page-transitioning").css({opacity:""}),C&&C.length>0&&C.removeClass("page-transitioning"),T&&T.length>0&&T.removeClass("page-transitioning")),L=!0,o.allowPageChange=!0,t&&(i.params.pushState&&history.back(),i.pageBackCallbacks("after",o,{pageContainer:P[0],url:n,position:"center",newPage:O,oldPage:P,swipeBack:!0}),i.pageAnimCallbacks("after",o,{pageContainer:O[0],url:n,position:"left",newPage:O,oldPage:P,swipeBack:!0}),i.router.afterBack(o,P,O))})},o.attachEvents=function(e){var t=e?"off":"on";l[t](i.touchEvents.start,o.handleTouchStart),l[t](i.touchEvents.move,o.handleTouchMove),l[t](i.touchEvents.end,o.handleTouchEnd)},o.detachEvents=function(){o.attachEvents(!0)},o.params.swipeBackPage&&o.attachEvents(),i.views.push(o),o.main&&(i.mainView=o),o.router={load:function(e){return i.router.load(o,e)},back:function(e){return i.router.back(o,e)},loadPage:function(e){if(e=e||{},"string"==typeof e){var t=e;e={},t&&0===t.indexOf("#")&&o.params.domCache?e.pageName=t.split("#")[1]:e.url=t}return i.router.load(o,e)},loadContent:function(e){return i.router.load(o,{content:e})},reloadPage:function(e){return i.router.load(o,{url:e,reload:!0})},reloadContent:function(e){return i.router.load(o,{content:e,reload:!0})},reloadPreviousPage:function(e){return i.router.load(o,{url:e,reloadPrevious:!0,reload:!0})},reloadPreviousContent:function(e){return i.router.load(o,{content:e,reloadPrevious:!0,reload:!0})},refreshPage:function(){var e={url:o.url,reload:!0,ignoreCache:!0};return e.url&&0===e.url.indexOf("#")&&(o.params.domCache&&o.pagesCache[e.url]?(e.pageName=o.pagesCache[e.url],e.url=void 0,delete e.url):o.contentCache[e.url]&&(e.content=o.contentCache[e.url],e.url=void 0,delete e.url)),i.router.load(o,e)},refreshPreviousPage:function(){var e={url:o.history[o.history.length-2],reload:!0,reloadPrevious:!0,ignoreCache:!0};return e.url&&0===e.url.indexOf("#")&&o.params.domCache&&o.pagesCache[e.url]&&(e.pageName=o.pagesCache[e.url],e.url=void 0,delete e.url),i.router.load(o,e)}},o.loadPage=o.router.loadPage,o.loadContent=o.router.loadContent,o.reloadPage=o.router.reloadPage,o.reloadContent=o.router.reloadContent,o.reloadPreviousPage=o.router.reloadPreviousPage,o.reloadPreviousContent=o.router.reloadPreviousContent,o.refreshPage=o.router.refreshPage,o.refreshPreviousPage=o.router.refreshPreviousPage,o.back=o.router.back,o.hideNavbar=function(){return i.hideNavbar(l.find(".navbar"))},o.showNavbar=function(){return i.showNavbar(l.find(".navbar"))},o.hideToolbar=function(){return i.hideToolbar(l.find(".toolbar"))},o.showToolbar=function(){return i.showToolbar(l.find(".toolbar"))},i.params.pushState&&o.main){var N;h?N=d.split(i.params.pushStateRoot+f)[1]:d.indexOf(f)>=0&&d.indexOf(f+"#")<0&&(N=d.split(f)[1]);var R=!i.params.pushStateNoAnimation&&void 0;if(N)i.router.load(o,{url:N,animatePages:R,pushState:!1});else if(d.indexOf(f+"#")>=0){var B=history.state;B.pageName&&"viewIndex"in B&&i.router.load(o,{pageName:B.pageName,pushState:!1})}}return o.destroy=function(){o.detachEvents(),o=void 0},i.pluginHook("addView",o),o};i.addView=function(e,t){return new u(e,t)},i.navbarInitCallback=function(e,t,n,r,a,o){var l={container:n,innerContainer:r},u={url:a,query:s.parseUrlQuery(a||""),container:t,name:s(t).attr("data-page"),view:e,from:o},c={navbar:l,page:u};i.pluginHook("navbarInit",l,u),s(r).trigger("navbarInit",c)},i.sizeNavbars=function(e){var t=e?s(e).find(".navbar .navbar-inner:not(.cached)"):s(".navbar .navbar-inner:not(.cached)");t.each(function(){var e=s(this);if(!e.hasClass("cached")){var t,n,r=e.find(i.rtl?".right":".left"),a=e.find(i.rtl?".left":".right"),o=e.find(".center"),l=e.find(".subnavbar"),u=0===r.length,c=0===a.length,d=u?0:r.outerWidth(!0),p=c?0:a.outerWidth(!0),f=o.outerWidth(!0),h=e[0].offsetWidth-parseInt(e.css("padding-left"),10)-parseInt(e.css("padding-right"),10),g=e.hasClass("navbar-on-left");c&&(t=h-f),u&&(t=0),u||c||(t=(h-p-f+d)/2);var m=(h-f)/2;h-d-p>f?(d>m&&(m=d),m+f>h-p&&(m=h-p-f),n=m-t):n=0;var v=i.rtl?-1:1,y=n;i.rtl&&u&&c&&o.length>0&&(y=-y),o.css({left:y+"px"}),o.hasClass("sliding")&&(o[0].f7NavbarLeftOffset=-(t+n)*v,o[0].f7NavbarRightOffset=(h-t-n-f)*v,g&&o.transform("translate3d("+o[0].f7NavbarLeftOffset+"px, 0, 0)")),!u&&r.hasClass("sliding")&&(i.rtl?(r[0].f7NavbarLeftOffset=-(h-r.outerWidth())/2*v,r[0].f7NavbarRightOffset=d*v):(r[0].f7NavbarLeftOffset=-d,r[0].f7NavbarRightOffset=(h-r.outerWidth())/2),g&&r.transform("translate3d("+r[0].f7NavbarLeftOffset+"px, 0, 0)")),!c&&a.hasClass("sliding")&&(i.rtl?(a[0].f7NavbarLeftOffset=-p*v,a[0].f7NavbarRightOffset=(h-a.outerWidth())/2*v):(a[0].f7NavbarLeftOffset=-(h-a.outerWidth())/2,a[0].f7NavbarRightOffset=p),g&&a.transform("translate3d("+a[0].f7NavbarLeftOffset+"px, 0, 0)")),l.length&&l.hasClass("sliding")&&(l[0].f7NavbarLeftOffset=i.rtl?l[0].offsetWidth:-l[0].offsetWidth,l[0].f7NavbarRightOffset=-l[0].f7NavbarLeftOffset)}})},i.hideNavbar=function(e){return s(e).addClass("navbar-hidden"),!0},i.showNavbar=function(e){var t=s(e);return t.addClass("navbar-hiding").removeClass("navbar-hidden").transitionEnd(function(){t.removeClass("navbar-hiding")}),!0},i.hideToolbar=function(e){return s(e).addClass("toolbar-hidden"),!0},i.showToolbar=function(e){var t=s(e);t.addClass("toolbar-hiding").removeClass("toolbar-hidden").transitionEnd(function(){t.removeClass("toolbar-hiding")})},i.initSearchbar=function(e){function t(){g.val("").trigger("change"),p.removeClass("searchbar-active searchbar-not-empty"),v.length>0&&v.css(C,-v[0].offsetWidth+"px"),y&&h.removeClass("searchbar-overlay-active"),i.device.ios?setTimeout(function(){g.blur(),y.trigger("disableSearch")},400):(g.blur(),y.trigger("disableSearch"))}function n(){i.device.ios?setTimeout(function(){y&&!p.hasClass("searchbar-active")&&h.addClass("searchbar-overlay-active"),p.addClass("searchbar-active"),v.length>0&&v.css(C,"0px"),y.trigger("enableSearch")},400):(y&&!p.hasClass("searchbar-active")&&h.addClass("searchbar-overlay-active"),p.addClass("searchbar-active"),v.length>0&&v.css(C,"0px"),y.trigger("enableSearch"))}function r(){g.val("").trigger("change").focus(),y.trigger("clearSearch")}function a(){setTimeout(function(){var e=g.val().trim();0===e.length?(p.removeClass("searchbar-not-empty"),y&&p.hasClass("searchbar-active")&&h.addClass("searchbar-overlay-active")):(p.addClass("searchbar-not-empty"),y&&p.hasClass("searchbar-active")&&h.removeClass("searchbar-overlay-active")),y.length>0&&(b||_)&&c(e)},0)}function o(e){e.preventDefault()}function l(e){var i=e?"off":"on";p[i]("submit",o),v[i]("click",t),h[i]("click",t),g[i]("focus",n),g[i]("change keydown keypress keyup",a),m[i]("click",r)}function u(){l(!0)}function c(e){if(e.trim()!==T){T=e.trim();var t=e.trim().toLowerCase().split(" "),n=[];if(_){if(f=y[0].f7VirtualList,""===e.trim())return f.resetFilter(),x.hide(),void w.show();if(f.params.searchAll)n=f.params.searchAll(e,f.items)||[];else if(f.params.searchByItem)for(var r=0;r<f.items.length;r++)f.params.searchByItem(e,r,f.params.items[r])&&n.push(r)}else b=p.attr("data-search-in"),y.find("li").removeClass("hidden-by-searchbar").each(function(e,r){r=s(r);var a=r.find(b);if(0!==a.length){var i;i=a.text().trim().toLowerCase();for(var o=0,l=0;l<t.length;l++)i.indexOf(t[l])>=0&&o++;o!==t.length?r.addClass("hidden-by-searchbar"):n.push(r[0])}}),i.params.searchbarHideDividers&&y.find(".item-divider, .list-group-title").each(function(){for(var e=s(this),t=e.nextAll("li"),n=!0,r=0;r<t.length;r++){var a=s(t[r]);if(a.hasClass("list-group-title")||a.hasClass("item-divider"))break;a.hasClass("hidden-by-searchbar")||(n=!1)}n?e.addClass("hidden-by-searchbar"):e.removeClass("hidden-by-searchbar")}),i.params.searchbarHideGroups&&y.find(".list-group").each(function(){var e=s(this),t=e.find("li:not(.hidden-by-searchbar)");0===t.length?e.addClass("hidden-by-searchbar"):e.removeClass("hidden-by-searchbar")});y.trigger("search",{query:e,foundItems:n}),0===n.length?(x.show(),w.hide()):(x.hide(),w.show()),_&&f.filterItems(n)}}function d(){u(),e.off("pageBeforeRemove",d)}e=s(e);var p=e.hasClass("searchbar")?e:e.find(".searchbar");if(0!==p.length){e.hasClass("page")||(e=p.parents(".page").eq(0));var f,h=e.hasClass("page")?e.find(".searchbar-overlay"):s(".searchbar-overlay"),g=p.find('input[type="search"]'),m=p.find(".searchbar-clear"),v=p.find(".searchbar-cancel"),y=s(p.attr("data-search-list")),_=y.hasClass("virtual-list"),b=p.attr("data-search-in"),w=(p.attr("data-search-by"),p.attr("data-searchbar-found"));w?w=s(w):(w=e.find(".searchbar-found"),0===w.length&&(w=s(".searchbar-found")));var x=p.attr("data-searchbar-not-found");x?x=s(x):(x=e.find(".searchbar-not-found"),0===x.length&&(x=s(".searchbar-not-found")));var C=i.rtl?"margin-left":"margin-right";v.length>0&&(v.show(),v.css(C,-v[0].offsetWidth+"px")),p[0].f7DestroySearchbar=u,l();var T;e.hasClass("page")&&e.on("pageBeforeRemove",d)}},i.destroySearchbar=function(e){e=s(e);var t=e.hasClass("searchbar")?e:e.find(".searchbar");0!==t.length&&t[0].f7DestroySearchbar&&t[0].f7DestroySearchbar()},i.initMessagebar=function(e){function t(e){e.preventDefault()}function n(){c.css({height:""});var e=c[0].offsetHeight,t=e-c[0].clientHeight,n=c[0].scrollHeight,r=parseInt(l.attr("data-keyboard-height")||0,10);if(n+t>e){var a=n+t,i=f+(a-h),o=l.attr("data-max-height")||l.parents(".view")[0].offsetHeight-88;i>o&&(i=parseInt(o,10),a=i-f+h),c.css("height",a+"px"),l.css("height",i+"px"),d.length>0&&(d.css("padding-bottom",i+r+"px"),d.scrollTop(d[0].scrollHeight-d[0].offsetHeight))}else d.length>0&&(l.css({height:""}),d.css({"padding-bottom":r?p+r+"px":""}))}function r(){clearTimeout(u),u=setTimeout(function(){n()},0)}function a(e){var n=e?"off":"on";l[n]("submit",t),c[n]("change keydown keypress keyup paste cut",r)}function i(){a(!0)}function o(){i(),e.off("pageBeforeRemove",o)}e=s(e);var l=e.hasClass("messagebar")?e:e.find(".messagebar");if(0!==l.length){var u,c=l.find("textarea"),d=l.parents(".page").find(".page-content"),p=parseInt(d.css("padding-bottom")),f=l[0].offsetHeight,h=c[0].offsetHeight;l[0].f7DestroyMessagebar=i,a(),e.hasClass("page")&&e.on("pageBeforeRemove",o)}},i.destroyMessagebar=function(e){e=s(e);var t=e.hasClass("messagebar")?e:e.find(".messagebar");0!==t.length&&t[0].f7DestroyMessagebar&&t[0].f7DestroyMessagebar()},i.cache=[],i.removeFromCache=function(e){for(var t=!1,n=0;n<i.cache.length;n++)i.cache[n].url===e&&(t=n);t!==!1&&i.cache.splice(t,1)},i.xhr=!1,i.get=function(e,t,n,r){var a=e;if(i.params.cacheIgnoreGetParameters&&e.indexOf("?")>=0&&(a=e.split("?")[0]),i.params.cache&&!n&&e.indexOf("nocache")<0&&i.params.cacheIgnore.indexOf(a)<0)for(var o=0;o<i.cache.length;o++)if(i.cache[o].url===a&&(new Date).getTime()-i.cache[o].time<i.params.cacheDuration)return r(i.cache[o].content),!1;return i.xhr=s.ajax({url:e,method:"GET",beforeSend:i.params.onAjaxStart,complete:function(e){200===e.status||0===e.status?(i.params.cache&&!n&&(i.removeFromCache(a),i.cache.push({url:a,time:(new Date).getTime(),content:e.responseText})),r(e.responseText,!1)):r(e.responseText,!0),i.params.onAjaxComplete&&i.params.onAjaxComplete(e)},error:function(e){r(e.responseText,!0),i.params.onAjaxError&&i.params.onAjaxonAjaxError(e)}}),t&&(t.xhr=i.xhr),i.xhr},i.pageCallbacks={},i.onPage=function(e,t,n){if(t&&t.split(" ").length>1){for(var r=t.split(" "),a=[],o=0;o<r.length;o++)a.push(i.onPage(e,r[o],n));return a.remove=function(){for(var e=0;e<a.length;e++)a[e].remove()},a.trigger=function(){for(var e=0;e<a.length;e++)a[e].trigger()},a}var s=i.pageCallbacks[e][t];return s||(s=i.pageCallbacks[e][t]=[]),i.pageCallbacks[e][t].push(n),{remove:function(){for(var e,t=0;t<s.length;t++)s[t].toString()===n.toString()&&(e=t);"undefined"!=typeof e&&s.splice(e,1)},trigger:n}};for(var c="beforeInit init reinit beforeAnimation afterAnimation back afterBack beforeRemove".split(" "),d=0;d<c.length;d++)i.pageCallbacks[c[d]]={},n(c[d]);i.triggerPageCallbacks=function(e,t,n){var r=i.pageCallbacks[e]["*"];if(r)for(var a=0;a<r.length;a++)r[a](n);var o=i.pageCallbacks[e][t];if(o&&0!==o.length)for(var s=0;s<o.length;s++)o[s](n)},i.pageInitCallback=function(e,t){var n=t.pageContainer;if(!n.f7PageInitialized||e.params.domCache){var r={container:n,url:t.url,query:t.query||s.parseUrlQuery(t.url||""),name:s(n).attr("data-page"),view:e,from:t.position,context:t.context,navbarInnerContainer:t.navbarInnerContainer,fromPage:t.fromPage};if(n.f7PageInitialized&&e.params.domCache)return i.reinitPage(n),i.pluginHook("pageReinit",r),i.params.onPageReinit&&i.params.onPageBeforeInit(i,r),i.triggerPageCallbacks("reinit",r.name,r),void s(r.container).trigger("pageReinit",{page:r});n.f7PageInitialized=!0,n.f7PageData=r,e&&!t.preloadOnly&&(e.activePage=r),i.pluginHook("pageBeforeInit",r),i.params.onPageBeforeInit&&i.params.onPageBeforeInit(i,r),i.triggerPageCallbacks("beforeInit",r.name,r),s(r.container).trigger("pageBeforeInit",{page:r}),i.initPage(n),i.pluginHook("pageInit",r),i.params.onPageInit&&i.params.onPageInit(i,r),i.triggerPageCallbacks("init",r.name,r),s(r.container).trigger("pageInit",{page:r})}},i.pageRemoveCallback=function(e,t,n){var r;t.f7PageData&&(r=t.f7PageData.context);var a={container:t,name:s(t).attr("data-page"),view:e,url:t.f7PageData&&t.f7PageData.url,query:t.f7PageData&&t.f7PageData.query,from:n,context:r};i.pluginHook("pageBeforeRemove",a),i.params.onPageBeforeRemove&&i.params.onPageBeforeRemove(i,a),i.triggerPageCallbacks("beforeRemove",a.name,a),s(a.container).trigger("pageBeforeRemove",{page:a})},i.pageBackCallbacks=function(e,t,n){var r,a=n.pageContainer;a.f7PageData&&(r=a.f7PageData.context);var o={container:a,name:s(a).attr("data-page"),url:a.f7PageData&&a.f7PageData.url,query:a.f7PageData&&a.f7PageData.query,view:t,from:n.position,context:r,swipeBack:n.swipeBack};"after"===e&&(i.pluginHook("pageAfterBack",o),i.params.onPageAfterBack&&i.params.onPageAfterBack(i,o),i.triggerPageCallbacks("afterBack",o.name,o),s(a).trigger("pageAfterBack",{page:o})),"before"===e&&(i.pluginHook("pageBack",o),i.params.onPageBack&&i.params.onPageBack(i,o),i.triggerPageCallbacks("back",o.name,o),s(o.container).trigger("pageBack",{page:o}))},i.pageAnimCallbacks=function(e,t,n){var r,a=n.pageContainer;a.f7PageData&&(r=a.f7PageData.context);var o={container:a,url:n.url,query:n.query||s.parseUrlQuery(n.url||""),name:s(a).attr("data-page"),view:t,from:n.position,context:r,swipeBack:n.swipeBack,fromPage:n.fromPage},l=n.oldPage,u=n.newPage;if(a.f7PageData=o,"after"===e&&(i.pluginHook("pageAfterAnimation",o),i.params.onPageAfterAnimation&&i.params.onPageAfterAnimation(i,o),i.triggerPageCallbacks("afterAnimation",o.name,o),s(o.container).trigger("pageAfterAnimation",{page:o})),"before"===e){s(t.container).attr("data-page",o.name),t&&(t.activePage=o),u.hasClass("no-navbar")&&!l.hasClass("no-navbar")&&t.hideNavbar(),u.hasClass("no-navbar")||!l.hasClass("no-navbar")&&!l.hasClass("no-navbar-by-scroll")||t.showNavbar(),u.hasClass("no-toolbar")&&!l.hasClass("no-toolbar")&&t.hideToolbar(),u.hasClass("no-toolbar")||!l.hasClass("no-toolbar")&&!l.hasClass("no-toolbar-by-scroll")||t.showToolbar();var c;u.hasClass("no-tabbar")&&!l.hasClass("no-tabbar")&&(c=s(t.container).find(".tabbar"),0===c.length&&(c=s(t.container).parents("."+i.params.viewsClass).find(".tabbar")),i.hideToolbar(c)),u.hasClass("no-tabbar")||!l.hasClass("no-tabbar")&&!l.hasClass("no-tabbar-by-scroll")||(c=s(t.container).find(".tabbar"),0===c.length&&(c=s(t.container).parents("."+i.params.viewsClass).find(".tabbar")),i.showToolbar(c)),l.removeClass("no-navbar-by-scroll no-toolbar-by-scroll"),i.pluginHook("pageBeforeAnimation",o),i.params.onPageBeforeAnimation&&i.params.onPageBeforeAnimation(i,o),i.triggerPageCallbacks("beforeAnimation",o.name,o),s(o.container).trigger("pageBeforeAnimation",{page:o})}},i.initPage=function(e){i.sizeNavbars&&i.sizeNavbars(s(e).parents("."+i.params.viewClass)[0]),i.initMessages&&i.initMessages(e),i.initFormsStorage&&i.initFormsStorage(e),i.initSmartSelects&&i.initSmartSelects(e),i.initSlider&&i.initSlider(e),i.initSwiper&&i.initSwiper(e),i.initPullToRefresh&&i.initPullToRefresh(e),i.initInfiniteScroll&&i.initInfiniteScroll(e),i.initSearchbar&&i.initSearchbar(e),i.initMessagebar&&i.initMessagebar(e),i.initScrollToolbars&&i.initScrollToolbars(e),i.initImagesLazyLoad&&i.initImagesLazyLoad(e)},i.reinitPage=function(e){i.sizeNavbars&&i.sizeNavbars(s(e).parents("."+i.params.viewClass)[0]),i.reinitSlider&&i.reinitSlider(e),i.reinitSwiper&&i.reinitSwiper(e),i.reinitLazyLoad&&i.reinitLazyLoad(e)},i.initPageWithCallback=function(e){e=s(e);var t=e.parents("."+i.params.viewClass);if(0!==t.length){var n=t[0].f7View||!1,r=!(!n||!n.url)&&n.url;t&&t.attr("data-page",e.attr("data-page")||void 0),i.pageInitCallback(n,{pageContainer:e[0],url:r,position:"center"})}},i.router={temporaryDom:document.createElement("div"),findElement:function(e,t,n,r){t=s(t),r&&(e+=":not(.cached)");var a=t.find(e);return a.length>1&&("string"==typeof n.selector&&(a=t.find(n.selector+" "+e)),a.length>1&&(a=t.find("."+i.params.viewMainClass+" "+e))),1===a.length?a:(r||(a=i.router.findElement(e,t,n,!0)),a&&1===a.length?a:void 0)},animatePages:function(e,t,n){var r="page-on-center page-on-right page-on-left";"to-left"===n&&(e.removeClass(r).addClass("page-from-center-to-left"),t.removeClass(r).addClass("page-from-right-to-center")),"to-right"===n&&(e.removeClass(r).addClass("page-from-left-to-center"),t.removeClass(r).addClass("page-from-center-to-right"))},prepareNavbar:function(e,t,n){s(e).find(".sliding").each(function(){var e=s(this),r="right"===n?this.f7NavbarRightOffset:this.f7NavbarLeftOffset;i.params.animateNavBackIcon&&(e.hasClass("left")&&e.find(".back .icon").length>0&&e.find(".back .icon").transform("translate3d("+-r+"px,0,0)"),"left"===n&&e.hasClass("center")&&s(t).find(".left .back .icon ~ span").length>0&&(r+=s(t).find(".left .back span")[0].offsetLeft)),e.transform("translate3d("+r+"px,0,0)")})},animateNavbars:function(e,t,n){var r="navbar-on-right navbar-on-center navbar-on-left";"to-left"===n&&(t.removeClass(r).addClass("navbar-from-right-to-center"),t.find(".sliding").each(function(){var e=s(this);e.transform("translate3d(0px,0,0)"),i.params.animateNavBackIcon&&e.hasClass("left")&&e.find(".back .icon").length>0&&e.find(".back .icon").transform("translate3d(0px,0,0)")}),e.removeClass(r).addClass("navbar-from-center-to-left"),e.find(".sliding").each(function(){var e=s(this);i.params.animateNavBackIcon&&(e.hasClass("center")&&t.find(".sliding.left .back .icon").length>0&&(this.f7NavbarLeftOffset+=t.find(".sliding.left .back span")[0].offsetLeft),e.hasClass("left")&&e.find(".back .icon").length>0&&e.find(".back .icon").transform("translate3d("+-this.f7NavbarLeftOffset+"px,0,0)")),e.transform("translate3d("+this.f7NavbarLeftOffset+"px,0,0)")})),"to-right"===n&&(e.removeClass(r).addClass("navbar-from-left-to-center"),e.find(".sliding").each(function(){var e=s(this);e.transform("translate3d(0px,0,0)"),i.params.animateNavBackIcon&&e.hasClass("left")&&e.find(".back .icon").length>0&&e.find(".back .icon").transform("translate3d(0px,0,0)")}),t.removeClass(r).addClass("navbar-from-center-to-right"),t.find(".sliding").each(function(){var e=s(this);i.params.animateNavBackIcon&&e.hasClass("left")&&e.find(".back .icon").length>0&&e.find(".back .icon").transform("translate3d("+-this.f7NavbarRightOffset+"px,0,0)"),e.transform("translate3d("+this.f7NavbarRightOffset+"px,0,0)")}))},preprocess:function(e,t,n){i.pluginHook("routerPreprocess",e,t,n),e=i.pluginProcess("preprocess",e),i.params.preprocess?(e=i.params.preprocess(e,t,n),"undefined"!=typeof e&&n(e)):n(e)},template7Render:function(e,t){var n,r,a=t.url,o=t.content,u=t.content,c=t.context,d=t.contextName,p=t.template;if(t.pageName,"string"==typeof o?a?i.template7Cache[a]?r=l.cache[a]:(r=l.compile(o),l.cache[a]=r):r=l.compile(o):p&&(r=p),c)n=c;else{if(d)if(d.indexOf(".")>=0){for(var f=d.split("."),h=l.data[f[0]],g=1;g<f.length;g++)f[g]&&(h=h[f[g]]);n=h}else n=l.data[d];if(!n&&a&&(n=l.data["url:"+a]),!n&&"string"==typeof o&&!p){var m=o.match(/(data-page=["'][^"^']*["'])/);if(m){var v=m[0].split("data-page=")[1].replace(/['"]/g,"");v&&(n=l.data["page:"+v])}}if(!n&&p&&l.templates)for(var y in l.templates)l.templates[y]===p&&(n=l.data[y]);n||(n={})}if(r&&n){if("function"==typeof n&&(n=n()),a){var _=s.parseUrlQuery(a);n.url_query={};for(var b in _)n.url_query[b]=_[b]}u=r(n)}return{content:u,context:n}}},i.router._load=function(e,t){function n(){e.allowPageChange=!0,r.removeClass("page-from-right-to-center page-on-right").addClass("page-on-center"),a.removeClass("page-from-center-to-left page-on-center").addClass("page-on-left"),p&&(c.removeClass("navbar-from-right-to-center navbar-on-left navbar-on-right").addClass("navbar-on-center"),u.removeClass("navbar-from-center-to-left navbar-on-center").addClass("navbar-on-left")),i.pageAnimCallbacks("after",e,{pageContainer:r[0],url:h,position:"right",oldPage:a,newPage:r,query:t.query,fromPage:a&&a.length&&a[0].f7PageData}),i.params.pushState&&i.pushStateClearQueue(),e.params.swipeBackPage||e.params.preloadPreviousPage||(e.params.domCache?(a.addClass("cached"),u.addClass("cached")):(0!==h.indexOf("#")||0!==r.attr("data-page").indexOf("smart-select-"))&&(i.pageRemoveCallback(e,a[0],"left"),a.remove(),p&&u.remove())),e.params.uniqueHistory&&E&&e.refreshPreviousPage()}t=t||{};var r,a,o,l,u,c,d,p,f,h=t.url,g=t.content,m={content:t.content},v=t.template,y=t.pageName,_=s(e.container),b=s(e.pagesContainer),w=t.animatePages,x="undefined"==typeof h&&g||v,C=t.pushState;if("undefined"==typeof w&&(w=e.params.animatePages),i.pluginHook("routerLoad",e,t),(i.params.template7Pages&&"string"==typeof g||v)&&(m=i.router.template7Render(e,t),m.content&&!g&&(g=m.content)),i.router.temporaryDom.innerHTML="",!y)if(h||"string"==typeof g)i.router.temporaryDom.innerHTML=m.content;else if("length"in g&&g.length>1)for(var T=0;T<g.length;T++)s(i.router.temporaryDom).append(g[T]);else s(i.router.temporaryDom).append(g);if(f=t.reload&&(t.reloadPrevious?"left":"center"),r=y?b.find('.page[data-page="'+y+'"]'):i.router.findElement(".page",i.router.temporaryDom,e),!r||0===r.length||y&&e.activePage&&e.activePage.name===y)return void(e.allowPageChange=!0);if(r.addClass(t.reload?"page-on-"+f:"page-on-right"),o=b.children(".page:not(.cached)"),t.reload&&t.reloadPrevious&&1===o.length)return void(e.allowPageChange=!0);if(t.reload)a=o.eq(o.length-1);else{if(o.length>1){for(l=0;l<o.length-2;l++)e.params.domCache?s(o[l]).addClass("cached"):(i.pageRemoveCallback(e,o[l],"left"),s(o[l]).remove());e.params.domCache?s(o[l]).addClass("cached"):(i.pageRemoveCallback(e,o[l],"left"),s(o[l]).remove())}a=b.children(".page:not(.cached)")}if(e.params.domCache&&r.removeClass("cached"),e.params.dynamicNavbar)if(p=!0,c=y?_.find('.navbar-inner[data-page="'+y+'"]'):i.router.findElement(".navbar-inner",i.router.temporaryDom,e),c&&0!==c.length||(p=!1),d=_.find(".navbar"),t.reload)u=d.find(".navbar-inner:not(.cached):last-child");else if(u=d.find(".navbar-inner:not(.cached)"),u.length>0){for(l=0;l<u.length-1;l++)e.params.domCache?s(u[l]).addClass("cached"):s(u[l]).remove();c||1!==u.length||(e.params.domCache?s(u[0]).addClass("cached"):s(u[0]).remove()),u=d.find(".navbar-inner:not(.cached)")}if(p&&(c.addClass(t.reload?"navbar-on-"+f:"navbar-on-right"),e.params.domCache&&c.removeClass("cached"),r[0].f7RelatedNavbar=c[0],c[0].f7RelatedPage=r[0]),!h){var S=y||r.attr("data-page");h=x?"#"+i.params.dynamicPageUrl.replace(/{{name}}/g,S).replace(/{{index}}/g,e.history.length-(t.reload?1:0)):"#"+S,e.params.domCache||(e.contentCache[h]=g),e.params.domCache&&y&&(e.pagesCache[h]=y)}if(i.params.pushState&&!t.reloadPrevious&&e.main){"undefined"==typeof C&&(C=!0);var k=i.params.pushStateRoot||"",A=t.reload?"replaceState":"pushState";C&&(x||y?x&&g?history[A]({content:g,url:h,viewIndex:i.views.indexOf(e)},"",k+i.params.pushStateSeparator+h):y&&history[A]({pageName:y,url:h,viewIndex:i.views.indexOf(e)},"",k+i.params.pushStateSeparator+h):history[A]({url:h,viewIndex:i.views.indexOf(e)},"",k+i.params.pushStateSeparator+h))}if(e.url=h,t.reload){var D=e.history[e.history.length-(t.reloadPrevious?2:1)];D&&0===D.indexOf("#")&&D in e.contentCache&&D!==h&&(e.contentCache[D]=null,delete e.contentCache[D]),e.history[e.history.length-(t.reloadPrevious?2:1)]=h}else e.history.push(h);var E=!1;if(e.params.uniqueHistory){var P=e.history,O=h;if(e.params.uniqueHistoryIgnoreGetParameters)for(P=[],O=h.split("?")[0],l=0;l<e.history.length;l++)P.push(e.history[l].split("?")[0]);P.indexOf(O)!==P.lastIndexOf(O)&&(e.history=e.history.slice(0,P.indexOf(O)),e.history.push(h),E=!0)}return t.reloadPrevious?(a=a.prev(".page"),r.insertBefore(a),p&&(u=u.prev(".navbar-inner"),c.insertAfter(u))):(b.append(r[0]),p&&d.append(c[0])),t.reload&&(e.params.domCache&&e.initialPages.indexOf(a[0])>=0?(a.addClass("cached"),p&&u.addClass("cached")):(i.pageRemoveCallback(e,a[0],f),a.remove(),p&&u.remove())),i.pageInitCallback(e,{pageContainer:r[0],url:h,position:t.reload?f:"right",navbarInnerContainer:p?c[0]:void 0,context:m.context,query:t.query,fromPage:a&&a.length&&a[0].f7PageData}),p&&i.navbarInitCallback(e,r[0],d[0],c[0],h,t.reload?f:"right"),t.reload?(e.allowPageChange=!0,void(E&&e.refreshPreviousPage())):(p&&w&&i.router.prepareNavbar(c,u,"right"),r[0].clientLeft,i.pageAnimCallbacks("before",e,{pageContainer:r[0],url:h,position:"right",oldPage:a,newPage:r,query:t.query,fromPage:a&&a.length&&a[0].f7PageData}),w?(i.router.animatePages(a,r,"to-left",e),p&&setTimeout(function(){i.router.animateNavbars(u,c,"to-left",e)},0),r.animationEnd(function(){n()})):(c.find(".sliding, .sliding .back .icon").transform(""),n()),void 0)},i.router.load=function(e,t){function n(n){i.router.preprocess(n,r,function(n){t.content=n,i.router._load(e,t)})}t=t||{};var r=t.url,a=t.content,o=t.pageName;o&&o.indexOf("?")>0&&(t.query=s.parseUrlQuery(o),t.pageName=o=o.split("?")[0]);var l=t.template;return e.params.reloadPages===!0&&(t.reload=!0),!(!e.allowPageChange||r&&e.url===r&&!t.reload&&!e.params.allowDuplicateUrls)&&(e.allowPageChange=!1,i.xhr&&e.xhr&&e.xhr===i.xhr&&(i.xhr.abort(),i.xhr=!1),a||o?void n(a):l?void i.router._load(e,t):t.url&&"#"!==t.url?void i.get(t.url,e,t.ignoreCache,function(t,r){return r?void(e.allowPageChange=!0):void n(t)}):void(e.allowPageChange=!0))},i.router._back=function(e,t){function n(){i.pageBackCallbacks("after",e,{pageContainer:l[0],url:g,position:"center",oldPage:l,newPage:u}),i.pageAnimCallbacks("after",e,{pageContainer:u[0],url:g,position:"left",oldPage:l,newPage:u,query:t.query,fromPage:l&&l.length&&l[0].f7PageData}),i.router.afterBack(e,l[0],u[0])}function r(){i.pageBackCallbacks("before",e,{pageContainer:l[0],url:g,position:"center",oldPage:l,newPage:u}),i.pageAnimCallbacks("before",e,{pageContainer:u[0],url:g,position:"left",oldPage:l,newPage:u,query:t.query,fromPage:l&&l.length&&l[0].f7PageData}),_?(i.router.animatePages(u,l,"to-right",e),h&&setTimeout(function(){i.router.animateNavbars(d,c,"to-right",e)},0),u.animationEnd(function(){n()})):(d.find(".sliding, .sliding .back .icon").transform(""),n())}function a(){if(i.router.temporaryDom.innerHTML="",g||"string"==typeof m)i.router.temporaryDom.innerHTML=v.content;else if("length"in m&&m.length>1)for(var t=0;t<m.length;t++)s(i.router.temporaryDom).append(m[t]);else s(i.router.temporaryDom).append(m);u=i.router.findElement(".page",i.router.temporaryDom,e),e.params.dynamicNavbar&&(d=i.router.findElement(".navbar-inner",i.router.temporaryDom,e))}function o(){if(!u||0===u.length)return void(e.allowPageChange=!0);if(e.params.dynamicNavbar&&"undefined"==typeof h&&(h=!(!d||0===d.length)),u.addClass("page-on-left").removeClass("cached"),h&&(p=T.find(".navbar"),f=T.find(".navbar-inner:not(.cached)"),d.addClass("navbar-on-left").removeClass("cached")),x){var n,a;n=s(k[k.length-2]),h&&(a=s(n[0]&&n[0].f7RelatedNavbar||f[f.length-2])),e.params.domCache&&e.initialPages.indexOf(n[0])>=0?(n.length&&n[0]!==u[0]&&n.addClass("cached"),h&&a.length&&a[0]!==d[0]&&a.addClass("cached")):(n.length&&n.remove(),h&&a.length&&a.remove()),k=S.children(".page:not(.cached)"),h&&(f=T.find(".navbar-inner:not(.cached)")),e.history.indexOf(g)>=0?e.history=e.history.slice(0,e.history.indexOf(g)+2):e.history[[e.history.length-2]]?e.history[e.history.length-2]=g:e.history.unshift(g)}return l=s(k[k.length-1]),e.params.domCache&&l[0]===u[0]&&(l=S.children(".page.page-on-center"),0===l.length&&e.activePage&&(l=s(e.activePage.container))),h&&!c&&(c=s(f[f.length-1]),e.params.domCache&&(c[0]===d[0]&&(c=p.children(".navbar-inner.navbar-on-center:not(.cached)")),0===c.length&&(c=p.children('.navbar-inner[data-page="'+l.attr("data-page")+'"]'))),(0===c.length||d[0]===c[0])&&(h=!1)),h&&(A&&d.insertBefore(c),d[0].f7RelatedPage=u[0],u[0].f7RelatedNavbar=d[0]),A&&u.insertBefore(l),i.pageInitCallback(e,{pageContainer:u[0],url:g,position:"left",navbarInnerContainer:h?d[0]:void 0,context:v.context,query:t.query,fromPage:l&&l.length&&l[0].f7PageData,preloadOnly:b}),h&&i.navbarInitCallback(e,u[0],p[0],d[0],g,"right"),h&&d.hasClass("navbar-on-left")&&_&&i.router.prepareNavbar(d,c,"left"),b?void(e.allowPageChange=!0):(e.url=g,u[0].clientLeft,
void r())}t=t||{};var l,u,c,d,p,f,h,g=t.url,m=t.content,v={content:t.content},y=t.template,_=t.animatePages,b=t.preloadOnly,w=t.pushState,x=(t.ignoreCache,t.force),C=t.pageName,T=s(e.container),S=s(e.pagesContainer),k=S.children(".page:not(.cached)"),A=!0;return"undefined"==typeof _&&(_=e.params.animatePages),i.pluginHook("routerBack",e,t),(i.params.template7Pages&&"string"==typeof m||y)&&(v=i.router.template7Render(e,t),v.content&&!m&&(m=v.content)),i.params.pushState&&("undefined"==typeof w&&(w=!0),!b&&history.state&&w&&history.back()),k.length>1&&!x?b?void(e.allowPageChange=!0):(e.url=e.history[e.history.length-2],g=e.url,u=s(k[k.length-2]),l=s(k[k.length-1]),e.params.dynamicNavbar&&(h=!0,f=T.find(".navbar-inner:not(.cached)"),d=s(f[0]),c=s(f[1]),(0===d.length||0===c.length||c[0]===d[0])&&(h=!1)),A=!1,void o()):x?g&&g===e.url||C&&e.activePage&&e.activePage.name===C?void(e.allowPageChange=!0):m?(a(),void o()):C&&e.params.domCache?(C&&(g="#"+C),u=s(T).find('.page[data-page="'+C+'"]'),u[0].f7PageData&&u[0].f7PageData.url&&(g=u[0].f7PageData.url),e.params.dynamicNavbar&&(d=s(T).find('.navbar-inner[data-page="'+C+'"]'),0===d.length&&(d=s(u[0].f7RelatedNavbar))),void o()):void(e.allowPageChange=!0):(b||(e.url=e.history[e.history.length-2],g=e.url),m?(a(),void o()):C?(u=s(T).find('.page[data-page="'+C+'"]'),e.params.dynamicNavbar&&(d=s(T).find('.navbar-inner[data-page="'+C+'"]')),void o()):void(e.allowPageChange=!0))},i.router.back=function(e,t){function n(n){i.router.preprocess(n,r,function(n){t.content=n,i.router._back(e,t)})}t=t||{};var r=t.url,a=t.content,o=t.pageName;o&&o.indexOf("?")>0&&(t.query=s.parseUrlQuery(o),t.pageName=o=o.split("?")[0]);var l=t.force;if(!e.allowPageChange)return!1;e.allowPageChange=!1,i.xhr&&e.xhr&&e.xhr===i.xhr&&(i.xhr.abort(),i.xhr=!1);var u=s(e.pagesContainer).find(".page:not(.cached)");if(u.length>1&&!l)return void i.router._back(e,t);if(l){if(!r&&a)return void n(a);if(!r&&o)return o&&(r="#"+o),void n();if(r)return void i.get(t.url,e,t.ignoreCache,function(t,r){return r?void(e.allowPageChange=!0):void n(t)})}else{if(r=t.url=e.history[e.history.length-2],!r)return void(e.allowPageChange=!0);if(0===r.indexOf("#")&&e.contentCache[r])return void n(e.contentCache[r]);if(0===r.indexOf("#")&&e.params.domCache)return o||(t.pageName=r.split("#")[1]),void n();if(0!==r.indexOf("#"))return void i.get(t.url,e,t.ignoreCache,function(t,r){return r?void(e.allowPageChange=!0):void n(t)})}e.allowPageChange=!0},i.router.afterBack=function(e,t,n){t=s(t),n=s(n),e.params.domCache&&e.initialPages.indexOf(t[0])>=0?t.removeClass("page-from-center-to-right").addClass("cached"):(t.remove(),i.pageRemoveCallback(e,t[0],"right")),n.removeClass("page-from-left-to-center page-on-left").addClass("page-on-center"),e.allowPageChange=!0;var r,a=e.history.pop();if(e.params.dynamicNavbar){var o=s(e.container).find(".navbar-inner:not(.cached)"),l=s(t[0].f7RelatedNavbar||o[1]);e.params.domCache&&e.initialNavbars.indexOf(l[0])>=0?l.removeClass("navbar-from-center-to-right").addClass("cached"):l.remove(),r=s(o[0]).removeClass("navbar-on-left navbar-from-left-to-center").addClass("navbar-on-center")}if(e.params.domCache&&s(e.container).find(".page.cached").each(function(){var t=s(this),n=(t.index(),t[0].f7PageData&&t[0].f7PageData.url);n&&e.history.indexOf(n)<0&&e.initialPages.indexOf(this)<0&&(t[0].f7RelatedNavbar&&s(t[0].f7RelatedNavbar).remove(),t.remove())}),!e.params.domCache&&a&&a.indexOf("#")>-1&&a in e.contentCache&&(e.contentCache[a]=null,delete e.contentCache[a]),i.params.pushState&&i.pushStateClearQueue(),e.params.preloadPreviousPage)if(e.params.domCache&&e.history.length>1){var u,c,d=e.history[e.history.length-2];d&&e.pagesCache[d]?(u=s(e.container).find('.page[data-page="'+e.pagesCache[d]+'"]'),u.insertBefore(n),r&&(c=s(e.container).find('.navbar-inner[data-page="'+e.pagesCache[d]+'"]'),c.insertBefore(r),c&&0!==c.length||(c=r.prev(".navbar-inner.cached")))):(u=n.prev(".page.cached"),r&&(c=r.prev(".navbar-inner.cached"))),u&&u.length>0&&u.removeClass("cached page-on-right page-on-center").addClass("page-on-left"),c&&c.length>0&&c.removeClass("cached navbar-on-right navbar-on-center").addClass("navbar-on-left")}else i.router.back(e,{preloadOnly:!0})};var p=document.createElement("div");i.modalStack=[],i.modalStackClearQueue=function(){i.modalStack.length&&i.modalStack.shift()()},i.modal=function(e){e=e||{};var t="";if(i.params.modalTemplate)i._compiledTemplates.modal||(i._compiledTemplates.modal=l.compile(i.params.modalTemplate)),t=i._compiledTemplates.modal(e);else{var n="";if(e.buttons&&e.buttons.length>0)for(var r=0;r<e.buttons.length;r++)n+='<span class="modal-button'+(e.buttons[r].bold?" modal-button-bold":"")+'">'+e.buttons[r].text+"</span>";var a=e.title?'<div class="modal-title">'+e.title+"</div>":"",o=e.text?'<div class="modal-text">'+e.text+"</div>":"",u=e.afterText?e.afterText:"",c=e.buttons&&0!==e.buttons.length?"":"modal-no-buttons",d=e.verticalButtons?"modal-buttons-vertical":"";t='<div class="modal '+c+'"><div class="modal-inner">'+(a+o+u)+'</div><div class="modal-buttons '+d+'">'+n+"</div></div>"}p.innerHTML=t;var f=s(p).children();return s("body").append(f[0]),f.find(".modal-button").each(function(t,n){s(n).on("click",function(n){e.buttons[t].close!==!1&&i.closeModal(f),e.buttons[t].onClick&&e.buttons[t].onClick(f,n),e.onClick&&e.onClick(f,t)})}),i.openModal(f),f[0]},i.alert=function(e,t,n){return"function"==typeof t&&(n=arguments[1],t=void 0),i.modal({text:e||"",title:"undefined"==typeof t?i.params.modalTitle:t,buttons:[{text:i.params.modalButtonOk,bold:!0,onClick:n}]})},i.confirm=function(e,t,n,r){return"function"==typeof t&&(r=arguments[2],n=arguments[1],t=void 0),i.modal({text:e||"",title:"undefined"==typeof t?i.params.modalTitle:t,buttons:[{text:i.params.modalButtonCancel,onClick:r},{text:i.params.modalButtonOk,bold:!0,onClick:n}]})},i.prompt=function(e,t,n,r){return"function"==typeof t&&(r=arguments[2],n=arguments[1],t=void 0),i.modal({text:e||"",title:"undefined"==typeof t?i.params.modalTitle:t,afterText:'<input type="text" class="modal-text-input">',buttons:[{text:i.params.modalButtonCancel},{text:i.params.modalButtonOk,bold:!0}],onClick:function(e,t){0===t&&r&&r(s(e).find(".modal-text-input").val()),1===t&&n&&n(s(e).find(".modal-text-input").val())}})},i.modalLogin=function(e,t,n,r){return"function"==typeof t&&(r=arguments[2],n=arguments[1],t=void 0),i.modal({text:e||"",title:"undefined"==typeof t?i.params.modalTitle:t,afterText:'<input type="text" name="modal-username" placeholder="'+i.params.modalUsernamePlaceholder+'" class="modal-text-input modal-text-input-double"><input type="password" name="modal-password" placeholder="'+i.params.modalPasswordPlaceholder+'" class="modal-text-input modal-text-input-double">',buttons:[{text:i.params.modalButtonCancel},{text:i.params.modalButtonOk,bold:!0}],onClick:function(e,t){var a=s(e).find('.modal-text-input[name="modal-username"]').val(),i=s(e).find('.modal-text-input[name="modal-password"]').val();0===t&&r&&r(a,i),1===t&&n&&n(a,i)}})},i.modalPassword=function(e,t,n,r){return"function"==typeof t&&(r=arguments[2],n=arguments[1],t=void 0),i.modal({text:e||"",title:"undefined"==typeof t?i.params.modalTitle:t,afterText:'<input type="password" name="modal-password" placeholder="'+i.params.modalPasswordPlaceholder+'" class="modal-text-input">',buttons:[{text:i.params.modalButtonCancel},{text:i.params.modalButtonOk,bold:!0}],onClick:function(e,t){var a=s(e).find('.modal-text-input[name="modal-password"]').val();0===t&&r&&r(a),1===t&&n&&n(a)}})},i.showPreloader=function(e){return i.modal({title:e||i.params.modalPreloaderTitle,text:'<div class="preloader"></div>'})},i.hidePreloader=function(){i.closeModal(".modal.modal-in")},i.showIndicator=function(){s("body").append('<div class="preloader-indicator-overlay"></div><div class="preloader-indicator-modal"><span class="preloader preloader-white"></span></div>')},i.hideIndicator=function(){s(".preloader-indicator-overlay, .preloader-indicator-modal").remove()},i.actions=function(e,t){var n,r,a,o=!1;1===arguments.length?t=e:i.device.ios?i.device.ipad&&(o=!0):s(window).width()>=768&&(o=!0),t=t||[],t.length>0&&!s.isArray(t[0])&&(t=[t]);var u;if(o){var c='<div class="popover actions-popover"><div class="popover-inner">{{#each this}}<div class="list-block"><ul>{{#each this}}{{#if label}}<li class="actions-popover-label {{#if color}}color-{{color}}{{/if}} {{#if bold}}actions-popover-bold{{/if}}">{{text}}</li>{{else}}<li><a href="#" class="item-link list-button {{#if color}}color-{{color}}{{/if}} {{#if bg}}bg-{{bg}}{{/if}} {{#if bold}}actions-popover-bold{{/if}}">{{text}}</a></li>{{/if}}{{/each}}</ul></div>{{/each}}</div></div>';i._compiledTemplates.actionsPopover||(i._compiledTemplates.actionsPopover=l.compile(c));var d=i._compiledTemplates.actionsPopover(t);n=s(i.popover(d,e,!0)),r=".list-block ul",a=".list-button"}else{if(i.params.modalActionsTemplate)i._compiledTemplates.actions||(i._compiledTemplates.actions=l.compile(i.params.modalActionsTemplate)),u=i._compiledTemplates.actions(t);else{for(var f="",h=0;h<t.length;h++)for(var g=0;g<t[h].length;g++){0===g&&(f+='<div class="actions-modal-group">');var m=t[h][g],v=m.label?"actions-modal-label":"actions-modal-button";m.bold&&(v+=" actions-modal-button-bold"),m.color&&(v+=" color-"+m.color),m.bg&&(v+=" bg-"+m.bg),f+='<span class="'+v+'">'+m.text+"</span>",g===t[h].length-1&&(f+="</div>")}u='<div class="actions-modal">'+f+"</div>"}p.innerHTML=u,n=s(p).children(),s("body").append(n[0]),r=".actions-modal-group",a=".actions-modal-button"}var y=n.find(r);return y.each(function(e,r){var l=e;s(r).children().each(function(e,r){var u,c=e,d=t[l][c];!o&&s(r).is(a)&&(u=s(r)),o&&s(r).find(a).length>0&&(u=s(r).find(a)),u&&u.on("click",function(e){d.close!==!1&&i.closeModal(n),d.onClick&&d.onClick(n,e)})})}),o||i.openModal(n),n[0]},i.popover=function(e,t,n){function r(){e.css({left:"",top:""});var n,r,a=e.width(),i=e.height(),o=e.find(".popover-angle"),l=o.width()/2;o.removeClass("on-left on-right on-top on-bottom").css({left:"",top:""});var u=t.outerWidth(),c=t.outerHeight(),d=t.offset(),p=t.parents(".page");p.length>0&&(d.top=d.top-p[0].scrollTop);var f=s(window).height(),h=s(window).width(),g=0,m=0,v=0,y="top";i+l<d.top?g=d.top-i-l:i+l<f-d.top-c?(y="bottom",g=d.top+c+l):(y="middle",g=c/2+d.top-i/2,v=g,0>g?g=5:g+i>f&&(g=f-i-5),v-=g),"top"===y||"bottom"===y?(m=u/2+d.left-a/2,v=m,5>m&&(m=5),m+a>h&&(m=h-a-5),"top"===y&&o.addClass("on-bottom"),"bottom"===y&&o.addClass("on-top"),v-=m,n=a/2-l+v,n=Math.max(Math.min(n,a-2*l-6),6),o.css({left:n+"px"})):"middle"===y&&(m=d.left-a-l,o.addClass("on-right"),5>m&&(m=d.left+u+l,o.removeClass("on-right").addClass("on-left")),m+a>h&&(m=h-a-5,o.removeClass("on-right").addClass("on-left")),r=i/2-l+v,r=Math.max(Math.min(r,i-2*l-6),6),o.css({top:r+"px"})),e.css({top:g+"px",left:m+"px"})}if("undefined"==typeof n&&(n=!0),"string"==typeof e&&e.indexOf("<")>=0){var a=document.createElement("div");if(a.innerHTML=e.trim(),!(a.childNodes.length>0))return!1;e=a.childNodes[0],n&&e.classList.add("remove-on-close"),s("body").append(e)}return e=s(e),t=s(t),0!==e.length&&0!==t.length&&(0===e.find(".popover-angle").length&&e.append('<div class="popover-angle"></div>'),e.show(),r(),s(window).on("resize",r),e.on("close",function(){s(window).off("resize",r)}),e.find("."+i.params.viewClass).length>0&&i.sizeNavbars(e.find("."+i.params.viewClass)[0]),i.openModal(e),e[0])},i.popup=function(e,t){if("undefined"==typeof t&&(t=!0),"string"==typeof e&&e.indexOf("<")>=0){var n=document.createElement("div");if(n.innerHTML=e.trim(),!(n.childNodes.length>0))return!1;e=n.childNodes[0],t&&e.classList.add("remove-on-close"),s("body").append(e)}return e=s(e),0!==e.length&&(e.show(),e.find("."+i.params.viewClass).length>0&&i.sizeNavbars(e.find("."+i.params.viewClass)[0]),i.openModal(e),e[0])},i.pickerModal=function(e,t){if("undefined"==typeof t&&(t=!0),"string"==typeof e&&e.indexOf("<")>=0){if(e=s(e),!(e.length>0))return!1;t&&e.addClass("remove-on-close"),s("body").append(e[0])}return e=s(e),0!==e.length&&(e.show(),i.openModal(e),e[0])},i.loginScreen=function(e){return e||(e=".login-screen"),e=s(e),0!==e.length&&(e.show(),e.find("."+i.params.viewClass).length>0&&i.sizeNavbars(e.find("."+i.params.viewClass)[0]),i.openModal(e),e[0])},i.openModal=function(e){e=s(e);var t=e.hasClass("modal");if(s(".modal.modal-in:not(.modal-out)").length&&i.params.modalStack&&t)return void i.modalStack.push(function(){i.openModal(e)});var n=(e.hasClass("popover"),e.hasClass("popup")),r=e.hasClass("login-screen"),a=e.hasClass("picker-modal");t&&(e.show(),e.css({marginTop:-Math.round(e.outerHeight()/2)+"px"}));var o;return r||a||(0!==s(".modal-overlay").length||n||s("body").append('<div class="modal-overlay"></div>'),0===s(".popup-overlay").length&&n&&s("body").append('<div class="popup-overlay"></div>'),o=s(n?".popup-overlay":".modal-overlay")),e[0].clientLeft,e.trigger("open"),a&&s("body").addClass("with-picker-modal"),r||a||o.addClass("modal-overlay-visible"),e.removeClass("modal-out").addClass("modal-in").transitionEnd(function(){e.trigger(e.hasClass("modal-out")?"closed":"opened")}),!0},i.closeModal=function(e){if(e=s(e||".modal-in"),"undefined"==typeof e||0!==e.length){var t=e.hasClass("modal"),n=e.hasClass("popover"),r=e.hasClass("popup"),a=e.hasClass("login-screen"),o=e.hasClass("picker-modal"),l=e.hasClass("remove-on-close"),u=s(r?".popup-overlay":".modal-overlay");return r?e.length===s(".popup.modal-in").length&&u.removeClass("modal-overlay-visible"):o||u.removeClass("modal-overlay-visible"),e.trigger("close"),o&&(s("body").removeClass("with-picker-modal"),s("body").addClass("picker-modal-closing")),n?(e.removeClass("modal-in modal-out").trigger("closed").hide(),l&&e.remove()):(e.removeClass("modal-in").addClass("modal-out").transitionEnd(function(){e.trigger(e.hasClass("modal-out")?"closed":"opened"),o&&s("body").removeClass("picker-modal-closing"),r||a||o?(e.removeClass("modal-out").hide(),l&&e.length>0&&e.remove()):e.remove()}),t&&i.params.modalStack&&i.modalStackClearQueue()),!0}},i.allowPanelOpen=!0,i.openPanel=function(e){function t(){a.transitionEnd(function(e){s(e.target).is(a)?(n.trigger(n.hasClass("active")?"opened":"closed"),i.allowPanelOpen=!0):t()})}if(!i.allowPanelOpen)return!1;var n=s(".panel-"+e);if(0===n.length||n.hasClass("active"))return!1;i.closePanel(),i.allowPanelOpen=!1;var r=n.hasClass("panel-reveal")?"reveal":"cover";n.css({display:"block"}).addClass("active"),n.trigger("open"),n.find("."+i.params.viewClass).length>0&&i.sizeNavbars&&i.sizeNavbars(n.find("."+i.params.viewClass)[0]);var a=(n[0].clientLeft,"reveal"===r?s("."+i.params.viewsClass):n);return t(),s("body").addClass("with-panel-"+e+"-"+r),!0},i.closePanel=function(){var e=s(".panel.active");if(0===e.length)return!1;var t=e.hasClass("panel-reveal")?"reveal":"cover",n=e.hasClass("panel-left")?"left":"right";e.removeClass("active");var r="reveal"===t?s("."+i.params.viewsClass):e;e.trigger("close"),i.allowPanelOpen=!1,r.transitionEnd(function(){e.hasClass("active")||(e.css({display:""}),e.trigger("closed"),s("body").removeClass("panel-closing"),i.allowPanelOpen=!0)}),s("body").addClass("panel-closing").removeClass("with-panel-"+n+"-"+t)},i.initSwipePanels=function(){function e(e){if(i.allowPanelOpen&&(i.params.swipePanel||i.params.swipePanelOnlyClose)&&!o&&!(s(".modal-in, .photo-browser-in").length>0||!i.params.swipePanelCloseOpposite&&!i.params.swipePanelOnlyClose&&s(".panel.active").length>0&&!r.hasClass("active"))){if(y.x="touchstart"===e.type?e.targetTouches[0].pageX:e.pageX,y.y="touchstart"===e.type?e.targetTouches[0].pageY:e.pageY,(i.params.swipePanelCloseOpposite||i.params.swipePanelOnlyClose)&&(a=s(".panel.active").length>0?s(".panel.active").hasClass("panel-left")?"left":"right":i.params.swipePanel),r=s(".panel.panel-"+a),f=r.hasClass("active"),i.params.swipePanelActiveArea&&!f){if("left"===a&&y.x>i.params.swipePanelActiveArea)return;if("right"===a&&y.x<window.innerWidth-i.params.swipePanelActiveArea)return}l=!1,o=!0,u=void 0,c=(new Date).getTime(),m=void 0}}function t(e){if(o&&!e.f7PreventPanelSwipe){var t="touchmove"===e.type?e.targetTouches[0].pageX:e.pageX,n="touchmove"===e.type?e.targetTouches[0].pageY:e.pageY;if("undefined"==typeof u&&(u=!!(u||Math.abs(n-y.y)>Math.abs(t-y.x))),u)return void(o=!1);if(!m&&(m=t>y.x?"to-right":"to-left","left"===a&&"to-left"===m&&!r.hasClass("active")||"right"===a&&"to-right"===m&&!r.hasClass("active")))return void(o=!1);if(i.params.swipePanelNoFollow){var s=(new Date).getTime()-c;return 300>s&&("to-left"===m&&("right"===a&&i.openPanel(a),"left"===a&&r.hasClass("active")&&i.closePanel()),"to-right"===m&&("left"===a&&i.openPanel(a),"right"===a&&r.hasClass("active")&&i.closePanel())),o=!1,void(l=!1)}l||(g=r.hasClass("panel-cover")?"cover":"reveal",f||(r.show(),v.show()),h=r[0].offsetWidth,r.transition(0),r.find("."+i.params.viewClass).length>0&&i.sizeNavbars&&i.sizeNavbars(r.find("."+i.params.viewClass)[0])),l=!0,e.preventDefault();var b=f?0:-i.params.swipePanelThreshold;"right"===a&&(b=-b),d=t-y.x+b,"right"===a?(p=d-(f?h:0),p>0&&(p=0),-h>p&&(p=-h)):(p=d+(f?h:0),0>p&&(p=0),p>h&&(p=h)),"reveal"===g?(_.transform("translate3d("+p+"px,0,0)").transition(0),v.transform("translate3d("+p+"px,0,0)"),i.pluginHook("swipePanelSetTransform",_[0],r[0],Math.abs(p/h))):(r.transform("translate3d("+p+"px,0,0)").transition(0),i.pluginHook("swipePanelSetTransform",_[0],r[0],Math.abs(p/h)))}}function n(){if(!o||!l)return o=!1,void(l=!1);o=!1,l=!1;var e,t=(new Date).getTime()-c,n=0===p||Math.abs(p)===h;if(e=f?p===-h?"reset":300>t&&Math.abs(p)>=0||t>=300&&Math.abs(p)<=h/2?"left"===a&&p===h?"reset":"swap":"reset":0===p?"reset":300>t&&Math.abs(p)>0||t>=300&&Math.abs(p)>=h/2?"swap":"reset","swap"===e&&(i.allowPanelOpen=!0,f?(i.closePanel(),n&&(r.css({display:""}),s("body").removeClass("panel-closing"))):i.openPanel(a),n&&(i.allowPanelOpen=!0)),"reset"===e)if(f)i.allowPanelOpen=!0,i.openPanel(a);else if(i.closePanel(),n)i.allowPanelOpen=!0,r.css({display:""});else{var u="reveal"===g?_:r;s("body").addClass("panel-closing"),u.transitionEnd(function(){i.allowPanelOpen=!0,r.css({display:""}),s("body").removeClass("panel-closing")})}"reveal"===g&&(_.transition(""),_.transform("")),r.transition("").transform(""),v.css({display:""}).transform("")}var r,a;if(i.params.swipePanel){if(r=s(".panel.panel-"+i.params.swipePanel),a=i.params.swipePanel,0===r.length)return}else{if(!i.params.swipePanelOnlyClose)return;if(0===s(".panel").length)return}var o,l,u,c,d,p,f,h,g,m,v=s(".panel-overlay"),y={},_=s("."+i.params.viewsClass);s(document).on(i.touchEvents.start,e),s(document).on(i.touchEvents.move,t),s(document).on(i.touchEvents.end,n)},i.initImagesLazyLoad=function(e){function t(e){function n(){e.removeClass("lazy").addClass("lazy-loaded"),r?e.css("background-image","url("+a+")"):e.attr("src",a),i.params.imagesLazyLoadSequential&&(p=!1,d.length>0&&t(d.shift()))}e=s(e);var r=e.attr("data-background"),a=r?r:e.attr("data-src");if(a){if(!i.params.imagesLazyLoadSequential)return void n();if(p)return void(d.indexOf(e[0])<0&&d.push(e[0]));p=!0;var o=new Image;o.onload=n,o.onerror=n,o.src=a}}function n(){l=e.find(".lazy"),l.each(function(e,n){n=s(n),r(n[0])&&t(n)})}function r(e){var t=e.getBoundingClientRect(),n=i.params.imagesLazyLoadThreshold||0;return t.top>=0-n&&t.left>=0-n&&t.top<=window.innerHeight+n&&t.left<=window.innerWidth+n}function a(e){var t=e?"off":"on";l[t]("lazy",n),u[t]("lazy",n),u[t]("scroll",n),s(window)[t]("resize",n)}function o(){a(!0)}e=s(e);var l;if(e.hasClass("lazy")?(l=e,e=l.parents(".page")):l=e.find(".lazy"),0!==l.length){var u;if(e.hasClass("page-content")?(u=e,e=e.parents(".page")):u=e.find(".page-content"),0!==u.length){var c="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABAQMAAAAl21bKAAAAA1BMVEXCwsK592mkAAAACklEQVQI12NgAAAAAgAB4iG8MwAAAABJRU5ErkJggg==";"string"==typeof i.params.imagesLazyLoadPlaceholder&&(c=i.params.imagesLazyLoadPlaceholder),i.params.imagesLazyLoadPlaceholder!==!1&&l.attr("src",c);var d=[],p=!1;e[0].f7DestroyImagesLazyLoad=o,a(),e.hasClass("page")&&e.once("pageBeforeRemove",o),n(),e.once("pageAfterAnimation",n)}}},i.destroyImagesLazyLoad=function(e){e=s(e),e.length>0&&e[0].f7DestroyImagesLazyLoad&&e[0].f7DestroyLazyLoad()},i.reinitImagesLazyLoad=function(e){e=s(e),e.length>0&&e.trigger("lazy")},i.initMessages=function(e){var t=s(e),n=t.find(".messages");if(0!==n.length){var r=t.find(".page-content");n.hasClass("messages-auto-layout")&&i.updateMessagesLayout(n),n.hasClass("new-messages-first")||(r[0].scrollTop=r[0].scrollHeight-r[0].offsetHeight)}},i.addMessage=function(e,t,n){if(e=e||{},e.type=e.type||"sent",!e.text||0===e.length)return!1;if(t=s(t||".messages-content"),0===t.length)return!1;var r=t.find(".messages"),a=r.hasClass("new-messages-first");"undefined"==typeof n&&(n=!!a);var o=n?"prepend":"append",l="";e.day&&(l+='<div class="messages-date">'+e.day+(e.time?",":"")+(e.time?" <span>"+e.time+"</span>":"")+"</div>");var u=e.text.indexOf("<img")>=0?"message-pic":"",c=e.avatar?"message-with-avatar":"",d="message message-"+e.type+" "+u+" "+c+" message-appear-from-"+("append"===o?"bottom":"top");l+='<div class="'+d+'">'+(e.name?'<div class="message-name">'+e.name+"</div>":"")+'<div class="message-text">'+e.text+"</div>"+(e.avatar?'<div class="message-avatar" style="background-image:url('+e.avatar+')"></div>':"")+(e.label?'<div class="message-label">'+e.label+"</div>":"")+"</div>",r[o](l),r.hasClass("messages-auto-layout")&&i.updateMessagesLayout(r),("append"===o&&!a||"prepend"===o&&a)&&i.scrollMessagesContainer(t)},i.updateMessagesLayout=function(e){e.find(".message").each(function(){var e=s(this);e.find(".message-text img").length>0&&e.addClass("message-pic"),e.find(".message-avatar").length>0&&e.addClass("message-with-avatar")}),e.find(".message-sent").each(function(){var e=s(this),t=e.next(".message-sent"),n=e.prev(".message-sent");0===t.length?e.addClass("message-last message-with-tail"):e.removeClass("message-last message-with-tail"),0===n.length?e.addClass("message-first"):e.removeClass("message-first"),n.length>0&&n.find(".message-name").length>0&&e.find(".message-name").length>0&&n.find(".message-name").text()!==e.find(".message-name").text()&&(n.addClass("message-last message-with-tail"),e.addClass("message-first"))}),e.find(".message-received").each(function(){var e=s(this),t=e.next(".message-received"),n=e.prev(".message-received");0===t.length?e.addClass("message-last message-with-tail"):e.removeClass("message-last message-with-tail"),0===n.length?e.addClass("message-first"):e.removeClass("message-first"),n.length>0&&n.find(".message-name").length>0&&e.find(".message-name").length>0&&n.find(".message-name").text()!==e.find(".message-name").text()&&(n.addClass("message-last message-with-tail"),e.addClass("message-first"))})},i.scrollMessagesContainer=function(e){if(e=s(e||".messages-content"),0!==e.length){var t=e.find(".messages"),n=t.hasClass("new-messages-first"),r=e[0].scrollTop,a=n?0:e[0].scrollHeight-e[0].offsetHeight;a!==r&&e.scrollTop(a,400)}},i.swipeoutOpenedEl=void 0,i.allowSwipeout=!0,i.initSwipeout=function(e){function t(e){i.allowSwipeout&&(o=!1,a=!0,l=void 0,E.x="touchstart"===e.type?e.targetTouches[0].pageX:e.pageX,E.y="touchstart"===e.type?e.targetTouches[0].pageY:e.pageY,u=(new Date).getTime())}function n(e){if(a){var t="touchmove"===e.type?e.targetTouches[0].pageX:e.pageX,n="touchmove"===e.type?e.targetTouches[0].pageY:e.pageY;if("undefined"==typeof l&&(l=!!(l||Math.abs(n-E.y)>Math.abs(t-E.x))),l)return void(a=!1);if(!o){if(s(".list-block.sortable-opened").length>0)return;d=s(this),p=d.find(".swipeout-content"),f=d.find(".swipeout-actions-right"),h=d.find(".swipeout-actions-left"),g=m=b=w=T=C=null,A=h.hasClass("swipeout-actions-no-fold")||i.params.swipeoutActionsNoFold,D=f.hasClass("swipeout-actions-no-fold")||i.params.swipeoutActionsNoFold,h.length>0&&(g=h.outerWidth(),b=h.children("a"),C=h.find(".swipeout-overswipe")),f.length>0&&(m=f.outerWidth(),w=f.children("a"),T=f.find(".swipeout-overswipe")),y=d.hasClass("swipeout-opened"),y&&(_=d.find(".swipeout-actions-left.swipeout-actions-opened").length>0?"left":"right"),d.removeClass("transitioning"),i.params.swipeoutNoFollow||(d.find(".swipeout-actions-opened").removeClass("swipeout-actions-opened"),d.removeClass("swipeout-opened"))}if(o=!0,e.preventDefault(),c=t-E.x,v=c,y&&("right"===_?v-=m:v+=g),v>0&&0===h.length||0>v&&0===f.length){if(!y)return void(a=o=!1);v=0}x=0>v?"to-left":v>0?"to-right":x?x:"to-left";var r,u,P;if(e.f7PreventPanelSwipe=!0,i.params.swipeoutNoFollow)return y?("right"===_&&c>0&&i.swipeoutClose(d),"left"===_&&0>c&&i.swipeoutClose(d)):(0>c&&f.length>0&&i.swipeoutOpen(d,"right"),c>0&&h.length>0&&i.swipeoutOpen(d,"left")),a=!1,void(o=!1);S=!1,k=!1;var O;if(f.length>0)for(P=v/m,-m>v&&(v=-m-Math.pow(-v-m,.8),T.length>0&&(k=!0)),r=0;r<w.length;r++)"undefined"==typeof w[r]._buttonOffset&&(w[r]._buttonOffset=w[r].offsetLeft),u=w[r]._buttonOffset,O=s(w[r]),T.length>0&&O.hasClass("swipeout-overswipe")&&O.css({left:(k?-u:0)+"px"}),O.transform("translate3d("+(v-u*(1+Math.max(P,-1)))+"px,0,0)");if(h.length>0)for(P=v/g,v>g&&(v=g+Math.pow(v-g,.8),C.length>0&&(S=!0)),r=0;r<b.length;r++)"undefined"==typeof b[r]._buttonOffset&&(b[r]._buttonOffset=g-b[r].offsetLeft-b[r].offsetWidth),u=b[r]._buttonOffset,O=s(b[r]),C.length>0&&O.hasClass("swipeout-overswipe")&&O.css({left:(S?u:0)+"px"}),b.length>1&&O.css("z-index",b.length-r),O.transform("translate3d("+(v+u*(1-Math.min(P,1)))+"px,0,0)");p.transform("translate3d("+v+"px,0,0)")}}function r(){if(!a||!o)return a=!1,void(o=!1);a=!1,o=!1;var e,t,n,r,l,_,C=(new Date).getTime()-u;if(_="to-left"===x?D:A,n="to-left"===x?f:h,t="to-left"===x?m:g,e=300>C&&(-10>c&&"to-left"===x||c>10&&"to-right"===x)||C>=300&&Math.abs(v)>t/2?"open":"close",300>C&&(0===Math.abs(v)&&(e="close"),Math.abs(v)===t&&(e="open")),"open"===e){i.swipeoutOpenedEl=d,d.trigger("open"),d.addClass("swipeout-opened transitioning");var T="to-left"===x?-t:t;if(p.transform("translate3d("+T+"px,0,0)"),n.addClass("swipeout-actions-opened"),r="to-left"===x?w:b)for(l=0;l<r.length;l++)s(r[l]).transform("translate3d("+T+"px,0,0)");k&&f.find(".swipeout-overswipe")[0].click(),S&&h.find(".swipeout-overswipe")[0].click()}else d.trigger("close"),i.swipeoutOpenedEl=void 0,d.addClass("transitioning").removeClass("swipeout-opened"),p.transform(""),n.removeClass("swipeout-actions-opened");var E;if(b&&b.length>0&&b!==r)for(l=0;l<b.length;l++)E=b[l]._buttonOffset,"undefined"==typeof E&&(b[l]._buttonOffset=g-b[l].offsetLeft-b[l].offsetWidth),s(b[l]).transform("translate3d("+E+"px,0,0)");if(w&&w.length>0&&w!==r)for(l=0;l<w.length;l++)E=w[l]._buttonOffset,"undefined"==typeof E&&(w[l]._buttonOffset=w[l].offsetLeft),s(w[l]).transform("translate3d("+-E+"px,0,0)");p.transitionEnd(function(){y&&"open"===e||closed&&"close"===e||(d.trigger("open"===e?"opened":"closed"),y&&"close"===e&&(f.length>0&&w.transform(""),h.length>0&&b.transform("")))})}var a,o,l,u,c,d,p,f,h,g,m,v,y,_,b,w,x,C,T,S,k,A,D,E={};s(document).on(i.touchEvents.start,function(e){if(i.swipeoutOpenedEl){var t=s(e.target);i.swipeoutOpenedEl.is(t[0])||t.parents(".swipeout").is(i.swipeoutOpenedEl)||t.hasClass("modal-in")||t.parents(".modal.modal-in").length>0||t.hasClass("modal-overlay")||i.swipeoutClose(i.swipeoutOpenedEl)}}),e?(s(e).on(i.touchEvents.start,t),s(e).on(i.touchEvents.move,n),s(e).on(i.touchEvents.end,r)):(s(document).on(i.touchEvents.start,".list-block li.swipeout",t),s(document).on(i.touchEvents.move,".list-block li.swipeout",n),s(document).on(i.touchEvents.end,".list-block li.swipeout",r))},i.swipeoutOpen=function(e,t,n){if(e=s(e),2===arguments.length&&"function"==typeof arguments[1]&&(n=t),0!==e.length&&(e.length>1&&(e=s(e[0])),e.hasClass("swipeout")&&!e.hasClass("swipeout-opened"))){t||(t=e.find(".swipeout-actions-right").length>0?"right":"left");var r=e.find(".swipeout-actions-"+t);if(0!==r.length){r.hasClass("swipeout-actions-no-fold")||i.params.swipeoutActionsNoFold,e.trigger("open").addClass("swipeout-opened").removeClass("transitioning"),r.addClass("swipeout-actions-opened");var a,o=r.children("a"),l=r.outerWidth(),u="right"===t?-l:l;if(o.length>1){for(a=0;a<o.length;a++)"right"===t?s(o[a]).transform("translate3d("+-o[a].offsetLeft+"px,0,0)"):s(o[a]).css("z-index",o.length-a).transform("translate3d("+(l-o[a].offsetWidth-o[a].offsetLeft)+"px,0,0)");o[1].clientLeft}for(e.addClass("transitioning"),a=0;a<o.length;a++)s(o[a]).transform("translate3d("+u+"px,0,0)");e.find(".swipeout-content").transform("translate3d("+u+"px,0,0)").transitionEnd(function(){e.trigger("opened"),n&&n.call(e[0])}),i.swipeoutOpenedEl=e}}},i.swipeoutClose=function(e,t){if(e=s(e),0!==e.length&&e.hasClass("swipeout-opened")){var n=e.find(".swipeout-actions-opened").hasClass("swipeout-actions-right")?"right":"left",r=e.find(".swipeout-actions-opened").removeClass("swipeout-actions-opened"),a=(r.hasClass("swipeout-actions-no-fold")||i.params.swipeoutActionsNoFold,r.children("a")),o=r.outerWidth();i.allowSwipeout=!1,e.trigger("close"),e.removeClass("swipeout-opened").addClass("transitioning"),e.find(".swipeout-content").transform("translate3d(0px,0,0)").transitionEnd(function(){i.allowSwipeout=!0,a.transform(""),e.trigger("closed"),t&&t.call(e[0])});for(var l=0;l<a.length;l++)s(a[l]).transform("right"===n?"translate3d("+-a[l].offsetLeft+"px,0,0)":"translate3d("+(o-a[l].offsetWidth-a[l].offsetLeft)+"px,0,0)"),s(a[l]).css({left:"0px"});i.swipeoutOpenedEl&&i.swipeoutOpenedEl[0]===e[0]&&(i.swipeoutOpenedEl=void 0)}},i.swipeoutDelete=function(e,t){if(e=s(e),0!==e.length){e.length>1&&(e=s(e[0])),i.swipeoutOpenedEl=void 0,e.trigger("delete"),e.css({height:e.outerHeight()+"px"}),e[0].clientLeft,e.css({height:"0px"}).addClass("deleting transitioning").transitionEnd(function(){if(e.trigger("deleted"),t&&t.call(e[0]),e.parents(".virtual-list").length>0){var n=e.parents(".virtual-list")[0].f7VirtualList,r=e[0].f7VirtualListIndex;n&&"undefined"!=typeof r&&n.deleteItem(r)}else e.remove()});var n="-100%";e.find(".swipeout-content").transform("translate3d("+n+",0,0)")}},i.sortableToggle=function(e){return e=s(e),0===e.length&&(e=s(".list-block.sortable")),e.toggleClass("sortable-opened"),e.trigger(e.hasClass("sortable-opened")?"open":"close"),e},i.sortableOpen=function(e){return e=s(e),0===e.length&&(e=s(".list-block.sortable")),e.addClass("sortable-opened"),e.trigger("open"),e},i.sortableClose=function(e){return e=s(e),0===e.length&&(e=s(".list-block.sortable")),e.removeClass("sortable-opened"),e.trigger("close"),e},i.initSortable=function(){function e(e){a=!1,r=!0,o="touchstart"===e.type?e.targetTouches[0].pageY:e.pageY,u=s(this).parent(),d=u.parent().find("li"),m=u.parents(".sortable"),e.preventDefault(),i.allowPanelOpen=i.allowSwipeout=!1}function t(e){if(r&&u){var t=("touchmove"===e.type?e.targetTouches[0].pageX:e.pageX,"touchmove"===e.type?e.targetTouches[0].pageY:e.pageY);a||(u.addClass("sorting"),m.addClass("sortable-sorting"),p=u[0].offsetTop,f=u.parent().height()-u[0].offsetTop-u.height(),c=u[0].offsetHeight),a=!0,e.preventDefault(),e.f7PreventPanelSwipe=!0,l=t-o;var n=l;-p>n&&(n=-p),n>f&&(n=f),u.transform("translate3d(0,"+n+"px,0)"),g=h=void 0,d.each(function(){var e=s(this);if(e[0]!==u[0]){var t=e[0].offsetTop,r=e.height(),a=u[0].offsetTop+n;a>=t-r/2&&u.index()<e.index()?(e.transform("translate3d(0, "+-c+"px,0)"),h=e,g=void 0):t+r/2>=a&&u.index()>e.index()?(e.transform("translate3d(0, "+c+"px,0)"),h=void 0,g||(g=e)):s(this).transform("translate3d(0, 0%,0)")}})}}function n(e){if(i.allowPanelOpen=i.allowSwipeout=!0,!r||!a)return r=!1,void(a=!1);e.preventDefault(),d.transform(""),u.removeClass("sorting"),m.removeClass("sortable-sorting");var t,n,o;h&&(u.insertAfter(h),u.trigger("sort")),g&&(u.insertBefore(g),u.trigger("sort")),(h||g)&&m.hasClass("virtual-list")&&(t=m[0].f7VirtualList,n=u[0].f7VirtualListIndex,o=g?g[0].f7VirtualListIndex:h[0].f7VirtualListIndex,t&&t.moveItem(n,o)),h=g=void 0,r=!1,a=!1}var r,a,o,l,u,c,d,p,f,h,g,m;s(document).on(i.touchEvents.start,".list-block.sortable .sortable-handler",e),
i.support.touch?(s(document).on(i.touchEvents.move,".list-block.sortable .sortable-handler",t),s(document).on(i.touchEvents.end,".list-block.sortable .sortable-handler",n)):(s(document).on(i.touchEvents.move,t),s(document).on(i.touchEvents.end,n))},i.initSmartSelects=function(e){var t=s(e);if(0!==t.length){var n=t.find(".smart-select");0!==n.length&&n.each(function(){var e=s(this),t=e.find("select");if(0!==t.length){var n=t[0];if(0!==n.length){for(var r=[],a=0;a<n.length;a++)n[a].selected&&r.push(n[a].textContent.trim());var i=e.find(".item-after");if(0===i.length)e.find(".item-inner").append('<div class="item-after">'+r.join(", ")+"</div>");else{var o=i.text();if(i.hasClass("smart-select-value"))for(a=0;a<n.length;a++)n[a].selected=n[a].textContent.trim()===o.trim();else i.text(r)}}}})}},i.smartSelectOpen=function(e){function t(t){if(h){var n=i.virtualList(s(t).find(".virtual-list"),{items:k,template:O,height:g||void 0,searchByItem:function(e,t,n){return n.text.toLowerCase().indexOf(e.trim())>=0}});s(t).once("popup"===a?"closed":"pageBeforeRemove",function(){n&&n.destroy&&n.destroy()})}s(t).on("change",'input[name="'+E+'"]',function(){var t=this,n=t.value,o=[];if("checkbox"===t.type)for(var s=0;s<m.options.length;s++){var l=m.options[s];l.value===n&&(l.selected=t.checked),l.selected&&o.push(l.textContent.trim())}else o=[e.find('option[value="'+n+'"]').text()],m.value=n;v.trigger("change"),e.find(".item-after").text(o.join(", ")),d&&"radio"===D&&("popup"===a?i.closeModal(j):r.router.back())})}function n(e){var r=e.detail.page;r.name===z&&(s(document).off("pageInit",n),t(r.container))}if(e=s(e),0!==e.length){var r=e.parents("."+i.params.viewClass);if(0!==r.length&&(r=r[0].f7View)){var a=e.attr("data-open-in");a||(a=i.params.smartSelectInPopup?"popup":"page");var o=e.attr("data-page-title")||e.find(".item-title").text(),u=e.attr("data-back-text")||i.params.smartSelectBackText,c=e.attr("data-popup-close-text")||e.attr("data-back-text")||i.params.smartSelectPopupCloseText,d=e.attr("data-back-onselect")?"true"===e.attr("data-back-onselect"):i.params.smartSelectBackOnSelect,p=e.attr("data-form-theme")||i.params.smartSelectFormTheme,f=e.attr("data-navbar-theme")||i.params.smartSelectNavbarTheme,h="true"===e.attr("data-virtual-list"),g=e.attr("data-virtual-list-height"),m=e.find("select")[0],v=s(m);if(!(m.disabled||e.hasClass("disabled")||v.hasClass("disabled"))){for(var y,_,b,w,x,C,T,S,k=[],A=(new Date).getTime(),D=m.multiple?"checkbox":"radio",E=D+"-"+A,P=0;P<m.length;P++)y=s(m[P]),y[0].disabled||(b=y.attr("data-option-image")||v.attr("data-option-image"),w=y.attr("data-option-icon")||v.attr("data-option-icon"),_=b||w||"checkbox"===D,x=y.parent("optgroup")[0],C=x&&x.label,T=!1,x&&x!==S&&(T=!0,S=x),k.push({value:y[0].value,text:y[0].textContent.trim(),selected:y[0].selected,group:x,groupLabel:C,showGroupLabel:T,image:b,icon:w,disabled:y[0].disabled,inputType:D,id:A,hasMedia:_,checkbox:"checkbox"===D,inputName:E,test:this}));i._compiledTemplates.smartSelectItem||(i._compiledTemplates.smartSelectItem=l.compile(i.params.smartSelectItemTemplate||'{{#if showGroupLabel}}<li class="item-divider">{{groupLabel}}</li>{{/if}}<li><label class="label-{{inputType}} item-content"><input type="{{inputType}}" name="{{inputName}}" value="{{value}}" {{#if selected}}checked{{/if}}>{{#if hasMedia}}<div class="item-media">{{#if checkbox}}<i class="icon icon-form-checkbox"></i>{{/if}}{{#if icon}}<i class="icon {{icon}}"></i>{{/if}}{{#if image}}<img src="{{image}}">{{/if}}</div>{{/if}}<div class="item-inner"><div class="item-title">{{text}}</div></div></label></li>'));var O=i._compiledTemplates.smartSelectItem,L="";if(!h)for(var I=0;I<k.length;I++)L+=O(k[I]);i._compiledTemplates.smartSelectNavbar||(i._compiledTemplates.smartSelectNavbar=l.compile(i.params.smartSelectNavbarTemplate||'<div class="navbar {{#if navbarTheme}}theme-{{navbarTheme}}{{/if}}"><div class="navbar-inner">{{leftTemplate}}<div class="center sliding">{{pageTitle}}</div></div></div>'));var M,N=i._compiledTemplates.smartSelectNavbar({pageTitle:o,backText:u,closeText:c,openIn:a,navbarTheme:f,inPopup:"popup"===a,inPage:"page"===a,leftTemplate:"popup"===a?i.params.smartSelectPopupCloseTemplate.replace(/{{closeText}}/g,c):i.params.smartSelectBackTemplate.replace(/{{backText}}/g,u)}),R="",B="";"page"===a?(M="static",e.parents(".navbar-through").length>0&&(M="through"),e.parents(".navbar-fixed").length>0&&(M="fixed"),B=e.parents(".page").hasClass("no-toolbar")?"no-toolbar":"",R=e.parents(".page").hasClass("no-navbar")?"no-navbar":"navbar-"+M):M="fixed";var F,H,z="smart-select-"+E,U="undefined"==typeof e.data("searchbar")?i.params.smartSelectSearchbar:"true"===e.data("searchbar");U&&(F=e.data("searchbar-placeholder")||"Search",H=e.data("searchbar-cancel")||"Cancel");var j,q='<form class="searchbar" data-search-list=".smart-select-list-'+A+'" data-search-in=".item-title"><div class="searchbar-input"><input type="search" placeholder="'+F+'"><a href="#" class="searchbar-clear"></a></div><a href="#" class="searchbar-cancel">'+H+'</a></form><div class="searchbar-overlay"></div>',V=("through"===M?N:"")+'<div class="pages">  <div data-page="'+z+'" class="page smart-select-page '+R+" "+B+'">'+("fixed"===M?N:"")+(U?q:"")+'    <div class="page-content">'+("static"===M?N:"")+'      <div class="list-block '+(h?"virtual-list":"")+" smart-select-list-"+A+" "+(p?"theme-"+p:"")+'">        <ul>'+(h?"":L)+"        </ul>      </div>    </div>  </div></div>";"popup"===a?(j=i.popup('<div class="popup smart-select-popup smart-select-popup-'+E+'"><div class="view navbar-fixed">'+V+"</div></div>"),i.initPage(s(j).find(".page")),t(j)):(s(document).on("pageInit",n),r.router.load({content:V}))}}}};var f=function(e,t){var n={cols:1,height:44,cache:!0,dynamicHeightBufferSize:1};t=t||{};for(var r in n)"undefined"==typeof t[r]&&(t[r]=n[r]);var a=this;a.listBlock=s(e),a.params=t,a.items=t.items,t.template&&("string"==typeof t.template?a.template=l.compile(t.template):"function"==typeof t.template&&(a.template=t.template)),a.pageContent=a.listBlock.parents(".page-content");var o;"undefined"!=typeof a.params.updatableScroll?o=a.params.updatableScroll:(o=!0,i.device.ios&&i.device.osVersion.split(".")[0]<8&&(o=!1)),a.ul=a.params.ul?s(a.params.ul):a.listBlock.children("ul"),0===a.ul.length&&(a.listBlock.append("<ul></ul>"),a.ul=a.listBlock.children("ul")),a.domCache={},a.displayDomCache={},a.tempDomElement=document.createElement("ul"),a.lastRepaintY=null,a.fragment=document.createDocumentFragment(),a.filterItems=function(e,t){a.filteredItems=[];for(var n=(e[0],e[e.length-1],0);n<e.length;n++)a.filteredItems.push(a.items[e[n]]);"undefined"==typeof t&&(t=!0),t&&(a.pageContent[0].scrollTop=0),a.update()},a.resetFilter=function(){a.filteredItems=null,delete a.filteredItems,a.update()};var u,c,d,p,f,h,g=0,m="function"==typeof a.params.height;return a.setListSize=function(){var e=a.filteredItems||a.items;if(u=a.pageContent[0].offsetHeight,m){h=0,a.heights=[];for(var t=0;t<e.length;t++){var n=a.params.height(e[t]);h+=n,a.heights.push(n)}}else h=e.length*a.params.height/a.params.cols,c=Math.ceil(u/a.params.height),d=a.params.rowsBefore||2*c,p=a.params.rowsAfter||c,f=c+d+p,g=d/2*a.params.height;o&&a.ul.css({height:h+"px"})},a.render=function(e,t){e&&(a.lastRepaintY=null);var n=-(a.listBlock[0].getBoundingClientRect().top+a.pageContent[0].getBoundingClientRect().top);if("undefined"!=typeof t&&(n=t),null===a.lastRepaintY||Math.abs(n-a.lastRepaintY)>g||!o&&a.pageContent[0].scrollTop+u>=a.pageContent[0].scrollHeight){a.lastRepaintY=n;var r,i,s=a.filteredItems||a.items,l=0,c=0;if(m){var p,h,v=0;for(g=u,p=0;p<a.heights.length;p++)h=a.heights[p],"undefined"==typeof r&&(v+h>=n-2*u*a.params.dynamicHeightBufferSize?r=p:l+=h),"undefined"==typeof i&&((v+h>=n+2*u*a.params.dynamicHeightBufferSize||p===a.heights.length-1)&&(i=p+1),c+=h),v+=h;i=Math.min(i,s.length)}else r=(parseInt(n/a.params.height)-d)*a.params.cols,0>r&&(r=0),i=Math.min(r+f*a.params.cols,s.length);var y;a.reachEnd=!1;for(var _=r;i>_;_++){var b,w;w=a.items.indexOf(s[_]),_===r&&(a.currentFromIndex=w),_===i-1&&(a.currentToIndex=w),w===a.items.length-1&&(a.reachEnd=!0),a.domCache[w]?b=a.domCache[w]:(a.tempDomElement.innerHTML=a.template?a.template(s[_],{index:w}):a.params.renderItem?a.params.renderItem(w,s[_]):s[_],b=a.tempDomElement.childNodes[0],a.params.cache&&(a.domCache[w]=b)),b.f7VirtualListIndex=w,_===r&&(y=m?l:_*a.params.height/a.params.cols),b.style.top=y+"px",a.params.onItemBeforeInsert&&a.params.onItemBeforeInsert(a,b),a.fragment.appendChild(b)}o||(a.ul[0].style.height=m?c+"px":_*a.params.height/a.params.cols+"px"),a.params.onBeforeClear&&a.params.onBeforeClear(a,a.fragment),a.ul[0].innerHTML="",a.params.onItemsBeforeInsert&&a.params.onItemsBeforeInsert(a,a.fragment),a.ul[0].appendChild(a.fragment),a.params.onItemsAfterInsert&&a.params.onFragmentAfterInsert(a,a.fragment),"undefined"!=typeof t&&e&&a.pageContent.scrollTop(t,0)}},a.scrollToItem=function(e){if(e>a.items.length)return!1;var t,n=0;if(m)for(var r=0;e>r;r++)n+=a.heights[r];else n=e*a.params.height;return t=a.listBlock[0].offsetTop,a.render(!0,t+n-parseInt(a.pageContent.css("padding-top"),10)),!0},a.handleScroll=function(){a.render()},a.handleResize=function(){a.setListSize(),a.render(!0)},a.attachEvents=function(e){var t=e?"off":"on";a.pageContent[t]("scroll",a.handleScroll),s(window)[t]("resize",a.handleResize)},a.init=function(){a.attachEvents(),a.setListSize(),a.render()},a.appendItems=function(e){for(var t=0;t<e.length;t++)a.items.push(e[t]);a.update()},a.appendItem=function(e){a.appendItems([e])},a.replaceAllItems=function(e){a.items=e,delete a.filteredItems,a.domCache={},a.update()},a.replaceItem=function(e,t){a.items[e]=t,a.params.cache&&delete a.domCache[e],a.update()},a.prependItems=function(e){for(var t=e.length-1;t>=0;t--)a.items.unshift(e[t]);if(a.params.cache){var n={};for(var r in a.domCache)n[parseInt(r,10)+e.length]=a.domCache[r];a.domCache=n}a.update()},a.prependItem=function(e){a.prependItems([e])},a.moveItem=function(e,t){if(e!==t){var n=a.items.splice(e,1)[0];if(t>=a.items.length?(a.items.push(n),t=a.items.length-1):a.items.splice(t,0,n),a.params.cache){var r={};for(var i in a.domCache){var o=parseInt(i,10),s=t>e?e:t,l=t>e?t:e,u=t>e?-1:1;(s>o||o>l)&&(r[o]=a.domCache[o]),o===s&&(r[l]=a.domCache[o]),o>s&&l>=o&&(r[o+u]=a.domCache[o])}a.domCache=r}a.update()}},a.insertItemBefore=function(e,t){if(0===e)return void a.prependItem(t);if(e>=a.items.length)return void a.appendItem(t);if(a.items.splice(e,0,t),a.params.cache){var n={};for(var r in a.domCache){var i=parseInt(r,10);i>=e&&(n[i+1]=a.domCache[i])}a.domCache=n}a.update()},a.deleteItems=function(e){for(var t,n=0,r=0;r<e.length;r++){var i=e[r];"undefined"!=typeof t&&i>t&&(n=-r),i+=n,t=e[r];var o=a.items.splice(i,1)[0];if(a.filteredItems&&a.filteredItems.indexOf(o)>=0&&a.filteredItems.splice(a.filteredItems.indexOf(o),1),a.params.cache){var s={};for(var l in a.domCache){var u=parseInt(l,10);u===i?delete a.domCache[i]:parseInt(l,10)>i?s[u-1]=a.domCache[l]:s[u]=a.domCache[l]}a.domCache=s}}a.update()},a.deleteAllItems=function(){a.items=[],delete a.filteredItems,a.params.cache&&(a.domCache={}),a.update()},a.deleteItem=function(e){a.deleteItems([e])},a.clearCache=function(){a.domCache={}},a.update=function(){a.setListSize(),a.render(!0)},a.destroy=function(){a.attachEvents(!0),delete a.items,delete a.domCache},a.init(),a.listBlock[0].f7VirtualList=a,a};i.virtualList=function(e,t){return new f(e,t)},i.reinitVirtualList=function(e){var t=s(e),n=t.find(".virtual-list");if(0!==n.length)for(var r=0;r<n.length;r++){var a=a[0].f7VirtualList;a&&a.update()}},i.initPullToRefresh=function(e){function t(e){if(u){if("android"!==i.device.os)return;if("targetTouches"in e&&e.targetTouches.length>1)return}c=!1,u=!0,d=void 0,v=void 0,b.x="touchstart"===e.type?e.targetTouches[0].pageX:e.pageX,b.y="touchstart"===e.type?e.targetTouches[0].pageY:e.pageY,f=(new Date).getTime(),h=s(this)}function n(e){if(u){var t="touchmove"===e.type?e.targetTouches[0].pageX:e.pageX,n="touchmove"===e.type?e.targetTouches[0].pageY:e.pageY;if("undefined"==typeof d&&(d=!!(d||Math.abs(n-b.y)>Math.abs(t-b.x))),!d)return void(u=!1);if(m=h[0].scrollTop,"undefined"==typeof v&&0!==m&&(v=!0),!c){if(h.removeClass("transitioning"),m>h[0].offsetHeight)return void(u=!1);_&&(y=h.attr("data-ptr-distance"),y.indexOf("%")>=0&&(y=h[0].offsetHeight*parseInt(y,10)/100)),C=h.hasClass("refreshing")?y:0,x=h[0].scrollHeight===h[0].offsetHeight||"ios"!==i.device.os}return c=!0,p=n-b.y,p>0&&0>=m||0>m?("ios"===i.device.os&&parseInt(i.device.osVersion.split(".")[0],10)>7&&0===m&&!v&&(x=!0),x&&(e.preventDefault(),g=Math.pow(p,.85)+C,h.transform("translate3d(0,"+g+"px,0)")),void(x&&Math.pow(p,.85)>y||!x&&p>=2*y?(w=!0,h.addClass("pull-up").removeClass("pull-down")):(w=!1,h.removeClass("pull-up").addClass("pull-down")))):(h.removeClass("pull-up pull-down"),void(w=!1))}}function r(){return u&&c?(g&&(h.addClass("transitioning"),g=0),h.transform(""),w?(h.addClass("refreshing"),h.trigger("refresh",{done:function(){i.pullToRefreshDone(h)}})):h.removeClass("pull-down"),u=!1,void(c=!1)):(u=!1,void(c=!1))}function a(){l.off(i.touchEvents.start,t),l.off(i.touchEvents.move,n),l.off(i.touchEvents.end,r)}function o(){a(),T.off("pageBeforeRemove",o)}var l=s(e);if(l.hasClass("pull-to-refresh-content")||(l=l.find(".pull-to-refresh-content")),l&&0!==l.length){var u,c,d,p,f,h,g,m,v,y,_,b={},w=!1,x=!1,C=0,T=l.hasClass("page")?l:l.parents(".page"),S=!1;(T.find(".navbar").length>0||T.parents(".navbar-fixed, .navbar-through").length>0||T.hasClass("navbar-fixed")||T.hasClass("navbar-through"))&&(S=!0),T.hasClass("no-navbar")&&(S=!1),S||l.addClass("pull-to-refresh-no-navbar"),h=l,h.attr("data-ptr-distance")?_=!0:y=44,l.on(i.touchEvents.start,t),l.on(i.touchEvents.move,n),l.on(i.touchEvents.end,r),0!==T.length&&(l[0].f7DestroyPullToRefresh=a,T.on("pageBeforeRemove",o))}},i.pullToRefreshDone=function(e){e=s(e),0===e.length&&(e=s(".pull-to-refresh-content.refreshing")),e.removeClass("refreshing").addClass("transitioning"),e.transitionEnd(function(){e.removeClass("transitioning pull-up pull-down")})},i.pullToRefreshTrigger=function(e){e=s(e),0===e.length&&(e=s(".pull-to-refresh-content")),e.hasClass("refreshing")||(e.addClass("transitioning refreshing"),e.trigger("refresh",{done:function(){i.pullToRefreshDone(e)}}))},i.destroyPullToRefresh=function(e){e=s(e);var t=e.hasClass("pull-to-refresh-content")?e:e.find(".pull-to-refresh-content");0!==t.length&&t[0].f7DestroyPullToRefresh&&t[0].f7DestroyPullToRefresh()},i.attachInfiniteScroll=function(e){s(e).on("scroll",r)},i.detachInfiniteScroll=function(e){s(e).off("scroll",r)},i.initInfiniteScroll=function(e){function t(){i.detachInfiniteScroll(n),e.off("pageBeforeRemove",t)}e=s(e);var n=e.find(".infinite-scroll");0!==n.length&&(i.attachInfiniteScroll(n),e.on("pageBeforeRemove",t))},i.initScrollToolbars=function(e){function t(){e.hasClass("page-on-left")||(f=n[0].scrollTop,v=n[0].scrollHeight,y=n[0].offsetHeight,_=i.params.showBarsOnPageScrollEnd&&f+y>=v-k,w=c.hasClass("navbar-hidden"),x=d.hasClass("toolbar-hidden"),C=u&&u.hasClass("toolbar-hidden"),b=p>f||_?"show":f>44?"hide":"show","show"===b?(h&&r&&w&&(i.showNavbar(c),e.removeClass("no-navbar-by-scroll"),w=!1),g&&a&&x&&(i.showToolbar(d),e.removeClass("no-toolbar-by-scroll"),x=!1),m&&o&&C&&(i.showToolbar(u),e.removeClass("no-tabbar-by-scroll"),C=!1)):(h&&r&&!w&&(i.hideNavbar(c),e.addClass("no-navbar-by-scroll"),w=!0),g&&a&&!x&&(i.hideToolbar(d),e.addClass("no-toolbar-by-scroll"),x=!0),m&&o&&!C&&(i.hideToolbar(u),e.addClass("no-tabbar-by-scroll"),C=!0)),p=f)}e=s(e);var n=e.find(".page-content");if(0!==n.length){var r=(i.params.hideNavbarOnPageScroll||n.hasClass("hide-navbar-on-scroll")||n.hasClass("hide-bars-on-scroll"))&&!(n.hasClass("keep-navbar-on-scroll")||n.hasClass("keep-bars-on-scroll")),a=(i.params.hideToolbarOnPageScroll||n.hasClass("hide-toolbar-on-scroll")||n.hasClass("hide-bars-on-scroll"))&&!(n.hasClass("keep-toolbar-on-scroll")||n.hasClass("keep-bars-on-scroll")),o=(i.params.hideTabbarOnPageScroll||n.hasClass("hide-tabbar-on-scroll"))&&!n.hasClass("keep-tabbar-on-scroll");if(r||a||o){var l=n.parents("."+i.params.viewClass);if(0!==l.length){var u,c=l.find(".navbar"),d=l.find(".toolbar");o&&(u=l.find(".tabbar"),0===u.length&&(u=l.parents("."+i.params.viewsClass).find(".tabbar")));var p,f,h=c.length>0,g=d.length>0,m=u&&u.length>0;p=f=n[0].scrollTop;var v,y,_,b,w,x,C,T=g&&a?d[0].offsetHeight:0,S=m&&o?u[0].offsetHeight:0,k=S||T;n.on("scroll",t),n[0].f7ScrollToolbarsHandler=t}}}},i.destroyScrollToolbars=function(e){e=s(e);var t=e.find(".page-content");if(0!==t.length){var n=t[0].f7ScrollToolbarsHandler;n&&t.off("scroll",t[0].f7ScrollToolbarsHandler)}},i.showTab=function(e,t,n){var r=s(e);if(2===arguments.length&&"boolean"==typeof t&&(n=t),0===r.length)return!1;if(r.hasClass("active"))return n&&r.trigger("show"),!1;var a=r.parent(".tabs");if(0===a.length)return!1;i.allowSwipeout=!0;var o=a.parent().hasClass("tabs-animated-wrap");o&&a.transform("translate3d("+100*-r.index()+"%,0,0)");var l=a.children(".tab.active").removeClass("active");if(r.addClass("active"),r.trigger("show"),!o&&r.find(".navbar").length>0){var u;u=r.hasClass(i.params.viewClass)?r[0]:r.parents("."+i.params.viewClass)[0],i.sizeNavbars(u)}if(t?t=s(t):(t=s("string"==typeof e?'.tab-link[href="'+e+'"]':'.tab-link[href="#'+r.attr("id")+'"]'),(!t||t&&0===t.length)&&s("[data-tab]").each(function(){r.is(s(this).attr("data-tab"))&&(t=s(this))})),0!==t.length){var c;if(l&&l.length>0){var d=l.attr("id");d&&(c=s('.tab-link[href="#'+d+'"]')),(!c||c&&0===c.length)&&s("[data-tab]").each(function(){l.is(s(this).attr("data-tab"))&&(c=s(this))})}return t&&t.length>0&&t.addClass("active"),c&&c.length>0&&c.removeClass("active"),!0}},i.accordionToggle=function(e){e=s(e),0!==e.length&&(e.hasClass("accordion-item-expanded")?i.accordionClose(e):i.accordionOpen(e))},i.accordionOpen=function(e){e=s(e);var t=e.parents(".accordion-list").eq(0),n=e.children(".accordion-item-content");0===n.length&&(n=e.find(".accordion-item-content"));var r=t.length>0&&e.parent().children(".accordion-item-expanded");r.length>0&&i.accordionClose(r),n.css("height",n[0].scrollHeight+"px").transitionEnd(function(){e.hasClass("accordion-item-expanded")?(n.transition(0),n.css("height","auto"),n[0].clientLeft,n.transition(""),e.trigger("opened")):(n.css("height",""),e.trigger("closed"))}),e.trigger("open"),e.addClass("accordion-item-expanded")},i.accordionClose=function(e){e=s(e);var t=e.children(".accordion-item-content");0===t.length&&(t=e.find(".accordion-item-content")),e.removeClass("accordion-item-expanded"),t.transition(0),t.css("height",t[0].scrollHeight+"px"),t[0].clientLeft,t.transition(""),t.css("height","").transitionEnd(function(){e.hasClass("accordion-item-expanded")?(t.transition(0),t.css("height","auto"),t[0].clientLeft,t.transition(""),e.trigger("opened")):(t.css("height",""),e.trigger("closed"))}),e.trigger("close")},i.initFastClicks=function(){function e(e){var t,n=s(e.target),r=n.parents(i.params.activeStateElements);return n.is(i.params.activeStateElements)&&(t=n),r.length>0&&(t=t?t.add(r):r),t?t:n}function t(){var e=A.parents(".page-content, .panel");return 0!==e.length&&("yes"!==e.prop("scrollHandlerSet")&&(e.on("scroll",function(){clearTimeout(D)}),e.prop("scrollHandlerSet","yes")),!0)}function n(){A.addClass("active-state")}function r(){A.removeClass("active-state")}function a(e){var t="button checkbox file image radio submit input textarea".split(" ");return!(!document.activeElement||e===document.activeElement||document.activeElement===document.body)&&!(t.indexOf(e.nodeName.toLowerCase())>=0)}function o(e){var t=s(e);return("input"!==e.nodeName.toLowerCase()||"file"!==e.type)&&!(t.hasClass("no-fastclick")||t.parents(".no-fastclick").length>0)}function l(e){if(document.activeElement===e)return!1;var t=e.nodeName.toLowerCase(),n="button checkbox file image radio submit".split(" ");return!e.disabled&&!e.readOnly&&("textarea"===t||("select"===t?!i.device.android:"input"===t&&n.indexOf(e.type)<0||void 0))}function u(e){if(e=s(e),e.is("label")||e.parents("label").length>0){if(i.device.android){var t=i.device.osVersion.split(".");return!(1*t[0]>4||1*t[0]===4&&1*t[1]>=4)}return!1}return!0}function c(t){e(t).addClass("active-state"),"which"in t&&3===t.which&&setTimeout(function(){s(".active-state").removeClass("active-state")},0)}function d(){s(".active-state").removeClass("active-state")}function p(){s(".active-state").removeClass("active-state")}function f(r){if(k=!1,r.targetTouches.length>1)return!0;if(E=o(r.target),!E)return x=!1,!0;if(i.device.ios){var l=window.getSelection();if(l.rangeCount&&l.focusNode!==document.body&&(!l.isCollapsed||document.activeElement===l.focusNode))return C=!0,!0;C=!1}i.device.android&&a(r.target)&&document.activeElement.blur(),x=!0,w=r.target,b=(new Date).getTime(),y=r.targetTouches[0].pageX,_=r.targetTouches[0].pageY,i.device.ios&&(T=void 0,s(w).parents().each(function(){var e=this;e.scrollHeight>e.offsetHeight&&!T&&(T=e,T.f7ScrollTop=T.scrollTop)})),r.timeStamp-S<i.params.fastClicksDelayBetweenClicks&&r.preventDefault(),i.params.activeState&&(A=e(r),t(r)?D=setTimeout(n,80):n())}function h(e){if(x){var t=!1,n=i.params.fastClicksDistanceThreshold;if(n){var a=e.targetTouches[0].pageX,o=e.targetTouches[0].pageY;(Math.abs(a-y)>n||Math.abs(o-_)>n)&&(t=!0)}else t=!0;t&&(x=!1,w=null,k=!0),i.params.activeState&&(clearTimeout(D),r())}}function g(e){if(clearTimeout(D),!x)return!C&&E&&(!i.device.android||e.cancelable)&&e.preventDefault(),!0;if(document.activeElement===e.target)return!0;if(C||e.preventDefault(),e.timeStamp-S<i.params.fastClicksDelayBetweenClicks)return setTimeout(r,0),!0;if(S=e.timeStamp,x=!1,i.device.ios&&T&&T.scrollTop!==T.f7ScrollTop)return!1;i.params.activeState&&(n(),setTimeout(r,0)),l(w)&&w.focus(),document.activeElement&&w!==document.activeElement&&document.activeElement!==document.body&&"label"!==w.nodeName.toLowerCase()&&document.activeElement.blur(),e.preventDefault();var t=e.changedTouches[0],a=document.createEvent("MouseEvents"),o="click";return i.device.android&&"select"===w.nodeName.toLowerCase()&&(o="mousedown"),a.initMouseEvent(o,!0,!0,window,1,t.screenX,t.screenY,t.clientX,t.clientY,!1,!1,!1,!1,0,null),a.forwardedTouchEvent=!0,w.dispatchEvent(a),!1}function m(){x=!1,w=null}function v(e){var t=!1;return x?(w=null,x=!1,!0):"submit"===e.target.type&&0===e.detail||(w||(t=!0),document.activeElement===w&&(t=!0),e.forwardedTouchEvent&&(t=!0),e.cancelable||(t=!0),t||(e.stopImmediatePropagation(),e.stopPropagation(),w?(u(w)||k)&&e.preventDefault():e.preventDefault(),w=null),t)}i.params.activeState&&s("html").addClass("watch-active-state");var y,_,b,w,x,C,T,S,k,A,D,E;i.support.touch?(document.addEventListener("click",v,!0),document.addEventListener("touchstart",f),document.addEventListener("touchmove",h),document.addEventListener("touchend",g),document.addEventListener("touchcancel",m)):i.params.activeState&&(document.addEventListener("mousedown",c),document.addEventListener("mousemove",d),document.addEventListener("mouseup",p))},i.initClickEvents=function(){function e(e){var t=s(this),n=s(e.target),r="a"===t[0].nodeName.toLowerCase()||t.parents("a").length>0||"a"===n[0].nodeName.toLowerCase()||n.parents("a").length>0;if(!r){var a;if(i.params.scrollTopOnNavbarClick&&t.is(".navbar .center")){var o=t.parents(".navbar");a=o.parents(".page-content"),0===a.length&&(o.parents(".page").length>0&&(a=o.parents(".page").find(".page-content")),0===a.length&&o.nextAll(".pages").length>0&&(a=o.nextAll(".pages").find(".page:not(.page-on-left):not(.page-on-right):not(.cached)").find(".page-content")))}i.params.scrollTopOnStatusbarClick&&t.is(".statusbar-overlay")&&(a=s(".popup.modal-in").length>0?s(".popup.modal-in").find(".page:not(.page-on-left):not(.page-on-right):not(.cached)").find(".page-content"):s(".panel.active").length>0?s(".panel.active").find(".page:not(.page-on-left):not(.page-on-right):not(.cached)").find(".page-content"):s(".views > .view.active").length>0?s(".views > .view.active").find(".page:not(.page-on-left):not(.page-on-right):not(.cached)").find(".page-content"):s(".views").find(".page:not(.page-on-left):not(.page-on-right):not(.cached)").find(".page-content")),a&&a.length>0&&(a.hasClass("tab")&&(a=a.parent(".tabs").children(".page-content.active")),a.length>0&&a.scrollTop(0,300))}}function t(e){function t(e){return"false"!==e&&("true"===e||void 0)}var n=s(this),r=n.attr("href"),a="a"===n[0].nodeName.toLowerCase();if(a&&n.is(i.params.externalLinks))return void("_system"===n.attr("target")&&(e.preventDefault(),window.open(r,"_system")));if(n.hasClass("smart-select")&&i.smartSelectOpen&&i.smartSelectOpen(n),n.hasClass("open-panel")&&i.openPanel(1===s(".panel").length?s(".panel").hasClass("panel-left")?"left":"right":"right"===n.attr("data-panel")?"right":"left"),n.hasClass("close-panel")&&i.closePanel(),n.hasClass("panel-overlay")&&i.params.panelsCloseByOutside&&i.closePanel(),n.hasClass("open-popover")){var o;o=n.attr("data-popover")?n.attr("data-popover"):".popover",i.popover(o,n)}n.hasClass("close-popover")&&i.closeModal(".popover.modal-in");var c;n.hasClass("open-popup")&&(c=n.attr("data-popup")?n.attr("data-popup"):".popup",i.popup(c)),n.hasClass("close-popup")&&(c=n.attr("data-popup")?n.attr("data-popup"):".popup.modal-in",i.closeModal(c));var d;if(n.hasClass("open-login-screen")&&(d=n.attr("data-login-screen")?n.attr("data-login-screen"):".login-screen",i.loginScreen(d)),n.hasClass("close-login-screen")&&i.closeModal(".login-screen.modal-in"),n.hasClass("modal-overlay")&&(s(".modal.modal-in").length>0&&i.params.modalCloseByOutside&&i.closeModal(".modal.modal-in"),s(".actions-modal.modal-in").length>0&&i.params.actionsCloseByOutside&&i.closeModal(".actions-modal.modal-in"),s(".popover.modal-in").length>0&&i.closeModal(".popover.modal-in")),n.hasClass("popup-overlay")&&s(".popup.modal-in").length>0&&i.params.popupCloseByOutside&&i.closeModal(".popup.modal-in"),n.hasClass("close-picker")){var p=s(".picker-modal.modal-in");p.length>0?i.closeModal(p):(p=s(".popover.modal-in .picker-modal"),p.length>0&&i.closeModal(p.parents(".popover")))}if(n.hasClass("open-picker")){var f;f=n.attr("data-picker")?n.attr("data-picker"):".picker-modal",i.pickerModal(f,n)}var h;if(n.hasClass("tab-link")&&(h=!0,i.showTab(n.attr("data-tab")||n.attr("href"),n)),n.hasClass("swipeout-close")&&i.swipeoutClose(n.parents(".swipeout-opened")),n.hasClass("swipeout-delete"))if(n.attr("data-confirm")){var g=n.attr("data-confirm"),m=n.attr("data-confirm-title");m?i.confirm(g,m,function(){i.swipeoutDelete(n.parents(".swipeout"))}):i.confirm(g,function(){i.swipeoutDelete(n.parents(".swipeout"))})}else i.swipeoutDelete(n.parents(".swipeout"));if(n.hasClass("toggle-sortable")&&i.sortableToggle(n.data("sortable")),n.hasClass("open-sortable")&&i.sortableOpen(n.data("sortable")),n.hasClass("close-sortable")&&i.sortableClose(n.data("sortable")),n.hasClass("accordion-item-toggle")||n.hasClass("item-link")&&n.parent().hasClass("accordion-item")){var v=n.parent(".accordion-item");0===v.length&&(v=n.parents(".accordion-item")),0===v.length&&(v=n.parents("li")),i.accordionToggle(v)}if((!i.params.ajaxLinks||n.is(i.params.ajaxLinks))&&a&&i.params.router){a&&e.preventDefault();var y=r&&r.length>0&&"#"!==r&&!h,_=n.attr("data-template");if(y||n.hasClass("back")||_){var b;if(n.attr("data-view")?b=s(n.attr("data-view"))[0].f7View:(b=n.parents("."+i.params.viewClass)[0]&&n.parents("."+i.params.viewClass)[0].f7View,b&&b.params.linksView&&("string"==typeof b.params.linksView?b=s(b.params.linksView)[0].f7View:b.params.linksView instanceof u&&(b=b.params.linksView))),b||i.mainView&&(b=i.mainView),!b)return;var w;if(_)r=void 0;else{if(0===r.indexOf("#")&&"#"!==r){if(!b.params.domCache)return;w=r.split("#")[1],r=void 0}if("#"===r&&!n.hasClass("back"))return}var x;n.attr("data-animatePages")?x=t(n.attr("data-animatePages")):(n.hasClass("with-animation")&&(x=!0),n.hasClass("no-animation")&&(x=!1));var C={animatePages:x,ignoreCache:t(n.attr("data-ignoreCache")),force:t(n.attr("data-force")),reload:t(n.attr("data-reload")),reloadPrevious:t(n.attr("data-reloadPrevious")),pageName:w,url:r};if(i.params.template7Pages){C.contextName=n.attr("data-contextName");var T=n.attr("data-context");T&&(C.context=JSON.parse(T))}_&&_ in l.templates&&(C.template=l.templates[_]),n.hasClass("back")?b.router.back(C):b.router.load(C)}}}function n(e){e.preventDefault()}s(document).on("click","a, .open-panel, .close-panel, .panel-overlay, .modal-overlay, .popup-overlay, .swipeout-delete, .swipeout-close, .close-popup, .open-popup, .open-popover, .open-login-screen, .close-login-screen .smart-select, .toggle-sortable, .open-sortable, .close-sortable, .accordion-item-toggle, .close-picker",t),(i.params.scrollTopOnNavbarClick||i.params.scrollTopOnStatusbarClick)&&s(document).on("click",".statusbar-overlay, .navbar .center",e),i.support.touch&&s(document).on("touchstart",".panel-overlay, .modal-overlay, .preloader-indicator-overlay, .popup-overlay, .searchbar-overlay",n)},i.initResize=function(){s(window).on("resize",i.resize),s(window).on("orientationchange",i.orientationchange)},i.resize=function(){i.sizeNavbars&&i.sizeNavbars(),a()},i.orientationchange=function(){i.device&&i.device.minimalUi&&(90===window.orientation||-90===window.orientation)&&(document.body.scrollTop=0),a()},i.formsData={},i.formStoreData=function(e,t){i.formsData[e]=t,i.ls["f7form-"+e]=JSON.stringify(t)},i.formDeleteData=function(e){i.formsData[e]&&(i.formsData[e]="",delete i.formsData[e]),i.ls["f7form-"+e]&&(i.ls["f7form-"+e]="",i.ls.removeItem("f7form-"+e))},i.formGetData=function(e){return i.ls["f7form-"+e]?JSON.parse(i.ls["f7form-"+e]):i.formsData[e]?i.formsData[e]:void 0},i.formToJSON=function(e){if(e=s(e),1!==e.length)return!1;var t={},n=["submit","image","button","file"],r=[];return e.find("input, select, textarea").each(function(){var a=s(this),i=a.attr("name"),o=a.attr("type"),l=this.nodeName.toLowerCase();if(!(n.indexOf(o)>=0||r.indexOf(i)>=0)&&i)if("select"===l&&a.attr("multiple"))r.push(i),t[i]=[],e.find('select[name="'+i+'"] option').each(function(){this.selected&&t[i].push(this.value)});else switch(o){case"checkbox":r.push(i),t[i]=[],e.find('input[name="'+i+'"]').each(function(){this.checked&&t[i].push(this.value)});break;case"radio":r.push(i),e.find('input[name="'+i+'"]').each(function(){this.checked&&(t[i]=this.value)});break;default:t[i]=a.val()}}),e.trigger("formToJSON",{formData:t}),t},i.formFromJSON=function(e,t){if(e=s(e),1!==e.length)return!1;var n=["submit","image","button","file"],r=[];e.find("input, select, textarea").each(function(){var a=s(this),i=a.attr("name"),o=a.attr("type"),l=this.nodeName.toLowerCase();if(t[i]&&!(n.indexOf(o)>=0||r.indexOf(i)>=0)&&i)if("select"===l&&a.attr("multiple"))r.push(i),e.find('select[name="'+i+'"] option').each(function(){this.selected=t[i].indexOf(this.value)>=0});else switch(o){case"checkbox":r.push(i),e.find('input[name="'+i+'"]').each(function(){this.checked=t[i].indexOf(this.value)>=0});break;case"radio":r.push(i),e.find('input[name="'+i+'"]').each(function(){this.checked=t[i]===this.value});break;default:a.val(t[i])}}),e.trigger("formFromJSON",{formData:t})},i.initFormsStorage=function(e){function t(){var e=s(this),t=e[0].id;if(t){var n=i.formToJSON(e);n&&(i.formStoreData(t,n),e.trigger("store",{data:n}))}}function n(){r.off("change submit",t),e.off("pageBeforeRemove",n)}if(e=s(e),0!==e.length){var r=e.find("form.store-data");0!==r.length&&(r.each(function(){var e=this.getAttribute("id");if(e){var t=i.formGetData(e);t&&i.formFromJSON(this,t)}}),r.on("change submit",t),e.on("pageBeforeRemove",n))}},s(document).on("submit change","form.ajax-submit, form.ajax-submit-onchange",function(e){var t=s(this);if("change"!==e.type||t.hasClass("ajax-submit-onchange")){"submit"===e.type&&e.preventDefault();var n=t.attr("method")||"GET",r=t.attr("enctype"),a=t.attr("action");if(a){var o;o="POST"===n?new FormData(t[0]):s.serializeObject(i.formToJSON(t[0]));
var l=s.ajax({method:n,url:a,contentType:r,data:o,beforeSend:function(e){t.trigger("beforeSubmit",{data:o,xhr:e})},error:function(e){t.trigger("submitError",{data:o,xhr:e})},success:function(e){t.trigger("submitted",{data:e,xhr:l})}})}}}),i.pushStateQueue=[],i.pushStateClearQueue=function(){if(0!==i.pushStateQueue.length){var e,t=i.pushStateQueue.pop();i.params.pushStateNoAnimation===!0&&(e=!1),"back"===t.action&&i.router.back(t.view,{animatePages:e}),"loadPage"===t.action&&i.router.load(t.view,{url:t.stateUrl,animatePages:e,pushState:!1}),"loadContent"===t.action&&i.router.load(t.view,{content:t.stateContent,animatePages:e,pushState:!1}),"loadPageName"===t.action&&i.router.load(t.view,{pageName:t.statePageName,animatePages:e,pushState:!1})}},i.initPushState=function(){function e(e){if(!t){var n=i.mainView;if(n){var r=e.state;if(r||(r={viewIndex:i.views.indexOf(n),url:n.history[0]}),!(r.viewIndex<0)){var a,o=i.views[r.viewIndex],s=r&&r.url||void 0,l=r&&r.content||void 0,u=r&&r.pageName||void 0;i.params.pushStateNoAnimation===!0&&(a=!1),s!==o.url&&(o.history.indexOf(s)>=0?o.allowPageChange?i.router.back(o,{url:void 0,animatePages:a,pushState:!1,preloadOnly:!1}):i.pushStateQueue.push({action:"back",view:o}):l?o.allowPageChange?i.router.load(o,{content:l,animatePages:a,pushState:!1}):i.pushStateQueue.unshift({action:"loadContent",stateContent:l,view:o}):u?o.allowPageChange?i.router.load(o,{pageName:u,animatePages:a,pushState:!1}):i.pushStateQueue.unshift({action:"loadPageName",statePageName:u,view:o}):o.allowPageChange?i.router.load(o,{url:s,animatePages:a,pushState:!1}):i.pushStateQueue.unshift({action:"loadPage",stateUrl:s,view:o}))}}}}var t=!0;s(window).on("load",function(){setTimeout(function(){t=!1},0)}),s(window).on("popstate",e)},i.swiper=function(e,t){return new Swiper(e,t)},i.initSwiper=function(e){function t(e){function t(){e.destroy(),n.off("pageBeforeRemove",t)}n.on("pageBeforeRemove",t)}var n=s(e),r=n.find(".swiper-init");if(0!==r.length)for(var a=0;a<r.length;a++){var o,l=r.eq(a);o=l.data("swiper")?JSON.parse(l.data("swiper")):{initialSlide:parseInt(l.data("initialSlide"),10)||void 0,spaceBetween:parseInt(l.data("spaceBetween"),10)||void 0,speed:parseInt(l.data("speed"),10)||void 0,slidesPerView:l.data("slidesPerView")||void 0,slidesPerColumn:parseInt(l.data("slidesPerColumn"),10)||void 0,centeredSlides:l.data("centeredSlides")&&"true"===l.data("centeredSlides"),direction:l.data("direction"),pagination:l.data("pagination"),paginationHide:l.data("paginationHide")&&"true"===l.data("paginationHide"),paginationClickable:l.data("paginationClickable")&&"true"===l.data("paginationClickable"),scrollbar:l.data("scrollbar"),scrollbarHide:l.data("scrollbarHide")&&"true"===l.data("scrollbarHide"),loop:l.data("loop")&&"true"===l.data("loop"),effect:l.data("effect")||"slide",freeMode:l.data("freeMode")&&"true"===l.data("freeMode"),onlyExternal:l.data("onlyExternal")&&"true"===l.data("onlyExternal"),nextButton:l.data("nextButton"),prevButton:l.data("prevButton"),autoplay:l.data("autoplay")};var u=i.swiper(l[0],o);t(u)}},i.reinitSwiper=function(e){var t=s(e),n=t.find(".swiper-init");if(0!==n.length)for(var r=0;r<n.length;r++){var a=n[0].swiper;a&&a.onResize()}};var h=function(e){var t,n=this,r={photos:[],initialSlide:0,spaceBetween:20,speed:300,zoom:!0,maxZoom:3,minZoom:1,exposition:!0,expositionHideCaptions:!1,type:"standalone",navbar:!0,toolbar:!0,theme:"light",swipeToClose:!0,backLinkText:"Close",ofText:"of",loop:!1,lazyLoading:!1,lazyLoadingInPrevNext:!1,lazyLoadingOnTransitionStart:!1};e=e||{};for(var a in r)"undefined"==typeof e[a]&&(e[a]=r[a]);n.params=e;var o="dark"===n.params.theme?"color-white":"",l=n.params.navbarTemplate||'<div class="navbar"><div class="navbar-inner"><div class="left sliding"><a href="#" class="link '+("page"===n.params.type&&"back")+' close-popup photo-browser-close-link" data-popup=".photo-browser-popup"><i class="icon icon-back '+o+'"></i><span>'+n.params.backLinkText+'</span></a></div><div class="center sliding"><span class="photo-browser-current"></span> <span class="photo-browser-of">'+n.params.ofText+'</span> <span class="photo-browser-total"></span></div><div class="right"></div></div></div>',u=n.params.toolbarTemplate||'<div class="toolbar tabbar"><div class="toolbar-inner"><a href="#" class="link photo-browser-prev"><i class="icon icon-prev '+o+'"></i></a><a href="#" class="link photo-browser-next"><i class="icon icon-next '+o+'"></i></a></div></div>',c=n.params.template||'<div class="photo-browser photo-browser-'+n.params.theme+'"><div class="view navbar-fixed toolbar-fixed">{{navbar}}<div data-page="photo-browser-slides" class="page no-toolbar {{noNavbar}} toolbar-fixed navbar-fixed">{{toolbar}}{{captions}}<div class="photo-browser-swiper-container swiper-container"><div class="photo-browser-swiper-wrapper swiper-wrapper">{{photos}}</div></div></div></div></div>',d=n.params.lazyLoading?n.params.photoLazyTemplate||'<div class="photo-browser-slide photo-browser-slide-lazy swiper-slide"><div class="preloader'+("dark"===n.params.theme?" preloader-white":"")+'"></div><span class="photo-browser-zoom-container"><img data-src="{{url}}"></span></div>':n.params.photoTemplate||'<div class="photo-browser-slide swiper-slide"><span class="photo-browser-zoom-container"><img src="{{url}}"></span></div>',p=n.params.captionsTheme||n.params.theme,f=n.params.captionsTemplate||'<div class="photo-browser-captions photo-browser-captions-'+p+'">{{captions}}</div>',h=n.params.captionTemplate||'<div class="photo-browser-caption" data-caption-index="{{captionIndex}}">{{caption}}</div>',g=n.params.objectTemplate||'<div class="photo-browser-slide photo-browser-object-slide swiper-slide">{{html}}</div>',m="",v="";for(t=0;t<n.params.photos.length;t++){var y=n.params.photos[t],_="";"string"==typeof y||y instanceof String?_=y.indexOf("<")>=0||y.indexOf(">")>=0?g.replace(/{{html}}/g,y):d.replace(/{{url}}/g,y):"object"==typeof y&&(y.hasOwnProperty("html")&&y.html.length>0?_=g.replace(/{{html}}/g,y.html):y.hasOwnProperty("url")&&y.url.length>0&&(_=d.replace(/{{url}}/g,y.url)),y.hasOwnProperty("caption")&&y.caption.length>0?v+=h.replace(/{{caption}}/g,y.caption).replace(/{{captionIndex}}/g,t):_=_.replace(/{{caption}}/g,"")),m+=_}var b=c.replace("{{navbar}}",n.params.navbar?l:"").replace("{{noNavbar}}",n.params.navbar?"":"no-navbar").replace("{{photos}}",m).replace("{{captions}}",f.replace(/{{captions}}/g,v)).replace("{{toolbar}}",n.params.toolbar?u:"");n.activeIndex=n.params.initialSlide,n.openIndex=n.activeIndex,n.opened=!1,n.open=function(e){return"undefined"==typeof e&&(e=n.activeIndex),e=parseInt(e,10),n.opened&&n.swiper?void n.swiper.slideTo(e):(n.opened=!0,n.openIndex=e,n.initialLazyLoaded=!1,"standalone"===n.params.type&&s("body").append(b),"popup"===n.params.type&&(n.popup=i.popup('<div class="popup photo-browser-popup">'+b+"</div>"),s(n.popup).on("closed",n.onPopupClose)),"page"===n.params.type?(s(document).on("pageBeforeInit",n.onPageBeforeInit),s(document).on("pageBeforeRemove",n.onPageBeforeRemove),n.params.view||(n.params.view=i.mainView),void n.params.view.loadContent(b)):(n.layout(n.openIndex),void(n.params.onOpen&&n.params.onOpen(n))))},n.close=function(){n.opened=!1,n.swiperContainer&&0!==n.swiperContainer.length&&(n.params.onClose&&n.params.onClose(n),n.attachEvents(!0),"standalone"===n.params.type&&n.container.removeClass("photo-browser-in").addClass("photo-browser-out").animationEnd(function(){n.container.remove()}),n.swiper.destroy(),n.swiper=n.swiperContainer=n.swiperWrapper=n.slides=w=x=C=void 0)},n.onPopupClose=function(){n.close(),s(n.popup).off("pageBeforeInit",n.onPopupClose)},n.onPageBeforeInit=function(e){"photo-browser-slides"===e.detail.page.name&&n.layout(n.openIndex),s(document).off("pageBeforeInit",n.onPageBeforeInit)},n.onPageBeforeRemove=function(e){"photo-browser-slides"===e.detail.page.name&&n.close(),s(document).off("pageBeforeRemove",n.onPageBeforeRemove)},n.loadImageInSlide=function(e,t){if(e&&"undefined"!=typeof t&&0!==e.slides.length){var r=e.slides.eq(t);if(r.hasClass("photo-browser-slide-lazy")){var a=r.find("img");if(0!==a.length){var i=new Image,o=a.attr("data-src");i.onload=function(){a.attr("src",o),a.removeAttr("data-src"),r.removeClass("photo-browser-slide-lazy").find(".preloader").remove(),n.params.onImageLoaded&&n.params.onImageLoaded(n,r[0],a[0])},i.src=o,n.params.onImageLoad&&n.params.onImageLoad(n,r[0],a[0])}}}},n.lazyLoading=function(e,t){if(n.loadImageInSlide(e,t),n.params.lazyLoadingInPrevNext){var r=e.wrapper.find(".swiper-slide-next.photo-browser-slide-lazy");r.length>0&&n.loadImageInSlide(e,r.index());var a=e.wrapper.find(".swiper-slide-prev.photo-browser-slide-lazy");a.length>0&&n.loadImageInSlide(e,a.index())}},n.onSliderTransitionStart=function(e){n.activeIndex=e.activeIndex;var t=e.activeIndex+1,r=e.slides.length;if(n.params.loop&&(r-=2,t-=e.loopedSlides,1>t&&(t=r+t),t>r&&(t-=r)),n.container.find(".photo-browser-current").text(t),n.container.find(".photo-browser-total").text(r),s(".photo-browser-prev, .photo-browser-next").removeClass("photo-browser-link-inactive"),e.isBeginning&&!n.params.loop&&s(".photo-browser-prev").addClass("photo-browser-link-inactive"),e.isEnd&&!n.params.loop&&s(".photo-browser-next").addClass("photo-browser-link-inactive"),n.captions.length>0){n.captionsContainer.find(".photo-browser-caption-active").removeClass("photo-browser-caption-active");var a=n.params.loop?e.slides.eq(e.activeIndex).attr("data-swiper-slide-index"):n.activeIndex;n.captionsContainer.find('[data-caption-index="'+a+'"]').addClass("photo-browser-caption-active")}n.params.lazyLoading&&(n.params.lazyLoadingOnTransitionStart||!n.params.lazyLoadingOnTransitionStart&&!n.initialLazyLoaded)&&(n.initialLazyLoaded=!0,n.lazyLoading(e,n.activeIndex));var i=e.slides.eq(e.previousIndex).find("video");i.length>0&&"pause"in i[0]&&i[0].pause(),n.params.onSlideChangeStart&&n.params.onSlideChangeStart(e)},n.onSliderTransitionEnd=function(e){n.params.lazyLoading&&!n.params.lazyLoadingOnTransitionStart&&n.lazyLoading(e,n.activeIndex),n.params.zoom&&w&&e.previousIndex!==e.activeIndex&&(x.transform("translate3d(0,0,0) scale(1)"),C.transform("translate3d(0,0,0)"),w=x=C=void 0,T=S=1),n.params.onSlideChangeEnd&&n.params.onSlideChangeEnd(e)},n.layout=function(e){n.container="page"===n.params.type?s(".photo-browser-swiper-container").parents(".view"):s(".photo-browser"),"standalone"===n.params.type&&(n.container.addClass("photo-browser-in"),i.sizeNavbars(n.container)),n.swiperContainer=n.container.find(".photo-browser-swiper-container"),n.swiperWrapper=n.container.find(".photo-browser-swiper-wrapper"),n.slides=n.container.find(".photo-browser-slide"),n.captionsContainer=n.container.find(".photo-browser-captions"),n.captions=n.container.find(".photo-browser-caption");var t={nextButton:n.params.nextButton||".photo-browser-next",prevButton:n.params.prevButton||".photo-browser-prev",indexButton:n.params.indexButton,initialSlide:e,spaceBetween:n.params.spaceBetween,speed:n.params.speed,loop:n.params.loop,onTap:function(e,t){n.params.onTap&&n.params.onTap(e,t)},onClick:function(e,t){n.params.exposition&&n.toggleExposition(),n.params.onClick&&n.params.onClick(e,t)},onDoubleTap:function(e,t){n.toggleZoom(s(t.target).parents(".photo-browser-slide")),n.params.onDoubleTap&&n.params.onDoubleTap(e,t)},onTransitionStart:function(e){n.onSliderTransitionStart(e)},onTransitionEnd:function(e){n.onSliderTransitionEnd(e)}};n.params.swipeToClose&&"page"!==n.params.type&&(t.onTouchStart=n.swipeCloseTouchStart,t.onOppositeTouchMove=n.swipeCloseTouchMove,t.onTouchEnd=n.swipeCloseTouchEnd),n.swiper=i.swiper(n.swiperContainer,t),0===e&&n.onSliderTransitionStart(n.swiper),n.attachEvents()},n.attachEvents=function(e){var t=e?"off":"on";if(n.params.zoom){var r=n.params.loop?n.swiper.slides:n.slides;r[t]("gesturestart",n.onSlideGestureStart),r[t]("gesturechange",n.onSlideGestureChange),r[t]("gestureend",n.onSlideGestureEnd),r[t](i.touchEvents.start,n.onSlideTouchStart),r[t](i.touchEvents.move,n.onSlideTouchMove),r[t](i.touchEvents.end,n.onSlideTouchEnd)}n.container.find(".photo-browser-close-link")[t]("click",n.close)},n.exposed=!1,n.toggleExposition=function(){n.container&&n.container.toggleClass("photo-browser-exposed"),n.params.expositionHideCaptions&&n.captionsContainer.toggleClass("photo-browser-captions-exposed"),n.exposed=!n.exposed},n.enableExposition=function(){n.container&&n.container.addClass("photo-browser-exposed"),n.params.expositionHideCaptions&&n.captionsContainer.addClass("photo-browser-captions-exposed"),n.exposed=!0},n.disableExposition=function(){n.container&&n.container.removeClass("photo-browser-exposed"),n.params.expositionHideCaptions&&n.captionsContainer.removeClass("photo-browser-captions-exposed"),n.exposed=!1};var w,x,C,T=1,S=1,k=!1;n.onSlideGestureStart=function(){return w||(w=s(this),x=w.find("img, svg, canvas"),C=x.parent(".photo-browser-zoom-container"),0!==C.length)?(x.transition(0),void(k=!0)):void(x=void 0)},n.onSlideGestureChange=function(e){x&&0!==x.length&&(T=e.scale*S,T>n.params.maxZoom&&(T=n.params.maxZoom-1+Math.pow(T-n.params.maxZoom+1,.5)),T<n.params.minZoom&&(T=n.params.minZoom+1-Math.pow(n.params.minZoom-T+1,.5)),x.transform("translate3d(0,0,0) scale("+T+")"))},n.onSlideGestureEnd=function(){x&&0!==x.length&&(T=Math.max(Math.min(T,n.params.maxZoom),n.params.minZoom),x.transition(n.params.speed).transform("translate3d(0,0,0) scale("+T+")"),S=T,k=!1,1===T&&(w=void 0))},n.toggleZoom=function(){w||(w=n.swiper.slides.eq(n.swiper.activeIndex),x=w.find("img, svg, canvas"),C=x.parent(".photo-browser-zoom-container")),x&&0!==x.length&&(C.transition(300).transform("translate3d(0,0,0)"),T&&1!==T?(T=S=1,x.transition(300).transform("translate3d(0,0,0) scale(1)"),w=void 0):(T=S=n.params.maxZoom,x.transition(300).transform("translate3d(0,0,0) scale("+T+")")))};var A,D,E,P,O,L,I,M,N,R,B,F,H,z,U,j,q,V={},G={};n.onSlideTouchStart=function(e){x&&0!==x.length&&(A||("android"===i.device.os&&e.preventDefault(),A=!0,V.x="touchstart"===e.type?e.targetTouches[0].pageX:e.pageX,V.y="touchstart"===e.type?e.targetTouches[0].pageY:e.pageY))},n.onSlideTouchMove=function(e){if(x&&0!==x.length&&(n.swiper.allowClick=!1,A&&w)){D||(N=x[0].offsetWidth,R=x[0].offsetHeight,B=s.getTranslate(C[0],"x")||0,F=s.getTranslate(C[0],"y")||0,C.transition(0));var t=N*T,r=R*T;if(!(t<n.swiper.width&&r<n.swiper.height)){if(O=Math.min(n.swiper.width/2-t/2,0),I=-O,L=Math.min(n.swiper.height/2-r/2,0),M=-L,G.x="touchmove"===e.type?e.targetTouches[0].pageX:e.pageX,G.y="touchmove"===e.type?e.targetTouches[0].pageY:e.pageY,!D&&!k&&(Math.floor(O)===Math.floor(B)&&G.x<V.x||Math.floor(I)===Math.floor(B)&&G.x>V.x))return void(A=!1);e.preventDefault(),e.stopPropagation(),D=!0,E=G.x-V.x+B,P=G.y-V.y+F,O>E&&(E=O+1-Math.pow(O-E+1,.8)),E>I&&(E=I-1+Math.pow(E-I+1,.8)),L>P&&(P=L+1-Math.pow(L-P+1,.8)),P>M&&(P=M-1+Math.pow(P-M+1,.8)),H||(H=G.x),j||(j=G.y),z||(z=Date.now()),U=(G.x-H)/(Date.now()-z)/2,q=(G.y-j)/(Date.now()-z)/2,Math.abs(G.x-H)<2&&(U=0),Math.abs(G.y-j)<2&&(q=0),H=G.x,j=G.y,z=Date.now(),C.transform("translate3d("+E+"px, "+P+"px,0)")}}},n.onSlideTouchEnd=function(){if(x&&0!==x.length){if(!A||!D)return A=!1,void(D=!1);A=!1,D=!1;var e=300,t=300,r=U*e,a=E+r,i=q*t,o=P+i;0!==U&&(e=Math.abs((a-E)/U)),0!==q&&(t=Math.abs((o-P)/q));var s=Math.max(e,t);E=a,P=o;var l=N*T,u=R*T;O=Math.min(n.swiper.width/2-l/2,0),I=-O,L=Math.min(n.swiper.height/2-u/2,0),M=-L,E=Math.max(Math.min(E,I),O),P=Math.max(Math.min(P,M),L),C.transition(s).transform("translate3d("+E+"px, "+P+"px,0)")}};var W,X,Y,J,K,$=!1,Z=!0,Q=!1;return n.swipeCloseTouchStart=function(){Z&&($=!0)},n.swipeCloseTouchMove=function(e,t){if($){Q||(Q=!0,X="touchmove"===t.type?t.targetTouches[0].pageY:t.pageY,J=n.swiper.slides.eq(n.swiper.activeIndex),K=(new Date).getTime()),t.preventDefault(),Y="touchmove"===t.type?t.targetTouches[0].pageY:t.pageY,W=X-Y;var r=1-Math.abs(W)/300;J.transform("translate3d(0,"+-W+"px,0)"),n.swiper.container.css("opacity",r).transition(0)}},n.swipeCloseTouchEnd=function(){if($=!1,!Q)return void(Q=!1);Q=!1,Z=!1;var e=Math.abs(W),t=(new Date).getTime()-K;return 300>t&&e>20||t>=300&&e>100?void setTimeout(function(){"standalone"===n.params.type&&n.close(),"popup"===n.params.type&&i.closeModal(n.popup),n.params.onSwipeToClose&&n.params.onSwipeToClose(n),Z=!0},0):(0!==e?J.addClass("transitioning").transitionEnd(function(){Z=!0,J.removeClass("transitioning")}):Z=!0,n.swiper.container.css("opacity","").transition(""),void J.transform(""))},n};i.photoBrowser=function(e){return new h(e)};var g=function(e){function t(){var e=!1;return u.params.convertToPopover?(!u.inline&&u.params.input&&(i.device.ios?e=!!i.device.ipad:s(window).width()>=768&&(e=!0)),e):e}function n(){return!!(u.opened&&u.container&&u.container.length>0&&u.container.parents(".popover").length>0)}function r(){if(u.opened)for(var e=0;e<u.cols.length;e++)u.cols[e].divider||(u.cols[e].calcSize(),u.cols[e].setValue(u.cols[e].value,0,!1))}function a(e){if(e.preventDefault(),!u.opened&&(u.open(),u.params.scrollToInput&&!t())){var n=u.input.parents(".page-content");if(0===n.length)return;var r,a=parseInt(n.css("padding-top"),10),i=parseInt(n.css("padding-bottom"),10),o=n[0].offsetHeight-a-u.container.height(),s=n[0].scrollHeight-a-u.container.height(),l=u.input.offset().top-a+u.input[0].offsetHeight;if(l>o){var c=n.scrollTop()+l-o;c+o>s&&(r=c+o-s+i,o===s&&(r=u.container.height()),n.css({"padding-bottom":r+"px"})),n.scrollTop(c,300)}}}function o(e){n()||(u.input&&u.input.length>0?e.target!==u.input[0]&&0===s(e.target).parents(".picker-modal").length&&u.close():0===s(e.target).parents(".picker-modal").length&&u.close())}function l(){u.opened=!1,u.input.parents(".page-content").css({"padding-bottom":""}),u.params.onClose&&u.params.onClose(u),u.container.find(".picker-items-col").each(function(){u.destroyPickerCol(this)})}var u=this,c={updateValuesOnMomentum:!1,updateValuesOnTouchmove:!0,rotateEffect:!1,momentumRatio:7,freeMode:!1,scrollToInput:!0,inputReadOnly:!0,convertToPopover:!0,toolbar:!0,toolbarCloseText:"Done",toolbarTemplate:'<div class="toolbar"><div class="toolbar-inner"><div class="left"></div><div class="right"><a href="#" class="link close-picker">{{closeText}}</a></div></div></div>'};e=e||{};for(var d in c)"undefined"==typeof e[d]&&(e[d]=c[d]);u.params=e,u.cols=[],u.initialized=!1,u.inline=!!u.params.container;var p=i.device.ios||navigator.userAgent.toLowerCase().indexOf("safari")>=0&&navigator.userAgent.toLowerCase().indexOf("chrome")<0&&!i.device.android;return u.setValue=function(e,t){for(var n=0,r=0;r<u.cols.length;r++)u.cols[r]&&!u.cols[r].divider&&(u.cols[r].setValue(e[n],t),n++)},u.updateValue=function(){for(var e=[],t=[],n=0;n<u.cols.length;n++)u.cols[n].divider||(e.push(u.cols[n].value),t.push(u.cols[n].displayValue));e.indexOf(void 0)>=0||(u.value=e,u.displayValue=t,u.params.onChange&&u.params.onChange(u,u.value,u.displayValue),u.input&&u.input.length>0&&(s(u.input).val(u.params.formatValue?u.params.formatValue(u,u.value,u.displayValue):u.value.join(" ")),s(u.input).trigger("change")))},u.initPickerCol=function(e,t){function n(){_=s.requestAnimationFrame(function(){f.updateItems(void 0,void 0,0),n()})}function r(e){w||b||(e.preventDefault(),b=!0,x=C="touchstart"===e.type?e.targetTouches[0].pageY:e.pageY,T=(new Date).getTime(),L=!0,k=D=s.getTranslate(f.wrapper[0],"y"))}function a(e){if(b){e.preventDefault(),L=!1,C="touchmove"===e.type?e.targetTouches[0].pageY:e.pageY,w||(s.cancelAnimationFrame(_),w=!0,k=D=s.getTranslate(f.wrapper[0],"y"),f.wrapper.transition(0)),e.preventDefault();var t=C-x;D=k+t,A=void 0,v>D&&(D=v-Math.pow(v-D,.8),A="min"),D>y&&(D=y+Math.pow(D-y,.8),A="max"),f.wrapper.transform("translate3d(0,"+D+"px,0)"),f.updateItems(void 0,D,0,u.params.updateValuesOnTouchmove),P=D-E||D,O=(new Date).getTime(),E=D}}function o(){if(!b||!w)return void(b=w=!1);b=w=!1,f.wrapper.transition(""),A&&f.wrapper.transform("min"===A?"translate3d(0,"+v+"px,0)":"translate3d(0,"+y+"px,0)"),S=(new Date).getTime();var e,t;S-T>300?t=D:(e=Math.abs(P/(S-O)),t=D+P*u.params.momentumRatio),t=Math.max(Math.min(t,y),v);var r=-Math.floor((t-y)/g);u.params.freeMode||(t=-r*g+y),f.wrapper.transform("translate3d(0,"+parseInt(t,10)+"px,0)"),f.updateItems(r,t,"",!0),u.params.updateValuesOnMomentum&&(n(),f.wrapper.transitionEnd(function(){s.cancelAnimationFrame(_)})),setTimeout(function(){L=!0},100)}function l(){if(L){s.cancelAnimationFrame(_);var e=s(this).attr("data-picker-value");f.setValue(e)}}var c=s(e),d=c.index(),f=u.cols[d];if(!f.divider){f.container=c,f.wrapper=f.container.find(".picker-items-col-wrapper"),f.items=f.wrapper.find(".picker-item");var h,g,m,v,y;f.replaceValues=function(e,t){f.values=e,f.displayValues=t;var n=u.columnHTML(f,!0);f.wrapper.html(n),f.items=f.wrapper.find(".picker-item"),f.calcSize(),f.setValue(f.values[0],0,!0)},f.calcSize=function(){u.params.rotateEffect&&(f.container.removeClass("picker-items-col-absolute"),f.width||f.container.css({width:""}));var e,t;e=0,t=f.container[0].offsetHeight,h=f.wrapper[0].offsetHeight,g=f.items[0].offsetHeight,m=g*f.items.length,v=t/2-m+g/2,y=t/2-g/2,f.width&&(e=f.width,parseInt(e,10)===e&&(e+="px"),f.container.css({width:e})),u.params.rotateEffect&&(f.width||(f.items.each(function(){var t=s(this);t.css({width:"auto"}),e=Math.max(e,t[0].offsetWidth),t.css({width:""})}),f.container.css({width:e+2+"px"})),f.container.addClass("picker-items-col-absolute"))},f.calcSize(),f.wrapper.transform("translate3d(0,"+y+"px,0)").transition(0);var _;f.setValue=function(e,t,r){"undefined"==typeof t&&(t="");var a=f.wrapper.find('.picker-item[data-picker-value="'+e+'"]').index();if("undefined"!=typeof a&&-1!==a){var i=-a*g+y;f.wrapper.transition(t),f.wrapper.transform("translate3d(0,"+i+"px,0)"),u.params.updateValuesOnMomentum&&f.activeIndex&&f.activeIndex!==a&&(s.cancelAnimationFrame(_),f.wrapper.transitionEnd(function(){s.cancelAnimationFrame(_)}),n()),f.updateItems(a,i,t,r)}},f.updateItems=function(e,t,n,r){"undefined"==typeof t&&(t=s.getTranslate(f.wrapper[0],"y")),"undefined"==typeof e&&(e=-Math.round((t-y)/g)),0>e&&(e=0),e>=f.items.length&&(e=f.items.length-1);var a=f.activeIndex;f.activeIndex=e,f.wrapper.find(".picker-selected, .picker-after-selected, .picker-before-selected").removeClass("picker-selected picker-after-selected picker-before-selected"),f.items.transition(n);var i=f.items.eq(e).addClass("picker-selected").transform("");i.prevAll().addClass("picker-before-selected"),i.nextAll().addClass("picker-after-selected"),(r||"undefined"==typeof r)&&(f.value=i.attr("data-picker-value"),f.displayValue=f.displayValues?f.displayValues[e]:f.value,a!==e&&(f.onChange&&f.onChange(u,f.value,f.displayValue),u.updateValue())),u.params.rotateEffect&&((t-(Math.floor((t-y)/g)*g+y))/g,f.items.each(function(){var e=s(this),n=e.index()*g,r=y-t,a=n-r,i=a/g,o=Math.ceil(f.height/g/2)+1,l=-18*i;l>180&&(l=180),-180>l&&(l=-180),Math.abs(i)>o?e.addClass("picker-item-far"):e.removeClass("picker-item-far"),e.transform("translate3d(0, "+(-t+y)+"px, "+(p?-110:0)+"px) rotateX("+l+"deg)")}))},t&&f.updateItems(0,y,0);var b,w,x,C,T,S,k,A,D,E,P,O,L=!0;f.container.on(i.touchEvents.start,r),f.container.on(i.touchEvents.move,a),f.container.on(i.touchEvents.end,o),f.items.on("click",l),f.container[0].f7DestroyPickerCol=function(){f.container.off(i.touchEvents.start,r),f.container.off(i.touchEvents.move,a),f.container.off(i.touchEvents.end,o),f.items.off("click",l)}}},u.destroyPickerCol=function(e){e=s(e),"f7DestroyPickerCol"in e[0]&&e[0].f7DestroyPickerCol()},s(window).on("resize",r),u.columnHTML=function(e,t){var n="",r="";if(e.divider)r+='<div class="picker-items-col picker-items-col-divider '+(e.textAlign?"picker-items-col-"+e.textAlign:"")+" "+(e.cssClass||"")+'">'+e.content+"</div>";else{for(var a=0;a<e.values.length;a++)n+='<div class="picker-item" data-picker-value="'+e.values[a]+'">'+(e.displayValues?e.displayValues[a]:e.values[a])+"</div>";r+='<div class="picker-items-col '+(e.textAlign?"picker-items-col-"+e.textAlign:"")+" "+(e.cssClass||"")+'"><div class="picker-items-col-wrapper">'+n+"</div></div>"}return t?n:r},u.layout=function(){var e,t="",n="";u.cols=[];var r="";for(e=0;e<u.params.cols.length;e++){var a=u.params.cols[e];r+=u.columnHTML(u.params.cols[e]),u.cols.push(a)}n="picker-modal picker-columns "+(u.params.cssClass||"")+(u.params.rotateEffect?" picker-3d":""),t='<div class="'+n+'">'+(u.params.toolbar?u.params.toolbarTemplate.replace(/{{closeText}}/g,u.params.toolbarCloseText):"")+'<div class="picker-modal-inner picker-items">'+r+'<div class="picker-center-highlight"></div></div></div>',u.pickerHTML=t},u.params.input&&(u.input=s(u.params.input),u.params.inputReadOnly&&u.input.prop("readOnly",!0),u.inline||u.input.on("click",a),u.params.inputReadOnly&&u.input.on("focus mousedown",function(e){e.preventDefault()})),u.inline||s("html").on("click",o),u.opened=!1,u.open=function(){var e=t();u.opened||(u.layout(),e?(u.pickerHTML='<div class="popover popover-picker-columns"><div class="popover-inner">'+u.pickerHTML+"</div></div>",u.popover=i.popover(u.pickerHTML,u.params.input,!0),u.container=s(u.popover).find(".picker-modal"),s(u.popover).on("close",function(){l()})):u.inline?(u.container=s(u.pickerHTML),u.container.addClass("picker-modal-inline"),s(u.params.container).append(u.container)):(u.container=s(i.pickerModal(u.pickerHTML)),s(u.container).on("close",function(){l()})),u.container[0].f7Picker=u,u.container.find(".picker-items-col").each(function(){var e=!0;(!u.initialized&&u.params.value||u.initialized&&u.value)&&(e=!1),u.initPickerCol(this,e)}),u.initialized?u.value&&u.setValue(u.value,0):u.params.value&&u.setValue(u.params.value,0)),u.opened=!0,u.initialized=!0,u.params.onOpen&&u.params.onOpen(u)},u.close=function(){return u.opened&&!u.inline?n()?void i.closeModal(u.popover):void i.closeModal(u.container):void 0},u.destroy=function(){u.close(),u.params.input&&u.input.off("click focus",a),s("html").off("click",o),s(window).off("resize",r)},u.inline&&u.open(),u};i.picker=function(e){return new g(e)};var m=function(e){function t(){var e=!1;return u.params.convertToPopover?(!u.inline&&u.params.input&&(i.device.ios?e=!!i.device.ipad:s(window).width()>=768&&(e=!0)),e):e}function n(){return!!(u.opened&&u.container&&u.container.length>0&&u.container.parents(".popover").length>0)}function r(e){e=new Date(e);var t=e.getFullYear(),n=e.getMonth(),r=n+1,a=e.getDate(),i=e.getDay();return u.params.dateFormat.replace(/yyyy/g,t).replace(/yy/g,(t+"").substring(2)).replace(/mm/g,10>r?"0"+r:r).replace(/m/g,r).replace(/MM/g,u.params.monthNames[n]).replace(/M/g,u.params.monthNamesShort[n]).replace(/dd/g,10>a?"0"+a:a).replace(/d/g,a).replace(/DD/g,u.params.dayNames[i]).replace(/D/g,u.params.dayNamesShort[i])}function a(e){if(e.preventDefault(),!u.opened&&(u.open(),u.params.scrollToInput&&!t())){var n=u.input.parents(".page-content");if(0===n.length)return;var r,a=parseInt(n.css("padding-top"),10),i=parseInt(n.css("padding-bottom"),10),o=n[0].offsetHeight-a-u.container.height(),s=n[0].scrollHeight-a-u.container.height(),l=u.input.offset().top-a+u.input[0].offsetHeight;if(l>o){var c=n.scrollTop()+l-o;c+o>s&&(r=c+o-s+i,o===s&&(r=u.container.height()),n.css({"padding-bottom":r+"px"})),n.scrollTop(c,300)}}}function o(e){n()||(u.input&&u.input.length>0?e.target!==u.input[0]&&0===s(e.target).parents(".picker-modal").length&&u.close():0===s(e.target).parents(".picker-modal").length&&u.close())}function l(){u.opened=!1,u.input.parents(".page-content").css({"padding-bottom":""}),u.params.onClose&&u.params.onClose(u),u.destroyCalendarEvents()}var u=this,c={monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],firstDay:1,weekendDays:[0,6],multiple:!1,dateFormat:"yyyy-mm-dd",direction:"horizontal",minDate:null,maxDate:null,touchMove:!0,animate:!0,closeOnSelect:!1,monthPicker:!0,monthPickerTemplate:'<div class="picker-calendar-month-picker"><a href="#" class="link icon-only picker-calendar-prev-month"><i class="icon icon-prev"></i></a><span class="current-month-value"></span><a href="#" class="link icon-only picker-calendar-next-month"><i class="icon icon-next"></i></a></div>',yearPicker:!0,yearPickerTemplate:'<div class="picker-calendar-year-picker"><a href="#" class="link icon-only picker-calendar-prev-year"><i class="icon icon-prev"></i></a><span class="current-year-value"></span><a href="#" class="link icon-only picker-calendar-next-year"><i class="icon icon-next"></i></a></div>',weekHeader:!0,scrollToInput:!0,inputReadOnly:!0,convertToPopover:!0,toolbar:!0,toolbarCloseText:"Done",toolbarTemplate:'<div class="toolbar"><div class="toolbar-inner">{{monthPicker}}{{yearPicker}}</div></div>'};e=e||{};for(var d in c)"undefined"==typeof e[d]&&(e[d]=c[d]);u.params=e,u.initialized=!1,u.inline=!!u.params.container,u.isH="horizontal"===u.params.direction;var p=u.isH&&i.rtl?-1:1;return u.animating=!1,u.addValue=function(e){if(u.params.multiple){u.value||(u.value=[]);for(var t,n=0;n<u.value.length;n++)new Date(e).getTime()===new Date(u.value[n]).getTime()&&(t=n);"undefined"==typeof t?u.value.push(e):u.value.splice(t,1),u.updateValue()}else u.value=[e],u.updateValue()},u.setValue=function(e){u.value=e,u.updateValue()},u.updateValue=function(){u.wrapper.find(".picker-calendar-day-selected").removeClass("picker-calendar-day-selected");var e,t;for(e=0;e<u.value.length;e++){var n=new Date(u.value[e]);u.wrapper.find('.picker-calendar-day[data-date="'+n.getFullYear()+"-"+n.getMonth()+"-"+n.getDate()+'"]').addClass("picker-calendar-day-selected")}if(u.params.onChange&&u.params.onChange(u,u.value),u.input&&u.input.length>0){if(u.params.formatValue)t=u.params.formatValue(u,u.value);else{for(t=[],e=0;e<u.value.length;e++)t.push(r(u.value[e]));t=t.join(", ")}s(u.input).val(t),s(u.input).trigger("change")}},u.initCalendarEvents=function(){function e(e){o||a||(a=!0,l=f="touchstart"===e.type?e.targetTouches[0].pageX:e.pageX,c=f="touchstart"===e.type?e.targetTouches[0].pageY:e.pageY,h=(new Date).getTime(),b=0,C=!0,x=void 0,m=v=u.monthsTranslate)}function t(e){if(a){if(d="touchmove"===e.type?e.targetTouches[0].pageX:e.pageX,f="touchmove"===e.type?e.targetTouches[0].pageY:e.pageY,"undefined"==typeof x&&(x=!!(x||Math.abs(f-c)>Math.abs(d-l))),u.isH&&x)return void(a=!1);if(e.preventDefault(),u.animating)return void(a=!1);C=!1,o||(o=!0,y=u.wrapper[0].offsetWidth,_=u.wrapper[0].offsetHeight,u.wrapper.transition(0)),e.preventDefault(),w=u.isH?d-l:f-c,b=w/(u.isH?y:_),v=100*(u.monthsTranslate*p+b),u.wrapper.transform("translate3d("+(u.isH?v:0)+"%, "+(u.isH?0:v)+"%, 0)")}}function n(){return a&&o?(a=o=!1,g=(new Date).getTime(),300>g-h?Math.abs(w)<10?u.resetMonth():w>=10?i.rtl?u.nextMonth():u.prevMonth():i.rtl?u.prevMonth():u.nextMonth():-.5>=b?i.rtl?u.prevMonth():u.nextMonth():b>=.5?i.rtl?u.nextMonth():u.prevMonth():u.resetMonth(),void setTimeout(function(){C=!0},100)):void(a=o=!1)}function r(e){if(C){var t=s(e.target).parents(".picker-calendar-day");if(0===t.length&&s(e.target).hasClass("picker-calendar-day")&&(t=s(e.target)),0!==t.length&&(!t.hasClass("picker-calendar-day-selected")||u.params.multiple)&&!t.hasClass("picker-calendar-day-disabled")){t.hasClass("picker-calendar-day-next")&&u.nextMonth(),t.hasClass("picker-calendar-day-prev")&&u.prevMonth();var n=t.attr("data-year"),r=t.attr("data-month"),a=t.attr("data-day");u.params.onDayClick&&u.params.onDayClick(u,t[0],n,r,a),u.addValue(new Date(n,r,a).getTime()),u.params.closeOnSelect&&u.close()}}}var a,o,l,c,d,f,h,g,m,v,y,_,b,w,x,C=!0;u.container.find(".picker-calendar-prev-month").on("click",u.prevMonth),u.container.find(".picker-calendar-next-month").on("click",u.nextMonth),u.container.find(".picker-calendar-prev-year").on("click",u.prevYear),u.container.find(".picker-calendar-next-year").on("click",u.nextYear),
u.wrapper.on("click",r),u.params.touchMove&&(u.wrapper.on(i.touchEvents.start,e),u.wrapper.on(i.touchEvents.move,t),u.wrapper.on(i.touchEvents.end,n)),u.container[0].f7DestroyCalendarEvents=function(){u.container.find(".picker-calendar-prev-month").off("click",u.prevMonth),u.container.find(".picker-calendar-next-month").off("click",u.nextMonth),u.container.find(".picker-calendar-prev-year").off("click",u.prevYear),u.container.find(".picker-calendar-next-year").off("click",u.nextYear),u.wrapper.off("click",r),u.params.touchMove&&(u.wrapper.off(i.touchEvents.start,e),u.wrapper.off(i.touchEvents.move,t),u.wrapper.off(i.touchEvents.end,n))}},u.destroyCalendarEvents=function(){"f7DestroyCalendarEvents"in u.container[0]&&u.container[0].f7DestroyCalendarEvents()},u.daysInMonth=function(e){var t=new Date(e);return new Date(t.getFullYear(),t.getMonth()+1,0).getDate()},u.monthHTML=function(e,t){e=new Date(e);var n=e.getFullYear(),r=e.getMonth();e.getDate(),"next"===t&&(e=11===r?new Date(n+1,0):new Date(n,r+1,1)),"prev"===t&&(e=0===r?new Date(n-1,11):new Date(n,r-1,1)),("next"===t||"prev"===t)&&(r=e.getMonth(),n=e.getFullYear());var a=u.daysInMonth(new Date(e.getFullYear(),e.getMonth()).getTime()-864e6),i=u.daysInMonth(e),o=new Date(e.getFullYear(),e.getMonth()).getDay();0===o&&(o=7);var s,l,c,d=[],p=6,f=7,h="",g=0+(u.params.firstDay-1),m=(new Date).setHours(0,0,0,0),v=u.params.minDate?new Date(u.params.minDate).getTime():null,y=u.params.maxDate?new Date(u.params.maxDate).getTime():null;if(u.value&&u.value.length)for(l=0;l<u.value.length;l++)d.push(new Date(u.value[l]).setHours(0,0,0,0));for(l=1;p>=l;l++){var _="";for(c=1;f>=c;c++){var b=c;g++;var w=g-o,x="";0>w?(w=a+w+1,x+=" picker-calendar-day-prev",s=new Date(0>r-1?n-1:n,0>r-1?11:r-1,w).getTime()):(w+=1,w>i?(w-=i,x+=" picker-calendar-day-next",s=new Date(r+1>11?n+1:n,r+1>11?0:r+1,w).getTime()):s=new Date(n,r,w).getTime()),s===m&&(x+=" picker-calendar-day-today"),d.indexOf(s)>=0&&(x+=" picker-calendar-day-selected"),u.params.weekendDays.indexOf(b-1)>=0&&(x+=" picker-calendar-day-weekend"),(v&&v>s||y&&s>y)&&(x+=" picker-calendar-day-disabled"),s=new Date(s);var C=s.getFullYear(),T=s.getMonth();_+='<div data-year="'+C+'" data-month="'+T+'" data-day="'+w+'" class="picker-calendar-day'+x+'" data-date="'+(C+"-"+T+"-"+w)+'"><span>'+w+"</span></div>"}h+='<div class="picker-calendar-row">'+_+"</div>"}return h='<div class="picker-calendar-month" data-year="'+n+'" data-month="'+r+'">'+h+"</div>"},u.animating=!1,u.updateCurrentMonthYear=function(e){"undefined"==typeof e?(u.currentMonth=parseInt(u.months.eq(1).attr("data-month"),10),u.currentYear=parseInt(u.months.eq(1).attr("data-year"),10)):(u.currentMonth=parseInt(u.months.eq("next"===e?u.months.length-1:0).attr("data-month"),10),u.currentYear=parseInt(u.months.eq("next"===e?u.months.length-1:0).attr("data-year"),10)),u.container.find(".current-month-value").text(u.params.monthNames[u.currentMonth]),u.container.find(".current-year-value").text(u.currentYear)},u.onMonthChangeStart=function(e){u.updateCurrentMonthYear(e),u.months.removeClass("picker-calendar-month-current picker-calendar-month-prev picker-calendar-month-next");var t="next"===e?u.months.length-1:0;u.months.eq(t).addClass("picker-calendar-month-current"),u.months.eq("next"===e?t-1:t+1).addClass("next"===e?"picker-calendar-month-prev":"picker-calendar-month-next"),u.params.onMonthYearChangeStart&&u.params.onMonthYearChangeStart(u,u.currentYear,u.currentMonth)},u.onMonthChangeEnd=function(e,t){u.animating=!1;var n,r,a;u.wrapper.find(".picker-calendar-month:not(.picker-calendar-month-prev):not(.picker-calendar-month-current):not(.picker-calendar-month-next)").remove(),"undefined"==typeof e&&(e="next",t=!0),t?(u.wrapper.find(".picker-calendar-month-next, .picker-calendar-month-prev").remove(),r=u.monthHTML(new Date(u.currentYear,u.currentMonth),"prev"),n=u.monthHTML(new Date(u.currentYear,u.currentMonth),"next")):a=u.monthHTML(new Date(u.currentYear,u.currentMonth),e),("next"===e||t)&&u.wrapper.append(a||n),("prev"===e||t)&&u.wrapper.prepend(a||r),u.months=u.wrapper.find(".picker-calendar-month"),u.setMonthsTranslate(u.monthsTranslate),u.params.onMonthAdd&&u.params.onMonthAdd(u,"next"===e?u.months.eq(u.months.length-1)[0]:u.months.eq(0)[0]),u.params.onMonthYearChangeEnd&&u.params.onMonthYearChangeEnd(u,u.currentYear,u.currentMonth)},u.setMonthsTranslate=function(e){e=e||u.monthsTranslate||0,"undefined"==typeof u.monthsTranslate&&(u.monthsTranslate=e),u.months.removeClass("picker-calendar-month-current picker-calendar-month-prev picker-calendar-month-next");var t=100*-(e+1)*p,n=100*-e*p,r=100*-(e-1)*p;u.months.eq(0).transform("translate3d("+(u.isH?t:0)+"%, "+(u.isH?0:t)+"%, 0)").addClass("picker-calendar-month-prev"),u.months.eq(1).transform("translate3d("+(u.isH?n:0)+"%, "+(u.isH?0:n)+"%, 0)").addClass("picker-calendar-month-current"),u.months.eq(2).transform("translate3d("+(u.isH?r:0)+"%, "+(u.isH?0:r)+"%, 0)").addClass("picker-calendar-month-next")},u.nextMonth=function(e){("undefined"==typeof e||"object"==typeof e)&&(e="",u.params.animate||(e=0));var t=parseInt(u.months.eq(u.months.length-1).attr("data-month"),10),n=parseInt(u.months.eq(u.months.length-1).attr("data-year"),10),r=new Date(n,t),a=r.getTime(),i=!u.animating;if(u.params.maxDate&&a>new Date(u.params.maxDate).getTime())return u.resetMonth();if(u.monthsTranslate--,t===u.currentMonth){var o=100*-u.monthsTranslate*p,l=s(u.monthHTML(a,"next")).transform("translate3d("+(u.isH?o:0)+"%, "+(u.isH?0:o)+"%, 0)").addClass("picker-calendar-month-next");u.wrapper.append(l[0]),u.months=u.wrapper.find(".picker-calendar-month"),u.params.onMonthAdd&&u.params.onMonthAdd(u,u.months.eq(u.months.length-1)[0])}u.animating=!0,u.onMonthChangeStart("next");var c=100*u.monthsTranslate*p;u.wrapper.transition(e).transform("translate3d("+(u.isH?c:0)+"%, "+(u.isH?0:c)+"%, 0)"),i&&u.wrapper.transitionEnd(function(){u.onMonthChangeEnd("next")}),u.params.animate||u.onMonthChangeEnd("next")},u.prevMonth=function(e){("undefined"==typeof e||"object"==typeof e)&&(e="",u.params.animate||(e=0));var t=parseInt(u.months.eq(0).attr("data-month"),10),n=parseInt(u.months.eq(0).attr("data-year"),10),r=new Date(n,t+1,(-1)),a=r.getTime(),i=!u.animating;if(u.params.minDate&&a<new Date(u.params.minDate).getTime())return u.resetMonth();if(u.monthsTranslate++,t===u.currentMonth){var o=100*-u.monthsTranslate*p,l=s(u.monthHTML(a,"prev")).transform("translate3d("+(u.isH?o:0)+"%, "+(u.isH?0:o)+"%, 0)").addClass("picker-calendar-month-prev");u.wrapper.prepend(l[0]),u.months=u.wrapper.find(".picker-calendar-month"),u.params.onMonthAdd&&u.params.onMonthAdd(u,u.months.eq(0)[0])}u.animating=!0,u.onMonthChangeStart("prev");var c=100*u.monthsTranslate*p;u.wrapper.transition(e).transform("translate3d("+(u.isH?c:0)+"%, "+(u.isH?0:c)+"%, 0)"),i&&u.wrapper.transitionEnd(function(){u.onMonthChangeEnd("prev")}),u.params.animate||u.onMonthChangeEnd("prev")},u.resetMonth=function(e){"undefined"==typeof e&&(e="");var t=100*u.monthsTranslate*p;u.wrapper.transition(e).transform("translate3d("+(u.isH?t:0)+"%, "+(u.isH?0:t)+"%, 0)")},u.setYearMonth=function(e,t,n){"undefined"==typeof e&&(e=u.currentYear),"undefined"==typeof t&&(t=u.currentMonth),("undefined"==typeof n||"object"==typeof n)&&(n="",u.params.animate||(n=0));var r=new Date(e,t).getTime();if(u.params.maxDate&&r>new Date(u.params.maxDate).getTime())return!1;if(u.params.minDate&&r<new Date(u.params.minDate).getTime())return!1;var a,i=new Date(u.currentYear,u.currentMonth).getTime(),o=u.monthHTML(new Date(e,t));u.monthsTranslate=u.monthsTranslate||0;var s,l,c=u.monthsTranslate,d=!u.animating;r>i?(u.monthsTranslate--,a="next",u.animating||u.months.eq(u.months.length-1).remove(),u.wrapper.append(o),u.months=u.wrapper.find(".picker-calendar-month"),s=100*-(c-1)*p,u.months.eq(u.months.length-1).transform("translate3d("+(u.isH?s:0)+"%, "+(u.isH?0:s)+"%, 0)").addClass("picker-calendar-month-next")):(u.monthsTranslate++,a="prev",u.animating||u.months.eq(0).remove(),u.wrapper.prepend(o),u.months=u.wrapper.find(".picker-calendar-month"),s=100*-(c+1)*p,u.months.eq(0).transform("translate3d("+(u.isH?s:0)+"%, "+(u.isH?0:s)+"%, 0)").addClass("picker-calendar-month-prev")),u.params.onMonthAdd&&u.params.onMonthAdd(u,"next"===a?u.months.eq(u.months.length-1)[0]:u.months.eq(0)[0]),u.animating=!0,u.onMonthChangeStart(a),l=100*u.monthsTranslate*p,u.wrapper.transition(n).transform("translate3d("+(u.isH?l:0)+"%, "+(u.isH?0:l)+"%, 0)"),d&&u.wrapper.transitionEnd(function(){u.onMonthChangeEnd(a,!0)}),u.params.animate||u.onMonthChangeEnd(a)},u.nextYear=function(){u.setYearMonth(u.currentYear+1)},u.prevYear=function(){u.setYearMonth(u.currentYear-1)},u.layout=function(){var e,t="",n="",r=u.value&&u.value.length?u.value[0]:(new Date).setHours(0,0,0,0),a=u.monthHTML(r,"prev"),i=u.monthHTML(r),o=u.monthHTML(r,"next"),s='<div class="picker-calendar-months"><div class="picker-calendar-months-wrapper">'+(a+i+o)+"</div></div>",l="";if(u.params.weekHeader){for(e=0;7>e;e++){var c=e+u.params.firstDay>6?e-7+u.params.firstDay:e+u.params.firstDay,d=u.params.dayNamesShort[c];l+='<div class="picker-calendar-week-day '+(u.params.weekendDays.indexOf(c)>=0?"picker-calendar-week-day-weekend":"")+'"> '+d+"</div>"}l='<div class="picker-calendar-week-days">'+l+"</div>"}n="picker-modal picker-calendar "+(u.params.cssClass||"");var p=u.params.toolbar?u.params.toolbarTemplate.replace(/{{closeText}}/g,u.params.toolbarCloseText):"";u.params.toolbar&&(p=u.params.toolbarTemplate.replace(/{{closeText}}/g,u.params.toolbarCloseText).replace(/{{monthPicker}}/g,u.params.monthPicker?u.params.monthPickerTemplate:"").replace(/{{yearPicker}}/g,u.params.yearPicker?u.params.yearPickerTemplate:"")),t='<div class="'+n+'">'+p+'<div class="picker-modal-inner">'+l+s+"</div></div>",u.pickerHTML=t},u.params.input&&(u.input=s(u.params.input),u.params.inputReadOnly&&u.input.prop("readOnly",!0),u.inline||u.input.on("click",a),u.params.inputReadOnly&&u.input.on("focus mousedown",function(e){e.preventDefault()})),u.inline||s("html").on("click",o),u.opened=!1,u.open=function(){var e=t(),n=!1;u.opened||(u.value||u.params.value&&(u.value=u.params.value,n=!0),u.layout(),e?(u.pickerHTML='<div class="popover popover-picker-calendar"><div class="popover-inner">'+u.pickerHTML+"</div></div>",u.popover=i.popover(u.pickerHTML,u.params.input,!0),u.container=s(u.popover).find(".picker-modal"),s(u.popover).on("close",function(){l()})):u.inline?(u.container=s(u.pickerHTML),u.container.addClass("picker-modal-inline"),s(u.params.container).append(u.container)):(u.container=s(i.pickerModal(u.pickerHTML)),s(u.container).on("close",function(){l()})),u.container[0].f7Calendar=u,u.wrapper=u.container.find(".picker-calendar-months-wrapper"),u.months=u.wrapper.find(".picker-calendar-month"),u.updateCurrentMonthYear(),u.monthsTranslate=0,u.setMonthsTranslate(),u.initCalendarEvents(),n&&u.updateValue()),u.opened=!0,u.initialized=!0,u.params.onMonthAdd&&u.months.each(function(){u.params.onMonthAdd(u,this)}),u.params.onOpen&&u.params.onOpen(u)},u.close=function(){return u.opened&&!u.inline?n()?void i.closeModal(u.popover):void i.closeModal(u.container):void 0},u.destroy=function(){u.close(),u.params.input&&u.input.off("click focus",a),s("html").off("click",o)},u.inline&&u.open(),u};i.calendar=function(e){return new m(e)};var v;i.addNotification=function(e){if(e){"undefined"==typeof e.media&&(e.media=i.params.notificationMedia),"undefined"==typeof e.title&&(e.title=i.params.notificationTitle),"undefined"==typeof e.subtitle&&(e.subtitle=i.params.notificationSubtitle),"undefined"==typeof e.closeIcon&&(e.closeIcon=i.params.notificationCloseIcon),"undefined"==typeof e.hold&&(e.hold=i.params.notificationHold),"undefined"==typeof e.closeOnClick&&(e.closeOnClick=i.params.notificationCloseOnClick),v||(v=document.createElement("div"));var t=s(".notifications");0===t.length&&(s("body").append('<div class="notifications list-block media-list"><ul></ul></div>'),t=s(".notifications"));var n,r=t.children("ul");n=e.custom?"<li>"+e.custom+"</li>":'<li class="notification-item notification-hidden"><div class="item-content">'+(e.media?'<div class="item-media">'+e.media+"</div>":"")+'<div class="item-inner"><div class="item-title-row">'+(e.title?'<div class="item-title">'+e.title+"</div>":"")+(e.closeIcon?'<div class="item-after"><a href="#" class="close-notification"><span></span></a></div>':"")+"</div>"+(e.subtitle?'<div class="item-subtitle">'+e.subtitle+"</div>":"")+(e.message?'<div class="item-text">'+e.message+"</div>":"")+"</div></div></li>",v.innerHTML=n;var a=s(v).children();a.on("click",function(t){var n=!1;s(t.target).is(".close-notification")||s(t.target).parents(".close-notification").length>0?n=!0:(e.onClick&&e.onClick(t,a[0]),e.closeOnClick&&(n=!0)),n&&i.closeNotification(a[0])}),e.onClose&&a.data("f7NotificationOnClose",function(){e.onClose(a[0])}),e.additionalClass&&a.addClass(e.additionalClass),e.hold&&setTimeout(function(){a.length>0&&i.closeNotification(a[0])},e.hold),r.prepend(a[0]),t.show();var o=a.outerHeight();return a.css("marginTop",-o+"px"),a.transition(0),a[0].clientLeft,a.transition(""),a.css("marginTop","0px"),t.transform("translate3d(0, 0,0)"),a.removeClass("notification-hidden"),a[0]}},i.closeNotification=function(e){if(e=s(e),0!==e.length&&!e.hasClass("notification-item-removing")){var t=s(".notifications"),n=e.outerHeight();e.css("height",n+"px").transition(0),e[0].clientLeft,e.css("height","0px").transition("").addClass("notification-item-removing"),e.data("f7NotificationOnClose")&&e.data("f7NotificationOnClose")(),0===t.find(".notification-item:not(.notification-item-removing)").length&&t.transform(""),e.addClass("notification-hidden").transitionEnd(function(){e.remove(),0===t.find(".notification-item").length&&t.hide()})}},i.initTemplate7Templates=function(){window.Template7&&(Template7.templates=Template7.templates||i.params.templates||{},Template7.data=Template7.data||i.params.template7Data||{},Template7.cache=Template7.cache||{},i.templates=Template7.templates,i.template7Data=Template7.data,i.template7Cache=Template7.cache,i.params.precompileTemplates&&s('script[type="text/template7"]').each(function(){var e=s(this).attr("id");e&&(Template7.templates[e]=Template7.compile(s(this).html()))}))};var y=[];return i.initPlugins=function(){for(var e in i.plugins){var t=i.plugins[e](i,i.params[e]);t&&y.push(t)}},i.pluginHook=function(e){for(var t=0;t<y.length;t++)y[t].hooks&&e in y[t].hooks&&y[t].hooks[e](arguments[1],arguments[2],arguments[3],arguments[4],arguments[5])},i.pluginPrevent=function(e){for(var t=!1,n=0;n<y.length;n++)y[n].prevents&&e in y[n].prevents&&y[n].prevents[e](arguments[1],arguments[2],arguments[3],arguments[4],arguments[5])&&(t=!0);return t},i.pluginProcess=function(e,t){for(var n=t,r=0;r<y.length;r++)y[r].preprocess&&process in y[r].preprocess&&(n=y[r].preprocess[process](t,arguments[2],arguments[3],arguments[4],arguments[5],arguments[6]));return n},i.init=function(){i.initTemplate7Templates&&i.initTemplate7Templates(),i.initPlugins&&i.initPlugins(),i.getDeviceInfo&&i.getDeviceInfo(),i.initFastClicks&&i.params.fastClicks&&i.initFastClicks(),i.initClickEvents&&i.initClickEvents(),s(".page:not(.cached)").each(function(){i.initPageWithCallback(this)}),i.initResize&&i.initResize(),i.initPushState&&i.params.pushState&&i.initPushState(),i.initSwipeout&&i.params.swipeout&&i.initSwipeout(),i.initSortable&&i.params.sortable&&i.initSortable(),i.initSwipePanels&&(i.params.swipePanel||i.params.swipePanelOnlyClose)&&i.initSwipePanels(),i.params.onAppInit&&i.params.onAppInit(),i.pluginHook("appInit")},i.params.init&&i.init(),i};var e=function(){var e=function(e){var t=this,n=0;for(n=0;n<e.length;n++)t[n]=e[n];return t.length=e.length,this},t=function(t,n){var r=[],a=0;if(t&&!n&&t instanceof e)return t;if(t)if("string"==typeof t){var i,o,s=t.trim();if(s.indexOf("<")>=0&&s.indexOf(">")>=0){var l="div";for(0===s.indexOf("<li")&&(l="ul"),0===s.indexOf("<tr")&&(l="tbody"),(0===s.indexOf("<td")||0===s.indexOf("<th"))&&(l="tr"),0===s.indexOf("<tbody")&&(l="table"),0===s.indexOf("<option")&&(l="select"),o=document.createElement(l),o.innerHTML=t,a=0;a<o.childNodes.length;a++)r.push(o.childNodes[a])}else for(i=n||"#"!==t[0]||t.match(/[ .<>:~]/)?(n||document).querySelectorAll(t):[document.getElementById(t.split("#")[1])],a=0;a<i.length;a++)i[a]&&r.push(i[a])}else if(t.nodeType||t===window||t===document)r.push(t);else if(t.length>0&&t[0].nodeType)for(a=0;a<t.length;a++)r.push(t[a]);return new e(r)};e.prototype={addClass:function(e){if("undefined"==typeof e)return this;for(var t=e.split(" "),n=0;n<t.length;n++)for(var r=0;r<this.length;r++)"undefined"!=typeof this[r].classList&&this[r].classList.add(t[n]);return this},removeClass:function(e){for(var t=e.split(" "),n=0;n<t.length;n++)for(var r=0;r<this.length;r++)"undefined"!=typeof this[r].classList&&this[r].classList.remove(t[n]);return this},hasClass:function(e){return!!this[0]&&this[0].classList.contains(e)},toggleClass:function(e){for(var t=e.split(" "),n=0;n<t.length;n++)for(var r=0;r<this.length;r++)"undefined"!=typeof this[r].classList&&this[r].classList.toggle(t[n]);return this},attr:function(e,t){if(1===arguments.length&&"string"==typeof e)return this[0]?this[0].getAttribute(e):void 0;for(var n=0;n<this.length;n++)if(2===arguments.length)this[n].setAttribute(e,t);else for(var r in e)this[n][r]=e[r],this[n].setAttribute(r,e[r]);return this},removeAttr:function(e){for(var t=0;t<this.length;t++)this[t].removeAttribute(e)},prop:function(e,t){if(1===arguments.length&&"string"==typeof e)return this[0]?this[0][e]:void 0;for(var n=0;n<this.length;n++)if(2===arguments.length)this[n][e]=t;else for(var r in e)this[n][r]=e[r];return this},data:function(e,t){if("undefined"!=typeof t){for(var n=0;n<this.length;n++){var r=this[n];r.dom7ElementDataStorage||(r.dom7ElementDataStorage={}),r.dom7ElementDataStorage[e]=t}return this}if(this[0]){var a=this[0].getAttribute("data-"+e);return a?a:this[0].dom7ElementDataStorage&&e in this[0].dom7ElementDataStorage?this[0].dom7ElementDataStorage[e]:void 0}},val:function(e){if("undefined"==typeof e)return this[0]?this[0].value:void 0;for(var t=0;t<this.length;t++)this[t].value=e;return this},transform:function(e){for(var t=0;t<this.length;t++){var n=this[t].style;n.webkitTransform=n.MsTransform=n.msTransform=n.MozTransform=n.OTransform=n.transform=e}return this},transition:function(e){"string"!=typeof e&&(e+="ms");for(var t=0;t<this.length;t++){var n=this[t].style;n.webkitTransitionDuration=n.MsTransitionDuration=n.msTransitionDuration=n.MozTransitionDuration=n.OTransitionDuration=n.transitionDuration=e}return this},on:function(e,n,r,a){function i(e){var a=e.target;if(t(a).is(n))r.call(a,e);else for(var i=t(a).parents(),o=0;o<i.length;o++)t(i[o]).is(n)&&r.call(i[o],e)}var o,s,l=e.split(" ");for(o=0;o<this.length;o++)if("function"==typeof n||n===!1)for("function"==typeof n&&(r=arguments[1],a=arguments[2]||!1),s=0;s<l.length;s++)this[o].addEventListener(l[s],r,a);else for(s=0;s<l.length;s++)this[o].dom7LiveListeners||(this[o].dom7LiveListeners=[]),this[o].dom7LiveListeners.push({listener:r,liveListener:i}),this[o].addEventListener(l[s],i,a);return this},off:function(e,t,n,r){for(var a=e.split(" "),i=0;i<a.length;i++)for(var o=0;o<this.length;o++)if("function"==typeof t||t===!1)"function"==typeof t&&(n=arguments[1],r=arguments[2]||!1),this[o].removeEventListener(a[i],n,r);else if(this[o].dom7LiveListeners)for(var s=0;s<this[o].dom7LiveListeners.length;s++)this[o].dom7LiveListeners[s].listener===n&&this[o].removeEventListener(a[i],this[o].dom7LiveListeners[s].liveListener,r);return this},once:function(e,t,n,r){function a(o){n(o),i.off(e,t,a,r)}var i=this;"function"==typeof t&&(t=!1,n=arguments[1],r=arguments[2]),i.on(e,t,a,r)},trigger:function(e,t){for(var n=0;n<this.length;n++){var r;try{r=new CustomEvent(e,{detail:t,bubbles:!0,cancelable:!0})}catch(n){r=document.createEvent("Event"),r.initEvent(e,!0,!0),r.detail=t}this[n].dispatchEvent(r)}return this},transitionEnd:function(e){function t(i){if(i.target===this)for(e.call(this,i),n=0;n<r.length;n++)a.off(r[n],t)}var n,r=["webkitTransitionEnd","transitionend","oTransitionEnd","MSTransitionEnd","msTransitionEnd"],a=this;if(e)for(n=0;n<r.length;n++)a.on(r[n],t);return this},animationEnd:function(e){function t(i){for(e(i),n=0;n<r.length;n++)a.off(r[n],t)}var n,r=["webkitAnimationEnd","OAnimationEnd","MSAnimationEnd","animationend"],a=this;if(e)for(n=0;n<r.length;n++)a.on(r[n],t);return this},width:function(){return this[0]===window?window.innerWidth:this.length>0?parseFloat(this.css("width")):null},outerWidth:function(e){return this.length>0?e?this[0].offsetWidth+parseFloat(this.css("margin-right"))+parseFloat(this.css("margin-left")):this[0].offsetWidth:null},height:function(){return this[0]===window?window.innerHeight:this.length>0?parseFloat(this.css("height")):null},outerHeight:function(e){return this.length>0?e?this[0].offsetHeight+parseFloat(this.css("margin-top"))+parseFloat(this.css("margin-bottom")):this[0].offsetHeight:null},offset:function(){if(this.length>0){var e=this[0],t=e.getBoundingClientRect(),n=document.body,r=e.clientTop||n.clientTop||0,a=e.clientLeft||n.clientLeft||0,i=window.pageYOffset||e.scrollTop,o=window.pageXOffset||e.scrollLeft;return{top:t.top+i-r,left:t.left+o-a}}return null},hide:function(){for(var e=0;e<this.length;e++)this[e].style.display="none";return this},show:function(){for(var e=0;e<this.length;e++)this[e].style.display="block";return this},css:function(e,t){var n;if(1===arguments.length){if("string"!=typeof e){for(n=0;n<this.length;n++)for(var r in e)this[n].style[r]=e[r];return this}if(this[0])return window.getComputedStyle(this[0],null).getPropertyValue(e)}if(2===arguments.length&&"string"==typeof e){for(n=0;n<this.length;n++)this[n].style[e]=t;return this}return this},each:function(e){for(var t=0;t<this.length;t++)e.call(this[t],t,this[t]);return this},html:function(e){if("undefined"==typeof e)return this[0]?this[0].innerHTML:void 0;for(var t=0;t<this.length;t++)this[t].innerHTML=e;return this},text:function(e){if("undefined"==typeof e)return this[0]?this[0].textContent.trim():null;for(var t=0;t<this.length;t++)this[t].textContent=e},is:function(n){if(!this[0])return!1;var r,a;if("string"==typeof n){var i=this[0];if(i===document)return n===document;if(i===window)return n===window;if(i.matches)return i.matches(n);if(i.webkitMatchesSelector)return i.webkitMatchesSelector(n);if(i.mozMatchesSelector)return i.mozMatchesSelector(n);if(i.msMatchesSelector)return i.msMatchesSelector(n);for(r=t(n),a=0;a<r.length;a++)if(r[a]===this[0])return!0;return!1}if(n===document)return this[0]===document;if(n===window)return this[0]===window;if(n.nodeType||n instanceof e){for(r=n.nodeType?[n]:n,a=0;a<r.length;a++)if(r[a]===this[0])return!0;return!1}return!1},indexOf:function(e){for(var t=0;t<this.length;t++)if(this[t]===e)return t},index:function(){if(this[0]){for(var e=this[0],t=0;null!==(e=e.previousSibling);)1===e.nodeType&&t++;return t}},eq:function(t){if("undefined"==typeof t)return this;var n,r=this.length;return t>r-1?new e([]):0>t?(n=r+t,new e(0>n?[]:[this[n]])):new e([this[t]])},append:function(t){var n,r;for(n=0;n<this.length;n++)if("string"==typeof t){var a=document.createElement("div");for(a.innerHTML=t;a.firstChild;)this[n].appendChild(a.firstChild)}else if(t instanceof e)for(r=0;r<t.length;r++)this[n].appendChild(t[r]);else this[n].appendChild(t);return this},prepend:function(t){var n,r;for(n=0;n<this.length;n++)if("string"==typeof t){var a=document.createElement("div");for(a.innerHTML=t,r=a.childNodes.length-1;r>=0;r--)this[n].insertBefore(a.childNodes[r],this[n].childNodes[0])}else if(t instanceof e)for(r=0;r<t.length;r++)this[n].insertBefore(t[r],this[n].childNodes[0]);else this[n].insertBefore(t,this[n].childNodes[0]);return this},insertBefore:function(e){for(var n=t(e),r=0;r<this.length;r++)if(1===n.length)n[0].parentNode.insertBefore(this[r],n[0]);else if(n.length>1)for(var a=0;a<n.length;a++)n[a].parentNode.insertBefore(this[r].cloneNode(!0),n[a])},insertAfter:function(e){for(var n=t(e),r=0;r<this.length;r++)if(1===n.length)n[0].parentNode.insertBefore(this[r],n[0].nextSibling);else if(n.length>1)for(var a=0;a<n.length;a++)n[a].parentNode.insertBefore(this[r].cloneNode(!0),n[a].nextSibling)},next:function(n){return new e(this.length>0?n?this[0].nextElementSibling&&t(this[0].nextElementSibling).is(n)?[this[0].nextElementSibling]:[]:this[0].nextElementSibling?[this[0].nextElementSibling]:[]:[])},nextAll:function(n){var r=[],a=this[0];if(!a)return new e([]);for(;a.nextElementSibling;){var i=a.nextElementSibling;n?t(i).is(n)&&r.push(i):r.push(i),a=i}return new e(r)},prev:function(n){return new e(this.length>0?n?this[0].previousElementSibling&&t(this[0].previousElementSibling).is(n)?[this[0].previousElementSibling]:[]:this[0].previousElementSibling?[this[0].previousElementSibling]:[]:[])},prevAll:function(n){var r=[],a=this[0];if(!a)return new e([]);for(;a.previousElementSibling;){var i=a.previousElementSibling;n?t(i).is(n)&&r.push(i):r.push(i),a=i}return new e(r)},parent:function(e){for(var n=[],r=0;r<this.length;r++)e?t(this[r].parentNode).is(e)&&n.push(this[r].parentNode):n.push(this[r].parentNode);return t(t.unique(n))},parents:function(e){for(var n=[],r=0;r<this.length;r++)for(var a=this[r].parentNode;a;)e?t(a).is(e)&&n.push(a):n.push(a),a=a.parentNode;return t(t.unique(n))},find:function(t){for(var n=[],r=0;r<this.length;r++)for(var a=this[r].querySelectorAll(t),i=0;i<a.length;i++)n.push(a[i]);return new e(n)},children:function(n){for(var r=[],a=0;a<this.length;a++)for(var i=this[a].childNodes,o=0;o<i.length;o++)n?1===i[o].nodeType&&t(i[o]).is(n)&&r.push(i[o]):1===i[o].nodeType&&r.push(i[o]);return new e(t.unique(r))},remove:function(){for(var e=0;e<this.length;e++)this[e].parentNode&&this[e].parentNode.removeChild(this[e]);return this},detach:function(){return this.remove()},add:function(){var e,n,r=this;for(e=0;e<arguments.length;e++){var a=t(arguments[e]);for(n=0;n<a.length;n++)r[r.length]=a[n],r.length++}return r}},function(){function n(n){e.prototype[n]=function(e){var r;if("undefined"==typeof e){for(r=0;r<this.length;r++)a.indexOf(n)<0&&(n in this[r]?this[r][n]():t(this[r]).trigger(n));return this}return this.on(n,e)}}for(var r="click blur focus focusin focusout keyup keydown keypress submit change mousedown mousemove mouseup mouseenter mouseleave mouseout mouseover touchstart touchend touchmove resize scroll".split(" "),a="resize scroll".split(" "),i=0;i<r.length;i++)n(r[i])}();var n={};t.ajaxSetup=function(e){e.type&&(e.method=e.type);for(var t in e)n[t]=e[t]};var r=0;return t.ajax=function(e){function a(r,a,i){var o=arguments;r&&t(document).trigger(r,a),i&&(i in n&&n[i](o[3],o[4],o[5],o[6]),e[i]&&e[i](o[3],o[4],o[5],o[6]))}var i={method:"GET",data:!1,async:!0,cache:!0,user:"",password:"",headers:{},xhrFields:{},statusCode:{},processData:!0,dataType:"text",contentType:"application/x-www-form-urlencoded",timeout:0},o=["beforeSend","error","complete","success","statusCode"];e.type&&(e.method=e.type);for(var s in n)o.indexOf(s)<0&&(i[s]=n[s]);for(var l in i)l in e||(e[l]=i[l]);e.url||(e.url=window.location.toString());var u=e.method.toUpperCase();if(("GET"===u||"HEAD"===u)&&e.data){var c;c="string"==typeof e.data?e.data.indexOf("?")>=0?e.data.split("?")[1]:e.data:t.serializeObject(e.data),e.url+=e.url.indexOf("?")>=0?"&"+c:"?"+c}if("json"===e.dataType&&e.url.indexOf("callback=")>=0){var d,p,f="f7jsonp_"+Date.now()+r++,h=e.url.split("callback=");if(h[1].indexOf("&")>=0){var g=h[1].split("&").filter(function(e){return e.indexOf("=")>0}).join("&");d=h[0]+"callback="+f+(g.length>0?"&"+g:"")}else d=h[0]+"callback="+f;var m=document.createElement("script");return m.type="text/javascript",m.onerror=function(){clearTimeout(p),a(void 0,void 0,"error",null,"scripterror")},m.src=d,window[f]=function(e){clearTimeout(p),a(void 0,void 0,"success",e),m.parentNode.removeChild(m),m=null,delete window[f]},document.querySelector("head").appendChild(m),void(e.timeout>0&&(p=setTimeout(function(){m.parentNode.removeChild(m),m=null,a(void 0,void 0,"error",null,"timeout")},e.timeout)))}("GET"===u||"HEAD"===u)&&e.cache===!1&&(e.url+=e.url.indexOf("?")>=0?"&_nocache="+Date.now():"?_nocache="+Date.now());var v=new XMLHttpRequest;v.requestUrl=e.url,v.open(u,e.url,e.async,e.user,e.password);var y=null;if(("POST"===u||"PUT"===u)&&e.data)if(e.processData){var _=[ArrayBuffer,Blob,Document,FormData];if(_.indexOf(e.data.constructor)>=0)y=e.data;else{var b="---------------------------"+Date.now().toString(16);"multipart/form-data"===e.contentType?v.setRequestHeader("Content-Type","multipart/form-data; boundary="+b):v.setRequestHeader("Content-Type",e.contentType),y="";var w=t.serializeObject(e.data);if("multipart/form-data"===e.contentType){b="---------------------------"+Date.now().toString(16),w=w.split("&");for(var x=[],C=0;C<w.length;C++)x.push('Content-Disposition: form-data; name="'+w[C].split("=")[0]+'"\r\n\r\n'+w[C].split("=")[1]+"\r\n");y="--"+b+"\r\n"+x.join("--"+b+"\r\n")+"--"+b+"--\r\n"}else y="application/x-www-form-urlencoded"===e.contentType?w:w.replace(/&/g,"\r\n")}}else y=e.data;if(e.headers)for(var T in e.headers)v.setRequestHeader(T,e.headers[T]);if("undefined"==typeof e.crossDomain&&(e.crossDomain=/^([\w-]+:)?\/\/([^\/]+)/.test(e.url)&&RegExp.$2!==window.location.host),e.crossDomain||v.setRequestHeader("X-Requested-With","XMLHttpRequest"),e.xhrFields)for(var S in e.xhrFields)v[S]=e.xhrFields[S];var k;return v.onload=function(){if(k&&clearTimeout(k),200===v.status||0===v.status){var t;if("json"===e.dataType)try{t=JSON.parse(v.responseText),a("ajaxSuccess",{xhr:v},"success",t,v.status,v)}catch(e){a("ajaxError",{xhr:v,parseerror:!0},"error",v,"parseerror")}else a("ajaxSuccess",{xhr:v},"success",v.responseText,v.status,v)}else a("ajaxError",{xhr:v},"error",v,v.status);e.statusCode&&(n.statusCode&&n.statusCode[v.status]&&n.statusCode[v.status](v),e.statusCode[v.status]&&e.statusCode[v.status](v)),a("ajaxComplete",{xhr:v},"complete",v,v.status)},v.onerror=function(){k&&clearTimeout(k),a("ajaxError",{xhr:v},"error",v,v.status)},a("ajaxStart",{xhr:v},"start",v),a(void 0,void 0,"beforeSend",v),v.send(y),e.timeout>0&&(k=setTimeout(function(){v.abort(),a("ajaxError",{xhr:v,timeout:!0},"error",v,"timeout"),a("ajaxComplete",{xhr:v,timeout:!0},"complete",v,"timeout")},e.timeout)),v},function(){function e(e){t[e]=function(n,r,a){return t.ajax({url:n,method:"post"===e?"POST":"GET",data:"function"==typeof r?void 0:r,success:"function"==typeof r?r:a,dataType:"getJSON"===e?"json":void 0})}}for(var n="get post getJSON".split(" "),r=0;r<n.length;r++)e(n[r])}(),t.parseUrlQuery=function(e){var t,n,r,a={};if(!(e.indexOf("?")>=0))return a;for(e=e.split("?")[1],n=e.split("&"),t=0;t<n.length;t++)r=n[t].split("="),a[r[0]]=r[1];return a},t.isArray=function(e){return"[object Array]"===Object.prototype.toString.apply(e)},t.unique=function(e){for(var t=[],n=0;n<e.length;n++)-1===t.indexOf(e[n])&&t.push(e[n]);return t},t.trim=function(e){return e.trim()},t.serializeObject=function(e){if("string"==typeof e)return e;var n=[],r="&";for(var a in e)if(t.isArray(e[a])){for(var i=[],o=0;o<e[a].length;o++)i.push(a+"="+e[a][o]);n.push(i.join(r))}else n.push(a+"="+e[a]);return n.join(r)},t.getTranslate=function(e,t){var n,r,a,i;return"undefined"==typeof t&&(t="x"),a=window.getComputedStyle(e,null),window.WebKitCSSMatrix?i=new WebKitCSSMatrix("none"===a.webkitTransform?"":a.webkitTransform):(i=a.MozTransform||a.OTransform||a.MsTransform||a.msTransform||a.transform||a.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,"),n=i.toString().split(",")),"x"===t&&(r=window.WebKitCSSMatrix?i.m41:parseFloat(16===n.length?n[12]:n[4])),"y"===t&&(r=window.WebKitCSSMatrix?i.m42:parseFloat(16===n.length?n[13]:n[5])),r||0},t.requestAnimationFrame=function(e){return window.requestAnimationFrame?window.requestAnimationFrame(e):window.webkitRequestAnimationFrame?window.webkitRequestAnimationFrame(e):window.mozRequestAnimationFrame?window.mozRequestAnimationFrame(e):window.setTimeout(e,1e3/60);
},t.cancelAnimationFrame=function(e){return window.cancelAnimationFrame?window.cancelAnimationFrame(e):window.webkitCancelAnimationFrame?window.webkitCancelAnimationFrame(e):window.mozCancelAnimationFrame?window.mozCancelAnimationFrame(e):window.clearTimeout(e)},t.supportTouch=!!("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch),t.fn=e.prototype,t.fn.scrollTo=function(e,n,r,a){return this.each(function(){function i(e){void 0===e&&(e=(new Date).getTime()),null===v&&(v=e);var n,l=Math.max(Math.min((e-v)/r,1),0),u="linear"===a?l:.5-Math.cos(l*Math.PI)/2;g&&(p=o+u*(c-o)),m&&(f=s+u*(d-s)),g&&c>o&&p>=c&&(h.scrollTop=c,n=!0),g&&o>c&&c>=p&&(h.scrollTop=c,n=!0),m&&d>s&&f>=d&&(h.scrollLeft=d,n=!0),m&&s>d&&d>=f&&(h.scrollLeft=d,n=!0),n||(g&&(h.scrollTop=p),m&&(h.scrollLeft=f),t.requestAnimationFrame(i))}var o,s,l,u,c,d,p,f,h=this,g=n>0||0===n,m=e>0||0===e;if("undefined"==typeof a&&(a="swing"),g&&(o=h.scrollTop,r||(h.scrollTop=n)),m&&(s=h.scrollLeft,r||(h.scrollLeft=e)),r){g&&(l=h.scrollHeight-h.offsetHeight,c=Math.max(Math.min(n,l),0)),m&&(u=h.scrollWidth-h.offsetWidth,d=Math.max(Math.min(e,u),0));var v=null;g&&c===o&&(g=!1),m&&d===s&&(m=!1),t.requestAnimationFrame(i)}})},t.fn.scrollTop=function(e,t,n){var r=this;return"undefined"==typeof e?r.length>0?r[0].scrollTop:null:r.scrollTo(void 0,e,t,n)},t.fn.scrollLeft=function(e,t,n){var r=this;return"undefined"==typeof e?r.length>0?r[0].scrollLeft:null:r.scrollTo(e,void 0,t,n)},t}();Framework7.$=e,window.Dom7=e,Framework7.prototype.support=function(){var e={touch:!!("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch)};return e}(),Framework7.prototype.device=function(){var t={},n=navigator.userAgent,r=e,a=n.match(/(Android);?[\s\/]+([\d.]+)?/),i=n.match(/(iPad).*OS\s([\d_]+)/),o=n.match(/(iPod)(.*OS\s([\d_]+))?/),s=!i&&n.match(/(iPhone\sOS)\s([\d_]+)/);if(t.ios=t.android=t.iphone=t.ipad=!1,a&&(t.os="android",t.osVersion=a[2],t.android=!0),(i||s||o)&&(t.os="ios",t.ios=!0),s&&!o&&(t.osVersion=s[2].replace(/_/g,"."),t.iphone=!0),i&&(t.osVersion=i[2].replace(/_/g,"."),t.ipad=!0),o&&(t.osVersion=o[3]?o[3].replace(/_/g,"."):null,t.iphone=!0),t.ios&&t.osVersion&&n.indexOf("Version/")>=0&&"10"===t.osVersion.split(".")[0]&&(t.osVersion=n.toLowerCase().split("version/")[1].split(" ")[0]),t.webView=(s||i||o)&&n.match(/.*AppleWebKit(?!.*Safari)/i),t.os&&"ios"===t.os){var l=t.osVersion.split(".");t.minimalUi=!t.webView&&(o||s)&&(1*l[0]===7?1*l[1]>=1:1*l[0]>7)&&r('meta[name="viewport"]').length>0&&r('meta[name="viewport"]').attr("content").indexOf("minimal-ui")>=0}var u=r(window).width(),c=r(window).height();t.statusBar=!1,t.statusBar=!(!t.webView||u*c!==screen.width*screen.height);var d=[];if(t.pixelRatio=window.devicePixelRatio||1,d.push("pixel-ratio-"+Math.floor(t.pixelRatio)),t.pixelRatio>=2&&d.push("retina"),t.os&&(d.push(t.os,t.os+"-"+t.osVersion.split(".")[0],t.os+"-"+t.osVersion.replace(/\./g,"-")),"ios"===t.os))for(var p=parseInt(t.osVersion.split(".")[0],10),f=p-1;f>=6;f--)d.push("ios-gt-"+f);return t.statusBar?d.push("with-statusbar-overlay"):r("html").removeClass("with-statusbar-overlay"),d.length>0&&r("html").addClass(d.join(" ")),t}(),Framework7.prototype.plugins={},window.Template7=function(){function e(e){return"[object Array]"===Object.prototype.toString.apply(e)}function t(e){return"function"==typeof e}function n(e){var t,n,r,a=e.replace(/[{}#}]/g,"").split(" "),i=[];for(n=0;n<a.length;n++){var o=a[n];if(0===n)i.push(o);else if(0===o.indexOf('"'))if(2===o.match(/"/g).length)i.push(o);else{for(t=0,r=n+1;r<a.length;r++)if(o+=" "+a[r],a[r].indexOf('"')>=0){t=r,i.push(o);break}t&&(n=t)}else if(o.indexOf("=")>0){var s=o.split("="),l=s[0],u=s[1];if(2!==u.match(/"/g).length){for(t=0,r=n+1;r<a.length;r++)if(u+=" "+a[r],a[r].indexOf('"')>=0){t=r;break}t&&(n=t)}var c=[l,u.replace(/"/g,"")];i.push(c)}else i.push(o)}return i}function r(t){var r,a,i=[];if(!t)return[];var o=t.split(/({{[^{^}]*}})/);for(r=0;r<o.length;r++){var s=o[r];if(""!==s)if(s.indexOf("{{")<0)i.push({type:"plain",content:s});else{if(s.indexOf("{/")>=0)continue;if(s.indexOf("{#")<0&&s.indexOf(" ")<0&&s.indexOf("else")<0){i.push({type:"variable",contextName:s.replace(/[{}]/g,"")});continue}var l=n(s),u=l[0],c=[],d={};for(a=1;a<l.length;a++){var p=l[a];e(p)?d[p[0]]="false"!==p[1]&&p[1]:c.push(p)}if(s.indexOf("{#")>=0){var f,h="",g="",m=0,v=!1,y=!1,_=0;for(a=r+1;a<o.length;a++)if(o[a].indexOf("{{#")>=0&&_++,o[a].indexOf("{{/")>=0&&_--,o[a].indexOf("{{#"+u)>=0)h+=o[a],y&&(g+=o[a]),m++;else if(o[a].indexOf("{{/"+u)>=0){if(!(m>0)){f=a,v=!0;break}m--,h+=o[a],y&&(g+=o[a])}else o[a].indexOf("else")>=0&&0===_?y=!0:(y||(h+=o[a]),y&&(g+=o[a]));v&&(f&&(r=f),i.push({type:"helper",helperName:u,contextName:c,content:h,inverseContent:g,hash:d}))}else s.indexOf(" ")>0&&i.push({type:"helper",helperName:u,contextName:c,hash:d})}}return i}var a=function(e){function t(e,t){return e.content?o(e.content,t):function(){return""}}function n(e,t){return e.inverseContent?o(e.inverseContent,t):function(){return""}}function a(e,t){var n;if(e.indexOf("@global")>=0)n="(Template7.global && Template7.global."+e.split("@global.")[1]+")";else if(e.indexOf("@")>=0)n="(data && data."+e.replace("@","")+")";else if(e.indexOf(".")>0)n=0===e.indexOf("this")?e.replace("this",t):t+"."+e;else if(0===e.indexOf("../")){var r=e.split("../").length-1,a=e.split("../")[e.split("../").length-1],i=t.split("_")[1]-r;n="ctx_"+(i>=1?i:1)+"."+a}else n="this"===e?t:t+"."+e;return n}function i(e,t){for(var n=[],r=0;r<e.length;r++)n.push(0===e[r].indexOf('"')?e[r]:a(e[r],t));return n.join(", ")}function o(e,o){if(o=o||1,e=e||s.template,"string"!=typeof e)throw new Error("Template7: Template must be a string");var l=r(e);if(0===l.length)return function(){return""};var u="ctx_"+o,c="(function ("+u+", data) {\n";1===o&&(c+="function isArray(arr){return Object.prototype.toString.apply(arr) === '[object Array]';}\n",c+="function isFunction(func){return (typeof func === 'function');}\n",c+='function c(val, ctx) {if (typeof val !== "undefined") {if (isFunction(val)) {return val.call(ctx);} else return val;} else return "";}\n'),c+="var r = '';\n";var d;for(d=0;d<l.length;d++){var p=l[d];if("plain"!==p.type){var f,h;if("variable"===p.type&&(f=a(p.contextName,u),c+="r += c("+f+", "+u+");"),"helper"===p.type)if(p.helperName in s.helpers)h=i(p.contextName,u),c+="r += (Template7.helpers."+p.helperName+").call("+u+", "+(h&&h+",")+"{hash:"+JSON.stringify(p.hash)+", data: data || {}, fn: "+t(p,o+1)+", inverse: "+n(p,o+1)+"});";else{if(p.contextName.length>0)throw new Error('Template7: Missing helper: "'+p.helperName+'"');f=a(p.helperName,u),c+="if ("+f+") {",c+="if (isArray("+f+")) {",c+="r += (Template7.helpers.each).call("+u+", "+f+", {hash:"+JSON.stringify(p.hash)+", data: data || {}, fn: "+t(p,o+1)+", inverse: "+n(p,o+1)+"});",c+="}else {",c+="r += (Template7.helpers.with).call("+u+", "+f+", {hash:"+JSON.stringify(p.hash)+", data: data || {}, fn: "+t(p,o+1)+", inverse: "+n(p,o+1)+"});",c+="}}"}}else c+="r +='"+p.content.replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/'/g,"\\'")+"';"}return c+="\nreturn r;})",eval.call(window,c)}var s=this;s.template=e,s.compile=function(e){return s.compiled||(s.compiled=o(e)),s.compiled}};a.prototype={options:{},helpers:{if:function(e,n){return t(e)&&(e=e.call(this)),e?n.fn(this,n.data):n.inverse(this,n.data)},unless:function(e,n){return t(e)&&(e=e.call(this)),e?n.inverse(this,n.data):n.fn(this,n.data)},each:function(n,r){var a="",i=0;if(t(n)&&(n=n.call(this)),e(n)){for(r.hash.reverse&&(n=n.reverse()),i=0;i<n.length;i++)a+=r.fn(n[i],{first:0===i,last:i===n.length-1,index:i});r.hash.reverse&&(n=n.reverse())}else for(var o in n)i++,a+=r.fn(n[o],{key:o});return i>0?a:r.inverse(this)},with:function(e,n){return t(e)&&(e=e.call(this)),n.fn(e)},join:function(e,n){return t(e)&&(e=e.call(this)),e.join(n.hash.delimiter||n.hash.delimeter)}}};var i=function(e,t){if(2===arguments.length){var n=new a(e),r=n.compile()(t);return n=null,r}return new a(e)};return i.registerHelper=function(e,t){a.prototype.helpers[e]=t},i.unregisterHelper=function(e){a.prototype.helpers[e]=void 0,delete a.prototype.helpers[e]},i.compile=function(e,t){var n=new a(e,t);return n.compile()},i.options=a.prototype.options,i.helpers=a.prototype.helpers,i}(),window.Swiper=function(t,n){function r(){return"horizontal"===d.params.direction}function a(e){var t,n,r=function(){"undefined"!=typeof d&&null!==d&&(void 0!==d.imagesLoaded&&d.imagesLoaded++,d.imagesLoaded===d.imagesToLoad.length&&(d.update(),d.params.onImagesReady&&d.params.onImagesReady(d)))};e.complete?r():(n=e.currentSrc||e.getAttribute("src"),n?(t=new Image,t.onload=r,t.onerror=r,t.src=n):r())}function i(){d.autoplayTimeoutId=setTimeout(function(){d.params.loop?(d.fixLoop(),d._slideNext()):d.isEnd?n.autoplayStopOnLast?d.stopAutoplay():d._slideTo(0):d._slideNext()},d.params.autoplay)}function o(e,t){var n=p(e.target);if(!n.is(t))if("string"==typeof t)n=n.parents(t);else if(t.nodeType){var r;return n.parents().each(function(e,n){n===t&&(r=t)}),r?t:void 0}return 0===n.length?void 0:n[0]}function s(e,t){t=t||{};var n=window.MutationObserver||window.WebkitMutationObserver,r=new n(function(e){e.forEach(function(){d.onResize()})});r.observe(e,{attributes:"undefined"==typeof t.attributes||t.attributes,childList:"undefined"==typeof t.childList||t.childList,characterData:"undefined"==typeof t.characterData||t.characterData}),d.observers.push(r)}var l={direction:"horizontal",touchEventsTarget:"container",initialSlide:0,speed:300,autoplay:!1,autoplayDisableOnInteraction:!0,freeMode:!1,freeModeMomentum:!0,freeModeMomentumRatio:1,freeModeMomentumBounce:!0,freeModeMomentumBounceRatio:1,effect:"slide",coverflow:{rotate:50,stretch:0,depth:100,modifier:1,slideShadows:!0},cube:{slideShadows:!0,shadow:!0,shadowOffset:20,shadowScale:.94},scrollbar:null,scrollbarHide:!0,keyboardControl:!1,mousewheelControl:!1,mousewheelForceToAxis:!1,hashnav:!1,spaceBetween:0,slidesPerView:1,slidesPerColumn:1,slidesPerColumnFill:"column",slidesPerGroup:1,centeredSlides:!1,touchRatio:1,touchAngle:45,simulateTouch:!0,shortSwipes:!0,longSwipes:!0,longSwipesRatio:.5,longSwipesMs:300,followFinger:!0,onlyExternal:!1,threshold:0,touchMoveStopPropagation:!0,pagination:null,paginationClickable:!1,paginationHide:!1,resistance:!0,resistanceRatio:.85,nextButton:null,prevButton:null,watchSlidesProgress:!1,watchVisibility:!1,grabCursor:!1,preventClicks:!0,preventClicksPropagation:!0,releaseFormElements:!0,slideToClickedSlide:!1,updateOnImagesReady:!0,loop:!1,loopAdditionalSlides:0,loopedSlides:null,control:void 0,controlInverse:!1,allowSwipeToPrev:!0,allowSwipeToNext:!0,swipeHandler:null,noSwiping:!0,noSwipingClass:"swiper-no-swiping",slideClass:"swiper-slide",slideActiveClass:"swiper-slide-active",slideVisibleClass:"swiper-slide-visible",slideDuplicateClass:"swiper-slide-duplicate",slideNextClass:"swiper-slide-next",slidePrevClass:"swiper-slide-prev",wrapperClass:"swiper-wrapper",bulletClass:"swiper-pagination-bullet",bulletActiveClass:"swiper-pagination-bullet-active",buttonDisabledClass:"swiper-button-disabled",paginationHiddenClass:"swiper-pagination-hidden",observer:!1,observeParents:!1};n=n||{};for(var u in l)if("undefined"==typeof n[u])n[u]=l[u];else if("object"==typeof n[u])for(var c in l[u])"undefined"==typeof n[u][c]&&(n[u][c]=l[u][c]);var d=this;d.params=n;var p;if(p="undefined"==typeof e?window.Dom7||window.Zepto||window.jQuery:e,p&&(d.container=p(t),0!==d.container.length)){if(d.container.length>1)return void d.container.each(function(){new Swiper(this,n)});d.container[0].swiper=d,d.container.data("swiper",d),d.container.addClass("swiper-container-"+d.params.direction),d.params.freeMode&&d.container.addClass("swiper-container-free-mode"),["cube","coverflow"].indexOf(d.params.effect)>=0&&(d.support.transforms3d?(d.params.watchSlidesProgress=!0,d.container.addClass("swiper-container-3d")):d.params.effect="slide"),"slide"!==d.params.effect&&d.container.addClass("swiper-container-"+d.params.effect),"cube"===d.params.effect&&(d.params.resistanceRatio=0,d.params.slidesPerView=1,d.params.slidesPerColumn=1,d.params.slidesPerGroup=1,d.params.centeredSlides=!1,d.params.spaceBetween=0),"fade"===d.params.effect&&(d.params.watchSlidesProgress=!0,d.params.spaceBetween=0),d.params.grabCursor&&d.support.touch&&(d.params.grabCursor=!1),d.wrapper=d.container.children("."+d.params.wrapperClass),d.params.pagination&&(d.paginationContainer=p(d.params.pagination),d.params.paginationClickable&&d.paginationContainer.addClass("swiper-pagination-clickable")),d.rtl=r()&&("rtl"===d.container[0].dir.toLowerCase()||"rtl"===d.container.css("direction")),d.rtl&&d.container.addClass("swiper-container-rtl"),d.rtl&&(d.wrongRTL="-webkit-box"===d.wrapper.css("display")),d.translate=0,d.progress=0,d.velocity=0,d.lockSwipeToNext=function(){d.params.allowSwipeToNext=!1},d.lockSwipeToPrev=function(){d.params.allowSwipeToPrev=!1},d.lockSwipes=function(){d.params.allowSwipeToNext=d.params.allowSwipeToPrev=!1},d.unlockSwipeToNext=function(){d.params.allowSwipeToNext=!0},d.unlockSwipeToPrev=function(){d.params.allowSwipeToPrev=!0},d.unlockSwipes=function(){d.params.allowSwipeToNext=d.params.allowSwipeToPrev=!0},d.params.slidesPerColumn>1&&d.container.addClass("swiper-container-multirow"),d.params.grabCursor&&(d.container[0].style.cursor="move",d.container[0].style.cursor="-webkit-grab",d.container[0].style.cursor="-moz-grab",d.container[0].style.cursor="grab"),d.imagesToLoad=[],d.imagesLoaded=0,d.preloadImages=function(){d.imagesToLoad=d.container.find("img");for(var e=0;e<d.imagesToLoad.length;e++)a(d.imagesToLoad[e])},d.autoplayTimeoutId=void 0,d.autoplaying=!1,d.autoplayPaused=!1,d.startAutoplay=function(){return"undefined"==typeof d.autoplayTimeoutId&&void(d.params.autoplay&&(d.autoplaying||(d.autoplaying=!0,d.params.onAutoplayStart&&d.params.onAutoplayStart(d),i())))},d.stopAutoplay=function(){d.autoplayTimeoutId&&(d.autoplayTimeoutId&&clearTimeout(d.autoplayTimeoutId),d.autoplaying=!1,d.autoplayTimeoutId=void 0,d.params.onAutoplayStop&&d.params.onAutoplayStop(d))},d.pauseAutoplay=function(e){d.autoplayPaused||(d.autoplayTimeoutId&&clearTimeout(d.autoplayTimeoutId),d.autoplayPaused=!0,0===e?(d.autoplayPaused=!1,i()):d.wrapper.transitionEnd(function(){d.autoplayPaused=!1,i()}))},d.updateContainerSize=function(){d.width=d.container[0].clientWidth,d.height=d.container[0].clientHeight,d.size=r()?d.width:d.height},d.updateSlidesSize=function(){d.slides=d.wrapper.children("."+d.params.slideClass),d.snapGrid=[],d.slidesGrid=[],d.slidesSizesGrid=[];var e,t=d.params.spaceBetween,n=0,a=0,i=0;"string"==typeof t&&t.indexOf("%")>=0&&(t=parseFloat(t.replace("%",""))/100*d.size),d.virtualWidth=-t,d.slides.css(d.rtl?{marginLeft:"",marginTop:""}:{marginRight:"",marginBottom:""});var o;d.params.slidesPerColumn>1&&(o=Math.floor(d.slides.length/d.params.slidesPerColumn)===d.slides.length/d.params.slidesPerColumn?d.slides.length:Math.ceil(d.slides.length/d.params.slidesPerColumn)*d.params.slidesPerColumn);var s;for(e=0;e<d.slides.length;e++){s=0;var l=d.slides.eq(e);if(d.params.slidesPerColumn>1){var u,c,p,f,h=d.params.slidesPerColumn;"column"===d.params.slidesPerColumnFill?(c=Math.floor(e/h),p=e-c*h,u=c+p*o/h,l.css({"-webkit-box-ordinal-group":u,"-moz-box-ordinal-group":u,"-ms-flex-order":u,"-webkit-order":u,order:u})):(f=o/h,p=Math.floor(e/f),c=e-p*f),l.css({"margin-top":0!==p&&d.params.spaceBetween&&d.params.spaceBetween+"px"}).attr("data-swiper-column",c).attr("data-swiper-row",p)}"none"!==l.css("display")&&("auto"===d.params.slidesPerView?s=r()?l.outerWidth(!0):l.outerHeight(!0):(s=(d.size-(d.params.slidesPerView-1)*t)/d.params.slidesPerView,r()?d.slides[e].style.width=s+"px":d.slides[e].style.height=s+"px"),d.slides[e].swiperSlideSize=s,d.slidesSizesGrid.push(s),d.params.centeredSlides?(n=n+s/2+a/2+t,0===e&&(n=n-d.size/2-t),Math.abs(n)<.001&&(n=0),i%d.params.slidesPerGroup===0&&d.snapGrid.push(n),d.slidesGrid.push(n)):(i%d.params.slidesPerGroup===0&&d.snapGrid.push(n),d.slidesGrid.push(n),n=n+s+t),d.virtualWidth+=s+t,a=s,i++)}d.virtualWidth=Math.max(d.virtualWidth,d.size);var g;if(d.rtl&&d.wrongRTL&&("slide"===d.params.effect||"coverflow"===d.params.effect)&&d.wrapper.css({width:d.virtualWidth+d.params.spaceBetween+"px"}),d.params.slidesPerColumn>1&&(d.virtualWidth=(s+d.params.spaceBetween)*o,d.virtualWidth=Math.ceil(d.virtualWidth/d.params.slidesPerColumn)-d.params.spaceBetween,d.wrapper.css({width:d.virtualWidth+d.params.spaceBetween+"px"}),d.params.centeredSlides)){for(g=[],e=0;e<d.snapGrid.length;e++)d.snapGrid[e]<d.virtualWidth+d.snapGrid[0]&&g.push(d.snapGrid[e]);d.snapGrid=g}if(!d.params.centeredSlides){for(g=[],e=0;e<d.snapGrid.length;e++)d.snapGrid[e]<=d.virtualWidth-d.size&&g.push(d.snapGrid[e]);d.snapGrid=g,Math.floor(d.virtualWidth-d.size)>Math.floor(d.snapGrid[d.snapGrid.length-1])&&d.snapGrid.push(d.virtualWidth-d.size)}0===d.snapGrid.length&&(d.snapGrid=[0]),0!==d.params.spaceBetween&&d.slides.css(r()?d.rtl?{marginLeft:t+"px"}:{marginRight:t+"px"}:{marginBottom:t+"px"}),d.params.watchSlidesProgress&&d.updateSlidesOffset()},d.updateSlidesOffset=function(){for(var e=0;e<d.slides.length;e++)d.slides[e].swiperSlideOffset=r()?d.slides[e].offsetLeft:d.slides[e].offsetTop},d.update=function(){d.updateContainerSize(),d.updateSlidesSize(),d.updateProgress(),d.updatePagination(),d.updateClasses()},d.minTranslate=function(){return-d.snapGrid[0]},d.maxTranslate=function(){return-d.snapGrid[d.snapGrid.length-1]},d.updateSlidesProgress=function(e){if("undefined"==typeof e&&(e=d.translate||0),0!==d.slides.length){"undefined"==typeof d.slides[0].swiperSlideOffset&&d.updateSlidesOffset();var t=d.params.centeredSlides?-e+d.size/2:-e;d.rtl&&(t=d.params.centeredSlides?e-d.size/2:e),d.container[0].getBoundingClientRect(),r()?"left":"top",r()?"right":"bottom",d.slides.removeClass(d.params.slideVisibleClass);for(var n=0;n<d.slides.length;n++){var a=d.slides[n],i=d.params.centeredSlides===!0?a.swiperSlideSize/2:0,o=(t-a.swiperSlideOffset-i)/(a.swiperSlideSize+d.params.spaceBetween);if(d.params.watchVisibility){var s=-(t-a.swiperSlideOffset-i),l=s+d.slidesSizesGrid[n],u=s>=0&&s<d.size||l>0&&l<=d.size||0>=s&&l>=d.size;u&&d.slides.eq(n).addClass(d.params.slideVisibleClass)}a.progress=d.rtl?-o:o}}},d.updateProgress=function(e){"undefined"==typeof e&&(e=d.translate||0),d.progress=(e-d.minTranslate())/(d.maxTranslate()-d.minTranslate()),d.isBeginning=d.isEnd=!1,d.progress<=0&&(d.isBeginning=!0,d.params.onReachBeginning&&d.params.onReachBeginning(d)),d.progress>=1&&(d.isEnd=!0,d.params.onReachEnd&&d.params.onReachEnd(d)),d.params.watchSlidesProgress&&d.updateSlidesProgress(e),d.params.onProgress&&d.params.onProgress(d,d.progress)},d.updateActiveIndex=function(){var e,t,n,r=d.rtl?d.translate:-d.translate;for(t=0;t<d.slidesGrid.length;t++)"undefined"!=typeof d.slidesGrid[t+1]?r>=d.slidesGrid[t]&&r<d.slidesGrid[t+1]-(d.slidesGrid[t+1]-d.slidesGrid[t])/2?e=t:r>=d.slidesGrid[t]&&r<d.slidesGrid[t+1]&&(e=t+1):r>=d.slidesGrid[t]&&(e=t);(0>e||"undefined"==typeof e)&&(e=0),n=Math.floor(e/d.params.slidesPerGroup),n>=d.snapGrid.length&&(n=d.snapGrid.length-1),e!==d.activeIndex&&(d.snapIndex=n,d.previousIndex=d.activeIndex,d.activeIndex=e,d.updateClasses())},d.updateClasses=function(){d.slides.removeClass(d.params.slideActiveClass+" "+d.params.slideNextClass+" "+d.params.slidePrevClass);var e=d.slides.eq(d.activeIndex);if(e.addClass(d.params.slideActiveClass),e.next("."+d.params.slideClass).addClass(d.params.slideNextClass),e.prev("."+d.params.slideClass).addClass(d.params.slidePrevClass),d.bullets&&d.bullets.length>0){d.bullets.removeClass(d.params.bulletActiveClass);var t;d.params.loop?(t=d.activeIndex-d.loopedSlides,t>d.slides.length-1-2*d.loopedSlides&&(t-=d.slides.length-2*d.loopedSlides)):t="undefined"!=typeof d.snapIndex?d.snapIndex:d.activeIndex||0,d.bullets.eq(t).addClass(d.params.bulletActiveClass)}d.params.loop||(d.params.prevButton&&(d.isBeginning?p(d.params.prevButton).addClass(d.params.buttonDisabledClass):p(d.params.prevButton).removeClass(d.params.buttonDisabledClass)),d.params.nextButton&&(d.isEnd?p(d.params.nextButton).addClass(d.params.buttonDisabledClass):p(d.params.nextButton).removeClass(d.params.buttonDisabledClass)))},d.updatePagination=function(){if(d.params.pagination&&d.paginationContainer&&d.paginationContainer.length>0){for(var e="",t=d.params.loop?d.slides.length-2*d.loopedSlides:d.snapGrid.length,n=0;t>n;n++)e+='<span class="'+d.params.bulletClass+'"></span>';d.paginationContainer.html(e),d.bullets=d.paginationContainer.find("."+d.params.bulletClass)}},d.onResize=function(){d.updateContainerSize(),d.updateSlidesSize(),d.updateProgress(),d.updateClasses(),"auto"===d.params.slidesPerView&&d.updatePagination(),d.isEnd?d.slideTo(d.slides.length-1,0,!1,!0):d.slideTo(d.activeIndex,0,!1,!0),d.params.scrollbar&&d.scrollbar&&d.scrollbar.init()};var f=["mousedown","mousemove","mouseup"];window.navigator.pointerEnabled?f=["pointerdown","pointermove","pointerup"]:window.navigator.msPointerEnabled&&(f=["MSPointerDown","MSPointerMove","MSPointerUp"]),d.touchEvents={start:d.support.touch||!d.params.simulateTouch?"touchstart":f[0],move:d.support.touch||!d.params.simulateTouch?"touchmove":f[1],end:d.support.touch||!d.params.simulateTouch?"touchend":f[2]},(window.navigator.pointerEnabled||window.navigator.msPointerEnabled)&&("container"===d.params.touchEventsTarget?d.container:d.wrapper).addClass("swiper-wp8-"+d.params.direction),d.events=function(e){var t=e?"off":"on",n=e?"removeEventListener":"addEventListener",r="container"===d.params.touchEventsTarget?d.container:d.wrapper,a=d.support.touch?r:p(document),i=!!d.params.nested;r[0][n](d.touchEvents.start,d.onTouchStart,!1),a[0][n](d.touchEvents.move,d.onTouchMove,i),a[0][n](d.touchEvents.end,d.onTouchEnd,!1),window[n]("resize",d.onResize),d.params.nextButton&&p(d.params.nextButton)[t]("click",d.onClickNext),d.params.prevButton&&p(d.params.prevButton)[t]("click",d.onClickPrev),d.params.pagination&&d.params.paginationClickable&&p(d.paginationContainer)[t]("click","."+d.params.bulletClass,d.onClickIndex),(d.params.preventClicks||d.params.preventClicksPropagation)&&r[0][n]("click",d.preventClicks,!0)},d.attachEvents=function(){d.events()},d.detachEvents=function(){d.events(!0)},d.allowClick=!0,d.preventClicks=function(e){d.allowClick||(d.params.preventClicks&&e.preventDefault(),d.params.preventClicksPropagation&&(e.stopPropagation(),e.stopImmediatePropagation()))},d.onClickNext=function(e){e.preventDefault(),d.slideNext()},d.onClickPrev=function(e){e.preventDefault(),d.slidePrev()},d.onClickIndex=function(e){e.preventDefault();var t=p(this).index()*d.params.slidesPerGroup;d.params.loop&&(t+=d.loopedSlides),d.slideTo(t)},d.updateClickedSlide=function(e){var t=o(e,"."+d.params.slideClass);if(!t)return d.clickedSlide=void 0,void(d.clickedIndex=void 0);if(d.clickedSlide=t,d.clickedIndex=p(t).index(),d.params.slideToClickedSlide&&void 0!==d.clickedIndex&&d.clickedIndex!==d.activeIndex){var n,r=d.clickedIndex;if(d.params.loop)if(n=p(d.clickedSlide).attr("data-swiper-slide-index"),r>d.slides.length-d.params.slidesPerView)d.fixLoop(),r=d.wrapper.children("."+d.params.slideClass+'[data-swiper-slide-index="'+n+'"]').eq(0).index(),setTimeout(function(){d.slideTo(r)},0);else if(r<d.params.slidesPerView-1){d.fixLoop();var a=d.wrapper.children("."+d.params.slideClass+'[data-swiper-slide-index="'+n+'"]');r=a.eq(a.length-1).index(),setTimeout(function(){d.slideTo(r)},0)}else d.slideTo(r);else d.slideTo(r)}};var h,g,m,v,y,_,b,w={},x={};d.animating=!1;var C,T,S=Date.now(),k=[],A="input, select, textarea, button";return d.onTouchStart=function(e){if(e.originalEvent&&(e=e.originalEvent),!("mousedown"===e.type&&"which"in e&&3===e.which||d.params.noSwiping&&o(e,"."+d.params.noSwipingClass)||d.params.swipeHandler&&!o(e,d.params.swipeHandler))){if(h=!0,g=!1,v=void 0,w.x=x.x="touchstart"===e.type?e.targetTouches[0].pageX:e.pageX,w.y=x.y="touchstart"===e.type?e.targetTouches[0].pageY:e.pageY,m=Date.now(),d.allowClick=!0,d.updateContainerSize(),d.swipeDirection=void 0,d.params.threshold>0&&(b=!1),"touchstart"!==e.type){var t=!0;p(e.target).is(A)&&(t=!1),document.activeElement&&p(document.activeElement).is(A)&&document.activeElement.blur(),t&&e.preventDefault()}d.params.onTouchStart&&d.params.onTouchStart(d,e)}},d.onTouchMove=function(e){if(e.originalEvent&&(e=e.originalEvent),!e.preventedByNestedSwiper){if(d.params.onlyExternal)return g=!0,void(d.allowClick=!1);if(d.params.onTouchMove&&d.params.onTouchMove(d,e),d.allowClick=!1,h&&!(e.targetTouches&&e.targetTouches.length>1)){x.x="touchmove"===e.type?e.targetTouches[0].pageX:e.pageX,x.y="touchmove"===e.type?e.targetTouches[0].pageY:e.pageY;var t=180*Math.atan2(Math.abs(x.y-w.y),Math.abs(x.x-w.x))/Math.PI;if("undefined"==typeof v&&(v=r()?t>d.params.touchAngle:90-t>d.params.touchAngle),v)return void(h=!1);d.params.onSliderMove&&d.params.onSliderMove(d,e),e.preventDefault(),d.params.touchMoveStopPropagation&&!d.params.nested&&e.stopPropagation(),g||(n.loop&&d.fixLoop(),_="cube"===d.params.effect?(d.rtl?-d.translate:d.translate)||0:d.getWrapperTranslate(),d.setWrapperTransition(0),d.animating&&d.wrapper.trigger("webkitTransitionEnd transitionend oTransitionEnd MSTransitionEnd msTransitionEnd"),d.params.autoplay&&d.autoplaying&&(d.params.autoplayDisableOnInteraction?d.stopAutoplay():d.pauseAutoplay()),T=!1,d.params.grabCursor&&(d.container[0].style.cursor="move",d.container[0].style.cursor="-webkit-grabbing",d.container[0].style.cursor="-moz-grabbin",d.container[0].style.cursor="grabbing")),g=!0;var a=r()?x.x-w.x:x.y-w.y;a*=d.params.touchRatio,d.rtl&&(a=-a),d.swipeDirection=a>0?"prev":"next",y=a+_;var i=!0;if(a>0&&y>d.minTranslate()?(i=!1,d.params.resistance&&(y=d.minTranslate()-1+Math.pow(-d.minTranslate()+_+a,d.params.resistanceRatio))):0>a&&y<d.maxTranslate()&&(i=!1,d.params.resistance&&(y=d.maxTranslate()+1-Math.pow(d.maxTranslate()-_-a,d.params.resistanceRatio))),i&&(e.preventedByNestedSwiper=!0),!d.params.allowSwipeToNext&&"next"===d.swipeDirection&&_>y&&(y=_),!d.params.allowSwipeToPrev&&"prev"===d.swipeDirection&&y>_&&(y=_),d.params.followFinger){if(d.params.threshold>0){if(!(Math.abs(a)>d.params.threshold||b))return void(y=_);if(!b)return b=!0,w.x=x.x,w.y=x.y,void(y=_)}(d.params.freeMode||d.params.watchSlidesProgress)&&d.updateActiveIndex(),d.params.freeMode&&(0===k.length&&k.push({position:w[r()?"x":"y"],time:m}),k.push({position:x[r()?"x":"y"],time:(new Date).getTime()})),d.updateProgress(y),d.setWrapperTranslate(y)}}}},d.onTouchEnd=function(e){if(e.originalEvent&&(e=e.originalEvent),h){d.params.onTouchEnd&&d.params.onTouchEnd(d,e),d.params.grabCursor&&g&&h&&(d.container[0].style.cursor="move",d.container[0].style.cursor="-webkit-grab",d.container[0].style.cursor="-moz-grab",d.container[0].style.cursor="grab");var t=Date.now(),n=t-m;d.allowClick&&(d.updateClickedSlide(e),d.params.onTap&&d.params.onTap(d,e),300>n&&t-S>300&&(C&&clearTimeout(C),C=setTimeout(function(){d&&(d.params.paginationHide&&d.paginationContainer.length>0&&!p(e.target).hasClass(d.params.bulletClass)&&d.paginationContainer.toggleClass(d.params.paginationHiddenClass),d.params.onClick&&d.params.onClick(d,e))},300)),300>n&&300>t-S&&(C&&clearTimeout(C),d.params.onDoubleTap&&d.params.onDoubleTap(d,e))),S=Date.now(),setTimeout(function(){d&&d.allowClick&&(d.allowClick=!0)},0);var a=r()?x.x-w.x:x.y-w.y;if(!h||!g||!d.swipeDirection||0===a||y===_)return void(h=g=!1);h=g=!1;var i;if(i=d.params.followFinger?d.rtl?d.translate:-d.translate:-y,d.params.freeMode){if(i<-d.minTranslate())return void d.slideTo(d.activeIndex);if(i>-d.maxTranslate())return void d.slideTo(d.slides.length-1);if(d.params.freeModeMomentum){if(k.length>1){var o=k.pop(),s=k.pop(),l=o.position-s.position,u=o.time-s.time;d.velocity=l/u,d.velocity=d.velocity/2,Math.abs(d.velocity)<.02&&(d.velocity=0),(u>150||n>300)&&(d.velocity=0)}else d.velocity=0;k.length=0;var c,f=1e3*d.params.freeModeMomentumRatio,v=d.velocity*f,b=d.translate+v,A=!1,D=20*Math.abs(d.velocity)*d.params.freeModeMomentumBounceRatio;b<d.maxTranslate()&&(d.params.freeModeMomentumBounce?(b+d.maxTranslate()<-D&&(b=d.maxTranslate()-D),c=d.maxTranslate(),A=!0,T=!0):b=d.maxTranslate()),b>d.minTranslate()&&(d.params.freeModeMomentumBounce?(b-d.minTranslate()>D&&(b=d.minTranslate()+D),c=d.minTranslate(),A=!0,T=!0):b=d.minTranslate()),0!==d.velocity&&(f=Math.abs((b-d.translate)/d.velocity)),d.params.freeModeMomentumBounce&&A?(d.updateProgress(c),d.setWrapperTranslate(b),d.setWrapperTransition(f),d.onTransitionStart(),d.animating=!0,d.wrapper.transitionEnd(function(){T&&(d.params.onMomentumBounce&&d.params.onMomentumBounce(d),d.setWrapperTranslate(c),d.setWrapperTransition(d.params.speed),d.wrapper.transitionEnd(function(){d.onTransitionEnd()}))})):d.velocity?(d.updateProgress(b),d.setWrapperTranslate(b),d.setWrapperTransition(f),d.onTransitionStart(),d.animating||(d.animating=!0,d.wrapper.transitionEnd(function(){d.onTransitionEnd()}))):d.updateProgress(b),d.updateActiveIndex()}return void((!d.params.freeModeMomentum||n>=d.params.longSwipesMs)&&(d.updateProgress(),d.updateActiveIndex()))}var E,P=0,O=d.slidesSizesGrid[0];for(E=0;E<d.slidesGrid.length;E+=d.params.slidesPerGroup)"undefined"!=typeof d.slidesGrid[E+d.params.slidesPerGroup]?i>=d.slidesGrid[E]&&i<d.slidesGrid[E+d.params.slidesPerGroup]&&(P=E,O=d.slidesGrid[E+d.params.slidesPerGroup]-d.slidesGrid[E]):i>=d.slidesGrid[E]&&(P=E,O=d.slidesGrid[d.slidesGrid.length-1]-d.slidesGrid[d.slidesGrid.length-2]);var L=(i-d.slidesGrid[P])/O;if(n>d.params.longSwipesMs){if(!d.params.longSwipes)return void d.slideTo(d.activeIndex);"next"===d.swipeDirection&&d.slideTo(L>=d.params.longSwipesRatio?P+d.params.slidesPerGroup:P),"prev"===d.swipeDirection&&d.slideTo(L>1-d.params.longSwipesRatio?P+d.params.slidesPerGroup:P)}else{if(!d.params.shortSwipes)return void d.slideTo(d.activeIndex);"next"===d.swipeDirection&&d.slideTo(P+d.params.slidesPerGroup),"prev"===d.swipeDirection&&d.slideTo(P)}}},d._slideTo=function(e,t){return d.slideTo(e,t,!0,!0)},d.slideTo=function(e,t,n,a){"undefined"==typeof n&&(n=!0),"undefined"==typeof e&&(e=0),0>e&&(e=0),d.snapIndex=Math.floor(e/d.params.slidesPerGroup),d.snapIndex>=d.snapGrid.length&&(d.snapIndex=d.snapGrid.length-1);var i=-d.snapGrid[d.snapIndex];d.params.autoplay&&d.autoplaying&&(a||!d.params.autoplayDisableOnInteraction?d.pauseAutoplay(t):d.stopAutoplay()),d.updateProgress(i);for(var o=0;o<d.slidesGrid.length;o++)-i>=d.slidesGrid[o]&&(e=o);return"undefined"==typeof t&&(t=d.params.speed),d.previousIndex=d.activeIndex||0,d.activeIndex=e,i===d.translate?(d.updateClasses(),!1):(n&&d.onTransitionStart(),r()?i:0,r()?0:i,0===t?(d.setWrapperTransition(0),d.setWrapperTranslate(i),n&&d.onTransitionEnd()):(d.setWrapperTransition(t),d.setWrapperTranslate(i),d.animating||(d.animating=!0,d.wrapper.transitionEnd(function(){n&&d.onTransitionEnd()}))),d.updateClasses(),void 0)},d.onTransitionStart=function(){d.params.onTransitionStart&&d.params.onTransitionStart(d),d.params.onSlideChangeStart&&d.activeIndex!==d.previousIndex&&d.params.onSlideChangeStart(d)},d.onTransitionEnd=function(){d.animating=!1,d.setWrapperTransition(0),d.params.onTransitionEnd&&d.params.onTransitionEnd(d),d.params.onSlideChangeEnd&&d.activeIndex!==d.previousIndex&&d.params.onSlideChangeEnd(d)},d.slideNext=function(e,t,n){return d.params.loop?!d.animating&&(d.fixLoop(),d.container[0].clientLeft,d.slideTo(d.activeIndex+d.params.slidesPerGroup,t,e,n)):d.slideTo(d.activeIndex+d.params.slidesPerGroup,t,e,n)},d._slideNext=function(e){return d.slideNext(!0,e,!0)},d.slidePrev=function(e,t,n){return d.params.loop?!d.animating&&(d.fixLoop(),d.container[0].clientLeft,d.slideTo(d.activeIndex-1,t,e,n)):d.slideTo(d.activeIndex-1,t,e,n)},d._slidePrev=function(e){return d.slidePrev(!0,e,!0)},d.slideReset=function(e,t){return d.slideTo(d.activeIndex,t,e)},d.setWrapperTransition=function(e,t){d.wrapper.transition(e),d.params.onSetTransition&&d.params.onSetTransition(d,e),"slide"!==d.params.effect&&d.effects[d.params.effect]&&d.effects[d.params.effect].setTransition(e),
d.params.scrollbar&&d.scrollbar&&d.scrollbar.setTransition(e),d.params.control&&d.controller&&d.controller.setTransition(e,t)},d.setWrapperTranslate=function(e,t,n){var a=0,i=0,o=0;r()?a=d.rtl?-e:e:i=e,d.wrapper.transform(d.support.transforms3d?"translate3d("+a+"px, "+i+"px, "+o+"px)":"translate("+a+"px, "+i+"px)"),d.translate=r()?a:i,t&&d.updateActiveIndex(),"slide"!==d.params.effect&&d.effects[d.params.effect]&&d.effects[d.params.effect].setTranslate(d.translate),d.params.scrollbar&&d.scrollbar&&d.scrollbar.setTranslate(d.translate),d.params.control&&d.controller&&d.controller.setTranslate(d.translate,n),d.params.hashnav&&d.hashnav&&d.hashnav.setHash(),d.params.onSetTranslate&&d.params.onSetTranslate(d,d.translate)},d.getTranslate=function(e,t){var n,r,a,i;return"undefined"==typeof t&&(t="x"),a=window.getComputedStyle(e,null),window.WebKitCSSMatrix?i=new WebKitCSSMatrix("none"===a.webkitTransform?"":a.webkitTransform):(i=a.MozTransform||a.OTransform||a.MsTransform||a.msTransform||a.transform||a.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,"),n=i.toString().split(",")),"x"===t&&(r=window.WebKitCSSMatrix?i.m41:parseFloat(16===n.length?n[12]:n[4])),"y"===t&&(r=window.WebKitCSSMatrix?i.m42:parseFloat(16===n.length?n[13]:n[5])),d.rtl&&r&&(r=-r),r||0},d.getWrapperTranslate=function(e){return"undefined"==typeof e&&(e=r()?"x":"y"),d.getTranslate(d.wrapper[0],e)},d.observers=[],d.initObservers=function(){if(d.params.observeParents)for(var e=d.container.parents(),t=0;t<e.length;t++)s(e[t]);s(d.container[0],{childList:!1}),s(d.wrapper[0],{attributes:!1})},d.disconnectObservers=function(){for(var e=0;e<d.observers.length;e++)d.observers[e].disconnect();d.observers=[]},d.createLoop=function(){d.wrapper.children("."+d.params.slideClass+"."+d.params.slideDuplicateClass).remove();var e=d.wrapper.children("."+d.params.slideClass);d.loopedSlides=parseInt(d.params.loopedSlides||d.params.slidesPerView,10),d.loopedSlides=d.loopedSlides+d.params.loopAdditionalSlides,d.loopedSlides>e.length&&(d.loopedSlides=e.length);var t,n=[],r=[];for(e.each(function(t,a){var i=p(this);t<d.loopedSlides&&r.push(a),t<e.length&&t>=e.length-d.loopedSlides&&n.push(a),i.attr("data-swiper-slide-index",t)}),t=0;t<r.length;t++)d.wrapper.append(p(r[t].cloneNode(!0)).addClass(d.params.slideDuplicateClass));for(t=n.length-1;t>=0;t--)d.wrapper.prepend(p(n[t].cloneNode(!0)).addClass(d.params.slideDuplicateClass))},d.deleteLoop=function(){d.wrapper.children("."+d.params.slideClass+"."+d.params.slideDuplicateClass).remove()},d.fixLoop=function(){var e;d.activeIndex<d.loopedSlides?(e=d.slides.length-3*d.loopedSlides+d.activeIndex,e+=d.loopedSlides,d.slideTo(e,0,!1,!0)):("auto"===d.params.slidesPerView&&d.activeIndex>=2*d.loopedSlides||d.activeIndex>d.slides.length-2*d.params.slidesPerView)&&(e=-d.slides.length+d.activeIndex+d.loopedSlides,e+=d.loopedSlides,d.slideTo(e,0,!1,!0))},d.appendSlide=function(e){if(d.params.loop&&d.deleteLoop(),"object"==typeof e&&e.length)for(var t=0;t<e.length;t++)e[t]&&d.wrapper.append(e[t]);else d.wrapper.append(e);d.params.loop&&d.createLoop(),d.params.observer&&d.support.observer||d.update()},d.prependSlide=function(e){d.params.loop&&d.deleteLoop();var t=d.activeIndex+1;if("object"==typeof e&&e.length){for(var n=0;n<e.length;n++)e[n]&&d.wrapper.prepend(e[n]);t=d.activeIndex+e.length}else d.wrapper.prepend(e);d.params.loop&&d.createLoop(),d.params.observer&&d.support.observer||d.update(),d.slideTo(t,0,!1)},d.effects={fade:{setTranslate:function(){for(var e=0;e<d.slides.length;e++){var t=d.slides.eq(e),n=t[0].swiperSlideOffset,a=-n-d.translate,i=0;r()||(i=a,a=0),t.css({opacity:1+Math.min(Math.max(t[0].progress,-1),0)}).transform("translate3d("+a+"px, "+i+"px, 0px)")}},setTransition:function(e){d.slides.transition(e)}},cube:{setTranslate:function(){var e,t=0;d.params.cube.shadow&&(r()?(e=d.wrapper.find(".swiper-cube-shadow"),0===e.length&&(e=p('<div class="swiper-cube-shadow"></div>'),d.wrapper.append(e)),e.css({height:d.width+"px"})):(e=d.container.find(".swiper-cube-shadow"),0===e.length&&(e=p('<div class="swiper-cube-shadow"></div>'),d.container.append(e))));for(var n=0;n<d.slides.length;n++){var a=d.slides.eq(n),i=90*n,o=Math.floor(i/360);d.rtl&&(i=-i,o=Math.floor(-i/360));var s=Math.max(Math.min(a[0].progress,1),-1),l=0,u=0,c=0;n%4===0?(l=4*-o*d.size,c=0):(n-1)%4===0?(l=0,c=4*-o*d.size):(n-2)%4===0?(l=d.size+4*o*d.size,c=d.size):(n-3)%4===0&&(l=-d.size,c=3*d.size+4*d.size*o),d.rtl&&(l=-l),r()||(u=l,l=0);var f="rotateX("+(r()?0:-i)+"deg) rotateY("+(r()?i:0)+"deg) translate3d("+l+"px, "+u+"px, "+c+"px)";if(1>=s&&s>-1&&(t=90*n+90*s,d.rtl&&(t=90*-n-90*s)),a.transform(f),d.params.cube.slideShadows){var h=a.find(r()?".swiper-slide-shadow-left":".swiper-slide-shadow-top"),g=a.find(r()?".swiper-slide-shadow-right":".swiper-slide-shadow-bottom");0===h.length&&(h=p('<div class="swiper-slide-shadow-'+(r()?"left":"top")+'"></div>'),a.append(h)),0===g.length&&(g=p('<div class="swiper-slide-shadow-'+(r()?"right":"bottom")+'"></div>'),a.append(g)),a[0].progress,h.length&&(h[0].style.opacity=-a[0].progress),g.length&&(g[0].style.opacity=a[0].progress)}}if(d.wrapper.css({"-webkit-transform-origin":"50% 50% -"+d.size/2+"px","-moz-transform-origin":"50% 50% -"+d.size/2+"px","-ms-transform-origin":"50% 50% -"+d.size/2+"px","transform-origin":"50% 50% -"+d.size/2+"px"}),d.params.cube.shadow)if(r())e.transform("translate3d(0px, "+(d.width/2+d.params.cube.shadowOffset)+"px, "+-d.width/2+"px) rotateX(90deg) rotateZ(0deg) scale("+d.params.cube.shadowScale+")");else{var m=Math.abs(t)-90*Math.floor(Math.abs(t)/90),v=1.5-(Math.sin(2*m*Math.PI/360)/2+Math.cos(2*m*Math.PI/360)/2),y=d.params.cube.shadowScale,_=d.params.cube.shadowScale/v,b=d.params.cube.shadowOffset;e.transform("scale3d("+y+", 1, "+_+") translate3d(0px, "+(d.height/2+b)+"px, "+-d.height/2/_+"px) rotateX(-90deg)")}var w=d.isSafari||d.isUiWebView?-d.size/2:0;d.wrapper.transform("translate3d(0px,0,"+w+"px) rotateX("+(r()?0:t)+"deg) rotateY("+(r()?-t:0)+"deg)")},setTransition:function(e){d.slides.transition(e).find(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").transition(e),d.params.cube.shadow&&!r()&&d.container.find(".swiper-cube-shadow").transition(e)}},coverflow:{setTranslate:function(){for(var e=d.translate,t=r()?-e+d.width/2:-e+d.height/2,n=r()?d.params.coverflow.rotate:-d.params.coverflow.rotate,a=d.params.coverflow.depth,i=0,o=d.slides.length;o>i;i++){var s=d.slides.eq(i),l=d.slidesSizesGrid[i],u=s[0].swiperSlideOffset,c=(t-u-l/2)/l*d.params.coverflow.modifier,f=r()?n*c:0,h=r()?0:n*c,g=-a*Math.abs(c),m=r()?0:d.params.coverflow.stretch*c,v=r()?d.params.coverflow.stretch*c:0;Math.abs(v)<.001&&(v=0),Math.abs(m)<.001&&(m=0),Math.abs(g)<.001&&(g=0),Math.abs(f)<.001&&(f=0),Math.abs(h)<.001&&(h=0);var y="translate3d("+v+"px,"+m+"px,"+g+"px)  rotateX("+h+"deg) rotateY("+f+"deg)";if(s.transform(y),s[0].style.zIndex=-Math.abs(Math.round(c))+1,d.params.coverflow.slideShadows){var _=s.find(r()?".swiper-slide-shadow-left":".swiper-slide-shadow-top"),b=s.find(r()?".swiper-slide-shadow-right":".swiper-slide-shadow-bottom");0===_.length&&(_=p('<div class="swiper-slide-shadow-'+(r()?"left":"top")+'"></div>'),s.append(_)),0===b.length&&(b=p('<div class="swiper-slide-shadow-'+(r()?"right":"bottom")+'"></div>'),s.append(b)),_.length&&(_[0].style.opacity=c>0?c:0),b.length&&(b[0].style.opacity=-c>0?-c:0)}}if(window.navigator.pointerEnabled||window.navigator.msPointerEnabled){var w=d.wrapper.style;w.perspectiveOrigin=t+"px 50%"}},setTransition:function(e){d.slides.transition(e).find(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").transition(e)}}},d.scrollbar={init:function(){if(d.params.scrollbar){var e=d.scrollbar;e.track=p(d.params.scrollbar),e.drag=e.track.find(".swiper-scrollbar-drag"),0===e.drag.length&&(e.drag=p('<div class="swiper-scrollbar-drag"></div>'),e.track.append(e.drag)),e.drag[0].style.width="",e.drag[0].style.height="",e.trackSize=r()?e.track[0].offsetWidth:e.track[0].offsetHeight,e.divider=d.size/d.virtualWidth,e.moveDivider=e.divider*(e.trackSize/d.size),e.dragSize=e.trackSize*e.divider,r()?e.drag[0].style.width=e.dragSize+"px":e.drag[0].style.height=e.dragSize+"px",e.track[0].style.display=e.divider>=1?"none":"",d.params.scrollbarHide&&(e.track[0].style.opacity=0)}},setTranslate:function(){if(d.params.scrollbar){var e,t=d.scrollbar,n=(d.translate||0,t.dragSize);e=(t.trackSize-t.dragSize)*d.progress,d.rtl&&r()?(e=-e,e>0?(n=t.dragSize-e,e=0):-e+t.dragSize>t.trackSize&&(n=t.trackSize+e)):0>e?(n=t.dragSize+e,e=0):e+t.dragSize>t.trackSize&&(n=t.trackSize-e),r()?(t.drag.transform("translate3d("+e+"px, 0, 0)"),t.drag[0].style.width=n+"px"):(t.drag.transform("translate3d(0px, "+e+"px, 0)"),t.drag[0].style.height=n+"px"),d.params.scrollbarHide&&(clearTimeout(t.timeout),t.track[0].style.opacity=1,t.timeout=setTimeout(function(){t.track[0].style.opacity=0,t.track.transition(400)},1e3))}},setTransition:function(e){d.params.scrollbar&&d.scrollbar.drag.transition(e)}},d.controller={setTranslate:function(e,t){var n,r,a=d.params.control;if(d.isArray(a))for(var i=0;i<a.length;i++)a[i]!==t&&a[i]instanceof Swiper&&(e=a[i].rtl&&"horizontal"===a[i].params.direction?-d.translate:d.translate,n=(a[i].maxTranslate()-a[i].minTranslate())/(d.maxTranslate()-d.minTranslate()),r=(e-d.minTranslate())*n+a[i].minTranslate(),d.params.controlInverse&&(r=a[i].maxTranslate()-r),a[i].updateProgress(r),a[i].setWrapperTranslate(r,!1,d),a[i].updateActiveIndex());else a instanceof Swiper&&t!==a&&(e=a.rtl&&"horizontal"===a.params.direction?-d.translate:d.translate,n=(a.maxTranslate()-a.minTranslate())/(d.maxTranslate()-d.minTranslate()),r=(e-d.minTranslate())*n+a.minTranslate(),d.params.controlInverse&&(r=a.maxTranslate()-r),a.updateProgress(r),a.setWrapperTranslate(r,!1,d),a.updateActiveIndex())},setTransition:function(e,t){var n=d.params.control;if(d.isArray(n))for(var r=0;r<n.length;r++)n[r]!==t&&n[r]instanceof Swiper&&n[r].setWrapperTransition(e,d);else n instanceof Swiper&&t!==n&&n.setWrapperTransition(e,d)}},d.init=function(){d.params.loop&&d.createLoop(),d.updateContainerSize(),d.updateSlidesSize(),d.updatePagination(),d.params.scrollbar&&d.scrollbar&&d.scrollbar.init(),"slide"!==d.params.effect&&d.effects[d.params.effect]&&(d.params.loop||d.updateProgress(),d.effects[d.params.effect].setTranslate()),d.params.loop?d.slideTo(d.params.initialSlide+d.loopedSlides,0,!1):d.slideTo(d.params.initialSlide,0,!1),d.attachEvents(),d.params.observer&&d.support.observer&&d.initObservers(),d.params.updateOnImagesReady&&d.preloadImages(),d.params.autoplay&&d.startAutoplay(),d.params.keyboardControl&&d.enableKeyboardControl&&d.enableKeyboardControl(),d.params.mousewheelControl&&d.enableMousewheelControl&&d.enableMousewheelControl(),d.params.hashnav&&d.hashnav&&d.hashnav.init()},d.destroy=function(e){d.detachEvents(),d.disconnectObservers(),d.params.keyboardControl&&d.disableKeyboard&&d.disableKeyboard(),d.params.mousewheelControl&&d.disableMousewheel&&d.disableMousewheel(),d.params.onDestroy&&d.params.onDestroy(),e!==!1&&(d=null)},d.init(),d}},Swiper.prototype={isSafari:function(){var e=navigator.userAgent.toLowerCase();return e.indexOf("safari")>=0&&e.indexOf("chrome")<0&&e.indexOf("android")<0}(),isUiWebView:/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(navigator.userAgent),isArray:function(e){return"[object Array]"===Object.prototype.toString.apply(e)},support:{touch:window.Modernizr&&Modernizr.touch===!0||function(){return!!("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch)}(),transforms3d:window.Modernizr&&Modernizr.csstransforms3d===!0||function(){var e=document.createElement("div").style;return"webkitPerspective"in e||"MozPerspective"in e||"OPerspective"in e||"MsPerspective"in e||"perspective"in e}(),flexbox:function(){for(var e=document.createElement("div").style,t="WebkitBox msFlexbox MsFlexbox WebkitFlex MozBox fles".split(" "),n=0;n<t.length;n++)if(t[n]in e)return!0}(),observer:function(){return"MutationObserver"in window||"WebkitMutationObserver"in window}()}}}(),!function(e){function t(e){return e}function n(e,t){for(var n=0,r=t.length,a=Array(r);r>n;++n)a[n]=e[t[n]];return a}function r(e){function t(t,n,r,a){for(;a>r;){var i=r+a>>>1;e(t[i])<n?r=i+1:a=i}return r}function n(t,n,r,a){for(;a>r;){var i=r+a>>>1;n<e(t[i])?a=i:r=i+1}return r}return n.right=n,n.left=t,n}function a(e){function t(e,t,n){for(var a=n-t,i=(a>>>1)+1;--i>0;)r(e,i,a,t);return e}function n(e,t,n){for(var a,i=n-t;--i>0;)a=e[t],e[t]=e[t+i],e[t+i]=a,r(e,1,i,t);return e}function r(t,n,r,a){for(var i,o=t[--a+n],s=e(o);(i=n<<1)<=r&&(r>i&&e(t[a+i])>e(t[a+i+1])&&i++,!(s<=e(t[a+i])));)t[a+n]=t[a+i],n=i;t[a+n]=o}return t.sort=n,t}function i(e){function t(t,r,a,i){var o,s,l,u,c=Array(i=Math.min(a-r,i));for(s=0;i>s;++s)c[s]=t[r++];if(n(c,0,i),a>r){o=e(c[0]);do(l=e(u=t[r])>o)&&(c[0]=u,o=e(n(c,0,i)[0]));while(++r<a)}return c}var n=a(e);return t}function o(e){function t(t,n,r){for(var a=n+1;r>a;++a){for(var i=a,o=t[a],s=e(o);i>n&&e(t[i-1])>s;--i)t[i]=t[i-1];t[i]=o}return t}return t}function s(e){function t(e,t,a){return(E>a-t?r:n)(e,t,a)}function n(n,r,a){var i,o=0|(a-r)/6,s=r+o,l=a-1-o,u=r+a-1>>1,c=u-o,d=u+o,p=n[s],f=e(p),h=n[c],g=e(h),m=n[u],v=e(m),y=n[d],_=e(y),b=n[l],w=e(b);f>g&&(i=p,p=h,h=i,i=f,f=g,g=i),_>w&&(i=y,y=b,b=i,i=_,_=w,w=i),f>v&&(i=p,p=m,m=i,i=f,f=v,v=i),g>v&&(i=h,h=m,m=i,i=g,g=v,v=i),f>_&&(i=p,p=y,y=i,i=f,f=_,_=i),v>_&&(i=m,m=y,y=i,i=v,v=_,_=i),g>w&&(i=h,h=b,b=i,i=g,g=w,w=i),g>v&&(i=h,h=m,m=i,i=g,g=v,v=i),_>w&&(i=y,y=b,b=i,i=_,_=w,w=i);var x=h,C=g,T=y,S=_;n[s]=p,n[c]=n[r],n[u]=m,n[d]=n[a-1],n[l]=b;var k=r+1,A=a-2,D=S>=C&&C>=S;if(D)for(var E=k;A>=E;++E){var P=n[E],O=e(P);if(C>O)E!==k&&(n[E]=n[k],n[k]=P),++k;else if(O>C)for(;;){var L=e(n[A]);if(!(L>C)){if(C>L){n[E]=n[k],n[k++]=n[A],n[A--]=P;break}n[E]=n[A],n[A--]=P;break}A--}}else for(var E=k;A>=E;E++){var P=n[E],O=e(P);if(C>O)E!==k&&(n[E]=n[k],n[k]=P),++k;else if(O>S)for(;;){var L=e(n[A]);if(!(L>S)){C>L?(n[E]=n[k],n[k++]=n[A],n[A--]=P):(n[E]=n[A],n[A--]=P);break}if(A--,E>A)break}}if(n[r]=n[k-1],n[k-1]=x,n[a-1]=n[A+1],n[A+1]=T,t(n,r,k-1),t(n,A+2,a),D)return n;if(s>k&&A>l){for(var I,L;(I=e(n[k]))<=C&&I>=C;)++k;for(;(L=e(n[A]))<=S&&L>=S;)--A;for(var E=k;A>=E;E++){var P=n[E],O=e(P);if(C>=O&&O>=C)E!==k&&(n[E]=n[k],n[k]=P),k++;else if(S>=O&&O>=S)for(;;){var L=e(n[A]);if(!(S>=L&&L>=S)){C>L?(n[E]=n[k],n[k++]=n[A],n[A--]=P):(n[E]=n[A],n[A--]=P);break}if(A--,E>A)break}}}return t(n,k,A+1)}var r=o(e);return t}function l(e){for(var t=Array(e),n=-1;++n<e;)t[n]=0;return t}function u(e,t){for(var n=e.length;t>n;)e[n++]=0;return e}function c(e,t){if(t>32)throw Error("invalid array width!");return e}function d(e,t){return function(n){var r=n.length;return[e.left(n,t,0,r),e.right(n,t,0,r)]}}function p(e,t){var n=t[0],r=t[1];return function(t){var a=t.length;return[e.left(t,n,0,a),e.left(t,r,0,a)]}}function f(e){return[0,e.length]}function h(){return null}function g(){return 0}function m(e){return e+1}function v(e){return e-1}function y(e){return function(t,n){return t+ +e(n)}}function _(e){return function(t,n){return t-e(n)}}function b(){function e(e){var t=S,n=e.length;return n&&(b=b.concat(e),D=I(D,S+=n),O.forEach(function(r){r(e,t,n)})),c}function r(){for(var e=w(S,S),t=[],n=0,r=0;S>n;++n)D[n]?e[n]=r++:t.push(n);E.forEach(function(e){e(0,[],t)}),L.forEach(function(t){t(e)});for(var a,n=0,r=0;S>n;++n)(a=D[n])&&(n!==r&&(D[r]=a,b[r]=b[n]),++r);for(b.length=r;S>r;)D[--S]=0}function o(e){function r(t,r,a){W=t.map(e),X=Z(x(a),0,a),W=n(W,X);var i,o=Q(W),s=o[0],l=o[1];if(Y)for(i=0;a>i;++i)Y(W[i],i)||(D[X[i]+r]|=K);else{for(i=0;s>i;++i)D[X[i]+r]|=K;for(i=l;a>i;++i)D[X[i]+r]|=K}if(!r)return V=W,G=X,ne=s,void(re=l);var u=V,c=G,d=0,p=0;for(V=Array(S),G=w(S,S),i=0;r>d&&a>p;++i)u[d]<W[p]?(V[i]=u[d],G[i]=c[d++]):(V[i]=W[p],G[i]=X[p++]+r);for(;r>d;++d,++i)V[i]=u[d],G[i]=c[d];for(;a>p;++p,++i)V[i]=W[p],G[i]=X[p]+r;o=Q(V),ne=o[0],re=o[1]}function o(e,t,n){ee.forEach(function(e){e(W,X,t,n)}),W=X=null}function l(e){for(var t,n=0,r=0;S>n;++n)D[t=G[n]]&&(n!==r&&(V[r]=V[n]),G[r]=e[t],++r);for(V.length=r;S>r;)G[r++]=0;var a=Q(V);ne=a[0],re=a[1]}function u(e){var t=e[0],n=e[1];if(Y)return Y=null,F(function(e,r){return r>=t&&n>r}),ne=t,re=n,J;var r,a,i,o=[],s=[];if(ne>t)for(r=t,a=Math.min(ne,n);a>r;++r)D[i=G[r]]^=K,o.push(i);else if(t>ne)for(r=ne,a=Math.min(t,re);a>r;++r)D[i=G[r]]^=K,s.push(i);if(n>re)for(r=Math.max(t,re),a=n;a>r;++r)D[i=G[r]]^=K,o.push(i);else if(re>n)for(r=Math.max(ne,n),a=re;a>r;++r)D[i=G[r]]^=K,s.push(i);return ne=t,re=n,E.forEach(function(e){e(K,o,s)}),J}function c(e){return null==e?R():Array.isArray(e)?N(e):"function"==typeof e?B(e):P(e)}function P(e){return u((Q=d(T,e))(V))}function N(e){return u((Q=p(T,e))(V))}function R(){return u((Q=f)(V))}function B(e){return Q=f,F(Y=e),ne=0,re=S,J}function F(e){var t,n,r,a=[],i=[];for(t=0;S>t;++t)!(D[n=G[t]]&K)^!!(r=e(V[t],t))&&(r?(D[n]&=$,a.push(n)):(D[n]|=K,i.push(n)));E.forEach(function(e){e(K,a,i)})}function H(e){for(var t,n=[],r=re;--r>=ne&&e>0;)D[t=G[r]]||(n.push(b[t]),--e);return n}function z(e){for(var t,n=[],r=ne;re>r&&e>0;)D[t=G[r]]||(n.push(b[t]),--e),r++;return n}function U(e){function n(t,n,r,a){function i(){++W===q&&(y=M(y,j<<=1),R=M(R,j),q=C(j))}var c,d,p,f,g,m,v=N,y=w(W,q),_=H,x=U,T=W,k=0,A=0;for(J&&(_=x=h),N=Array(W),W=0,R=T>1?I(R,S):w(S,q),T&&(p=(d=v[0]).key);a>A&&!((f=e(t[A]))>=f);)++A;for(;a>A;){for(d&&f>=p?(g=d,m=p,y[k]=W,(d=v[++k])&&(p=d.key)):(g={key:f,value:x()},m=f),N[W]=g;!(f>m||(R[c=n[A]+r]=W,D[c]&$||(g.value=_(g.value,b[c])),++A>=a));)f=e(t[A]);i()}for(;T>k;)N[y[k]=W]=v[k++],i();if(W>k)for(k=0;r>k;++k)R[k]=y[R[k]];c=E.indexOf(X),W>1?(X=o,Y=l):(!W&&Z&&(W=1,N=[{key:null,value:x()}]),1===W?(X=s,Y=u):(X=h,Y=h),R=null),E[c]=X}function r(){if(W>1){for(var e=W,t=N,n=w(e,e),r=0,a=0;S>r;++r)D[r]&&(n[R[a]=R[r]]=1,++a);for(N=[],W=0,r=0;e>r;++r)n[r]&&(n[r]=W++,N.push(t[r]));if(W>1)for(var r=0;a>r;++r)R[r]=n[R[r]];else R=null;E[E.indexOf(X)]=W>1?(Y=l,X=o):1===W?(Y=u,X=s):Y=X=h}else if(1===W){if(Z)return;for(var r=0;S>r;++r)if(D[r])return;N=[],W=0,E[E.indexOf(X)]=X=Y=h}}function o(e,t,n){if(e!==K&&!J){var r,a,i,o;for(r=0,i=t.length;i>r;++r)D[a=t[r]]&$||(o=N[R[a]],o.value=H(o.value,b[a]));for(r=0,i=n.length;i>r;++r)(D[a=n[r]]&$)===e&&(o=N[R[a]],o.value=z(o.value,b[a]))}}function s(e,t,n){if(e!==K&&!J){var r,a,i,o=N[0];for(r=0,i=t.length;i>r;++r)D[a=t[r]]&$||(o.value=H(o.value,b[a]));for(r=0,i=n.length;i>r;++r)(D[a=n[r]]&$)===e&&(o.value=z(o.value,b[a]))}}function l(){var e,t;for(e=0;W>e;++e)N[e].value=U();for(e=0;S>e;++e)D[e]&$||(t=N[R[e]],t.value=H(t.value,b[e]))}function u(){var e,t=N[0];for(t.value=U(),e=0;S>e;++e)D[e]&$||(t.value=H(t.value,b[e]))}function c(){return J&&(Y(),J=!1),N}function d(e){var t=B(c(),0,N.length,e);return F.sort(t,0,t.length)}function p(e,t,n){return H=e,z=t,U=n,J=!0,O}function f(){return p(m,v,g)}function x(e){return p(y(e),_(e),g)}function T(e){function t(t){return e(t.value)}return B=i(t),F=a(t),O}function k(){return T(t)}function A(){return W}function P(){var e=E.indexOf(X);return e>=0&&E.splice(e,1),e=ee.indexOf(n),e>=0&&ee.splice(e,1),e=L.indexOf(r),e>=0&&L.splice(e,1),O}var O={top:d,all:c,reduce:p,reduceCount:f,reduceSum:x,order:T,orderNatural:k,size:A,dispose:P,remove:P};te.push(O);var N,R,B,F,H,z,U,j=8,q=C(j),W=0,X=h,Y=h,J=!0,Z=e===h;return arguments.length<1&&(e=t),E.push(X),ee.push(n),L.push(r),n(V,G,0,S),f().orderNatural()}function j(){var e=U(h),t=e.all;return delete e.all,delete e.top,delete e.order,delete e.orderNatural,delete e.size,e.value=function(){return t()[0].value},e}function q(){te.forEach(function(e){e.dispose()});var e=O.indexOf(r);return e>=0&&O.splice(e,1),e=O.indexOf(o),e>=0&&O.splice(e,1),e=L.indexOf(l),e>=0&&L.splice(e,1),k&=$,R()}var V,G,W,X,Y,J={filter:c,filterExact:P,filterRange:N,filterFunction:B,filterAll:R,top:H,bottom:z,group:U,groupAll:j,dispose:q,remove:q},K=~k&-~k,$=~K,Z=s(function(e){return W[e]}),Q=f,ee=[],te=[],ne=0,re=0;return O.unshift(r),O.push(o),L.push(l),k|=K,(A>=32?!K:k&-(1<<A))&&(D=M(D,A<<=1)),r(b,0,S),o(b,0,S),J}function l(){function e(e,t){var n;if(!f)for(n=t;S>n;++n)D[n]||(l=u(l,b[n]))}function t(e,t,n){var r,a,i;if(!f){for(r=0,i=t.length;i>r;++r)D[a=t[r]]||(l=u(l,b[a]));for(r=0,i=n.length;i>r;++r)D[a=n[r]]===e&&(l=c(l,b[a]))}}function n(){var e;for(l=d(),e=0;S>e;++e)D[e]||(l=u(l,b[e]))}function r(e,t,n){return u=e,c=t,d=n,f=!0,p}function a(){return r(m,v,g)}function i(e){return r(y(e),_(e),g)}function o(){return f&&(n(),f=!1),l}function s(){var n=E.indexOf(t);return n>=0&&E.splice(n),n=O.indexOf(e),n>=0&&O.splice(n),p}var l,u,c,d,p={reduce:r,reduceCount:a,reduceSum:i,value:o,dispose:s,remove:s},f=!0;return E.push(t),O.push(e),e(b,0,S),a()}function u(){return S}var c={add:e,remove:r,dimension:o,groupAll:l,size:u},b=[],S=0,k=0,A=8,D=P(0),E=[],O=[],L=[];return arguments.length?e(arguments[0]):c}function w(e,t){return(257>t?P:65537>t?O:L)(e)}function x(e){for(var t=w(e,e),n=-1;++n<e;)t[n]=n;return t}function C(e){return 8===e?256:16===e?65536:4294967296}b.version="1.3.14",b.permute=n;var T=b.bisect=r(t);T.by=r;var S=b.heap=a(t);S.by=a;var k=b.heapselect=i(t);k.by=i;var A=b.insertionsort=o(t);A.by=o;var D=b.quicksort=s(t);D.by=s;var E=32,P=l,O=l,L=l,I=u,M=c;"undefined"!=typeof Uint8Array&&(P=function(e){return new Uint8Array(e)},O=function(e){return new Uint16Array(e)},L=function(e){return new Uint32Array(e)},I=function(e,t){if(e.length>=t)return e;var n=new e.constructor(t);return n.set(e),n},M=function(e,t){var n;switch(t){case 16:n=O(e.length);break;case 32:n=L(e.length);break;default:throw Error("invalid array width!")}return n.set(e),n}),e.crossfilter=b}("undefined"!=typeof exports&&exports||this),!function(){function e(e,t){"use strict";var n={version:"2.1.0-dev",constants:{CHART_CLASS:"dc-chart",DEBUG_GROUP_CLASS:"debug",STACK_CLASS:"stack",DESELECTED_CLASS:"deselected",SELECTED_CLASS:"selected",NODE_INDEX_NAME:"__index__",GROUP_INDEX_NAME:"__group_index__",DEFAULT_CHART_GROUP:"__default_chart_group__",EVENT_DELAY:40,NEGLIGIBLE_NUMBER:1e-10},_renderlet:null};n.chartRegistry=function(){function e(e){return e||(e=n.constants.DEFAULT_CHART_GROUP),t[e]||(t[e]=[]),e}var t={};return{has:function(e){for(var n in t)if(t[n].indexOf(e)>=0)return!0;return!1},register:function(n,r){r=e(r),t[r].push(n)},deregister:function(n,r){r=e(r);for(var a=0;a<t[r].length;a++)if(t[r][a].anchorName()===n.anchorName()){t[r].splice(a,1);break}},clear:function(e){e?delete t[e]:t={}},list:function(n){return n=e(n),t[n]}}}(),n.registerChart=function(e,t){n.chartRegistry.register(e,t)},n.deregisterChart=function(e,t){n.chartRegistry.deregister(e,t)},n.hasChart=function(e){return n.chartRegistry.has(e)},n.deregisterAllCharts=function(e){n.chartRegistry.clear(e)},n.filterAll=function(e){for(var t=n.chartRegistry.list(e),r=0;r<t.length;++r)t[r].filterAll()},n.refocusAll=function(e){for(var t=n.chartRegistry.list(e),r=0;r<t.length;++r)t[r].focus&&t[r].focus()},n.renderAll=function(e){for(var t=n.chartRegistry.list(e),r=0;r<t.length;++r)t[r].render();null!==n._renderlet&&n._renderlet(e)},n.redrawAll=function(e){for(var t=n.chartRegistry.list(e),r=0;r<t.length;++r)t[r].redraw();null!==n._renderlet&&n._renderlet(e)},n.disableTransitions=!1,n.transition=function(e,t,r,a){if(0>=t||void 0===t||n.disableTransitions)return e;var i=e.transition(a).duration(t);return"function"==typeof r&&r(i),i},n.optionalTransition=function(e,t,r,a){return e?function(e){return n.transition(e,t,r,a)}:function(e){return e}},n.units={},n.units.integers=function(e,t){return Math.abs(t-e)},n.units.ordinal=function(e,t,n){return n},n.units.fp={},n.units.fp.precision=function(e){var t=function(e,r){var a=Math.abs((r-e)/t.resolution);return n.utils.isNegligible(a-Math.floor(a))?Math.floor(a):Math.ceil(a)};return t.resolution=e,t},n.round={},n.round.floor=function(e){return Math.floor(e)},n.round.ceil=function(e){return Math.ceil(e)},n.round.round=function(e){return Math.round(e)},n.override=function(e,t,n){var r=e[t];e["_"+t]=r,e[t]=n},n.renderlet=function(e){return arguments.length?(n._renderlet=e,n):n._renderlet},n.instanceOfChart=function(e){return e instanceof Object&&e.__dcFlag__&&!0},n.errors={},n.errors.Exception=function(e){var t=e||"Unexpected internal error";this.message=t,this.toString=function(){return t},this.stack=(new Error).stack},n.errors.Exception.prototype=Object.create(Error.prototype),n.errors.Exception.prototype.constructor=n.errors.Exception,n.errors.InvalidStateException=function(){n.errors.Exception.apply(this,arguments)},n.errors.InvalidStateException.prototype=Object.create(n.errors.Exception.prototype),n.errors.InvalidStateException.prototype.constructor=n.errors.InvalidStateException,n.errors.BadArgumentException=function(){n.errors.Exception.apply(this,arguments)},n.errors.BadArgumentException.prototype=Object.create(n.errors.Exception.prototype),n.errors.BadArgumentException.prototype.constructor=n.errors.BadArgumentException,n.dateFormat=e.time.format("%m/%d/%Y"),n.printers={},n.printers.filters=function(e){for(var t="",r=0;r<e.length;++r)r>0&&(t+=", "),t+=n.printers.filter(e[r]);return t},n.printers.filter=function(e){var t="";return"undefined"!=typeof e&&null!==e&&(e instanceof Array?e.length>=2?t="["+n.utils.printSingleValue(e[0])+" -> "+n.utils.printSingleValue(e[1])+"]":e.length>=1&&(t=n.utils.printSingleValue(e[0])):t=n.utils.printSingleValue(e)),t},n.pluck=function(e,t){return t?function(n,r){return t.call(n,n[e],r)}:function(t){return t[e]}},n.utils={},n.utils.printSingleValue=function(e){var t=""+e;return e instanceof Date?t=n.dateFormat(e):"string"==typeof e?t=e:n.utils.isFloat(e)?t=n.utils.printSingleValue.fformat(e):n.utils.isInteger(e)&&(t=Math.round(e)),t},n.utils.printSingleValue.fformat=e.format(".2f"),n.utils.add=function(e,t){if("string"==typeof t&&(t=t.replace("%","")),e instanceof Date){"string"==typeof t&&(t=+t);var n=new Date;return n.setTime(e.getTime()),n.setDate(e.getDate()+t),n}if("string"==typeof t){var r=+t/100;return e>0?e*(1+r):e*(1-r)}return e+t},n.utils.subtract=function(e,t){if("string"==typeof t&&(t=t.replace("%","")),e instanceof Date){"string"==typeof t&&(t=+t);var n=new Date;return n.setTime(e.getTime()),n.setDate(e.getDate()-t),n}if("string"==typeof t){var r=+t/100;return 0>e?e*(1+r):e*(1-r)}return e-t},n.utils.isNumber=function(e){return e===+e},n.utils.isFloat=function(e){return e===+e&&e!==(0|e)},n.utils.isInteger=function(e){return e===+e&&e===(0|e)},n.utils.isNegligible=function(e){return!n.utils.isNumber(e)||e<n.constants.NEGLIGIBLE_NUMBER&&e>-n.constants.NEGLIGIBLE_NUMBER},n.utils.clamp=function(e,t,n){return t>e?t:e>n?n:e};var r=0;return n.utils.uniqueId=function(){return++r},n.utils.nameToId=function(e){return e.toLowerCase().replace(/[\s]/g,"_").replace(/[\.']/g,"")},n.utils.appendOrSelect=function(e,t,n){n=n||t;var r=e.select(t);return r.empty()&&(r=e.append(n)),r},n.utils.safeNumber=function(e){return n.utils.isNumber(+e)?+e:0},n.logger={},n.logger.enableDebugLog=!1,n.logger.warn=function(e){return console&&(console.warn?console.warn(e):console.log&&console.log(e)),n.logger},n.logger.debug=function(e){return n.logger.enableDebugLog&&console&&(console.debug?console.debug(e):console.log&&console.log(e)),n.logger},n.logger.deprecate=function(e,t){function r(){return a||(n.logger.warn(t),a=!0),e.apply(this,arguments)}var a=!1;return r},n.events={current:null},n.events.trigger=function(e,t){return t?(n.events.current=e,void setTimeout(function(){e===n.events.current&&e()},t)):void e()},n.filters={},n.filters.RangedFilter=function(e,t){var n=new Array(e,t);return n.isFiltered=function(e){return e>=this[0]&&e<this[1]},n.filterType="RangedFilter",n},n.filters.TwoDimensionalFilter=function(e){if(null===e)return null;var t=e;return t.isFiltered=function(e){return e.length&&e.length===t.length&&e[0]===t[0]&&e[1]===t[1]},t.filterType="TwoDimensionalFilter",t},n.filters.RangedTwoDimensionalFilter=function(e){if(null===e)return null;var t,n=e;return t=n[0]instanceof Array?[[Math.min(e[0][0],e[1][0]),Math.min(e[0][1],e[1][1])],[Math.max(e[0][0],e[1][0]),Math.max(e[0][1],e[1][1])]]:[[e[0],-(1/0)],[e[1],1/0]],n.isFiltered=function(e){var n,r;if(e instanceof Array){if(2!==e.length)return!1;n=e[0],r=e[1]}else n=e,r=t[0][1];return n>=t[0][0]&&n<t[1][0]&&r>=t[0][1]&&r<t[1][1]},n.filterType="RangedTwoDimensionalFilter",n},n.baseMixin=function(r){function a(){p&&p.attr("width",r.width()).attr("height",r.height())}function i(){return p=r.root().append("svg"),a(),p}function o(e){if(!r[e]||!r[e]())throw new n.errors.InvalidStateException("Mandatory attribute chart."+e+" is missing on chart[#"+r.anchorName()+"]")}function s(){if(r.dimension()&&r.dimension().filter){var e=R(r.dimension(),N);N=e?e:N}}r.__dcFlag__=n.utils.uniqueId();var l,u,c,d,p,f,h,g,m=200,v=function(e){var t=e&&e.getBoundingClientRect&&e.getBoundingClientRect().width;return t&&t>m?t:m},y=v,_=200,b=function(e){var t=e&&e.getBoundingClientRect&&e.getBoundingClientRect().height;return t&&t>_?t:_},w=b,x=n.pluck("key"),C=n.pluck("value"),T=n.pluck("key"),S=n.pluck("key"),k=!1,A=function(e){return r.keyAccessor()(e)+": "+r.valueAccessor()(e)},D=!0,E=!0,P=750,O=n.printers.filters,L=["dimension","group"],I=n.constants.DEFAULT_CHART_GROUP,M=e.dispatch("preRender","postRender","preRedraw","postRedraw","filtered","zoomed","renderlet","pretransition"),N=[],R=function(e,t){return 0===t.length?e.filter(null):1!==t.length||t[0].isFiltered?1===t.length&&"RangedFilter"===t[0].filterType?e.filterRange(t[0]):e.filterFunction(function(e){for(var n=0;n<t.length;n++){var r=t[n];if(r.isFiltered&&r.isFiltered(e))return!0;if(e>=r&&r>=e)return!0}return!1}):e.filterExact(t[0]),t},B=function(e){return e.all()};r.height=function(t){return arguments.length?(w=e.functor(t||b),r):w(d.node())},r.width=function(t){return arguments.length?(y=e.functor(t||v),r):y(d.node())},r.minWidth=function(e){return arguments.length?(m=e,r):m},r.minHeight=function(e){return arguments.length?(_=e,r):_},r.dimension=function(e){return arguments.length?(l=e,r.expireCache(),r):l},r.data=function(t){return arguments.length?(B=e.functor(t),r.expireCache(),r):B.call(r,u)},r.group=function(e,t){return arguments.length?(u=e,r._groupName=t,r.expireCache(),r):u},r.ordering=function(e){return arguments.length?(S=e,h=t.quicksort.by(S),r.expireCache(),r):S},r._computeOrderedGroups=function(e){var n=e.slice(0);return n.length<=1?n:(h||(h=t.quicksort.by(S)),h(n,0,n.length))},r.filterAll=function(){return r.filter(null)},r.select=function(e){return d.select(e)},r.selectAll=function(e){return d?d.selectAll(e):null},r.anchor=function(t,a){if(!arguments.length)return c;if(n.instanceOfChart(t))c=t.anchor(),d=t.root(),f=!0;else{if(!t)throw new n.errors.BadArgumentException("parent must be defined");c=t.select&&t.classed?t.node():t,d=e.select(c),d.classed(n.constants.CHART_CLASS,!0),n.registerChart(r,a),f=!1}return I=a,r},r.anchorName=function(){var e=r.anchor();return e&&e.id?e.id:e&&e.replace?e.replace("#",""):"dc-chart"+r.chartID()},r.root=function(e){return arguments.length?(d=e,r):d},r.svg=function(e){return arguments.length?(p=e,r):p},r.resetSvg=function(){return r.select("svg").remove(),i()},r.filterPrinter=function(e){return arguments.length?(O=e,r):O},r.controlsUseVisibility=function(e){return arguments.length?(E=e,r):E},r.turnOnControls=function(){if(d){var e=r.controlsUseVisibility()?"visibility":"display";r.selectAll(".reset").style(e,null),r.selectAll(".filter").text(O(r.filters())).style(e,null)}return r},r.turnOffControls=function(){if(d){var e=r.controlsUseVisibility()?"visibility":"display",t=r.controlsUseVisibility()?"hidden":"none";r.selectAll(".reset").style(e,t),r.selectAll(".filter").style(e,t).text(r.filter())}return r},r.transitionDuration=function(e){return arguments.length?(P=e,r):P},r._mandatoryAttributes=function(e){return arguments.length?(L=e,r):L},r.render=function(){M.preRender(r),L&&L.forEach(o);var e=r._doRender();return g&&g.render(),r._activateRenderlets("postRender"),
e},r._activateRenderlets=function(e){M.pretransition(r),r.transitionDuration()>0&&p?p.transition().duration(r.transitionDuration()).each("end",function(){M.renderlet(r),e&&M[e](r)}):(M.renderlet(r),e&&M[e](r))},r.redraw=function(){a(),M.preRedraw(r);var e=r._doRedraw();return g&&g.render(),r._activateRenderlets("postRedraw"),e},r.redrawGroup=function(){n.redrawAll(r.chartGroup())},r.renderGroup=function(){n.renderAll(r.chartGroup())},r._invokeFilteredListener=function(e){void 0!==e&&M.filtered(r,e)},r._invokeZoomedListener=function(){M.zoomed(r)};var F=function(e,t){return null===t||"undefined"==typeof t?e.length>0:e.some(function(e){return e>=t&&t>=e})};r.hasFilterHandler=function(e){return arguments.length?(F=e,r):F},r.hasFilter=function(e){return F(N,e)};var H=function(e,t){for(var n=0;n<e.length;n++)if(e[n]<=t&&e[n]>=t){e.splice(n,1);break}return e};r.removeFilterHandler=function(e){return arguments.length?(H=e,r):H};var z=function(e,t){return e.push(t),e};r.addFilterHandler=function(e){return arguments.length?(z=e,r):z};var U=function(e){return[]};return r.resetFilterHandler=function(e){return arguments.length?(U=e,r):U},r.replaceFilter=function(e){N=[],r.filter(e)},r.filter=function(e){return arguments.length?(e instanceof Array&&e[0]instanceof Array&&!e.isFiltered?e[0].forEach(function(e){r.hasFilter(e)?H(N,e):z(N,e)}):null===e?N=U(N):r.hasFilter(e)?H(N,e):z(N,e),s(),r._invokeFilteredListener(e),null!==d&&r.hasFilter()?r.turnOnControls():r.turnOffControls(),r):N.length>0?N[0]:null},r.filters=function(){return N},r.highlightSelected=function(t){e.select(t).classed(n.constants.SELECTED_CLASS,!0),e.select(t).classed(n.constants.DESELECTED_CLASS,!1)},r.fadeDeselected=function(t){e.select(t).classed(n.constants.SELECTED_CLASS,!1),e.select(t).classed(n.constants.DESELECTED_CLASS,!0)},r.resetHighlight=function(t){e.select(t).classed(n.constants.SELECTED_CLASS,!1),e.select(t).classed(n.constants.DESELECTED_CLASS,!1)},r.onClick=function(e){var t=r.keyAccessor()(e);n.events.trigger(function(){r.filter(t),r.redrawGroup()})},r.filterHandler=function(e){return arguments.length?(R=e,r):R},r._doRender=function(){return r},r._doRedraw=function(){return r},r.legendables=function(){return[]},r.legendHighlight=function(){},r.legendReset=function(){},r.legendToggle=function(){},r.isLegendableHidden=function(){return!1},r.keyAccessor=function(e){return arguments.length?(x=e,r):x},r.valueAccessor=function(e){return arguments.length?(C=e,r):C},r.label=function(e){return arguments.length?(T=e,k=!0,r):T},r.renderLabel=function(e){return arguments.length?(k=e,r):k},r.title=function(e){return arguments.length?(A=e,r):A},r.renderTitle=function(e){return arguments.length?(D=e,r):D},r.renderlet=n.logger.deprecate(function(e){return r.on("renderlet."+n.utils.uniqueId(),e),r},'chart.renderlet has been deprecated.  Please use chart.on("renderlet.<renderletKey>", renderletFunction)'),r.chartGroup=function(e){return arguments.length?(f||n.deregisterChart(r,I),I=e,f||n.registerChart(r,I),r):I},r.expireCache=function(){return r},r.legend=function(e){return arguments.length?(g=e,g.parent(r),r):g},r.chartID=function(){return r.__dcFlag__},r.options=function(e){var t=["anchor","group","xAxisLabel","yAxisLabel","stack","title","point","getColor","overlayGeoJson"];for(var a in e)"function"==typeof r[a]?e[a]instanceof Array&&-1!==t.indexOf(a)?r[a].apply(r,e[a]):r[a].call(r,e[a]):n.logger.debug("Not a valid option setter name: "+a);return r},r.on=function(e,t){return M.on(e,t),r},r},n.marginMixin=function(e){var t={top:10,right:50,bottom:30,left:30};return e.margins=function(n){return arguments.length?(t=n,e):t},e.effectiveWidth=function(){return e.width()-e.margins().left-e.margins().right},e.effectiveHeight=function(){return e.height()-e.margins().top-e.margins().bottom},e},n.colorMixin=function(t){var n=e.scale.category20c(),r=!0,a=function(e){return t.keyAccessor()(e)};return t.colors=function(r){return arguments.length?(n=r instanceof Array?e.scale.quantize().range(r):e.functor(r),t):n},t.ordinalColors=function(n){return t.colors(e.scale.ordinal().range(n))},t.linearColors=function(n){return t.colors(e.scale.linear().range(n).interpolate(e.interpolateHcl))},t.colorAccessor=function(e){return arguments.length?(a=e,r=!1,t):a},t.defaultColorAccessor=function(){return r},t.colorDomain=function(e){return arguments.length?(n.domain(e),t):n.domain()},t.calculateColorDomain=function(){var r=[e.min(t.data(),t.colorAccessor()),e.max(t.data(),t.colorAccessor())];return n.domain(r),t},t.getColor=function(e,t){return n(a.call(this,e,t))},t.colorCalculator=function(e){return arguments.length?(t.getColor=e,t):t.getColor},t},n.coordinateGridMixin=function(t){function r(){X=!0,K&&(t.x().domain(p(t.x().domain(),S)),L&&t.x().domain(p(t.x().domain(),L.x().domain())));var e=t.x().domain(),r=n.filters.RangedFilter(e[0],e[1]);t.replaceFilter(r),t.rescale(),t.redraw(),L&&!f(t.filter(),L.filter())&&n.events.trigger(function(){L.replaceFilter(r),L.redraw()}),t._invokeZoomedListener(),n.events.trigger(function(){t.redrawGroup()},n.constants.EVENT_DELAY),X=!f(e,S)}function a(e,t){return!e||!t||e.length!==t.length||e.some(function(e,n){return e.toString()!==t[n].toString()})}function i(e,n){t.isOrdinal()?(t.elasticX()||0===T.domain().length)&&T.domain(t._ordinalXDomain()):t.elasticX()&&T.domain([t.xAxisMin(),t.xAxisMax()]);var r=T.domain();(n||a(A,r))&&t.rescale(),A=r,t.isOrdinal()?T.rangeBands([0,t.xAxisLength()],re,t._useOuterPadding()?ne:0):T.range([0,t.xAxisLength()]),M=M.scale(t.x()),o(e)}function o(e){var r=e.selectAll("g."+v);if(W){r.empty()&&(r=e.insert("g",":first-child").attr("class",g+" "+v).attr("transform","translate("+t.margins().left+","+t.margins().top+")"));var a=M.tickValues()?M.tickValues():"function"==typeof T.ticks?T.ticks(M.ticks()[0]):T.domain(),i=r.selectAll("line").data(a),o=i.enter().append("line").attr("x1",function(e){return T(e)}).attr("y1",t._xAxisY()-t.margins().top).attr("x2",function(e){return T(e)}).attr("y2",0).attr("opacity",0);n.transition(o,t.transitionDuration()).attr("opacity",1),n.transition(i,t.transitionDuration()).attr("x1",function(e){return T(e)}).attr("y1",t._xAxisY()-t.margins().top).attr("x2",function(e){return T(e)}).attr("y2",0),i.exit().remove()}else r.selectAll("line").remove()}function s(){return t._xAxisY()-t.margins().top}function l(){return t.anchorName().replace(/[ .#=\[\]]/g,"-")+"-clip"}function u(){var e=n.utils.appendOrSelect(w,"defs"),r=l(),a=n.utils.appendOrSelect(e,"#"+r,"clipPath").attr("id",r),i=2*te;n.utils.appendOrSelect(a,"rect").attr("width",t.xAxisLength()+i).attr("height",t.yAxisHeight()+i).attr("transform","translate(-"+te+", -"+te+")")}function c(e){t.isOrdinal()&&(V=!1),i(t.g(),e),t._prepareYAxis(t.g()),t.plotData(),(t.elasticX()||Y||e)&&t.renderXAxis(t.g()),(t.elasticY()||Y||e)&&t.renderYAxis(t.g()),e?t.renderBrush(t.g(),!1):t.redrawBrush(t.g(),Y),t.fadeDeselectedArea(),Y=!1}function d(){ee?t._enableMouseZoom():Q&&t._disableMouseZoom()}function p(t,n){var r=[];return r[0]=e.max([t[0],n[0]]),r[1]=e.min([t[1],n[1]]),r}function f(e,t){return!e&&!t||!(!e||!t)&&(0===e.length&&0===t.length||e[0].valueOf()===t[0].valueOf()&&e[1].valueOf()===t[1].valueOf())}function h(e){return e instanceof Array&&e.length>1}var g="grid-line",m="horizontal",v="vertical",y="y-axis-label",_="x-axis-label",b=12;t=n.colorMixin(n.marginMixin(n.baseMixin(t))),t.colors(e.scale.category10()),t._mandatoryAttributes().push("x");var w,x,C,T,S,k,A,D,E,P,O,L,I,M=e.svg.axis().orient("bottom"),N=n.units.integers,R=0,B=!1,F=0,H=e.svg.axis().orient("left"),z=0,U=!1,j=0,q=e.svg.brush(),V=!0,G=!1,W=!1,X=!1,Y=!1,J=[1,1/0],K=!0,$=e.behavior.zoom().on("zoom",r),Z=e.behavior.zoom().on("zoom",null),Q=!1,ee=!1,te=0,ne=.5,re=0,ae=!1;return t.rescale=function(){return O=void 0,Y=!0,t},t.rangeChart=function(e){return arguments.length?(L=e,L.focusChart(t),t):L},t.zoomScale=function(e){return arguments.length?(J=e,t):J},t.zoomOutRestrict=function(e){return arguments.length?(J[0]=e?1:0,K=e,t):K},t._generateG=function(e){return w=void 0===e?t.svg():e,x=w.append("g"),C=x.append("g").attr("class","chart-body").attr("transform","translate("+t.margins().left+", "+t.margins().top+")").attr("clip-path","url(#"+l()+")"),x},t.g=function(e){return arguments.length?(x=e,t):x},t.mouseZoomable=function(e){return arguments.length?(ee=e,t):ee},t.chartBodyG=function(e){return arguments.length?(C=e,t):C},t.x=function(e){return arguments.length?(T=e,S=T.domain(),t.rescale(),t):T},t.xOriginalDomain=function(){return S},t.xUnits=function(e){return arguments.length?(N=e,t):N},t.xAxis=function(e){return arguments.length?(M=e,t):M},t.elasticX=function(e){return arguments.length?(B=e,t):B},t.xAxisPadding=function(e){return arguments.length?(R=e,t):R},t.xUnitCount=function(){if(void 0===O){var e=t.xUnits()(t.x().domain()[0],t.x().domain()[1],t.x().domain());O=e instanceof Array?e.length:e}return O},t.useRightYAxis=function(e){return arguments.length?(ae=e,t):ae},t.isOrdinal=function(){return t.xUnits()===n.units.ordinal},t._useOuterPadding=function(){return!0},t._ordinalXDomain=function(){var e=t._computeOrderedGroups(t.data());return e.map(t.keyAccessor())},t.renderXAxis=function(e){var r=e.selectAll("g.x");r.empty()&&(r=e.append("g").attr("class","axis x").attr("transform","translate("+t.margins().left+","+t._xAxisY()+")"));var a=e.selectAll("text."+_);a.empty()&&t.xAxisLabel()&&(a=e.append("text").attr("class",_).attr("transform","translate("+(t.margins().left+t.xAxisLength()/2)+","+(t.height()-F)+")").attr("text-anchor","middle")),t.xAxisLabel()&&a.text()!==t.xAxisLabel()&&a.text(t.xAxisLabel()),n.transition(r,t.transitionDuration()).attr("transform","translate("+t.margins().left+","+t._xAxisY()+")").call(M),n.transition(a,t.transitionDuration()).attr("transform","translate("+(t.margins().left+t.xAxisLength()/2)+","+(t.height()-F)+")")},t._xAxisY=function(){return t.height()-t.margins().bottom},t.xAxisLength=function(){return t.effectiveWidth()},t.xAxisLabel=function(e,n){return arguments.length?(k=e,t.margins().bottom-=F,F=void 0===n?b:n,t.margins().bottom+=F,t):k},t._prepareYAxis=function(n){if(void 0===D||t.elasticY()){void 0===D&&(D=e.scale.linear());var r=t.yAxisMin()||0,a=t.yAxisMax()||0;D.domain([r,a]).rangeRound([t.yAxisHeight(),0])}D.range([t.yAxisHeight(),0]),H=H.scale(D),ae&&H.orient("right"),t._renderHorizontalGridLinesForAxis(n,D,H)},t.renderYAxisLabel=function(e,r,a,i){i=i||j;var o=t.g().selectAll("text."+y+"."+e+"-label"),s=t.margins().top+t.yAxisHeight()/2;o.empty()&&r&&(o=t.g().append("text").attr("transform","translate("+i+","+s+"),rotate("+a+")").attr("class",y+" "+e+"-label").attr("text-anchor","middle").text(r)),r&&o.text()!==r&&o.text(r),n.transition(o,t.transitionDuration()).attr("transform","translate("+i+","+s+"),rotate("+a+")")},t.renderYAxisAt=function(e,r,a){var i=t.g().selectAll("g."+e);i.empty()&&(i=t.g().append("g").attr("class","axis "+e).attr("transform","translate("+a+","+t.margins().top+")")),n.transition(i,t.transitionDuration()).attr("transform","translate("+a+","+t.margins().top+")").call(r)},t.renderYAxis=function(){var e=ae?t.width()-t.margins().right:t._yAxisX();t.renderYAxisAt("y",H,e);var n=ae?t.width()-j:j,r=ae?90:-90;t.renderYAxisLabel("y",t.yAxisLabel(),r,n)},t._renderHorizontalGridLinesForAxis=function(e,r,a){var i=e.selectAll("g."+m);if(G){var o=a.tickValues()?a.tickValues():r.ticks(a.ticks()[0]);i.empty()&&(i=e.insert("g",":first-child").attr("class",g+" "+m).attr("transform","translate("+t.margins().left+","+t.margins().top+")"));var s=i.selectAll("line").data(o),l=s.enter().append("line").attr("x1",1).attr("y1",function(e){return r(e)}).attr("x2",t.xAxisLength()).attr("y2",function(e){return r(e)}).attr("opacity",0);n.transition(l,t.transitionDuration()).attr("opacity",1),n.transition(s,t.transitionDuration()).attr("x1",1).attr("y1",function(e){return r(e)}).attr("x2",t.xAxisLength()).attr("y2",function(e){return r(e)}),s.exit().remove()}else i.selectAll("line").remove()},t._yAxisX=function(){return t.useRightYAxis()?t.width()-t.margins().right:t.margins().left},t.yAxisLabel=function(e,n){return arguments.length?(E=e,t.margins().left-=j,j=void 0===n?b:n,t.margins().left+=j,t):E},t.y=function(e){return arguments.length?(D=e,t.rescale(),t):D},t.yAxis=function(e){return arguments.length?(H=e,t):H},t.elasticY=function(e){return arguments.length?(U=e,t):U},t.renderHorizontalGridLines=function(e){return arguments.length?(G=e,t):G},t.renderVerticalGridLines=function(e){return arguments.length?(W=e,t):W},t.xAxisMin=function(){var r=e.min(t.data(),function(e){return t.keyAccessor()(e)});return n.utils.subtract(r,R)},t.xAxisMax=function(){var r=e.max(t.data(),function(e){return t.keyAccessor()(e)});return n.utils.add(r,R)},t.yAxisMin=function(){var r=e.min(t.data(),function(e){return t.valueAccessor()(e)});return n.utils.subtract(r,z)},t.yAxisMax=function(){var r=e.max(t.data(),function(e){return t.valueAccessor()(e)});return n.utils.add(r,z)},t.yAxisPadding=function(e){return arguments.length?(z=e,t):z},t.yAxisHeight=function(){return t.effectiveHeight()},t.round=function(e){return arguments.length?(P=e,t):P},t._rangeBandPadding=function(e){return arguments.length?(re=e,t):re},t._outerRangeBandPadding=function(e){return arguments.length?(ne=e,t):ne},n.override(t,"filter",function(e){return arguments.length?(t._filter(e),e?t.brush().extent(e):t.brush().clear(),t):t._filter()}),t.brush=function(e){return arguments.length?(q=e,t):q},t.renderBrush=function(e){if(V){q.on("brush",t._brushing),q.on("brushstart",t._disableMouseZoom),q.on("brushend",d);var n=e.append("g").attr("class","brush").attr("transform","translate("+t.margins().left+","+t.margins().top+")").call(q.x(t.x()));t.setBrushY(n,!1),t.setHandlePaths(n),t.hasFilter()&&t.redrawBrush(e,!1)}},t.setHandlePaths=function(e){e.selectAll(".resize").append("path").attr("d",t.resizeHandlePath)},t.setBrushY=function(e){e.selectAll(".brush rect").attr("height",s()),e.selectAll(".resize path").attr("d",t.resizeHandlePath)},t.extendBrush=function(){var e=q.extent();return t.round()&&(e[0]=e.map(t.round())[0],e[1]=e.map(t.round())[1],x.select(".brush").call(q.extent(e))),e},t.brushIsEmpty=function(e){return q.empty()||!e||e[1]<=e[0]},t._brushing=function(){var e=t.extendBrush();if(t.redrawBrush(x,!1),t.brushIsEmpty(e))n.events.trigger(function(){t.filter(null),t.redrawGroup()},n.constants.EVENT_DELAY);else{var r=n.filters.RangedFilter(e[0],e[1]);n.events.trigger(function(){t.replaceFilter(r),t.redrawGroup()},n.constants.EVENT_DELAY)}},t.redrawBrush=function(e,r){if(V){t.filter()&&t.brush().empty()&&t.brush().extent(t.filter());var a=n.optionalTransition(r,t.transitionDuration())(e.select("g.brush"));t.setBrushY(a),a.call(t.brush().x(t.x()).extent(t.brush().extent()))}t.fadeDeselectedArea()},t.fadeDeselectedArea=function(){},t.resizeHandlePath=function(e){var t=+("e"===e),n=t?1:-1,r=s()/3;return"M"+.5*n+","+r+"A6,6 0 0 "+t+" "+6.5*n+","+(r+6)+"V"+(2*r-6)+"A6,6 0 0 "+t+" "+.5*n+","+2*r+"ZM"+2.5*n+","+(r+8)+"V"+(2*r-8)+"M"+4.5*n+","+(r+8)+"V"+(2*r-8)},t.clipPadding=function(e){return arguments.length?(te=e,t):te},t._preprocessData=function(){},t._doRender=function(){return t.resetSvg(),t._preprocessData(),t._generateG(),u(),c(!0),d(),t},t._doRedraw=function(){return t._preprocessData(),c(!1),u(),t},t._enableMouseZoom=function(){Q=!0,$.x(t.x()).scaleExtent(J).size([t.width(),t.height()]).duration(t.transitionDuration()),t.root().call($)},t._disableMouseZoom=function(){t.root().call(Z)},t.focus=function(e){h(e)?t.x().domain(e):t.x().domain(S),$.x(t.x()),r()},t.refocused=function(){return X},t.focusChart=function(e){return arguments.length?(I=e,t.on("filtered",function(e){e.filter()?f(e.filter(),I.filter())||n.events.trigger(function(){I.focus(e.filter())}):n.events.trigger(function(){I.x().domain(I.xOriginalDomain())})}),t):I},t.brushOn=function(e){return arguments.length?(V=e,t):V},t},n.stackMixin=function(t){function r(e,n){var r=e.accessor||t.valueAccessor();return e.name=String(e.name||n),e.values=e.group.all().map(function(n,a){return{x:t.keyAccessor()(n,a),y:e.hidden?null:r(n,a),data:n,layer:e.name,hidden:e.hidden}}),e.values=e.values.filter(a()),e.values}function a(){if(!t.x())return e.functor(!0);var n=t.x().domain();return t.isOrdinal()?function(){return!0}:t.elasticX()?function(){return!0}:function(e){return e.x>=n[0]&&e.x<=n[n.length-1]}}function i(e){var t=u.map(n.pluck("name")).indexOf(e);return u[t]}function o(){var e=t.data().map(function(e){return e.values});return Array.prototype.concat.apply([],e)}function s(e){return!e.hidden}var l=e.layout.stack().values(r),u=[],c={},d=!1;return t.stack=function(e,n,r){if(!arguments.length)return u;arguments.length<=2&&(r=n);var a={group:e};return"string"==typeof n&&(a.name=n),"function"==typeof r&&(a.accessor=r),u.push(a),t},n.override(t,"group",function(e,n,r){return arguments.length?(u=[],c={},t.stack(e,n),r&&t.valueAccessor(r),t._group(e,n)):t._group()}),t.hidableStacks=function(e){return arguments.length?(d=e,t):d},t.hideStack=function(e){var n=i(e);return n&&(n.hidden=!0),t},t.showStack=function(e){var n=i(e);return n&&(n.hidden=!1),t},t.getValueAccessorByIndex=function(e){return u[e].accessor||t.valueAccessor()},t.yAxisMin=function(){var r=e.min(o(),function(e){return e.y+e.y0<e.y0?e.y+e.y0:e.y0});return n.utils.subtract(r,t.yAxisPadding())},t.yAxisMax=function(){var r=e.max(o(),function(e){return e.y+e.y0});return n.utils.add(r,t.yAxisPadding())},t.xAxisMin=function(){var r=e.min(o(),n.pluck("x"));return n.utils.subtract(r,t.xAxisPadding())},t.xAxisMax=function(){var r=e.max(o(),n.pluck("x"));return n.utils.add(r,t.xAxisPadding())},n.override(t,"title",function(e,n){return e?"function"==typeof e?t._title(e):e===t._groupName&&"function"==typeof n?t._title(n):"function"!=typeof n?c[e]||t._title():(c[e]=n,t):t._title()}),t.stackLayout=function(e){return arguments.length?(l=e,t):l},t.data(function(){var e=u.filter(s);return e.length?t.stackLayout()(e):[]}),t._ordinalXDomain=function(){var e=o().map(n.pluck("data")),r=t._computeOrderedGroups(e);return r.map(t.keyAccessor())},t.colorAccessor(function(e){var t=this.layer||this.name||e.name||e.layer;return t}),t.legendables=function(){return u.map(function(e,n){return{chart:t,name:e.name,hidden:e.hidden||!1,color:t.getColor.call(e,e.values,n)}})},t.isLegendableHidden=function(e){var t=i(e.name);return!!t&&t.hidden},t.legendToggle=function(e){d&&(t.isLegendableHidden(e)?t.showStack(e.name):t.hideStack(e.name),t.renderGroup())},t},n.capMixin=function(t){var r=1/0,a="Others",i=function(n){var r=e.sum(n,t.valueAccessor()),i=t.group().all(),o=e.sum(i,t.valueAccessor()),s=n.map(t.keyAccessor()),l=i.map(t.keyAccessor()),u=e.set(s),c=l.filter(function(e){return!u.has(e)});return o>r?n.concat([{others:c,key:a,value:o-r}]):n};return t.cappedKeyAccessor=function(e,n){return e.others?e.key:t.keyAccessor()(e,n)},t.cappedValueAccessor=function(e,n){return e.others?e.value:t.valueAccessor()(e,n)},t.data(function(e){if(r===1/0)return t._computeOrderedGroups(e.all());var n=e.top(r);return n=t._computeOrderedGroups(n),i?i(n):n}),t.cap=function(e){return arguments.length?(r=e,t):r},t.othersLabel=function(e){return arguments.length?(a=e,t):a},t.othersGrouper=function(e){return arguments.length?(i=e,t):i},n.override(t,"onClick",function(e){e.others&&t.filter([e.others]),t._onClick(e)}),t},n.bubbleMixin=function(t){var r=.3,a=10;t.BUBBLE_NODE_CLASS="node",t.BUBBLE_CLASS="bubble",t.MIN_RADIUS=10,t=n.colorMixin(t),t.renderLabel(!0),t.data(function(e){return e.top(1/0)});var i=e.scale.linear().domain([0,100]),o=function(e){return e.r};t.r=function(e){return arguments.length?(i=e,t):i},t.radiusValueAccessor=function(e){return arguments.length?(o=e,t):o},t.rMin=function(){var n=e.min(t.data(),function(e){return t.radiusValueAccessor()(e)});return n},t.rMax=function(){var n=e.max(t.data(),function(e){return t.radiusValueAccessor()(e)});return n},t.bubbleR=function(e){var n=t.radiusValueAccessor()(e),r=t.r()(n);return(isNaN(r)||0>=n)&&(r=0),r};var s=function(e){return t.label()(e)},l=function(e){return t.bubbleR(e)>a?1:0};t._doRenderLabel=function(e){if(t.renderLabel()){var r=e.select("text");r.empty()&&(r=e.append("text").attr("text-anchor","middle").attr("dy",".3em").on("click",t.onClick)),r.attr("opacity",0).text(s),n.transition(r,t.transitionDuration()).attr("opacity",l)}},t.doUpdateLabels=function(e){if(t.renderLabel()){var r=e.selectAll("text").text(s);n.transition(r,t.transitionDuration()).attr("opacity",l)}};var u=function(e){return t.title()(e)};return t._doRenderTitles=function(e){if(t.renderTitle()){var n=e.select("title");n.empty()&&e.append("title").text(u)}},t.doUpdateTitles=function(e){t.renderTitle()&&e.selectAll("title").text(u)},t.minRadius=function(e){return arguments.length?(t.MIN_RADIUS=e,t):t.MIN_RADIUS},t.minRadiusWithLabel=function(e){return arguments.length?(a=e,t):a},t.maxBubbleRelativeSize=function(e){return arguments.length?(r=e,t):r},t.fadeDeselectedArea=function(){t.hasFilter()?t.selectAll("g."+t.BUBBLE_NODE_CLASS).each(function(e){t.isSelectedNode(e)?t.highlightSelected(this):t.fadeDeselected(this)}):t.selectAll("g."+t.BUBBLE_NODE_CLASS).each(function(){t.resetHighlight(this)})},t.isSelectedNode=function(e){return t.hasFilter(e.key)},t.onClick=function(e){var r=e.key;n.events.trigger(function(){t.filter(r),t.redrawGroup()})},t},n.pieChart=function(t,r){function a(){E=P?P:e.min([j.width(),j.height()])/2;var t,r=v(),a=_();if(e.sum(j.data(),j.valueAccessor())?(t=a(j.data()),O.classed(B,!1)):(t=a([{key:F,value:1,others:[F]}]),O.classed(B,!0)),O){var o=O.selectAll("g."+R).data(t);i(o,r,t),d(t,r),g(o),m(),n.transition(O,j.transitionDuration()).attr("transform","translate("+j.cx()+","+j.cy()+")")}}function i(e,t,n){var r=o(e);s(r,t),l(r),c(n,t)}function o(e){var t=e.enter().append("g").attr("class",function(e,t){return R+" _"+t});return t}function s(e,t){var r=e.append("path").attr("fill",T).on("click",S).attr("d",function(e,n){return k(e,n,t)});n.transition(r,j.transitionDuration(),function(e){e.attrTween("d",x)})}function l(e){j.renderTitle()&&e.append("title").text(function(e){return j.title()(e.data)})}function u(e,t){n.transition(e,j.transitionDuration()).attr("transform",function(e){return A(e,t)}).attr("text-anchor","middle").text(function(e){var t=e.data;return!w(t)&&!b(e)||y(e)?j.label()(e.data):""})}function c(e,t){if(j.renderLabel()){var n=O.selectAll("text."+R).data(e);n.exit().remove();var r=n.enter().append("text").attr("class",function(e,t){var n=R+" _"+t;return M&&(n+=" external"),n}).on("click",S);u(r,t)}}function d(e,t){p(e,t),f(e,t),h(e)}function p(e,t){var r=O.selectAll("g."+R).data(e).select("path").attr("d",function(e,n){return k(e,n,t)});n.transition(r,j.transitionDuration(),function(e){e.attrTween("d",x)}).attr("fill",T)}function f(e,t){if(j.renderLabel()){var n=O.selectAll("text."+R).data(e);u(n,t)}}function h(e){j.renderTitle()&&O.selectAll("g."+R).data(e).select("title").text(function(e){return j.title()(e.data)})}function g(e){e.exit().remove()}function m(){j.hasFilter()?j.selectAll("g."+R).each(function(e){y(e)?j.highlightSelected(this):j.fadeDeselected(this)}):j.selectAll("g."+R).each(function(){j.resetHighlight(this)})}function v(){return e.svg.arc().outerRadius(E-z).innerRadius(H)}function y(e){return j.hasFilter(j.cappedKeyAccessor(e.data))}function _(){return e.layout.pie().sort(null).value(j.cappedValueAccessor)}function b(e){var t=e.endAngle-e.startAngle;return isNaN(t)||U>t}function w(e){return 0===j.cappedValueAccessor(e)}function x(t){t.innerRadius=H;var n=this._current;C(n)&&(n={startAngle:0,endAngle:0});var r=e.interpolate(n,t);return this._current=r(0),function(e){return k(r(e),0,v())}}function C(e){return!e||isNaN(e.startAngle)||isNaN(e.endAngle)}function T(e,t){return j.getColor(e.data,t)}function S(e,t){O.attr("class")!==B&&j.onClick(e.data,t)}function k(e,t,n){var r=n(e,t);return r.indexOf("NaN")>=0&&(r="M0,0"),r}function A(t,n){var r;return r=M?e.svg.arc().outerRadius(E-z+M).innerRadius(E-z+M).centroid(t):n.centroid(t),isNaN(r[0])||isNaN(r[1])?"translate(0,0)":"translate("+r+")"}function D(t,n){j.selectAll("g.pie-slice").each(function(r){t.name===r.data.key&&e.select(this).classed("highlight",n)})}var E,P,O,L,I,M,N=.5,R="pie-slice",B="empty-chart",F="empty",H=0,z=0,U=N,j=n.capMixin(n.colorMixin(n.baseMixin({})));return j.colorAccessor(j.cappedKeyAccessor),j.title(function(e){return j.cappedKeyAccessor(e)+": "+j.cappedValueAccessor(e)}),j.slicesCap=j.cap,j.label(j.cappedKeyAccessor),j.renderLabel(!0),j.transitionDuration(350),j._doRender=function(){return j.resetSvg(),O=j.svg().append("g").attr("transform","translate("+j.cx()+","+j.cy()+")"),a(),j},j.externalRadiusPadding=function(e){return arguments.length?(z=e,j):z},j.innerRadius=function(e){return arguments.length?(H=e,j):H},j.radius=function(e){return arguments.length?(P=e,j):P},j.cx=function(e){return arguments.length?(L=e,j):L||j.width()/2},j.cy=function(e){return arguments.length?(I=e,j):I||j.height()/2},j._doRedraw=function(){return a(),j},j.minAngleForLabel=function(e){return arguments.length?(U=e,j):U},j.emptyTitle=function(e){return 0===arguments.length?F:(F=e,j)},j.externalLabels=function(e){return 0===arguments.length?M:(M=e?e:void 0,j)},j.legendables=function(){return j.data().map(function(e,t){var n={name:e.key,data:e.value,others:e.others,chart:j};return n.color=j.getColor(e,t),n})},j.legendHighlight=function(e){D(e,!0)},j.legendReset=function(e){D(e,!1)},j.legendToggle=function(e){j.onClick({key:e.name,others:e.others})},j.anchor(t,r)},n.barChart=function(t,r){function a(e){return n.utils.safeNumber(Math.abs(d.y()(e.y+e.y0)-d.y()(e.y0)))}function i(e,t,r){var i=e.selectAll("rect.bar").data(r.values,n.pluck("x")),o=i.enter().append("rect").attr("class","bar").attr("fill",n.pluck("data",d.getColor)).attr("y",d.yAxisHeight()).attr("height",0);d.renderTitle()&&o.append("title").text(n.pluck("data",d.title(r.name))),d.isOrdinal()&&i.on("click",d.onClick),n.transition(i,d.transitionDuration()).attr("x",function(e){var t=d.x()(e.x);return f&&(t-=l/2),d.isOrdinal()&&void 0!==p&&(t+=p/2),n.utils.safeNumber(t)}).attr("y",function(e){var t=d.y()(e.y+e.y0);return e.y<0&&(t-=a(e)),n.utils.safeNumber(t)}).attr("width",l).attr("height",function(e){return a(e)}).attr("fill",n.pluck("data",d.getColor)).select("title").text(n.pluck("data",d.title(r.name))),n.transition(i.exit(),d.transitionDuration()).attr("height",0).remove()}function o(){if(void 0===l){var e=d.xUnitCount();l=d.isOrdinal()&&void 0===p?Math.floor(d.x().rangeBand()):p?Math.floor((d.xAxisLength()-(e-1)*p)/e):Math.floor(d.xAxisLength()/(1+d.barPadding())/e),(l===1/0||isNaN(l)||u>l)&&(l=u)}}function s(t,n){return function(){var r=e.select(this),a=r.attr("fill")===t;return n?!a:a}}var l,u=1,c=2,d=n.stackMixin(n.coordinateGridMixin({})),p=c,f=!1,h=!1;return n.override(d,"rescale",function(){return d._rescale(),l=void 0,d}),n.override(d,"render",function(){return d.round()&&f&&!h&&n.logger.warn("By default, brush rounding is disabled if bars are centered. See dc.js bar chart API documentation for details."),d._render()}),d.plotData=function(){var t=d.chartBodyG().selectAll("g.stack").data(d.data());o(),t.enter().append("g").attr("class",function(e,t){return"stack _"+t}),t.each(function(t,n){var r=e.select(this);i(r,n,t)})},d.fadeDeselectedArea=function(){var e=d.chartBodyG().selectAll("rect.bar"),t=d.brush().extent();if(d.isOrdinal())d.hasFilter()?(e.classed(n.constants.SELECTED_CLASS,function(e){return d.hasFilter(e.x)}),e.classed(n.constants.DESELECTED_CLASS,function(e){return!d.hasFilter(e.x)})):(e.classed(n.constants.SELECTED_CLASS,!1),e.classed(n.constants.DESELECTED_CLASS,!1));else if(d.brushIsEmpty(t))e.classed(n.constants.DESELECTED_CLASS,!1);else{var r=t[0],a=t[1];e.classed(n.constants.DESELECTED_CLASS,function(e){return e.x<r||e.x>=a})}},d.centerBar=function(e){return arguments.length?(f=e,d):f},n.override(d,"onClick",function(e){d._onClick(e.data)}),d.barPadding=function(e){return arguments.length?(d._rangeBandPadding(e),p=void 0,d):d._rangeBandPadding()},d._useOuterPadding=function(){return void 0===p},d.outerPadding=d._outerRangeBandPadding,d.gap=function(e){return arguments.length?(p=e,d):p},d.extendBrush=function(){var e=d.brush().extent();return!d.round()||f&&!h||(e[0]=e.map(d.round())[0],e[1]=e.map(d.round())[1],d.chartBodyG().select(".brush").call(d.brush().extent(e))),e},d.alwaysUseRounding=function(e){return arguments.length?(h=e,d):h},d.legendHighlight=function(e){d.isLegendableHidden(e)||d.g().selectAll("rect.bar").classed("highlight",s(e.color)).classed("fadeout",s(e.color,!0))},d.legendReset=function(){d.g().selectAll("rect.bar").classed("highlight",!1).classed("fadeout",!1)},n.override(d,"xAxisMax",function(){var e=this._xAxisMax();if("resolution"in d.xUnits()){var t=d.xUnits().resolution;e+=t}return e}),d.anchor(t,r)},n.lineChart=function(t,r){function a(e,t){return S.getColor.call(e,e.values,t)}function i(t,r){var i=e.svg.line().x(function(e){return S.x()(e.x)}).y(function(e){return S.y()(e.y+e.y0)}).interpolate(O).tension(L);v&&i.defined(v);var o=t.append("path").attr("class","line").attr("stroke",a);y&&o.attr("stroke-dasharray",y),n.transition(r.select("path.line"),S.transitionDuration()).attr("stroke",a).attr("d",function(e){return s(i(e.values))})}function o(t,r){if(k){var i=e.svg.area().x(function(e){return S.x()(e.x)}).y(function(e){return S.y()(e.y+e.y0)}).y0(function(e){return S.y()(e.y0)}).interpolate(O).tension(L);v&&i.defined(v),t.append("path").attr("class","area").attr("fill",a).attr("d",function(e){return s(i(e.values))}),n.transition(r.select("path.area"),S.transitionDuration()).attr("fill",a).attr("d",function(e){return s(i(e.values))})}}function s(e){return!e||e.indexOf("NaN")>=0?"M0,0":e}function l(t,r){if(!S.brushOn()&&S.xyTipsOn()){var a=b+"-list",i=t.select("g."+a);i.empty()&&(i=t.append("g").attr("class",a)),r.each(function(t,r){var a=t.values;v&&(a=a.filter(v));var o=i.select("g."+b+"._"+r);o.empty()&&(o=i.append("g").attr("class",b+" _"+r)),u(o);var s=o.selectAll("circle."+w).data(a,n.pluck("x"));s.enter().append("circle").attr("class",w).attr("r",p()).style("fill-opacity",E).style("stroke-opacity",P).on("mousemove",function(){var t=e.select(this);c(t),d(t,o)}).on("mouseout",function(){var t=e.select(this);f(t),h(o)}),s.attr("cx",function(e){return n.utils.safeNumber(S.x()(e.x))}).attr("cy",function(e){return n.utils.safeNumber(S.y()(e.y+e.y0))}).attr("fill",S.getColor).call(g,t),s.exit().remove()})}}function u(e){var t=e.select("path."+x).empty()?e.append("path").attr("class",x):e.select("path."+x);t.style("display","none").attr("stroke-dasharray","5,5");var n=e.select("path."+C).empty()?e.append("path").attr("class",C):e.select("path."+C);n.style("display","none").attr("stroke-dasharray","5,5")}function c(e){return e.style("fill-opacity",.8),e.style("stroke-opacity",.8),e.attr("r",A),e}function d(e,t){var n=e.attr("cx"),r=e.attr("cy"),a=S._yAxisX()-S.margins().left,i="M"+a+" "+r+"L"+n+" "+r,o="M"+n+" "+S.yAxisHeight()+"L"+n+" "+r;t.select("path."+x).style("display","").attr("d",i),t.select("path."+C).style("display","").attr("d",o)}function p(){return D||A}function f(e){e.style("fill-opacity",E).style("stroke-opacity",P).attr("r",p())}function h(e){e.select("path."+x).style("display","none"),e.select("path."+C).style("display","none")}function g(e,t){S.renderTitle()&&(e.selectAll("title").remove(),e.append("title").text(n.pluck("data",S.title(t.name))))}function m(t,n,r){return function(){var a=e.select(this),i=a.attr("stroke")===t&&a.attr("stroke-dasharray")===(n instanceof Array?n.join(","):null)||a.attr("fill")===t;return r?!i:i}}var v,y,_=5,b="dc-tooltip",w="dot",x="yRef",C="xRef",T=1e-6,S=n.stackMixin(n.coordinateGridMixin({})),k=!1,A=_,D=null,E=T,P=T,O="linear",L=.7,I=!0;return S.transitionDuration(500),S._rangeBandPadding(1),S.plotData=function(){var e=S.chartBodyG(),t=e.selectAll("g.stack-list");t.empty()&&(t=e.append("g").attr("class","stack-list"));
var n=t.selectAll("g.stack").data(S.data()),r=n.enter().append("g").attr("class",function(e,t){return"stack _"+t});i(r,n),o(r,n),l(e,n)},S.interpolate=function(e){return arguments.length?(O=e,S):O},S.tension=function(e){return arguments.length?(L=e,S):L},S.defined=function(e){return arguments.length?(v=e,S):v},S.dashStyle=function(e){return arguments.length?(y=e,S):y},S.renderArea=function(e){return arguments.length?(k=e,S):k},S.xyTipsOn=function(e){return arguments.length?(I=e,S):I},S.dotRadius=function(e){return arguments.length?(A=e,S):A},S.renderDataPoints=function(e){return arguments.length?(e?(E=e.fillOpacity||.8,P=e.strokeOpacity||.8,D=e.radius||2):(E=T,P=T,D=null),S):{fillOpacity:E,strokeOpacity:P,radius:D}},S.legendHighlight=function(e){S.isLegendableHidden(e)||S.g().selectAll("path.line, path.area").classed("highlight",m(e.color,e.dashstyle)).classed("fadeout",m(e.color,e.dashstyle,!0))},S.legendReset=function(){S.g().selectAll("path.line, path.area").classed("highlight",!1).classed("fadeout",!1)},n.override(S,"legendables",function(){var e=S._legendables();return y?e.map(function(e){return e.dashstyle=y,e}):e}),S.anchor(t,r)},n.dataCount=function(t,r){var a=e.format(",d"),i=n.baseMixin({}),o={some:"",all:""};return i.html=function(e){return arguments.length?(e.all&&(o.all=e.all),e.some&&(o.some=e.some),i):o},i.formatNumber=function(e){return arguments.length?(a=e,i):a},i._doRender=function(){var e=i.dimension().size(),t=i.group().value(),n=a(e),r=a(t);return e===t&&""!==o.all?i.root().html(o.all.replace("%total-count",n).replace("%filter-count",r)):""!==o.some?i.root().html(o.some.replace("%total-count",n).replace("%filter-count",r)):(i.selectAll(".total-count").text(n),i.selectAll(".filter-count").text(r)),i},i._doRedraw=function(){return i._doRender()},i.anchor(t,r)},n.dataTable=function(t,r){function a(){var e=!0;if(h.forEach(function(t){e&="function"==typeof t}),!e){p.selectAll("th").remove();var t=p.root().selectAll("th").data(h),n=t.enter().append("th");n.attr("class",d).html(function(e){return p._doColumnHeaderFormat(e)})}var r=p.root().selectAll("tbody").data(i(),function(e){return p.keyAccessor()(e)}),a=r.enter().append("tbody");return v===!0&&a.append("tr").attr("class",c).append("td").attr("class",s).attr("colspan",h.length).html(function(e){return p.keyAccessor()(e)}),r.exit().remove(),a}function i(){var t;return t=m===e.ascending?p.dimension().bottom(f):p.dimension().top(f),e.nest().key(p.group()).sortKeys(m).entries(t.sort(function(e,t){return m(g(e),g(t))}))}function o(e){var t=e.order().selectAll("tr."+l).data(function(e){return e.values}),n=t.enter().append("tr").attr("class",l);return h.forEach(function(e,t){n.append("td").attr("class",u+" _"+t).html(function(t){return p._doColumnValueFormat(e,t)})}),t.exit().remove(),t}var s="dc-table-label",l="dc-table-row",u="dc-table-column",c="dc-table-group",d="dc-table-head",p=n.baseMixin({}),f=25,h=[],g=function(e){return e},m=e.ascending,v=!0;return p._doRender=function(){return p.selectAll("tbody").remove(),o(a()),p},p._doColumnValueFormat=function(e,t){return"function"==typeof e?e(t):"string"==typeof e?t[e]:e.format(t)},p._doColumnHeaderFormat=function(e){return"function"==typeof e?p._doColumnHeaderFnToString(e):"string"==typeof e?p._doColumnHeaderCapitalize(e):String(e.label)},p._doColumnHeaderCapitalize=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},p._doColumnHeaderFnToString=function(e){var t=String(e),n=t.indexOf("return ");if(n>=0){var r=t.lastIndexOf(";");if(r>=0){t=t.substring(n+7,r);var a=t.indexOf("numberFormat");a>=0&&(t=t.replace("numberFormat",""))}}return t},p._doRedraw=function(){return p._doRender()},p.size=function(e){return arguments.length?(f=e,p):f},p.columns=function(e){return arguments.length?(h=e,p):h},p.sortBy=function(e){return arguments.length?(g=e,p):g},p.order=function(e){return arguments.length?(m=e,p):m},p.showGroups=function(e){return arguments.length?(v=e,p):v},p.anchor(t,r)},n.dataGrid=function(t,r){function a(){var e=p.root().selectAll("div."+d).data(i(),function(e){return p.keyAccessor()(e)}),t=e.enter().append("div").attr("class",d);return y&&t.html(function(e){return y(e)}),e.exit().remove(),t}function i(){var t=p.dimension().top(f);return e.nest().key(p.group()).sortKeys(m).entries(t.sort(function(e,t){return m(g(e),g(t))}).slice(v,s))}function o(e){var t=e.order().selectAll("div."+u).data(function(e){return e.values});return t.enter().append("div").attr("class",u).html(function(e){return h(e)}),t.exit().remove(),t}var s,l="dc-grid-label",u="dc-grid-item",c="dc-grid-group",d="dc-grid-top",p=n.baseMixin({}),f=999,h=function(e){return"you need to provide an html() handling param:  "+JSON.stringify(e)},g=function(e){return e},m=e.ascending,v=0,y=function(e){return"<div class='"+c+"'><h1 class='"+l+"'>"+p.keyAccessor()(e)+"</h1></div>"};return p._doRender=function(){return p.selectAll("div."+d).remove(),o(a()),p},p._doRedraw=function(){return p._doRender()},p.beginSlice=function(e){return arguments.length?(v=e,p):v},p.endSlice=function(e){return arguments.length?(s=e,p):s},p.size=function(e){return arguments.length?(f=e,p):f},p.html=function(e){return arguments.length?(h=e,p):h},p.htmlGroup=function(e){return arguments.length?(y=e,p):y},p.sortBy=function(e){return arguments.length?(g=e,p):g},p.order=function(e){return arguments.length?(m=e,p):m},p.anchor(t,r)},n.bubbleChart=function(e,t){function r(e){var t=e.enter().append("g");t.attr("class",l.BUBBLE_NODE_CLASS).attr("transform",c).append("circle").attr("class",function(e,t){return l.BUBBLE_CLASS+" _"+t}).on("click",l.onClick).attr("fill",l.getColor).attr("r",0),n.transition(e,l.transitionDuration()).selectAll("circle."+l.BUBBLE_CLASS).attr("r",function(e){return l.bubbleR(e)}).attr("opacity",function(e){return l.bubbleR(e)>0?1:0}),l._doRenderLabel(t),l._doRenderTitles(t)}function a(e){n.transition(e,l.transitionDuration()).attr("transform",c).selectAll("circle."+l.BUBBLE_CLASS).attr("fill",l.getColor).attr("r",function(e){return l.bubbleR(e)}).attr("opacity",function(e){return l.bubbleR(e)>0?1:0}),l.doUpdateLabels(e),l.doUpdateTitles(e)}function i(e){e.exit().remove()}function o(e){var t=l.x()(l.keyAccessor()(e));return isNaN(t)&&(t=0),t}function s(e){var t=l.y()(l.valueAccessor()(e));return isNaN(t)&&(t=0),t}var l=n.bubbleMixin(n.coordinateGridMixin({})),u=!1;l.transitionDuration(750);var c=function(e){return"translate("+o(e)+","+s(e)+")"};return l.elasticRadius=function(e){return arguments.length?(u=e,l):u},l.plotData=function(){u&&l.r().domain([l.rMin(),l.rMax()]),l.r().range([l.MIN_RADIUS,l.xAxisLength()*l.maxBubbleRelativeSize()]);var e=l.chartBodyG().selectAll("g."+l.BUBBLE_NODE_CLASS).data(l.data(),function(e){return e.key});r(e),a(e),i(e),l.fadeDeselectedArea()},l.renderBrush=function(){},l.redrawBrush=function(){l.fadeDeselectedArea()},l.anchor(e,t)},n.compositeChart=function(t,r){function a(){(void 0===b.rightY()||b.elasticY())&&(void 0===b.rightY()&&b.rightY(e.scale.linear()),b.rightY().domain([d(),h()]).rangeRound([b.yAxisHeight(),0])),b.rightY().range([b.yAxisHeight(),0]),b.rightYAxis(b.rightYAxis().scale(b.rightY())),b.rightYAxis().orient("right")}function i(){(void 0===b.y()||b.elasticY())&&(void 0===b.y()&&b.y(e.scale.linear()),b.y().domain([c(),f()]).rangeRound([b.yAxisHeight(),0])),b.y().range([b.yAxisHeight(),0]),b.yAxis(b.yAxis().scale(b.y())),b.yAxis().orient("left")}function o(e,t){e._generateG(b.g()),e.g().attr("class",y+" _"+t)}function s(){return w.filter(function(e){return!e.useRightYAxis()})}function l(){return w.filter(function(e){return e.useRightYAxis()})}function u(e){return e.map(function(e){return e.yAxisMin()})}function c(){return e.min(u(s()))}function d(){return e.min(u(l()))}function p(e){return e.map(function(e){return e.yAxisMax()})}function f(){return n.utils.add(e.max(p(s())),b.yAxisPadding())}function h(){return n.utils.add(e.max(p(l())),b.yAxisPadding())}function g(){return w.map(function(e){return e.xAxisMin()})}function m(){return w.map(function(e){return e.xAxisMax()})}var v,y="sub",_=12,b=n.coordinateGridMixin({}),w=[],x={},C=!1,T=!0,S=e.svg.axis(),k=0,A=_,D=!1;return b._mandatoryAttributes([]),b.transitionDuration(500),n.override(b,"_generateG",function(){for(var e=this.__generateG(),t=0;t<w.length;++t){var n=w[t];o(n,t),n.dimension()||n.dimension(b.dimension()),n.group()||n.group(b.group()),n.chartGroup(b.chartGroup()),n.svg(b.svg()),n.xUnits(b.xUnits()),n.transitionDuration(b.transitionDuration()),n.brushOn(b.brushOn()),n.renderTitle(b.renderTitle()),n.elasticX(b.elasticX())}return e}),b._brushing=function(){for(var e=b.extendBrush(),t=b.brushIsEmpty(e),n=0;n<w.length;++n)w[n].filter(null),t||w[n].filter(e)},b._prepareYAxis=function(){0!==s().length&&i(),0!==l().length&&a(),s().length>0&&!D?b._renderHorizontalGridLinesForAxis(b.g(),b.y(),b.yAxis()):l().length>0&&b._renderHorizontalGridLinesForAxis(b.g(),v,S)},b.renderYAxis=function(){0!==s().length&&(b.renderYAxisAt("y",b.yAxis(),b.margins().left),b.renderYAxisLabel("y",b.yAxisLabel(),-90)),0!==l().length&&(b.renderYAxisAt("yr",b.rightYAxis(),b.width()-b.margins().right),b.renderYAxisLabel("yr",b.rightYAxisLabel(),90,b.width()-A))},b.plotData=function(){for(var e=0;e<w.length;++e){var t=w[e];t.g()||o(t,e),C&&t.colors(b.colors()),t.x(b.x()),t.xAxis(b.xAxis()),t.useRightYAxis()?(t.y(b.rightY()),t.yAxis(b.rightYAxis())):(t.y(b.y()),t.yAxis(b.yAxis())),t.plotData(),t._activateRenderlets()}},b.useRightAxisGridLines=function(e){return arguments?(D=e,b):D},b.childOptions=function(e){return arguments.length?(x=e,w.forEach(function(e){e.options(x)}),b):x},b.fadeDeselectedArea=function(){for(var e=0;e<w.length;++e){var t=w[e];t.brush(b.brush()),t.fadeDeselectedArea()}},b.rightYAxisLabel=function(e,t){return arguments.length?(k=e,b.margins().right-=A,A=void 0===t?_:t,b.margins().right+=A,b):k},b.compose=function(e){return w=e,w.forEach(function(e){e.height(b.height()),e.width(b.width()),e.margins(b.margins()),T&&e.title(b.title()),e.options(x)}),b},b.children=function(){return w},b.shareColors=function(e){return arguments.length?(C=e,b):C},b.shareTitle=function(e){return arguments.length?(T=e,b):T},b.rightY=function(e){return arguments.length?(v=e,b.rescale(),b):v},delete b.yAxisMin,delete b.yAxisMax,n.override(b,"xAxisMin",function(){return n.utils.subtract(e.min(g()),b.xAxisPadding())}),n.override(b,"xAxisMax",function(){return n.utils.add(e.max(m()),b.xAxisPadding())}),b.legendables=function(){return w.reduce(function(e,t){return C&&t.colors(b.colors()),e.push.apply(e,t.legendables()),e},[])},b.legendHighlight=function(e){for(var t=0;t<w.length;++t){var n=w[t];n.legendHighlight(e)}},b.legendReset=function(e){for(var t=0;t<w.length;++t){var n=w[t];n.legendReset(e)}},b.legendToggle=function(){console.log("composite should not be getting legendToggle itself")},b.rightYAxis=function(e){return arguments.length?(S=e,b):S},b.anchor(t,r)},n.seriesChart=function(t,r){function a(t,n){return e.ascending(l.keyAccessor()(t),l.keyAccessor()(n))}function i(e){u[e].g()&&u[e].g().remove(),delete u[e]}function o(){Object.keys(u).map(i),u={}}var s,l=n.compositeChart(t,r),u={},c=n.lineChart,d=e.ascending,p=a;return l._mandatoryAttributes().push("seriesAccessor","chart"),l.shareColors(!0),l._preprocessData=function(){var t,n=[],a=e.nest().key(s);d&&a.sortKeys(d),p&&a.sortValues(p);var o=a.entries(l.data()),f=o.map(function(a,i){var o=u[a.key]||c.call(l,l,r,a.key,i);return u[a.key]||(t=!0),u[a.key]=o,n.push(a.key),o.dimension(l.dimension()).group({all:e.functor(a.values)},a.key).keyAccessor(l.keyAccessor()).valueAccessor(l.valueAccessor()).brushOn(l.brushOn())});Object.keys(u).filter(function(e){return-1===n.indexOf(e)}).forEach(function(e){i(e),t=!0}),l._compose(f),t&&l.legend()&&l.legend().render()},l.chart=function(e){return arguments.length?(c=e,o(),l):c},l.seriesAccessor=function(e){return arguments.length?(s=e,o(),l):s},l.seriesSort=function(e){return arguments.length?(d=e,o(),l):d},l.valueSort=function(e){return arguments.length?(p=e,o(),l):p},l._compose=l.compose,delete l.compose,l},n.geoChoroplethChart=function(t,r){function a(e){var t=i();if(o(e)){var n=s(e);f(n,e,t),h(n,e,t)}}function i(){for(var e={},t=g.data(),n=0;n<t.length;++n)e[g.keyAccessor()(t[n])]=g.valueAccessor()(t[n]);return e}function o(e){return p(e).keyAccessor}function s(e){var t=g.svg().selectAll(l(e)).classed("selected",function(t){return u(e,t)}).classed("deselected",function(t){return c(e,t)}).attr("class",function(t){var r=p(e).name,a=n.utils.nameToId(p(e).keyAccessor(t)),i=r+" "+a;return u(e,t)&&(i+=" selected"),c(e,t)&&(i+=" deselected"),i});return t}function l(e){return"g.layer"+e+" g."+p(e).name}function u(e,t){return g.hasFilter()&&g.hasFilter(d(e,t))}function c(e,t){return g.hasFilter()&&!g.hasFilter(d(e,t))}function d(e,t){return p(e).keyAccessor(t)}function p(e){return y[e]}function f(t,r,a){var i=t.select("path").attr("fill",function(){var t=e.select(this).attr("fill");return t?t:"none"}).on("click",function(e){return g.onClick(e,r)});n.transition(i,g.transitionDuration()).attr("fill",function(e,t){return g.getColor(a[p(r).keyAccessor(e)],t)})}function h(e,t,n){g.renderTitle()&&e.selectAll("title").text(function(e){var r=d(t,e),a=n[r];return g.title()({key:r,value:a})})}var g=n.colorMixin(n.baseMixin({}));g.colorAccessor(function(e){return e||0});var m,v=e.geo.path(),y=[];return g._doRender=function(){g.resetSvg();for(var e=0;e<y.length;++e){var t=g.svg().append("g").attr("class","layer"+e),n=t.selectAll("g."+p(e).name).data(p(e).data).enter().append("g").attr("class",p(e).name);n.append("path").attr("fill","white").attr("d",v),n.append("title"),a(e)}m=!1},g.onClick=function(e,t){var r=p(t).keyAccessor(e);n.events.trigger(function(){g.filter(r),g.redrawGroup()})},g._doRedraw=function(){for(var e=0;e<y.length;++e)a(e),m&&g.svg().selectAll("g."+p(e).name+" path").attr("d",v);m=!1},g.overlayGeoJson=function(e,t,n){for(var r=0;r<y.length;++r)if(y[r].name===t)return y[r].data=e,y[r].keyAccessor=n,g;return y.push({name:t,data:e,keyAccessor:n}),g},g.projection=function(e){return v.projection(e),m=!0,g},g.geoJsons=function(){return y},g.geoPath=function(){return v},g.removeGeoJson=function(e){for(var t=[],n=0;n<y.length;++n){var r=y[n];r.name!==e&&t.push(r)}return y=t,g},g.anchor(t,r)},n.bubbleOverlay=function(t,r){function a(){return u=f.select("g."+c),u.empty()&&(u=f.svg().append("g").attr("class",c)),u}function i(){var e=o();h.forEach(function(t){var r=s(t,e),a=r.select("circle."+p);a.empty()&&(a=r.append("circle").attr("class",p).attr("r",0).attr("fill",f.getColor).on("click",f.onClick)),n.transition(a,f.transitionDuration()).attr("r",function(e){return f.bubbleR(e)}),f._doRenderLabel(r),f._doRenderTitles(r)})}function o(){var e={};return f.data().forEach(function(t){e[f.keyAccessor()(t)]=t}),e}function s(e,t){var r=d+" "+n.utils.nameToId(e.name),a=u.select("g."+n.utils.nameToId(e.name));return a.empty()&&(a=u.append("g").attr("class",r).attr("transform","translate("+e.x+","+e.y+")")),a.datum(t[e.name]),a}function l(){var e=o();h.forEach(function(t){var r=s(t,e),a=r.select("circle."+p);n.transition(a,f.transitionDuration()).attr("r",function(e){return f.bubbleR(e)}).attr("fill",f.getColor),f.doUpdateLabels(r),f.doUpdateTitles(r)})}var u,c="bubble-overlay",d="node",p="bubble",f=n.bubbleMixin(n.baseMixin({})),h=[];return f.transitionDuration(750),f.radiusValueAccessor(function(e){return e.value}),f.point=function(e,t,n){return h.push({name:e,x:t,y:n}),f},f._doRender=function(){return u=a(),f.r().range([f.MIN_RADIUS,f.width()*f.maxBubbleRelativeSize()]),i(),f.fadeDeselectedArea(),f},f._doRedraw=function(){return l(),f.fadeDeselectedArea(),f},f.debug=function(t){if(t){var r=f.select("g."+n.constants.DEBUG_GROUP_CLASS);r.empty()&&(r=f.svg().append("g").attr("class",n.constants.DEBUG_GROUP_CLASS));var a=r.append("text").attr("x",10).attr("y",20);r.append("rect").attr("width",f.width()).attr("height",f.height()).on("mousemove",function(){var t=e.mouse(r.node()),n=t[0]+", "+t[1];a.text(n)})}else f.selectAll(".debug").remove();return f},f.anchor(t,r),f},n.rowChart=function(t,r){function a(){if(!_||b){var t=e.extent(w,L.cappedValueAccessor);t[0]>0&&(t[0]=0),_=e.scale.linear().domain(t).range([0,L.effectiveWidth()])}I.scale(_)}function i(){var e=y.select("g.axis");a(),e.empty()&&(e=y.append("g").attr("class","axis")),e.attr("transform","translate(0, "+L.effectiveHeight()+")"),n.transition(e,L.transitionDuration()).call(I)}function o(){y.selectAll("g.tick").select("line.grid-line").remove(),y.selectAll("g.tick").append("line").attr("class","grid-line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",function(){return-L.effectiveHeight()})}function s(){w=L.data(),i(),o();var e=y.selectAll("g."+E).data(w);l(e),u(e),d(e)}function l(e){var t=e.enter().append("g").attr("class",function(e,t){return E+" _"+t});t.append("rect").attr("width",0),f(t),h(e)}function u(e){e.exit().remove()}function c(){var e=_(0);return e===-(1/0)||e!==e?_(1):e}function d(e){var t,r=w.length;t=D?D:(L.effectiveHeight()-(r+1)*A)/r,T||(C=t/2);var a=e.attr("transform",function(e,n){return"translate(0,"+((n+1)*A+n*t)+")"}).select("rect").attr("height",t).attr("fill",L.getColor).on("click",g).classed("deselected",function(e){return!!L.hasFilter()&&!v(e)}).classed("selected",function(e){return!!L.hasFilter()&&v(e)});n.transition(a,L.transitionDuration()).attr("width",function(e){return Math.abs(c()-_(L.valueAccessor()(e)))}).attr("transform",m),p(e),h(e)}function p(e){L.renderTitle()&&(e.selectAll("title").remove(),e.append("title").text(L.title()))}function f(e){L.renderLabel()&&e.append("text").on("click",g),L.renderTitleLabel()&&e.append("text").attr("class",P).on("click",g)}function h(e){if(L.renderLabel()){var t=e.select("text").attr("x",x).attr("y",C).attr("dy",S).on("click",g).attr("class",function(e,t){return E+" _"+t}).text(function(e){return L.label()(e)});n.transition(t,L.transitionDuration()).attr("transform",m)}if(L.renderTitleLabel()){var r=e.select("."+P).attr("x",L.effectiveWidth()-k).attr("y",C).attr("text-anchor","end").on("click",g).attr("class",function(e,t){return P+" _"+t}).text(function(e){return L.title()(e)});n.transition(r,L.transitionDuration()).attr("transform",m)}}function g(e){L.onClick(e)}function m(e){var t=_(L.cappedValueAccessor(e)),n=c(),r=t>n?n:t;return"translate("+r+",0)"}function v(e){return L.hasFilter(L.cappedKeyAccessor(e))}var y,_,b,w,x=10,C=15,T=!1,S="0.35em",k=2,A=5,D=!1,E="row",P="titlerow",O=!1,L=n.capMixin(n.marginMixin(n.colorMixin(n.baseMixin({})))),I=e.svg.axis().orient("bottom");return L.rowsCap=L.cap,L._doRender=function(){return L.resetSvg(),y=L.svg().append("g").attr("transform","translate("+L.margins().left+","+L.margins().top+")"),s(),L},L.title(function(e){return L.cappedKeyAccessor(e)+": "+L.cappedValueAccessor(e)}),L.label(L.cappedKeyAccessor),L.x=function(e){return arguments.length?(_=e,L):_},L.renderTitleLabel=function(e){return arguments.length?(O=e,L):O},L._doRedraw=function(){return s(),L},L.xAxis=function(){return I},L.fixedBarHeight=function(e){return arguments.length?(D=e,L):D},L.gap=function(e){return arguments.length?(A=e,L):A},L.elasticX=function(e){return arguments.length?(b=e,L):b},L.labelOffsetX=function(e){return arguments.length?(x=e,L):x},L.labelOffsetY=function(e){return arguments.length?(C=e,T=!0,L):C},L.titleLabelOffsetX=function(e){return arguments.length?(k=e,L):k},L.anchor(t,r)},n.legend=function(){function e(){return u+l}var t,r,a=2,i={},o=0,s=0,l=12,u=5,c=!1,d=560,p=70,f=!1;return i.parent=function(e){return arguments.length?(t=e,i):t},i.render=function(){t.svg().select("g.dc-legend").remove(),r=t.svg().append("g").attr("class","dc-legend").attr("transform","translate("+o+","+s+")");var i=t.legendables(),h=r.selectAll("g.dc-legend-item").data(i).enter().append("g").attr("class","dc-legend-item").on("mouseover",function(e){t.legendHighlight(e)}).on("mouseout",function(e){t.legendReset(e)}).on("click",function(e){e.chart.legendToggle(e)});r.selectAll("g.dc-legend-item").classed("fadeout",function(e){return e.chart.isLegendableHidden(e)}),i.some(n.pluck("dashstyle"))?h.append("line").attr("x1",0).attr("y1",l/2).attr("x2",l).attr("y2",l/2).attr("stroke-width",2).attr("stroke-dasharray",n.pluck("dashstyle")).attr("stroke",n.pluck("color")):h.append("rect").attr("width",l).attr("height",l).attr("fill",function(e){return e?e.color:"blue"}),h.append("text").text(n.pluck("name")).attr("x",l+a).attr("y",function(){return l/2+(this.clientHeight?this.clientHeight:13)/2-2});var g=0,m=0;h.attr("transform",function(t,n){if(c){var r="translate("+g+","+m*e()+")",a=f===!0?this.getBBox().width+u:p;return g+a>=d?(++m,g=0):g+=a,r}return"translate(0,"+n*e()+")"})},i.x=function(e){return arguments.length?(o=e,i):o},i.y=function(e){return arguments.length?(s=e,i):s},i.gap=function(e){return arguments.length?(u=e,i):u},i.itemHeight=function(e){return arguments.length?(l=e,i):l},i.horizontal=function(e){return arguments.length?(c=e,i):c},i.legendWidth=function(e){return arguments.length?(d=e,i):d},i.itemWidth=function(e){return arguments.length?(p=e,i):p},i.autoItemWidth=function(e){return arguments.length?(f=e,i):f},i},n.scatterPlot=function(t,r){function a(t,r){var a=o.selectAll(".chart-body path.symbol").filter(function(){return t(e.select(this))}),i=s.size();s.size(Math.pow(r,2)),n.transition(a,o.transitionDuration()).attr("d",s),s.size(i)}function i(e){var t=o.selectAll(".chart-body path.symbol").each(function(t){this.filtered=e&&e.isFiltered(t.key)});n.transition(t,o.transitionDuration()).attr("d",s)}var o=n.coordinateGridMixin({}),s=e.svg.symbol(),l=function(e){return e.value},u=o.keyAccessor();o.keyAccessor(function(e){return u(e)[0]}),o.valueAccessor(function(e){return u(e)[1]}),o.colorAccessor(function(){return o._groupName});var c=function(e){return"translate("+o.x()(o.keyAccessor()(e))+","+o.y()(o.valueAccessor()(e))+")"},d=3,p=5,f=0;return s.size(function(e){return l(e)?this.filtered?Math.pow(p,2):Math.pow(d,2):f}),n.override(o,"_filter",function(e){return arguments.length?o.__filter(n.filters.RangedTwoDimensionalFilter(e)):o.__filter()}),o.plotData=function(){var e=o.chartBodyG().selectAll("path.symbol").data(o.data());e.enter().append("path").attr("class","symbol").attr("opacity",0).attr("fill",o.getColor).attr("transform",c),n.transition(e,o.transitionDuration()).attr("opacity",function(e){return l(e)?1:0}).attr("fill",o.getColor).attr("transform",c).attr("d",s),n.transition(e.exit(),o.transitionDuration()).attr("opacity",0).remove()},o.existenceAccessor=function(e){return arguments.length?(l=e,this):l},o.symbol=function(e){return arguments.length?(s.type(e),o):s.type()},o.symbolSize=function(e){return arguments.length?(d=e,o):d},o.highlightedSize=function(e){return arguments.length?(p=e,o):p},o.hiddenSize=function(e){return arguments.length?(f=e,o):f},o.legendables=function(){return[{chart:o,name:o._groupName,color:o.getColor()}]},o.legendHighlight=function(t){a(function(e){return e.attr("fill")===t.color},p),o.selectAll(".chart-body path.symbol").filter(function(){return e.select(this).attr("fill")!==t.color}).classed("fadeout",!0)},o.legendReset=function(t){a(function(e){return e.attr("fill")===t.color},d),o.selectAll(".chart-body path.symbol").filter(function(){return e.select(this).attr("fill")!==t.color}).classed("fadeout",!1)},o.setHandlePaths=function(){},o.extendBrush=function(){var e=o.brush().extent();return o.round()&&(e[0]=e[0].map(o.round()),e[1]=e[1].map(o.round()),o.g().select(".brush").call(o.brush().extent(e))),e},o.brushIsEmpty=function(e){return o.brush().empty()||!e||e[0][0]>=e[1][0]||e[0][1]>=e[1][1]},o._brushing=function(){var e=o.extendBrush();if(o.redrawBrush(o.g()),o.brushIsEmpty(e))n.events.trigger(function(){o.filter(null),o.redrawGroup()}),i(!1);else{var t=n.filters.RangedTwoDimensionalFilter(e);n.events.trigger(function(){o.filter(null),o.filter(t),o.redrawGroup()},n.constants.EVENT_DELAY),i(t)}},o.setBrushY=function(e){e.call(o.brush().y(o.y()))},o.anchor(t,r)},n.numberDisplay=function(t,r){var a="number-display",i=e.format(".2s"),o=n.baseMixin({}),s={one:"",some:"",none:""};return o._mandatoryAttributes(["group"]),o.html=function(e){return arguments.length?(e.none?s.none=e.none:e.one?s.none=e.one:e.some&&(s.none=e.some),e.one?s.one=e.one:e.some&&(s.one=e.some),e.some?s.some=e.some:e.one&&(s.some=e.one),o):s},o.value=function(){return o.data()},o.data(function(e){var t=e.value?e.value():e.top(1)[0];return o.valueAccessor()(t)}),o.transitionDuration(250),o._doRender=function(){var t=o.value(),n=o.selectAll("."+a);n.empty()&&(n=n.data([0]).enter().append("span").attr("class",a)),n.transition().duration(o.transitionDuration()).ease("quad-out-in").tween("text",function(){var n=e.interpolateNumber(this.lastValue||0,t);return this.lastValue=t,function(e){var r=null,a=o.formatNumber()(n(e));0===t&&""!==s.none?r=s.none:1===t&&""!==s.one?r=s.one:""!==s.some&&(r=s.some),this.innerHTML=r?r.replace("%number",a):a}})},o._doRedraw=function(){return o._doRender()},o.formatNumber=function(e){return arguments.length?(i=e,o):i},o.anchor(t,r)},n.heatMap=function(t,r){function a(e,t){var r=g.selectAll(".box-group").filter(function(n){return n.key[e]===t}),a=r.filter(function(e){return!g.hasFilter(e.key)});n.events.trigger(function(){a.empty()?r.each(function(e){g.filter(e.key)}):a.each(function(e){g.filter(e.key)}),g.redrawGroup()})}var i,o,s,l=6.75,u=e.ascending,c=e.ascending,d=e.scale.ordinal(),p=e.scale.ordinal(),f=l,h=l,g=n.colorMixin(n.marginMixin(n.baseMixin({})));g._mandatoryAttributes(["group"]),g.title(g.colorAccessor());var m=function(e){return e},v=function(e){return e};g.colsLabel=function(e){return arguments.length?(m=e,g):m},g.rowsLabel=function(e){return arguments.length?(v=e,g):v};var y=function(e){a(0,e)},_=function(e){a(1,e)},b=function(e){var t=e.key;n.events.trigger(function(){g.filter(t),g.redrawGroup()})};return n.override(g,"filter",function(e){return arguments.length?g._filter(n.filters.TwoDimensionalFilter(e)):g._filter()}),g.rows=function(e){return arguments.length?(s=e,g):s},g.rowOrdering=function(e){return arguments.length?(c=e,g):c},g.cols=function(e){return arguments.length?(o=e,g):o},g.colOrdering=function(e){return arguments.length?(u=e,g):u},g._doRender=function(){return g.resetSvg(),i=g.svg().append("g").attr("class","heatmap").attr("transform","translate("+g.margins().left+","+g.margins().top+")"),g._doRedraw()},g._doRedraw=function(){var e=g.data(),t=g.rows()||e.map(g.valueAccessor()),r=g.cols()||e.map(g.keyAccessor());c&&(t=t.sort(c)),u&&(r=r.sort(u)),t=p.domain(t),r=d.domain(r);var a=t.domain().length,o=r.domain().length,s=Math.floor(g.effectiveWidth()/o),l=Math.floor(g.effectiveHeight()/a);r.rangeRoundBands([0,g.effectiveWidth()]),t.rangeRoundBands([g.effectiveHeight(),0]);var m=i.selectAll("g.box-group").data(g.data(),function(e,t){return g.keyAccessor()(e,t)+"\0"+g.valueAccessor()(e,t)}),v=m.enter().append("g").attr("class","box-group");v.append("rect").attr("class","heat-box").attr("fill","white").on("click",g.boxOnClick()),g.renderTitle()&&(v.append("title"),m.selectAll("title").text(g.title())),n.transition(m.selectAll("rect"),g.transitionDuration()).attr("x",function(e,t){return r(g.keyAccessor()(e,t))}).attr("y",function(e,n){return t(g.valueAccessor()(e,n))}).attr("rx",f).attr("ry",h).attr("fill",g.getColor).attr("width",s).attr("height",l),m.exit().remove();var y=i.selectAll("g.cols");y.empty()&&(y=i.append("g").attr("class","cols axis"));var _=y.selectAll("text").data(r.domain());_.enter().append("text").attr("x",function(e){return r(e)+s/2}).style("text-anchor","middle").attr("y",g.effectiveHeight()).attr("dy",12).on("click",g.xAxisOnClick()).text(g.colsLabel()),n.transition(_,g.transitionDuration()).text(g.colsLabel()).attr("x",function(e){return r(e)+s/2}).attr("y",g.effectiveHeight()),_.exit().remove();var b=i.selectAll("g.rows");b.empty()&&(b=i.append("g").attr("class","rows axis"));var w=b.selectAll("text").data(t.domain());return w.enter().append("text").attr("dy",6).style("text-anchor","end").attr("x",0).attr("dx",-2).on("click",g.yAxisOnClick()).text(g.rowsLabel()),n.transition(w,g.transitionDuration()).text(g.rowsLabel()).attr("y",function(e){return t(e)+l/2}),w.exit().remove(),g.hasFilter()?g.selectAll("g.box-group").each(function(e){g.isSelectedNode(e)?g.highlightSelected(this):g.fadeDeselected(this)}):g.selectAll("g.box-group").each(function(){g.resetHighlight(this)}),g},g.boxOnClick=function(e){return arguments.length?(b=e,g):b},g.xAxisOnClick=function(e){return arguments.length?(y=e,g):y},g.yAxisOnClick=function(e){return arguments.length?(_=e,g):_},g.xBorderRadius=function(e){return arguments.length?(f=e,g):f},g.yBorderRadius=function(e){return arguments.length?(h=e,g):h},g.isSelectedNode=function(e){return g.hasFilter(e.key)},g.anchor(t,r)},function(){function t(e){return[0,e.length-1]}function n(t){return[e.quantile(t,.25),e.quantile(t,.5),e.quantile(t,.75)]}e.box=function(){function r(t){t.each(function(t,n){t=t.map(l).sort(e.ascending);var r=e.select(this),p=t.length,f=t[0],h=t[p-1],g=t.quartiles=c(t),m=u&&u.call(this,t,n),v=m&&m.map(function(e){return t[e]}),y=m?e.range(0,m[0]).concat(e.range(m[1]+1,p)):e.range(p),_=e.scale.linear().domain(s&&s.call(this,t,n)||[f,h]).range([i,0]),b=this.__chart__||e.scale.linear().domain([0,1/0]).range(_.range());this.__chart__=_;var w=r.selectAll("line.center").data(v?[v]:[]);w.enter().insert("line","rect").attr("class","center").attr("x1",a/2).attr("y1",function(e){return b(e[0])}).attr("x2",a/2).attr("y2",function(e){return b(e[1])}).style("opacity",1e-6).transition().duration(o).style("opacity",1).attr("y1",function(e){return _(e[0])}).attr("y2",function(e){return _(e[1])}),w.transition().duration(o).style("opacity",1).attr("y1",function(e){return _(e[0])}).attr("y2",function(e){return _(e[1])}),w.exit().transition().duration(o).style("opacity",1e-6).attr("y1",function(e){return _(e[0])}).attr("y2",function(e){return _(e[1])}).remove();var x=r.selectAll("rect.box").data([g]);x.enter().append("rect").attr("class","box").attr("x",0).attr("y",function(e){return b(e[2])}).attr("width",a).attr("height",function(e){return b(e[0])-b(e[2])}).transition().duration(o).attr("y",function(e){return _(e[2])}).attr("height",function(e){return _(e[0])-_(e[2])}),x.transition().duration(o).attr("y",function(e){return _(e[2])}).attr("height",function(e){return _(e[0])-_(e[2])});var C=r.selectAll("line.median").data([g[1]]);C.enter().append("line").attr("class","median").attr("x1",0).attr("y1",b).attr("x2",a).attr("y2",b).transition().duration(o).attr("y1",_).attr("y2",_),C.transition().duration(o).attr("y1",_).attr("y2",_);var T=r.selectAll("line.whisker").data(v||[]);T.enter().insert("line","circle, text").attr("class","whisker").attr("x1",0).attr("y1",b).attr("x2",a).attr("y2",b).style("opacity",1e-6).transition().duration(o).attr("y1",_).attr("y2",_).style("opacity",1),T.transition().duration(o).attr("y1",_).attr("y2",_).style("opacity",1),T.exit().transition().duration(o).attr("y1",_).attr("y2",_).style("opacity",1e-6).remove();var S=r.selectAll("circle.outlier").data(y,Number);S.enter().insert("circle","text").attr("class","outlier").attr("r",5).attr("cx",a/2).attr("cy",function(e){return b(t[e])}).style("opacity",1e-6).transition().duration(o).attr("cy",function(e){return _(t[e])}).style("opacity",1),S.transition().duration(o).attr("cy",function(e){return _(t[e])}).style("opacity",1),S.exit().transition().duration(o).attr("cy",function(e){return _(t[e])}).style("opacity",1e-6).remove();var k=d||_.tickFormat(8),A=r.selectAll("text.box").data(g);A.enter().append("text").attr("class","box").attr("dy",".3em").attr("dx",function(e,t){return 1&t?6:-6}).attr("x",function(e,t){return 1&t?a:0}).attr("y",b).attr("text-anchor",function(e,t){return 1&t?"start":"end"}).text(k).transition().duration(o).attr("y",_),A.transition().duration(o).text(k).attr("y",_);var D=r.selectAll("text.whisker").data(v||[]);D.enter().append("text").attr("class","whisker").attr("dy",".3em").attr("dx",6).attr("x",a).attr("y",b).text(k).style("opacity",1e-6).transition().duration(o).attr("y",_).style("opacity",1),
D.transition().duration(o).text(k).attr("y",_).style("opacity",1),D.exit().transition().duration(o).attr("y",_).style("opacity",1e-6).remove()}),e.timer.flush()}var a=1,i=1,o=0,s=null,l=Number,u=t,c=n,d=null;return r.width=function(e){return arguments.length?(a=e,r):a},r.height=function(e){return arguments.length?(i=e,r):i},r.tickFormat=function(e){return arguments.length?(d=e,r):d},r.duration=function(e){return arguments.length?(o=e,r):o},r.domain=function(t){return arguments.length?(s=null===t?t:e.functor(t),r):s},r.value=function(e){return arguments.length?(l=e,r):l},r.whiskers=function(e){return arguments.length?(u=e,r):u},r.quartiles=function(e){return arguments.length?(c=e,r):c},r}}(),n.boxPlot=function(t,r){function a(e){return function(t){var n=t.quartiles[0],r=t.quartiles[2],a=(r-n)*e,i=-1,o=t.length;do++i;while(t[i]<n-a);do--o;while(t[o]>r+a);return[i,o]}}function i(e){var t=e.enter().append("g");t.attr("class","box").attr("transform",g).call(p).on("click",function(e){l.filter(e.key),l.redrawGroup()})}function o(t){n.transition(t,l.transitionDuration()).attr("transform",g).call(p).each(function(){e.select(this).select("rect.box").attr("fill",l.getColor)})}function s(e){e.exit().remove().call(p)}var l=n.coordinateGridMixin({}),u=1.5,c=a,d=c(u),p=e.box(),f=null,h=function(e,t){return l.isOrdinal()?l.x().rangeBand():e/(1+l.boxPadding())/t};l.yAxisPadding(12),l.x(e.scale.ordinal()),l.xUnits(n.units.ordinal),l.data(function(e){return e.all().map(function(e){return e.map=function(t){return t.call(e,e)},e}).filter(function(e){var t=l.valueAccessor()(e);return 0!==t.length})}),l.boxPadding=l._rangeBandPadding,l.boxPadding(.8),l.outerPadding=l._outerRangeBandPadding,l.outerPadding(.5),l.boxWidth=function(t){return arguments.length?(h=e.functor(t),l):h};var g=function(e,t){var n=l.x()(l.keyAccessor()(e,t));return"translate("+n+", 0)"};return l._preprocessData=function(){l.elasticX()&&l.x().domain([])},l.plotData=function(){var e=h(l.effectiveWidth(),l.xUnitCount());p.whiskers(d).width(e).height(l.effectiveHeight()).value(l.valueAccessor()).domain(l.y().domain()).duration(l.transitionDuration()).tickFormat(f);var t=l.chartBodyG().selectAll("g.box").data(l.data(),function(e){return e.key});i(t),o(t),s(t),l.fadeDeselectedArea()},l.fadeDeselectedArea=function(){l.hasFilter()?l.g().selectAll("g.box").each(function(e){l.isSelectedNode(e)?l.highlightSelected(this):l.fadeDeselected(this)}):l.g().selectAll("g.box").each(function(){l.resetHighlight(this)})},l.isSelectedNode=function(e){return l.hasFilter(e.key)},l.yAxisMin=function(){var t=e.min(l.data(),function(t){return e.min(l.valueAccessor()(t))});return n.utils.subtract(t,l.yAxisPadding())},l.yAxisMax=function(){var t=e.max(l.data(),function(t){return e.max(l.valueAccessor()(t))});return n.utils.add(t,l.yAxisPadding())},l.tickFormat=function(e){return arguments.length?(f=e,l):f},l.anchor(t,r)},n.selectMenu=function(t,r){function a(){var e=s.selectAll("option."+u).data(c.data(),function(e){return c.keyAccessor()(e)});return e.enter().append("option").classed(u,!0).attr("value",function(e){return c.keyAccessor()(e)}),e.text(c.title()),e.exit().remove(),s.selectAll("option."+u).sort(h),s.on("change",i),e}function i(t,n){var r,a=e.event.target;if(a.selectedOptions){var i=Array.prototype.slice.call(a.selectedOptions);r=i.map(function(e){return e.value})}else{var o=[].slice.call(e.event.target.options);r=o.filter(function(e){return e.selected}).map(function(e){return e.value})}1===r.length&&""===r[0]?r=null:1===r.length&&(r=r[0]),c.onChange(r)}function o(){p?s.attr("multiple",!0):s.attr("multiple",null),null!==f?s.attr("size",f):s.attr("size",null)}var s,l="dc-select-menu",u="dc-select-option",c=n.baseMixin({}),d="Select all",p=!1,f=null,h=function(e,t){return c.keyAccessor()(e)>c.keyAccessor()(t)?1:c.keyAccessor()(t)>c.keyAccessor()(e)?-1:0},g=function(e){return c.valueAccessor()(e)>0};return c.data(function(e){return e.all().filter(g)}),c._doRender=function(){return c.select("select").remove(),s=c.root().append("select").classed(l,!0),o(),s.append("option").text(d).attr("value",""),a(),c},c._doRedraw=function(){return o(),a(),c.hasFilter()&&p?s.selectAll("option").filter(function(e){return e&&c.filters().indexOf(String(c.keyAccessor()(e)))>=0}).property("selected",!0):c.hasFilter()?s.property("value",c.filter()):s.property("value",""),c},c.onChange=function(e){e&&p?c.replaceFilter([e]):e?c.replaceFilter(e):c.filterAll(),n.events.trigger(function(){c.redrawGroup()})},c.order=function(e){return arguments.length?(h=e,c):h},c.promptText=function(e){return arguments.length?(d=e,c):d},c.filterDisplayed=function(e){return arguments.length?(g=e,c):g},c.multiple=function(e){return arguments.length?(p=e,c):p},c.size=function(e){return arguments.length?(f=e,c):f},c.anchor(t,r)},n.abstractBubbleChart=n.bubbleMixin,n.baseChart=n.baseMixin,n.capped=n.capMixin,n.colorChart=n.colorMixin,n.coordinateGridChart=n.coordinateGridMixin,n.marginable=n.marginMixin,n.stackableChart=n.stackMixin,n.d3=e,n.crossfilter=t,n}if("function"==typeof define&&define.amd)define(["d3","crossfilter"],e);else if("object"==typeof module&&module.exports){var t=require("d3"),n=require("crossfilter");"function"!=typeof n&&(n=n.crossfilter),module.exports=e(t,n)}else this.dc=e(d3,crossfilter)}();var hex_chr="0123456789abcdef";(function(){var e,t,n,r,a,i,o,s,l,u,c,d,p,f,h,g,m,v,y,_,b,w,x,C,T,S,k,A,D,E,P,O,L,I,M,N,R,B,F,H,z,U,j,q,V,G,W,X,Y,J,K,$,Z,Q,ee,te,ne={}.hasOwnProperty,re=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1},ae=function(e,t){function n(){this.constructor=e}for(var r in t)ne.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},ie=[].slice;if(C=function(){function e(){throw new Error("Not implemented. Did you mean to use Dropbox.Client?")}return e}(),C.Util=function(){function e(){}return e}(),C.Http=function(){function e(){}return e}(),C.File=function(){function e(){}return e}(),l="1.2.0","undefined"!=typeof global&&"undefined"!=typeof module&&"exports"in module)d=global,p=module.require.bind(module),module.exports=C;else if("undefined"!=typeof window&&"undefined"!=typeof navigator)d=window,p=null,window.Dropbox&&!function(){var e,t,n,r;n=window.Dropbox,r=[];for(e in n)ne.call(n,e)&&(t=n[e],r.push(C[e]=t));return r}(),window.Dropbox=C;else{if("undefined"==typeof self||"undefined"==typeof navigator)throw new Error("dropbox.js loaded in an unsupported JavaScript environment.");d=self,p=self.importScripts.bind(self),self.Dropbox=C}if(C.Env=function(){function e(){}return e.global=d,e.require=p,e}(),C.Util.EventSource=function(){function e(e){this._cancelable=e&&e.cancelable,this._listeners=[]}return e.prototype.addListener=function(e){if("function"!=typeof e)throw new TypeError("Invalid listener type; expected function");return re.call(this._listeners,e)<0&&this._listeners.push(e),this},e.prototype.removeListener=function(e){var t,n,r,a,i,o;if(this._listeners.indexOf)n=this._listeners.indexOf(e),-1!==n&&this._listeners.splice(n,1);else for(o=this._listeners,t=a=0,i=o.length;i>a;t=++a)if(r=o[t],r===e){this._listeners.splice(t,1);break}return this},e.prototype.dispatch=function(e){var t,n,r,a,i;for(i=this._listeners,r=0,a=i.length;a>r;r++)if(t=i[r],n=t(e),this._cancelable&&n===!1)return!1;return!0},e}(),C.AccountInfo=function(){function e(e){var t;this._json=e,this.name=e.display_name,this.email=e.email,this.countryCode=e.country||null,this.uid=e.uid.toString(),e.public_app_url?(this.publicAppUrl=e.public_app_url,t=this.publicAppUrl.length-1,t>=0&&"/"===this.publicAppUrl.substring(t)&&(this.publicAppUrl=this.publicAppUrl.substring(0,t))):this.publicAppUrl=null,this.referralUrl=e.referral_link,this.quota=e.quota_info.quota,this.privateBytes=e.quota_info.normal||0,this.sharedBytes=e.quota_info.shared||0,this.usedQuota=this.privateBytes+this.sharedBytes}return e.parse=function(e){return e&&"object"==typeof e?new C.AccountInfo(e):e},e.prototype.name=null,e.prototype.email=null,e.prototype.countryCode=null,e.prototype.uid=null,e.prototype.referralUrl=null,e.prototype.publicAppUrl=null,e.prototype.quota=null,e.prototype.usedQuota=null,e.prototype.privateBytes=null,e.prototype.sharedBytes=null,e.prototype.json=function(){return this._json},e}(),C.ApiError=function(){function e(e,t,n){var r,a;if(this.method=t,this.url=n,this.status=e.status,e.responseType)try{r=e.response||e.responseText}catch(t){a=t;try{r=e.responseText}catch(e){a=e,r=null}}else try{r=e.responseText}catch(e){a=e,r=null}if(r)try{this.responseText=r.toString(),this.response=JSON.parse(r)}catch(e){a=e,this.response=null}else this.responseText="(no response)",this.response=null}return e.prototype.status=null,e.prototype.method=null,e.prototype.url=null,e.prototype.responseText=null,e.prototype.response=null,e.NETWORK_ERROR=0,e.NO_CONTENT=304,e.INVALID_PARAM=400,e.INVALID_TOKEN=401,e.OAUTH_ERROR=403,e.NOT_FOUND=404,e.INVALID_METHOD=405,e.NOT_ACCEPTABLE=406,e.CONFLICT=409,e.RATE_LIMITED=429,e.SERVER_ERROR=503,e.OVER_QUOTA=507,e.prototype.toString=function(){return"Dropbox API error "+this.status+" from "+this.method+" "+this.url+" :: "+this.responseText},e.prototype.inspect=function(){return this.toString()},e}(),C.AuthDriver=function(){function e(){}return e.prototype.authType=function(){return"code"},e.prototype.url=function(){return"https://some.url"},e.prototype.doAuthorize=function(e,t,n,r){return r({code:"access-code"})},e.prototype.getStateParam=function(e,t){return t(C.Util.Oauth.randomAuthStateParam())},e.prototype.resumeAuthorize=function(e,t,n){return n({code:"access-code"})},e.prototype.onAuthStateChange=function(e,t){return t()},e.oauthQueryParams=["access_token","expires_in","scope","token_type","code","error","error_description","error_uri","mac_key","mac_algorithm"].sort(),e}(),C.AuthDriver.autoConfigure=function(e){if("undefined"!=typeof chrome&&chrome.runtime&&chrome.runtime.id)return void(chrome.tabs&&chrome.tabs.create?e.authDriver(new C.AuthDriver.ChromeExtension):e.authDriver(new C.AuthDriver.ChromeApp));if("undefined"!=typeof window){if(window.cordova)return void e.authDriver(new C.AuthDriver.Cordova);window&&window.navigator&&e.authDriver(new C.AuthDriver.Redirect)}},C.AuthDriver.BrowserBase=function(){function e(e){e?(this.rememberUser=!("rememberUser"in e)||e.rememberUser,this.scope=e.scope||"default"):(this.rememberUser=!0,this.scope="default"),this.storageKey=null,this.storage=C.AuthDriver.BrowserBase.localStorage(),this.stateRe=/^[^#]+\#(.*&)?state=([^&]+)(&|$)/}return e.prototype.authType=function(){return"token"},e.prototype.onAuthStepChange=function(e,t){var n=this;switch(this.setStorageKey(e),e.authStep){case C.Client.RESET:return this.loadCredentials(function(r){return r?(e.setCredentials(r),e.authStep!==C.Client.DONE?t():n.rememberUser?(e.setCredentials(r),t()):n.forgetCredentials(t)):t()});case C.Client.DONE:return this.rememberUser?this.storeCredentials(e.credentials(),t):this.forgetCredentials(t);case C.Client.SIGNED_OUT:return this.forgetCredentials(t);case C.Client.ERROR:return this.forgetCredentials(t);default:return t(),this}},e.prototype.setStorageKey=function(e){return this.storageKey="dropbox-auth:"+this.scope+":"+e.appHash(),this},e.prototype.storeCredentials=function(e,t){var n,r,a,i;n=JSON.stringify(e);try{this.storage.setItem(this.storageKey,n)}catch(e){a=e,r=encodeURIComponent(this.storageKey),i=encodeURIComponent(n),document.cookie=""+r+"="+i+"; path=/"}return t(),this},e.prototype.loadCredentials=function(e){var t,n,r,a,i,o,s;try{r=this.storage.getItem(this.storageKey)}catch(e){s=e,r=null}if(null===r&&(i=encodeURIComponent(this.storageKey),o=i.replace(/[.*+()]/g,"\\$&"),t=new RegExp("(^|(;\\s*))"+i+"=([^;]*)(;|$)"),(a=t.exec(document.cookie))&&(r=decodeURIComponent(a[3]))),!r)return e(null),this;try{e(JSON.parse(r))}catch(t){n=t,e(null)}return this},e.prototype.forgetCredentials=function(e){var t,n,r;try{this.storage.removeItem(this.storageKey)}catch(e){r=e,n=encodeURIComponent(this.storageKey),t=new Date(0).toGMTString(),document.cookie=""+n+"={}; expires="+t+"; path=/"}return e(),this},e.prototype.locationStateParam=function(e){var t,n;return t=e||C.AuthDriver.BrowserBase.currentLocation(),n=this.stateRe.exec(t),n?decodeURIComponent(n[2]):null},e.prototype.replaceUrlBasename=function(e,t){var n,r,a;return r=e.indexOf("#"),-1!==r&&(e=e.substring(0,r)),a=e.indexOf("?"),-1!==a&&(e=e.substring(0,a)),n=e.split("/"),n[n.length-1]=t,n.join("/")},e.localStorage=function(){return"undefined"!=typeof window?window.localStorage:null},e.currentLocation=function(){return window.location.href},e.cleanupLocation=function(){var e,t;window.history&&window.history.replaceState?(t=this.currentLocation(),e=t.indexOf("#"),window.history.replaceState({},document.title,t.substring(0,e))):window.location.hash=""},e}(),C.AuthDriver.Redirect=function(e){function t(e){t.__super__.constructor.call(this,e),this.receiverUrl=this.baseUrl(e)}return ae(t,e),t.prototype.baseUrl=function(e){var t,n;if(n=C.AuthDriver.BrowserBase.currentLocation(),e){if(e.redirectUrl)return e.redirectUrl;if(e.redirectFile)return this.replaceUrlBasename(n,e.redirectFile)}return t=n.indexOf("#"),-1!==t&&(n=n.substring(0,t)),n},t.prototype.url=function(){return this.receiverUrl},t.prototype.doAuthorize=function(e,t,n){return this.storeCredentials(n.credentials(),function(){return window.location.assign(e)})},t.prototype.resumeAuthorize=function(e,t,n){var r;return this.locationStateParam()===e?(r=C.AuthDriver.BrowserBase.currentLocation(),C.AuthDriver.BrowserBase.cleanupLocation(),n(C.Util.Oauth.queryParamsFromUrl(r))):this.forgetCredentials(function(){return n({error:"Authorization error"})})},t}(C.AuthDriver.BrowserBase),C.AuthDriver.Popup=function(e){function t(e){t.__super__.constructor.call(this,e),this.receiverUrl=this.baseUrl(e)}return ae(t,e),t.prototype.url=function(){return this.receiverUrl},t.prototype.doAuthorize=function(e,t,n,r){return this.listenForMessage(t,r),this.openWindow(e)},t.prototype.baseUrl=function(e){var t;if(t=C.AuthDriver.BrowserBase.currentLocation(),e){if(e.receiverUrl)return e.receiverUrl;if(e.receiverFile)return this.replaceUrlBasename(t,e.receiverFile)}return t},t.prototype.openWindow=function(e){return window.open(e,"_dropboxOauthSigninWindow",this.popupWindowSpec(980,700))},t.prototype.popupWindowSpec=function(e,t){var n,r,a,i,o,s,l,u,c,d;return o=null!=(l=window.screenX)?l:window.screenLeft,s=null!=(u=window.screenY)?u:window.screenTop,i=null!=(c=window.outerWidth)?c:document.documentElement.clientWidth,n=null!=(d=window.outerHeight)?d:document.documentElement.clientHeight,r=Math.round(o+(i-e)/2),a=Math.round(s+(n-t)/2.5),o>r&&(r=o),s>a&&(a=s),"width="+e+",height="+t+","+("left="+r+",top="+a)+"dialog=yes,dependent=yes,scrollbars=yes,location=yes"},t.prototype.listenForMessage=function(e,t){var n,r=this;return n=function(a){var i,o,s;i=a.data?a.data:a;try{s=JSON.parse(i)._dropboxjs_oauth_info}catch(e){return void(o=e)}if(s)return r.locationStateParam(s)===e?(e=!1,window.removeEventListener("message",n),C.AuthDriver.Popup.onMessage.removeListener(n),t(C.Util.Oauth.queryParamsFromUrl(i))):void 0},window.addEventListener("message",n,!1),C.AuthDriver.Popup.onMessage.addListener(n)},t.locationOrigin=function(e){var t;return(t=/^(file:\/\/[^\?\#]*)(\?|\#|$)/.exec(e))?t[1]:(t=/^([^\:]+\:\/\/[^\/\?\#]*)(\/|\?|\#|$)/.exec(e),t?t[1]:e)},t.oauthReceiver=function(){window.addEventListener("load",function(){var e,t,n,r,a,i;if(i=window.location.href,n=JSON.stringify({_dropboxjs_oauth_info:i}),C.AuthDriver.BrowserBase.cleanupLocation(),r=window.opener,window.parent!==window.top&&(r||(r=window.parent)),r){try{a=window.location.origin||locationOrigin(i),r.postMessage(n,a),window.close()}catch(e){t=e}try{return r.Dropbox.AuthDriver.Popup.onMessage.dispatch(n),window.close()}catch(t){e=t}}})},t.onMessage=new C.Util.EventSource,t}(C.AuthDriver.BrowserBase),C.AuthDriver.ChromeBase=function(e){function t(e){t.__super__.constructor.call(this,e),this.storageKey="dropbox_js_"+this.scope+"_credentials"}return ae(t,e),t.prototype.onAuthStepChange=function(e,t){switch(e.authStep){case C.Client.RESET:return this.loadCredentials(function(n){return n&&e.setCredentials(n),t()});case C.Client.DONE:return this.storeCredentials(e.credentials(),t);case C.Client.SIGNED_OUT:return this.forgetCredentials(t);case C.Client.ERROR:return this.forgetCredentials(t);default:return t()}},t.prototype.url=function(){return this.receiverUrl},t.prototype.storeCredentials=function(e,t){var n;return n={},n[this.storageKey]=e,chrome.storage.local.set(n,t),this},t.prototype.loadCredentials=function(e){var t=this;return chrome.storage.local.get(this.storageKey,function(n){return e(n[t.storageKey]||null)}),this},t.prototype.forgetCredentials=function(e){return chrome.storage.local.remove(this.storageKey,e),this},t}(C.AuthDriver.BrowserBase),C.AuthDriver.ChromeApp=function(e){function t(e){t.__super__.constructor.call(this,e),this.receiverUrl="https://"+chrome.runtime.id+".chromiumapp.org/"}return ae(t,e),t.prototype.doAuthorize=function(e,t,n,r){var a=this;return chrome.identity.launchWebAuthFlow({url:e,interactive:!0},function(e){return a.locationStateParam(e)===t?(t=!1,r(C.Util.Oauth.queryParamsFromUrl(e))):void 0})},t}(C.AuthDriver.ChromeBase),C.AuthDriver.ChromeExtension=function(e){function t(e){var n;t.__super__.constructor.call(this,e),n=e&&e.receiverPath||"chrome_oauth_receiver.html",this.receiverUrl=chrome.runtime.getURL(n)}return ae(t,e),t.prototype.doAuthorize=function(e,t,n,r){var a,i,o=this;return i=null,a=function(e,n){var s;if((!n||!n.tab||n.tab.url.substring(0,o.receiverUrl.length)===o.receiverUrl)&&e.dropbox_oauth_receiver_href)return s=e.dropbox_oauth_receiver_href,o.locationStateParam(s)===t?(t=!1,i&&chrome.tabs.remove(i.id),chrome.runtime.onMessage.removeListener(a),r(C.Util.Oauth.queryParamsFromUrl(s))):void 0},chrome.runtime.onMessage.addListener(a),chrome.tabs.create({url:e,active:!0,pinned:!1},function(e){return i=e})},t.oauthReceiver=function(){return window.addEventListener("load",function(){var e;return e=window.location.href,window.location.hash="",chrome.runtime.sendMessage({dropbox_oauth_receiver_href:e}),window.close?window.close():void 0})},t}(C.AuthDriver.ChromeBase),C.AuthDriver.Cordova=function(e){function t(e){t.__super__.constructor.call(this,e)}return ae(t,e),t.prototype.url=function(){return"https://www.dropbox.com/1/oauth2/redirect_receiver"},t.prototype.doAuthorize=function(e,t,n,r){var a,i,o,s,l,u=this;return i=window.open(e,"_blank","location=yes,closebuttoncaption=Cancel"),s=!1,a=/^[^\/]*\/\/[^\/]*\//.exec(e)[0],l=!1,o=function(e){if(e.url&&u.locationStateParam(e.url)===t){if(l)return;return i.removeEventListener("loadstart",o),i.removeEventListener("loaderror",o),i.removeEventListener("loadstop",o),i.removeEventListener("exit",o),l=!0,window.setTimeout(function(){return i.close()},10),void r(C.Util.Oauth.queryParamsFromUrl(e.url))}if("exit"===e.type){if(l)return;i.removeEventListener("loadstart",o),i.removeEventListener("loaderror",o),i.removeEventListener("loadstop",o),i.removeEventListener("exit",o),l=!0,r(new AuthError("error=access_denied&error_description=User+closed+browser+window"))}},i.addEventListener("loadstart",o),i.addEventListener("loaderror",o),i.addEventListener("loadstop",o),i.addEventListener("exit",o)},t}(C.AuthDriver.BrowserBase),C.AuthDriver.NodeServer=function(){function e(e){this._port=(null!=e?e.port:void 0)||8912,(null!=e?e.tls:void 0)?(this._tlsOptions=e.tls,("string"==typeof this._tlsOptions||this._tlsOptions instanceof Buffer)&&(this._tlsOptions={key:this._tlsOptions,cert:this._tlsOptions})):this._tlsOptions=null,this._fs=C.Env.require("fs"),this._http=C.Env.require("http"),this._https=C.Env.require("https"),this._open=C.Env.require("open"),this._callbacks={},this._nodeUrl=C.Env.require("url"),this.createApp()}return e.prototype.authType=function(){return"code"},e.prototype.url=function(){var e;return e=null===this._tlsOptions?"http":"https",""+e+"://localhost:"+this._port+"/oauth_callback"},e.prototype.doAuthorize=function(e,t,n,r){return this._callbacks[t]=r,this.openBrowser(e)},e.prototype.openBrowser=function(e){if(!e.match(/^https?:\/\//))throw new Error("Not a http/https URL: "+e);return"BROWSER"in process.env?this._open(e,process.env.BROWSER):this._open(e)},e.prototype.createApp=function(){var e=this;return this._app=this._tlsOptions?this._https.createServer(this._tlsOptions,function(t,n){return e.doRequest(t,n)}):this._http.createServer(function(t,n){return e.doRequest(t,n)}),this._app.listen(this._port)},e.prototype.closeServer=function(){return this._app.close()},e.prototype.doRequest=function(e,t){var n,r,a,i=this;return a=this._nodeUrl.parse(e.url,!0),"/oauth_callback"===a.pathname&&(r=a.query.state,this._callbacks[r]&&(this._callbacks[r](a.query),delete this._callbacks[r])),n="",e.on("data",function(e){return n+=e}),e.on("end",function(){return i.closeBrowser(t)})},e.prototype.closeBrowser=function(e){var t;return t='<!doctype html>\n<script type="text/javascript">window.close();</script>\n<p>Please close this window.</p>',e.writeHead(200,{"Content-Length":t.length,"Content-Type":"text/html"}),e.write(t),e.end()},e}(),C.AuthError=function(){function e(e){var t;if(!e.error)throw new Error("Not an OAuth 2.0 error: "+JSON.stringify(e));t="object"==typeof e.error&&e.error.error?e.error:e,this.code=t.error,this.description=t.error_description||null,this.uri=t.error_uri||null}return e.prototype.code=null,e.prototype.description=null,e.prototype.uri=null,e.ACCESS_DENIED="access_denied",e.INVALID_REQUEST="invalid_request",e.UNAUTHORIZED_CLIENT="unauthorized_client",e.INVALID_GRANT="invalid_grant",e.INVALID_SCOPE="invalid_scope",e.UNSUPPORTED_GRANT_TYPE="unsupported_grant_type",e.UNSUPPORTED_RESPONSE_TYPE="unsupported_response_type",e.SERVER_ERROR="server_error",e.TEMPORARILY_UNAVAILABLE="temporarily_unavailable",e.prototype.toString=function(){return"Dropbox OAuth error "+this.code+" :: "+this.description},e.prototype.inspect=function(){return this.toString()},e}(),C.Client=function(){function e(e){var t=this;this._serverRoot=e.server||this._defaultServerRoot(),this._maxApiServer="maxApiServer"in e?e.maxApiServer:this._defaultMaxApiServer(),this._authServer=e.authServer||this._defaultAuthServer(),this._fileServer=e.fileServer||this._defaultFileServer(),this._downloadServer=e.downloadServer||this._defaultDownloadServer(),this._notifyServer=e.notifyServer||this._defaultNotifyServer(),this.onXhr=new C.Util.EventSource({cancelable:!0}),this.onError=new C.Util.EventSource,this.onAuthStepChange=new C.Util.EventSource,this._xhrOnErrorHandler=function(e,n){return t._handleXhrError(e,n)},this._oauth=new C.Util.Oauth(e),this._uid=e.uid||null,this.authStep=this._oauth.step(),this._driver=null,this.authError=null,this._credentials=null,this._datastoreManager=null,this.setupUrls()}return e.prototype.onXhr=null,e.prototype.onError=null,e.prototype.onAuthStepChange=null,e.prototype.authDriver=function(e){return this._driver=e,this},e.prototype.dropboxUid=function(){return this._uid},e.prototype.credentials=function(){return this._credentials||this._computeCredentials(),this._credentials},e.prototype.authenticate=function(e,t){var n,r,a,i,o,s=this;if(t||"function"!=typeof e||(t=e,e=null),n=!(e&&"interactive"in e)||e.interactive,!this._driver&&this.authStep!==c.DONE&&(C.AuthDriver.autoConfigure(this),!this._driver))throw new Error("OAuth driver auto-configuration failed. Call authDriver.");if(this.authStep===c.ERROR)throw new Error("Client got in an error state. Call reset() to reuse it!");return i=function(){return s.authStep=s._oauth.step(),s.authStep===c.ERROR&&(s.authError=s._oauth.error()),s._credentials=null,s.onAuthStepChange.dispatch(s),o()},a=function(){return s.authStep=c.ERROR,s._credentials=null,s.onAuthStepChange.dispatch(s),o()},r=null,o=function(){var e;if(r!==s.authStep&&(r=s.authStep,s._driver&&s._driver.onAuthStepChange))return void s._driver.onAuthStepChange(s,o);switch(s.authStep){case c.RESET:return n?(s._driver.getStateParam&&s._driver.getStateParam(function(e){return s.client.authStep===c.RESET&&s._oauth.setAuthStateParam(e),i()}),s._oauth.setAuthStateParam(C.Util.Oauth.randomAuthStateParam()),i()):void(t&&t(null,s));case c.PARAM_SET:return n?(e=s.authorizeUrl(),s._driver.doAuthorize(e,s._oauth.authStateParam(),s,function(e){return s._oauth.processRedirectParams(e),e.uid&&(s._uid=e.uid),i()})):void(t&&t(null,s));case c.PARAM_LOADED:return s._driver.resumeAuthorize?s._driver.resumeAuthorize(s._oauth.authStateParam(),s,function(e){return s._oauth.processRedirectParams(e),e.uid&&(s._uid=e.uid),i()}):(s._oauth.setAuthStateParam(s._oauth.authStateParam()),void i());case c.AUTHORIZED:return s.getAccessToken(function(e,t){return e?(s.authError=e,a()):(s._oauth.processRedirectParams(t),s._uid=t.uid,i())});case c.DONE:t&&t(null,s);break;case c.SIGNED_OUT:return s.authStep=c.RESET,s.reset(),o();case c.ERROR:t&&t(s.authError,s)}},o(),this},e.prototype.isAuthenticated=function(){return this.authStep===c.DONE},e.prototype.signOut=function(e,t){var n,r,a=this;if(t||"function"!=typeof e||(t=e,e=null),n=e&&e.mustInvalidate,this.authStep!==c.DONE)throw new Error("This client doesn't have a user's token");return r=new C.Util.Xhr("POST",this._urls.signOut),r.signWithOauth(this._oauth),this._dispatchXhr(r,function(e){if(e)if(e.status===C.ApiError.INVALID_TOKEN)e=null;else if(n)return void(t&&t(e));return a.authStep=c.RESET,a.reset(),a.authStep=c.SIGNED_OUT,a.onAuthStepChange.dispatch(a),a._driver&&a._driver.onAuthStepChange?a._driver.onAuthStepChange(a,function(){return t?t(null):void 0}):t?t(null):void 0})},e.prototype.signOff=function(e,t){return this.signOut(e,t)},e.prototype.getAccountInfo=function(e,t){var n,r;return t||"function"!=typeof e||(t=e,e=null),n=!1,e&&e.httpCache&&(n=!0),r=new C.Util.Xhr("GET",this._urls.accountInfo),r.signWithOauth(this._oauth,n),this._dispatchXhr(r,function(e,n){return t(e,C.AccountInfo.parse(n),n)})},e.prototype.getUserInfo=function(e,t){return this.getAccountInfo(e,t)},e.prototype.readFile=function(e,t,n){var r,a,i,o,s,l,u;return n||"function"!=typeof t||(n=t,t=null),a={},l="text",o=null,r=!1,t&&(t.versionTag?a.rev=t.versionTag:t.rev&&(a.rev=t.rev),t.arrayBuffer?l="arraybuffer":t.blob?l="blob":t.buffer?l="buffer":t.binary&&(l="b"),t.length?(null!=t.start?(s=t.start,i=t.start+t.length-1):(s="",i=t.length),o="bytes="+s+"-"+i):null!=t.start&&(o="bytes="+t.start+"-"),t.httpCache&&(r=!0)),u=new C.Util.Xhr("GET",""+this._urls.getFile+"/"+this._urlEncodePath(e)),u.setParams(a).signWithOauth(this._oauth,r),u.setResponseType(l),o&&(o&&u.setHeader("Range",o),u.reportResponseHeaders()),this._dispatchXhr(u,function(e,t,r,a){var i;return i=a?C.Http.RangeInfo.parse(a["content-range"]):null,n(e,t,C.File.Stat.parse(r),i)})},e.prototype.writeFile=function(e,t,n,r){var a;return r||"function"!=typeof n||(r=n,n=null),a=C.Util.Xhr.canSendForms&&"object"==typeof t,a?this._writeFileUsingForm(e,t,n,r):this._writeFileUsingPut(e,t,n,r)},e.prototype._writeFileUsingForm=function(e,t,n,r){var a,i,o,s;return o=e.lastIndexOf("/"),-1===o?(a=e,e=""):(a=e.substring(o),e=e.substring(0,o)),i={file:a},n&&(n.noOverwrite&&(i.overwrite="false"),n.lastVersionTag?i.parent_rev=n.lastVersionTag:(n.parentRev||n.parent_rev)&&(i.parent_rev=n.parentRev||n.parent_rev)),s=new C.Util.Xhr("POST",""+this._urls.postFile+"/"+this._urlEncodePath(e)),s.setParams(i).signWithOauth(this._oauth).setFileField("file",a,t,"application/octet-stream"),delete i.file,this._dispatchXhr(s,function(e,t){return r?r(e,C.File.Stat.parse(t)):void 0})},e.prototype._writeFileUsingPut=function(e,t,n,r){var a,i;return a={},n&&(n.noOverwrite&&(a.overwrite="false"),n.lastVersionTag?a.parent_rev=n.lastVersionTag:(n.parentRev||n.parent_rev)&&(a.parent_rev=n.parentRev||n.parent_rev)),i=new C.Util.Xhr("POST",""+this._urls.putFile+"/"+this._urlEncodePath(e)),i.setBody(t).setParams(a).signWithOauth(this._oauth),this._dispatchXhr(i,function(e,t){return r?r(e,C.File.Stat.parse(t)):void 0})},e.prototype.resumableUploadStep=function(e,t,n){var r,a;return t?(r={offset:t.offset},t.tag&&(r.upload_id=t.tag)):r={offset:0},a=new C.Util.Xhr("POST",this._urls.chunkedUpload),a.setBody(e).setParams(r).signWithOauth(this._oauth),this._dispatchXhr(a,function(e,t){return e&&e.status===C.ApiError.INVALID_PARAM&&e.response&&e.response.upload_id&&e.response.offset?n(null,C.Http.UploadCursor.parse(e.response)):n(e,C.Http.UploadCursor.parse(t))})},e.prototype.resumableUploadFinish=function(e,t,n,r){var a,i;return r||"function"!=typeof n||(r=n,n=null),a={upload_id:t.tag},n&&(n.lastVersionTag?a.parent_rev=n.lastVersionTag:(n.parentRev||n.parent_rev)&&(a.parent_rev=n.parentRev||n.parent_rev),n.noOverwrite&&(a.overwrite="false")),i=new C.Util.Xhr("POST",""+this._urls.commitChunkedUpload+"/"+this._urlEncodePath(e)),i.setParams(a).signWithOauth(this._oauth),this._dispatchXhr(i,function(e,t){return r?r(e,C.File.Stat.parse(t)):void 0})},e.prototype.stat=function(e,t,n){var r,a,i;return n||"function"!=typeof t||(n=t,t=null),a={},r=!1,t&&(t.versionTag?a.rev=t.versionTag:t.rev&&(a.rev=t.rev),t.contentHash?a.hash=t.contentHash:t.hash&&(a.hash=t.hash),(t.removed||t.deleted)&&(a.include_deleted="true"),t.readDir&&(a.list="true",t.readDir!==!0&&(a.file_limit=t.readDir.toString())),t.cacheHash&&(a.hash=t.cacheHash),t.httpCache&&(r=!0)),a.include_deleted||(a.include_deleted="false"),a.list||(a.list="false"),i=new C.Util.Xhr("GET",""+this._urls.metadata+"/"+this._urlEncodePath(e)),i.setParams(a).signWithOauth(this._oauth,r),this._dispatchXhr(i,function(e,t){var r,a,i;return i=C.File.Stat.parse(t),r=(null!=t?t.contents:void 0)?function(){var e,n,r,i;for(r=t.contents,i=[],e=0,n=r.length;n>e;e++)a=r[e],i.push(C.File.Stat.parse(a));return i}():void 0,n(e,i,r)})},e.prototype.readdir=function(e,t,n){var r;return n||"function"!=typeof t||(n=t,t=null),r={readDir:!0},t&&(null!=t.limit&&(r.readDir=t.limit),t.versionTag?r.versionTag=t.versionTag:t.rev&&(r.versionTag=t.rev),t.contentHash?r.contentHash=t.contentHash:t.hash&&(r.contentHash=t.hash),(t.removed||t.deleted)&&(r.removed=t.removed||t.deleted),t.httpCache&&(r.httpCache=t.httpCache)),this.stat(e,r,function(e,t,r){var a,i;return a=r?function(){var e,t,n;for(n=[],e=0,t=r.length;t>e;e++)i=r[e],n.push(i.name);return n}():null,n(e,a,t,r)})},e.prototype.metadata=function(e,t,n){return this.stat(e,t,n)},e.prototype.makeUrl=function(e,t,n){var r,a,i,o,s,l=this;return n||"function"!=typeof t||(n=t,t=null),a=t&&(t.long||t.longUrl||t.downloadHack)?{short_url:"false"}:{},e=this._urlEncodePath(e),i=""+this._urls.shares+"/"+e,r=!1,o=!1,t&&(t.downloadHack?(r=!0,o=!0):t.download&&(r=!0,i=""+this._urls.media+"/"+e)),s=new C.Util.Xhr("POST",i).setParams(a).signWithOauth(this._oauth),this._dispatchXhr(s,function(e,t){return o&&(null!=t?t.url:void 0)&&(t.url=t.url.replace(l._authServer,l._downloadServer)),n(e,C.File.ShareUrl.parse(t,r))})},e.prototype.history=function(e,t,n){var r,a,i;return n||"function"!=typeof t||(n=t,t=null),a={},r=!1,t&&(null!=t.limit&&(a.rev_limit=t.limit),t.httpCache&&(r=!0)),i=new C.Util.Xhr("GET",""+this._urls.revisions+"/"+this._urlEncodePath(e)),i.setParams(a).signWithOauth(this._oauth,r),this._dispatchXhr(i,function(e,t){var r,a;return a=t?function(){var e,n,a;for(a=[],e=0,n=t.length;n>e;e++)r=t[e],a.push(C.File.Stat.parse(r));return a}():void 0,n(e,a)})},e.prototype.revisions=function(e,t,n){return this.history(e,t,n)},e.prototype.thumbnailUrl=function(e,t){var n;return n=this.thumbnailXhr(e,t),n.paramsToUrl().url},e.prototype.readThumbnail=function(e,t,n){var r,a;return n||"function"!=typeof t||(n=t,t=null),r="b",t&&(t.blob&&(r="blob"),t.arrayBuffer&&(r="arraybuffer"),t.buffer&&(r="buffer")),a=this.thumbnailXhr(e,t),a.setResponseType(r),this._dispatchXhr(a,function(e,t,r){return n(e,t,C.File.Stat.parse(r))})},e.prototype.thumbnailXhr=function(e,t){var n,r;return n={},t&&(t.format?n.format=t.format:t.png&&(n.format="png"),
t.size&&(n.size=t.size)),r=new C.Util.Xhr("GET",""+this._urls.thumbnails+"/"+this._urlEncodePath(e)),r.setParams(n).signWithOauth(this._oauth)},e.prototype.revertFile=function(e,t,n){var r;return r=new C.Util.Xhr("POST",""+this._urls.restore+"/"+this._urlEncodePath(e)),r.setParams({rev:t}).signWithOauth(this._oauth),this._dispatchXhr(r,function(e,t){return n?n(e,C.File.Stat.parse(t)):void 0})},e.prototype.restore=function(e,t,n){return this.revertFile(e,t,n)},e.prototype.findByName=function(e,t,n,r){var a,i,o;return r||"function"!=typeof n||(r=n,n=null),i={query:t},a=!1,n&&(null!=n.limit&&(i.file_limit=n.limit),(n.removed||n.deleted)&&(i.include_deleted=!0),n.httpCache&&(a=!0)),o=new C.Util.Xhr("GET",""+this._urls.search+"/"+this._urlEncodePath(e)),o.setParams(i).signWithOauth(this._oauth,a),this._dispatchXhr(o,function(e,t){var n,a;return a=t?function(){var e,r,a;for(a=[],e=0,r=t.length;r>e;e++)n=t[e],a.push(C.File.Stat.parse(n));return a}():void 0,r(e,a)})},e.prototype.search=function(e,t,n,r){return this.findByName(e,t,n,r)},e.prototype.makeCopyReference=function(e,t){var n;return n=new C.Util.Xhr("GET",""+this._urls.copyRef+"/"+this._urlEncodePath(e)),n.signWithOauth(this._oauth),this._dispatchXhr(n,function(e,n){return t(e,C.File.CopyReference.parse(n))})},e.prototype.copyRef=function(e,t){return this.makeCopyReference(e,t)},e.prototype.pullChanges=function(e,t){var n,r;return t||"function"!=typeof e||(t=e,e=null),n=e?e.cursorTag?{cursor:e.cursorTag}:{cursor:e}:{},r=new C.Util.Xhr("POST",this._urls.delta),r.setParams(n).signWithOauth(this._oauth),this._dispatchXhr(r,function(e,n){return t(e,C.Http.PulledChanges.parse(n))})},e.prototype.delta=function(e,t){return this.pullChanges(e,t)},e.prototype.pollForChanges=function(e,t,n){var r,a;return n||"function"!=typeof t||(n=t,t=null),r=e.cursorTag?{cursor:e.cursorTag}:{cursor:e},t&&"timeout"in t&&(r.timeout=t.timeout),a=new C.Util.Xhr("GET",this._urls.longpollDelta),a.setParams(r),this._dispatchXhr(a,function(e,t){var r;if("string"==typeof t)try{t=JSON.parse(t)}catch(e){r=e,t=null}return n(e,C.Http.PollResult.parse(t))})},e.prototype.mkdir=function(e,t){var n;return n=new C.Util.Xhr("POST",this._urls.fileopsCreateFolder),n.setParams({root:"auto",path:this._normalizePath(e)}).signWithOauth(this._oauth),this._dispatchXhr(n,function(e,n){return t?t(e,C.File.Stat.parse(n)):void 0})},e.prototype.remove=function(e,t){var n;return n=new C.Util.Xhr("POST",this._urls.fileopsDelete),n.setParams({root:"auto",path:this._normalizePath(e)}).signWithOauth(this._oauth),this._dispatchXhr(n,function(e,n){return t?t(e,C.File.Stat.parse(n)):void 0})},e.prototype.unlink=function(e,t){return this.remove(e,t)},e.prototype.delete=function(e,t){return this.remove(e,t)},e.prototype.copy=function(e,t,n){var r,a;return r={root:"auto",to_path:this._normalizePath(t)},e instanceof C.File.CopyReference?r.from_copy_ref=e.tag:r.from_path=this._normalizePath(e),a=new C.Util.Xhr("POST",this._urls.fileopsCopy),a.setParams(r).signWithOauth(this._oauth),this._dispatchXhr(a,function(e,t){return n?n(e,C.File.Stat.parse(t)):void 0})},e.prototype.move=function(e,t,n){var r;return r=new C.Util.Xhr("POST",this._urls.fileopsMove),r.setParams({root:"auto",from_path:this._normalizePath(e),to_path:this._normalizePath(t)}).signWithOauth(this._oauth),this._dispatchXhr(r,function(e,t){return n?n(e,C.File.Stat.parse(t)):void 0})},e.prototype.appInfo=function(e,t){var n;return t||"function"!=typeof e||(t=e,e=this._oauth.credentials().key),n=new C.Util.Xhr("GET",this._urls.appsInfo),n.setParams({app_key:e}),this._dispatchXhr(n,function(n,r){return t(n,C.Http.AppInfo.parse(r,e))})},e.prototype.isAppDeveloper=function(e,t,n){var r;return"object"==typeof e&&"uid"in e&&(e=e.uid),n||"function"!=typeof t?"object"==typeof t&&"key"in t&&(t=t.key):(n=t,t=this._oauth.credentials().key),r=new C.Util.Xhr("GET",this._urls.appsCheckDeveloper),r.setParams({app_key:t,uid:e}),this._dispatchXhr(r,function(e,t){return t?n(e,t.is_developer):n(e)})},e.prototype.hasOauthRedirectUri=function(e,t,n){var r;return n||"function"!=typeof t?"object"==typeof t&&"key"in t&&(t=t.key):(n=t,t=this._oauth.credentials().key),r=new C.Util.Xhr("GET",this._urls.appsCheckRedirectUri),r.setParams({app_key:t,redirect_uri:e}),this._dispatchXhr(r,function(e,t){return t?n(e,t.has_redirect_uri):n(e)})},e.prototype.reset=function(){var e;return this._uid=null,this._oauth.reset(),e=this.authStep,this.authStep=this._oauth.step(),e!==this.authStep&&this.onAuthStepChange.dispatch(this),this.authError=null,this._credentials=null,this},e.prototype.setCredentials=function(e){var t;return t=this.authStep,this._oauth.setCredentials(e),this.authStep=this._oauth.step(),this._uid=e.uid||null,this.authError=null,this._credentials=null,t!==this.authStep&&this.onAuthStepChange.dispatch(this),this},e.prototype.appHash=function(){return this._oauth.appHash()},e.prototype.setupUrls=function(){return this._apiServer=this._chooseApiServer(),this._urls={authorize:""+this._authServer+"/1/oauth2/authorize",token:""+this._apiServer+"/1/oauth2/token",signOut:""+this._apiServer+"/1/unlink_access_token",accountInfo:""+this._apiServer+"/1/account/info",getFile:""+this._fileServer+"/1/files/auto",postFile:""+this._fileServer+"/1/files/auto",putFile:""+this._fileServer+"/1/files_put/auto",metadata:""+this._apiServer+"/1/metadata/auto",delta:""+this._apiServer+"/1/delta",longpollDelta:""+this._notifyServer+"/1/longpoll_delta",revisions:""+this._apiServer+"/1/revisions/auto",restore:""+this._apiServer+"/1/restore/auto",search:""+this._apiServer+"/1/search/auto",shares:""+this._apiServer+"/1/shares/auto",media:""+this._apiServer+"/1/media/auto",copyRef:""+this._apiServer+"/1/copy_ref/auto",thumbnails:""+this._fileServer+"/1/thumbnails/auto",chunkedUpload:""+this._fileServer+"/1/chunked_upload",commitChunkedUpload:""+this._fileServer+"/1/commit_chunked_upload/auto",fileopsCopy:""+this._apiServer+"/1/fileops/copy",fileopsCreateFolder:""+this._apiServer+"/1/fileops/create_folder",fileopsDelete:""+this._apiServer+"/1/fileops/delete",fileopsMove:""+this._apiServer+"/1/fileops/move",appsInfo:""+this._apiServer+"/1/apps/info",appsCheckDeveloper:""+this._apiServer+"/1/apps/check_developer",appsCheckRedirectUri:""+this._apiServer+"/1/apps/check_redirect_uri",getDb:""+this._apiServer+"/1/datastores/get_datastore",getOrCreateDb:""+this._apiServer+"/1/datastores/get_or_create_datastore",createDb:""+this._apiServer+"/1/datastores/create_datastore",listDbs:""+this._apiServer+"/1/datastores/list_datastores",deleteDb:""+this._apiServer+"/1/datastores/delete_datastore",getSnapshot:""+this._apiServer+"/1/datastores/get_snapshot",getDeltas:""+this._apiServer+"/1/datastores/get_deltas",putDelta:""+this._apiServer+"/1/datastores/put_delta",datastoreAwait:""+this._apiServer+"/1/datastores/await"},this},e.prototype._chooseApiServer=function(){var e,t;return t=Math.floor(Math.random()*(this._maxApiServer+1)),e=0===t?"":t.toString(),this._serverRoot.replace("$",e)},e.prototype.authStep=null,e.ERROR=0,e.RESET=1,e.PARAM_SET=2,e.PARAM_LOADED=3,e.AUTHORIZED=4,e.DONE=5,e.SIGNED_OUT=6,e.prototype._urlEncodePath=function(e){return C.Util.Xhr.urlEncodeValue(this._normalizePath(e)).replace(/%2F/gi,"/")},e.prototype._normalizePath=function(e){var t;if("/"===e.substring(0,1)){for(t=1;"/"===e.substring(t,t+1);)t+=1;return e.substring(t)}return e},e.prototype.authorizeUrl=function(){var e;return e=this._oauth.authorizeUrlParams(this._driver.authType(),this._driver.url()),this._urls.authorize+"?"+C.Util.Xhr.urlEncode(e)},e.prototype.getAccessToken=function(e){var t,n;return t=this._oauth.accessTokenParams(this._driver.url()),n=new C.Util.Xhr("POST",this._urls.token).setParams(t).addOauthParams(this._oauth),this._dispatchXhr(n,function(t,n){return t&&t.status===C.ApiError.INVALID_PARAM&&t.response&&t.response.error&&(t=new C.AuthError(t.response)),e(t,n)})},e.prototype._dispatchLongPollXhr=function(e,t,n){return null==n&&(n=6e4),this._dispatchXhr(e,t,n)},e.prototype._dispatchXhr=function(e,t,n){var r,a,i=this;return null==n&&(n=1e4),r=setTimeout(function(){return i._handleLongRequest(e)},2*n),e.setCallback(function(e,n,a,i){return clearTimeout(r),t(e,n,a,i)}),e.onError=this._xhrOnErrorHandler,e.prepare(),a=e.xhr,this.onXhr.dispatch(e)&&e.send(),a},e.prototype._handleXhrError=function(e,t){var n=this;return e.status===C.ApiError.INVALID_TOKEN&&this.authStep===c.DONE&&(this.authError=e,this.authStep=c.ERROR,this.onAuthStepChange.dispatch(this),this._driver&&this._driver.onAuthStepChange)?(this._driver.onAuthStepChange(this,function(){return n.onError.dispatch(e),t(e)}),null):(this.onError.dispatch(e),void t(e))},e.prototype._handleLongRequest=function(){return this.setupUrls()},e.prototype._defaultServerRoot=function(){return"https://api$.dropbox.com"},e.prototype._defaultAuthServer=function(){return this._serverRoot.replace("api$","www")},e.prototype._defaultFileServer=function(){return this._serverRoot.replace("api$","api-content")},e.prototype._defaultDownloadServer=function(){return"https://dl.dropboxusercontent.com"},e.prototype._defaultNotifyServer=function(){return this._serverRoot.replace("api$","api-notify")},e.prototype._defaultMaxApiServer=function(){return 30},e.prototype._computeCredentials=function(){var e;e=this._oauth.credentials(),this._uid&&(e.uid=this._uid),this._serverRoot!==this._defaultServerRoot()&&(e.server=this._serverRoot),this._maxApiServer!==this._defaultMaxApiServer()&&(e.maxApiServer=this._maxApiServer),this._authServer!==this._defaultAuthServer()&&(e.authServer=this._authServer),this._fileServer!==this._defaultFileServer()&&(e.fileServer=this._fileServer),this._downloadServer!==this._defaultDownloadServer()&&(e.downloadServer=this._downloadServer),this._notifyServer!==this._defaultNotifyServer()&&(e.notifyServer=this._notifyServer),this._credentials=e},e}(),c=C.Client,C.Datastore=function(){function e(e,t){var n=this;this._datastore_manager=e,this._managed_datastore=t,this._dsid=this._managed_datastore.get_dsid(),this._handle=this._managed_datastore.get_handle(),this._record_cache=new q(this),this._last_used_timestamp=0,this.recordsChanged=new C.Util.EventSource,this.syncStatusChanged=new C.Util.EventSource,this._timeoutWrapper=function(e){return e},this._evt_mgr=new T,this._evt_mgr.register(this._managed_datastore.syncStateChanged,function(){return n._syncSoon(),n.syncStatusChanged.dispatch(null)}),this._syncPending=!1,this._closed=!1,this._metadata_table=new C.Datastore.Table(this,":info"),this._metadata_table.setResolutionRule("mtime","max")}return e.DATASTORE_SIZE_LIMIT=10485760,e.RECORD_COUNT_LIMIT=1e5,e.BASE_DATASTORE_SIZE=1e3,e.TEAM="team",e.PUBLIC="public",e.OWNER="owner",e.EDITOR="editor",e.VIEWER="viewer",e.NONE="none",e.prototype.recordsChanged=null,e.prototype.syncStatusChanged=null,e.int64=function(e){var t,n;if(K.is_number(e)&&null!=e[ee.INT64_TAG])return ee.validateInt64(e);if(K.is_string(e)){if(!ee.is_valid_int64_string(e))throw new Error("Not a valid int64 in string form: "+e);return n=new Number(parseInt(e,10)),n[ee.INT64_TAG]=e,ee.validateInt64(n)}if(!K.is_number(e)||!isFinite(e))throw new Error("Not a finite number: "+e);if(Number(e)!==Math.round(e))throw new Error("Number is not an integer: "+e);if(t=e.toFixed(),!ee.is_valid_int64_string(t))throw new Error("Number not in int64 range: "+e);return n=new Number(e),n[ee.INT64_TAG]=t,ee.validateInt64(n)},e.isInt64=function(e){return ee.isInt64(e)},e.prototype.getModifiedTime=function(){var e;return e=this._metadata_table.get("info"),null==e?null:e.get("mtime")},e.prototype.getTitle=function(){var e;return e=this._metadata_table.get("info"),null==e?null:e.get("title")},e.prototype.setTitle=function(e){var t;if(null!=e&&!K.string(e))throw new Error("Title must be a string or null!");return t=this._metadata_table.getOrInsert("info",{}),t.set("title",e)},e.prototype.isShareable=function(){return"."===this._dsid[0]},e.prototype._checkShareable=function(){if(!this.isShareable())throw new Error("Datastore is not shareable")},e.prototype.getEffectiveRole=function(){var e;return this.isShareable()?(e=this._managed_datastore.get_effective_role(),C.Datastore._roleFromInt(e)):C.Datastore.OWNER},e.prototype.isWritable=function(){var e;return e=this.getEffectiveRole(),e===C.Datastore.OWNER||e===C.Datastore.EDITOR},e.prototype._checkWritable=function(){if(!this.isWritable())throw new Error("Datastore is not writable")},e.prototype._checkRole=function(e){if(e!==C.Datastore.EDITOR&&e!==C.Datastore.VIEWER)throw new Error("Invalid role: "+e)},e.prototype._checkPrincipal=function(e){if(e!==C.Datastore.TEAM&&e!==C.Datastore.PUBLIC&&!e.match(/^u[1-9][0-9]*$/))throw new Error("Invalid principal: "+e)},e.prototype._getRole=function(e){var t,n,r;return t=null!=(n=this.getTable(ee.ACL_TID))&&null!=(r=n.get(e))?r.get("role"):void 0,null==t?C.Datastore.NONE:C.Datastore._roleFromInt(t)},e.prototype.getRole=function(e){return this._checkShareable(),this._checkPrincipal(e),this._getRole(e)},e.prototype.setRole=function(e,t){var n;return t===C.Datastore.NONE?void this.deleteRole(e):(this._checkShareable(),this._checkPrincipal(e),this._checkRole(t),this._checkWritable(),n=C.Datastore.int64(C.Datastore._intFromRole(t)),this.getTable(ee.ACL_TID).getOrInsert(e).update({role:n}))},e.prototype.deleteRole=function(e){var t;return this._checkShareable(),this._checkPrincipal(e),this._checkWritable(),null!=(t=this.getTable(ee.ACL_TID).get(e))?t.deleteRecord():void 0},e.prototype.listRoles=function(){var e,t,n,r,a,i;for(this._checkShareable(),n={},i=this.getTable(ee.ACL_TID).query(),r=0,a=i.length;a>r;r++)t=i[r],e=t.getId(),n[e]=this._getRole(e);return n},e._roleFromInt=function(e){switch(!1){case!(e>=ee.ROLE_OWNER):return C.Datastore.OWNER;case!(e>=ee.ROLE_EDITOR):return C.Datastore.EDITOR;case!(e>=ee.ROLE_VIEWER):return C.Datastore.VIEWER;default:return C.Datastore.NONE}},e._intFromRole=function(e){switch(e){case C.Datastore.OWNER:return ee.ROLE_OWNER;case C.Datastore.EDITOR:return ee.ROLE_EDITOR;case C.Datastore.VIEWER:return ee.ROLE_VIEWER;default:return 0}},e.prototype.getTable=function(e){if(this._checkNotClosed(),!C.Datastore.Table.isValidId(e))throw new Error("Invalid table ID: "+e);return new C.Datastore.Table(this,e)},e.prototype.listTableIds=function(){return this._checkNotClosed(),this._managed_datastore.list_tables()},e.prototype.getRecordCount=function(){return this._managed_datastore.get_record_count()},e.prototype.getSize=function(){return this._managed_datastore.get_size()},e.prototype.toString=function(){var e;return e=this._closed?"[closed] ":"","Datastore("+e+this._dsid+" ["+this._handle+"])"},e.prototype.close=function(){return this._closed=!0,this._evt_mgr.unregister_all(),this._listeners=[],void this._datastore_manager._obj_manager.close(this._dsid)},e.prototype.getId=function(){return this._dsid},e.prototype.getSyncStatus=function(){return{uploading:this._managed_datastore.get_outgoing_delta_count()>0}},e.isValidId=function(e){var t;return t=new RegExp(K.DS_ID_REGEX),K.is_string(e)&&t.test(e)},e.isValidShareableId=function(e){return this.isValidId(e)&&"."===e[0]},e.prototype._generateRid=function(){var e,t,n,r;for(r="_",t="_js_",n=Math.round(1e3*Date.now()),n<=this._last_used_timestamp&&(n=this._last_used_timestamp+1),this._last_used_timestamp=n,e=n.toString(32);e.length<11;)e="0"+e;return r+e+t+ee.randomWeb64String(5)},e.prototype._syncSoon=function(){var e=this;if(this._managed_datastore.is_deleted())throw new Error("Cannot sync deleted datastore "+this._dsid);return this._checkNotClosed(),void(this._syncPending||(this._syncPending=!0,setTimeout(this._timeoutWrapper(function(){return e._syncPending=!1,e._sync()}),0)))},e.prototype._sync=function(){var e,t,n,r,a,i,o,s,l;this._checkNotClosed(),a=this._managed_datastore.sync(),r=this._resolveAffectedRecordMap(a),e=!1;for(o in r)for(n=r[o],s=0,l=n.length;l>s;s++)t=n[s],Q(o===t._tid,"tid mismatch"),e=!0,i=t._rid,this._managed_datastore.query(o,i)||(t._deleted=!0,this._record_cache.remove(o,i));return void(e&&this.recordsChanged.dispatch(new G(r,(!1))))},e.prototype._resolveAffectedRecordMap=function(e){var t,n,r,a,i;n={};for(i in e){a=e[i];for(r in a)t=this._record_cache.getOrCreate(i,r),null==n[i]&&(n[i]=[]),n[i].push(t)}return n},e.prototype._recordsChangedLocally=function(e){return void(e.length>0&&(this.recordsChanged.dispatch(G._fromRecordList(e,!0)),this._syncSoon()))},e.prototype._checkNotClosed=function(){if(this._closed||!this._managed_datastore._open)throw new Error("Datastore is already closed: "+this)},e}(),ee=C.Datastore.impl={},K=C.Datastore.impl.T={},K.identity=function(e){return e},K.get_coerce_fn=function(e){return null!=e.coerce?e.coerce:null!=e.load_json?function(t){return t instanceof e?t:e.load_json(t)}:K.identity},K.get_T_fn=function(e){return null!=e.Type?e.Type:e},K.str=function(e){return K.is_string(e)?e:K.is_function(e)?e():JSON.stringify(e)},K.assert=function(e,t){if(!e)throw new Error(K.str(t))},Q=K.assert,K.check=function(e,t,n,r,a,i){if(e)return n;throw K.fail(t,n,r,a,i),new Error("unreachable")},K.safe_to_string=function(e){var t,n;try{if(n=e.toString(),"[object Object]"!==n)return n}catch(e){t=e}try{return JSON.stringify(e)}catch(e){t=e}try{if(n=e.constructor.name,null!=n?n.match(/^[A-Za-z0-9_]+$/):void 0)return n}catch(e){t=e}return"[T.safe_to_string failed]"},K.fail=function(e,t,n,r,a){var i,o;throw o=null!=n?null!=r?null!=a?"Wanted "+K.str(r)+", but "+K.str(n)+" in "+K.str(a)+" "+K.str(e):"Wanted "+K.str(r)+", but "+K.str(n)+" "+K.str(e):""+K.str(n)+" "+K.str(e):null!=r?null!=a?"Wanted "+K.str(r)+", but in "+K.str(a)+" "+K.str(e):"Wanted "+K.str(r)+", but "+K.str(e):""+K.str(e),i=new Error(""+o+": "+K.safe_to_string(t)),console.error(i),i},K.any=function(e){return e},K.defined=function(e,t,n,r){return null==n&&(n="defined"),K.check("undefined"!=typeof e,"is undefined",e,t,n,r),e},K.nonnull=function(e,t,n,r){return null==n&&(n="nonnull"),K.defined(e,t,n,r),K.check(null!=e,"is null",e,t,n,r),e},K.member=function(e){var t,n;return n="value in "+JSON.stringify(e),t="not in "+JSON.stringify(e),function(r,a,i,o){return null==i&&(i=n),K.check(re.call(e,r)>=0,t,r,a,i,o)}},K.object=function(e,t,n,r){return null==n&&(n="object"),K.nonnull(e,t,n,r),K.check("object"==typeof e,"not an object",e,t,n,r),e},K.bool=function(e,t,n,r){return null==n&&(n="bool"),K.nonnull(e,t,n,r),K.check(e===!0||e===!1,"is not bool",e,t,n,r),e},K.string=function(e,t,n,r){return null==n&&(n="string"),K.nonnull(e,t,n,r),K.check(K.is_string(e),"is not a string",e,t,n,r),e},K.num=function(e,t,n,r){return null==n&&(n="num"),K.nonnull(e,t,n,r),K.check("number"==typeof e,"is not numeric",e,t,n,r),e},K.int=function(e,t,n,r){return null==n&&(n="int"),K.num(e,t,n,r),K.check(0===e%1,"is not an integer",e,t,n,r),e},K.uint=function(e,t,n,r){return null==n&&(n="uint"),K.int(e,t,n,r),K.check(e>=0,"is negative",e,t,n,r),e},K.nullable=function(e){var t,n;return n="nullable("+e+")",t=function(t,r,a,i){return null==a&&(a=function(){return n}),K.defined(t,r,a,i),null!=t&&K.get_T_fn(e)(t,r,a,i),t},t.toString=function(){return n},t.coerce=function(t){return null!=t?K.get_coerce_fn(e)(t):null},t.fromJSON=function(n){return null!=n?null!=e.fromJSON?e.fromJSON(n):t.coerce(n):null},t},K.array=function(e,t,n,r){return null==n&&(n="array"),K.nonnull(e,t,n,r),K.check(K.is_array(e),"is not an array",e,t,n,r),e},K.arrayOf=function(e){var t,n;return n="arrayOf("+e+")",t=function(t,r,a,i){var o,s,l,u,c;for(null==a&&(a=n),K.array(t,r,a,i),l=u=0,c=t.length;c>u;l=++u)o=t[l],s=function(){return null!=r?"element "+l+" of "+K.str(r):"element "+l},K.get_T_fn(e)(o,s,a,i);return t},t.toString=function(){return n},t.coerce=function(t){var r,a,i,o;for(K.array(t,null,n),o=[],a=0,i=t.length;i>a;a++)r=t[a],o.push(K.get_coerce_fn(e)(r));return o},t.fromJSON=function(r){var a,i,o,s;if(K.array(r,"fromJSON input",n),null!=e.fromJSON){for(s=[],i=0,o=r.length;o>i;i++)a=r[i],s.push(e.fromJSON(a));return s}return t.coerce(r)},t},K.instance=function(e,t,n,r,a){var i;if(!(t instanceof Function))throw new Error("Invalid type given: "+t);return e instanceof t||(null==r&&(r=t.name),K.check(!1,"got instance of "+(null!=e&&null!=(i=e.constructor)?i.name:void 0),e,n,r,a)),e},K.unimplemented=function(e){return function(){throw new Error("unimplemented "+e)}},K.startsWith=function(e,t){return 0===e.lastIndexOf(t,0)},K.string_matching=function(e){var t;return K.string(e),K.check(/^[^].*[$]$/.test(e),"does not start with ^ and end with $",e),t="does not match regex "+e,function(n,r,a,i){return K.string(n,r,a,i),K.check(new RegExp(e).test(n),t,n,r,a,i),n}},K.is_defined=function(e){return"undefined"!=typeof e},K.is_bool=function(e){return e===!0||e===!1||e&&"object"==typeof e&&e.constructor===Boolean},K.is_number=function(e){return"number"==typeof e||e&&"object"==typeof e&&e.constructor===Number},K.is_json_number=function(e){return K.is_number(e)&&!isNaN(e)&&isFinite(e)},K.is_string=function(e){return"string"==typeof e||e&&"object"==typeof e&&e.constructor===String},K.is_function=function(e){return"function"==typeof e},K.is_object=function(e){return null!=e&&"object"==typeof e},K.is_array=function(e){return"[object Array]"===Object.prototype.toString.call(e)},K.is_empty=function(e){return 0===Object.keys(e).length},K.is_date=function(e){return"[object Date]"===Object.prototype.toString.call(e)},K.isUint8Array=function(e){return"[object Uint8Array]"===Object.prototype.toString.call(e)},K.is_simple_map=function(e){var t,n;if(null==e||"object"!=typeof e)return!1;for(t in e)if(n=e[t],!Object.prototype.hasOwnProperty.call(e,t))return!1;return!0},K.simple_map=function(e,t,n,r){var a,i;null==n&&(n="simple map"),K.object(e,t,n,r);for(a in e)i=e[a],K.check(Object.prototype.hasOwnProperty.call(e,a),function(){return"property "+a+" is inherited"},e,t,n,e);return e},K.simple_typed_map=function(e,t,n){var r,a,i;return r=K.get_coerce_fn(t),a=K.get_coerce_fn(n),i=function(r,a,i,o){var s,l;null==i&&(i=e),K.simple_map(r,a,i,o);for(s in r)l=r[s],K.get_T_fn(t)(s,"property",null,r),K.get_T_fn(n)(l,function(){return"value of property "+s},null,r);return r},i.coerce=function(t){var n,i,o;K.simple_map(t,null,e),i={};for(n in t)o=t[n],i[r(n)]=a(o);return i},i.fromJSON=function(t){var a,i,o;K.simple_map(t,null,e),i={};for(a in t)o=t[a],i[r(a)]=null!=n.fromJSON?n.fromJSON(o):o;return i},i},K.DS_ID_REGEX="^[-_a-z0-9]([-_a-z0-9.]{0,62}[-_a-z0-9])?$|^[.][-_a-zA-Z0-9]{1,63}$",K.dsid=function(e,t,n,r){return null==n&&(n="dsid"),K.string_matching(K.DS_ID_REGEX)(e,t,n,r),e},K.SS_ID_REGEX="^[-._+/=a-zA-Z0-9]{1,64}$|^:[-._+/=a-zA-Z0-9]{1,63}$",K.tid=function(e,t,n,r){return null==n&&(n="tid"),K.string_matching(K.SS_ID_REGEX)(e,t,n,r),e},K.rowid=function(e,t,n,r){return null==n&&(n="rowid"),K.string_matching(K.SS_ID_REGEX)(e,t,n,r),e},K.field_name=function(e,t,n,r){return null==n&&(n="field name"),K.string_matching(K.SS_ID_REGEX)(e,t,n,r),e},function(){var e,t,n;n=[];for(e in K)t=K[e],K.hasOwnProperty(e)?n.push(function(e){return t.toString=function(){return"T."+e}}(e)):n.push(void 0);return n}(),ee.struct=te={},te.define=function(e,t){var n,r,a,i,o,s,l,u,c,d,p,f,h,g,m,v;for(K.string(e,"struct name"),K.array(t,"fields"),g=[],h={},o=m=0,v=t.length;v>m;o=++m){a=t[o],K.array(a,"field","field descriptor",t),K.check(2<=a.length&&a.length<=3,"does not have length 2 or 3",a,"field descriptor"),d=K.string(a[0],"field name","field descriptor",t),f=K.nonnull(a[1],"field type","field descriptor",t),p=a.length<=2?{}:K.nonnull(a[2],"map of field options","field descriptor",t);for(u in p)"init"!==u&&"initFn"!==u&&K.fail("unknown option "+u,p,"field options","field descrptor",t);re.call(p,"init")>=0&&re.call(p,"initFn")>=0&&K.fail("both 'init' and 'initFn' specified",p,"field options","field descriptor",t),l="initFn"in p?p.initFn:"init"in p?(s=p.init,function(e){return function(){return e}}(s)):null,n={name:d,type:f,initFn:l},i="undefined"!=typeof X&&null!==X?new X(n):n,g.push(i),h[d]=i}return c="initializer for "+e+" (fields "+function(){var e,t,n;for(n=[],e=0,t=g.length;t>e;e++)a=g[e],n.push(a.name);return n}().join(", ")+")",r=function(e){var t,n,a;K.defined(e,"x","initializer");for(d in e)t=e[d],e.hasOwnProperty(d)&&K.check(null!=h[d],function(){return"has an unexpected field "+d},e,"initializer");for(n=0,a=g.length;a>n;n++)i=g[n],e[i.name]&&!e.hasOwnProperty(i.name)&&K.fail("Has an indirect property "+i.name,e,"initializer"),e.hasOwnProperty(i.name)?(t=e[i.name],this[i.name]=K.get_coerce_fn(i.type)(t)):null!=i.initFn?this[i.name]=i.initFn():K.fail("lacks the field "+i.name,e,"initializer");return r.Type(this,"initializer",c,this),this},r.Type=function(t,n,a,o){var s,l,u;for(K.defined(t,n,a,o),K.check(t instanceof r,function(){return"is not an instance of "+e},t,n,a,o),l=0,u=g.length;u>l;l++)i=g[l],K.check(t.hasOwnProperty(i.name),function(){return"lacks the field "+i.name},t,n,a,o),K.get_T_fn(i.type)(t[i.name],i.name,a,o);for(d in t)s=t[d],t.hasOwnProperty(d)&&K.check(null!=h[d],"has an unexpected field",d,n,a,o);return t},r.coerce=function(e){return e instanceof r?(r.Type(e),e):new r(e)},r.prototype.toString=function(){var e,t,n,r,a;for(t=this,e=[],r=0,a=g.length;a>r;r++)i=g[r],n=t[i.name],e.push(""+i.name+": "+(K.is_object(n)&&K.is_function(n.toString)?n.toString():JSON.stringify(n)));return"{"+e.join(", ")+"}"},r.prototype.toJSON=function(){var e,t,n,r;for(e=this,t=function(){return""+e},n=0,r=g.length;r>n;n++)i=g[n],K.get_T_fn(i.type)(this[i.name],i.name,null,t);return this},r.fromJSON=function(e){var t,n;K.simple_map(e,"input"),t={};for(u in e)n=e[u],i=h[u],null!=i&&(f=i.type,t[u]=null!=f.fromJSON?f.fromJSON(n):n);return new r(t)},r.toString=function(){return"struct "+e},r},X=te.define("StructField",[["name",K.string],["type",K.defined],["initFn",K.defined]]),te.toJSO=function(e){var t,n,r,a;if("object"!=typeof e)return e;if(K.is_array(e))return function(){var n,r,a;for(a=[],n=0,r=e.length;r>n;n++)t=e[n],a.push(te.toJSO(t));return a}();r={};for(n in e)a=e[n],e.hasOwnProperty(n)&&(r[n]=te.toJSO(a));return r},te.union_as_list=function(e,t){var n,r,a,i,o,s,l,u,c,d,p;for(K.string(e,"union name"),K.array(t,"variants"),r=function(){throw new Error("Use "+e+".from_array instead")},u={},l=[],c=function(t,n,a){var i;return i=te.define(""+e+"."+t,a),i.prototype.tag=function(){return t},i.prototype.toString=function(){return""+e+"."+t+"("+JSON.stringify(this)+")"},i.prototype.toJSON=function(){var e,r,a,i,o,s;for(e=[t],o=0,s=n.length;s>o;o++)r=n[o],a=r[0],i=r[1],K.get_T_fn(i)(this[a],a),e.push(this[a]);return e},i.from_array=function(r){var a,o,s,l,u,c,d;for(u="initializer for "+e,K.array(r,"initializer",u),K.check(r.length===n.length+1,"does not have length "+(n.length+1),r,"initializer",u),K.check(r[0]===t,"does not have tag "+t,r,"initializer",u),a={_tag:t},s=c=0,d=n.length;d>c;s=++c)o=n[s],l=o[0],a[l]=r[s+1];return new i(a)},i.fromJSON=function(e){return e.length>n.length+1&&(e=e.slice(0,n.length+1)),i.from_array(e)},i.coerce=function(e){return e instanceof i?(i.Type(e),e):i.from_array(e)},u[t]=i,r[t]=i},d=0,p=t.length;p>d;d++)a=t[d],K.array(a,"variant","variant descriptor",t),K.check(2===a.length,"does not have length 2",a,"variant descriptor",t),s=K.string(a[0],"tag","tag",t),i=K.array(a[1],"fields","variant descriptor",t),o=i.slice(0),o.unshift(["_tag",K.member([s])]),c(s,i,o),l.push(s);return n="initializer for "+e+" (variants "+l.join(", ")+")",r.from_array=function(t){var n,r;return r="initializer for "+e,K.array(t,"initializer",r),K.check(t.length>=1,"lacks a tag",t,"initializer",r),n=t[0],K.string(n,"tag",r,t),K.member(l)(n),u[n].from_array(t)},r.fromJSON=function(t){var n,r;return r="initializer for "+e,K.array(t,"initializer",r),K.check(t.length>=1,"lacks a tag",t,"initializer",r),n=t[0],K.string(n,"tag",r,t),K.member(l)(n),u[n].fromJSON(t)},r.Type=function(t,n,r,a){var i;return null==r&&(r=""+e+".Type"),K.defined(t,n,r,a),K.defined(t.tag,"tag",r,a),i=t.tag(),K.string(i,"tag","initializer",t),K.member(l)(i),u[i].Type(t,null,"object of type "+e),t},r.coerce=function(e){var t,n;for(n in u)if(t=u[n],e instanceof t)return t.Type(e),e;return r.from_array(e)},r.toString=function(){return"union "+e},r},ee.nonzero_int64_approximate_regex=new RegExp("^-?[1-9][0-9]{0,18}$"),ee.int64_max_str="9223372036854775807",ee.int64_min_str="-9223372036854775808",ee.ACL_TID=":acl",ee.ROLE_OWNER=3e3,ee.ROLE_EDITOR=2e3,ee.ROLE_VIEWER=1e3,ee.int64_string_less_than=function(e,t){var n,r,a;return e!==t&&(r="0"===e.charAt(0),a="0"===t.charAt(0),!(!r||a)||!(a&&!r)&&(n=e.length===t.length?e>t:e.length>t.length,r&&a?n:!n))},ee.is_valid_int64_string=function(e){return!!K.is_string(e)&&("0"===e||!!ee.nonzero_int64_approximate_regex.test(e)&&("-"===e.charAt(0)?e.length<ee.int64_min_str.length||e<=ee.int64_min_str:e.length<ee.int64_max_str.length||e<=ee.int64_max_str))},ee.is_wrapped_atomic_field_value=function(e){var t,n,r,a;if(!K.is_simple_map(e))return!1;if(t=Object.keys(e),1!==t.length)return!1;switch(t[0]){case"B":return K.is_string(e.B);case"N":return"nan"===(r=e.N)||"+inf"===r||"-inf"===r;case"I":case"T":return n=null!=(a=e.I)?a:e.T,ee.is_valid_int64_string(n);default:return!1}},ee.is_atomic_field_value=function(e){return K.is_bool(e)||K.is_json_number(e)||K.is_string(e)||ee.is_wrapped_atomic_field_value(e)},ee.is_list_value=function(e){var t,n,r;if(K.is_array(e)){for(n=0,r=e.length;r>n;n++)if(t=e[n],!ee.is_atomic_field_value(t))return!1;return!0}return!1},ee.is_compound_field_value=function(e){return ee.is_atomic_field_value(e)||ee.is_list_value(e)},ee.atomic_field_value=function(e,t,n,r){return null==n&&(n="atomic field value"),K.check(ee.is_atomic_field_value(e),"is not an atomic field value",e,t,n,r),e},ee.list_value=function(e,t,n,r){return null==n&&(n="list value"),K.arrayOf(ee.atomic_field_value)(e,t,n,r),e},ee.compound_field_value=function(e,t,n,r){return null==n&&(n="field value"),K.is_array(e)?ee.list_value(e,t,n,r):ee.atomic_field_value(e,t,n,r)},ee.FieldOp=k=te.union_as_list("FieldOp",[["P",[["value",ee.compound_field_value]]],["D",[]],["LC",[]],["LP",[["at",K.uint],["value",ee.atomic_field_value]]],["LI",[["before",K.uint],["value",ee.atomic_field_value]]],["LD",[["at",K.uint]]],["LM",[["from",K.uint],["to",K.uint]]]]),ee.datadict=K.simple_typed_map("datadict",K.field_name,ee.compound_field_value),ee.update_datadict=K.simple_typed_map("update_datadict",K.field_name,k),ee.Change=r=te.union_as_list("Change",[["I",[["tid",K.tid],["rowid",K.rowid],["fields",ee.datadict]]],["U",[["tid",K.tid],["rowid",K.rowid],["updates",ee.update_datadict]]],["D",[["tid",K.tid],["rowid",K.rowid]]]]),ee.Delta=x=te.define("Delta",[["rev",K.uint],["changes",K.arrayOf(r)],["nonce",K.string]]),M=te.define("ListDatastoresResponseItem",[["dsid",K.string],["handle",K.string],["rev",K.uint],["role",K.nullable(K.uint),{init:null}],["info",K.nullable(ee.datadict),{init:null}]]),ee.ListDatastoresResponse=I=te.define("ListDatastoresResponse",[["token",K.string],["datastores",K.arrayOf(M)]]),L=te.define("GetSnapshotResponseRow",[["tid",K.string],["rowid",K.string],["data",ee.datadict]]),O=te.define("GetSnapshotResponse",[["rev",K.uint],["role",K.nullable(K.uint),{init:null}],["rows",K.arrayOf(L)]]),o=te.define("CreateDatastoreResponse",[["handle",K.string],["rev",K.uint],["created",K.bool],["role",K.nullable(K.uint),{init:null}]]),E=te.define("GetDatastoreResponse",[["handle",K.nullable(K.string),{init:null}],["rev",K.nullable(K.uint),{init:null}],["role",K.nullable(K.uint),{init:null}],["notfound",K.nullable(K.string),{init:null}]]),w=te.define("DeleteDatastoresResponse",[["ok",K.string]]),U=te.define("PutDeltaResponse",[["rev",K.nullable(K.uint),{init:null}],["role",K.nullable(K.uint),{init:null}],["conflict",K.nullable(K.string),{init:null}],["notfound",K.nullable(K.string),{init:null}],["access_denied",K.nullable(K.string),{init:null}]]),P=te.define("GetDeltasResponse",[["deltas",K.nullable(K.arrayOf(x)),{init:null}],["role",K.nullable(K.uint),{init:null}],["notfound",K.nullable(K.string),{init:null}]]),t=te.define("AwaitResponseDeltas",[["deltas",K.simple_typed_map("deltas map",K.string,P)]]),
ee.AwaitResponse=e=te.define("AwaitResponse",[["get_deltas",K.nullable(t),{init:null}],["list_datastores",K.nullable(I),{init:null}]]),n=function(){function e(){this.min_delay_millis=500,this.max_delay_millis=9e4,this.base=1.5,this._failures=0,this.log=!1}return e.prototype.set_log=function(e){this.log=e},e.prototype.set_max_delay_millis=function(e){this.max_delay_millis=e},e.prototype.get_backoff_millis=function(){var e,t;return this._failures+=1,t=Math.min(this.max_delay_millis,this.min_delay_millis*Math.pow(this.base,this._failures-1)),e=(.5+Math.random())*t,this.log&&console.log("get_backoff_millis: failures="+this._failures+", target_delay_millis="+t+", delay_millis="+e),e},e.prototype.reset=function(){return this._failures=0},e}(),W=function(){function e(){this.backoff=new n}var t,r;return r=6e4,t=0,e.prototype.run=function(e,t,n){var a,i,o,s,l,u,c,d=this;return o=null!=(u=t.do_retry)?u:function(){return!0},s=null!=(c=t.giveup_after_ms)?c:r,l=Date.now()+s,i=!1,a=function(){return i?void 0:e(function(){var e,t,r;return e=arguments[0],t=2<=arguments.length?ie.call(arguments,1):[],i?void 0:e&&o(e)?Date.now()>l?(console.error("Giving up due to error",e),n(e)):(r=d.backoff.get_backoff_millis(),console.warn("Retrying in "+r+" ms due to error",e),setTimeout(a,r)):n.apply(null,[e].concat(ie.call(t)))})},a(),function(){return i=!0}},e}(),D=function(){function e(e){this.client=e,this._retry=new W}var t,n;return n=10,t=2419200,e.prototype._run_with_retries=function(e,t,n){var r;return r={giveup_after_ms:1e3*e,do_retry:function(e){var t;return 0===e.status||500<=(t=e.status)&&600>t}},this._retry.run(n,r,t)},e.prototype.delete_db=function(e,t){var r=this;return this._run_with_retries(n,t,function(t){return r.client._deleteDatastore(e,function(e,n){return null!=e?t(e):t(null,n)})})},e.prototype.list_dbs=function(e){var n=this;return this._run_with_retries(t,e,function(e){return n.client._listDatastores(function(t,n){return null!=t?e(t):e(null,n)})})},e.prototype.get_or_create_db=function(e,t){var r=this;return this._run_with_retries(n,t,function(t){return r.client._getOrCreateDatastore(e,function(e,n){return null!=e?t(e):t(null,n)})})},e.prototype.create_db=function(e,t,r){var a=this;return this._run_with_retries(n,r,function(n){return a.client._createDatastore(e,t,function(e,t){return null!=e?n(e):n(null,t)})})},e.prototype.get_db=function(e,t){var r=this;return this._run_with_retries(n,t,function(t){return r.client._getDatastore(e,function(e,n){return null!=e?t(e):t(null,n)})})},e.prototype.await=function(e,n,r){var a,i=this;return a=this._run_with_retries(t,r,function(t){return i.client._datastoreAwait(e,n,function(e,n){return null!=e?t(e):t(null,n)})})},e.prototype.put_delta=function(e,n,r){var a=this;return this._run_with_retries(t,r,function(t){return a.client._putDelta(e,n,function(e,n){return null!=e?t(e):t(null,n)})})},e.prototype.get_snapshot=function(e,t){var r=this;return this._run_with_retries(n,t,function(t){return r.client._getSnapshot(e,function(e,n){return null!=e?t(e):t(null,n)})})},e}(),N=function(){function e(e,t){var n,r,a;for(K.assert(e.length===t.length,function(){return""+e.length+" changes, "+t.length+" undo_extras"}),this.changes=[],this.undo_extras=[],this._last_simple_mtime_update=null,n=r=0,a=e.length;a>=0?a>r:r>a;n=a>=0?++r:--r)this.add_change(e[n],t[n])}var t;return t=function(e,t){var n,a,i,o,s;switch(o=null,a=null,e.tag()){case"I":o="D";break;case"U":o="U",a={};for(i in t)s=t[i],a[i]=null==s?["D"]:["P",s];break;case"D":o="I",a=ee.clone(t);break;default:throw new Error("Unknown change tag: "+e.tag())}return n=[o,e.tid,e.rowid],null!=a&&n.push(a),r.from_array(n)},e._is_simple_mtime_update=function(e){var t,n;switch(e.tag()){case"I":case"D":return!1;case"U":if(":info"!==e.tid||"info"!==e.rowid)return!1;if(n=Object.keys(e.updates),1!==n.length)return!1;if("mtime"!==n[0])return!1;switch(t=e.updates.mtime,t.tag()){case"P":return!0;case"D":case"LC":case"LP":case"LI":case"LD":case"LM":return!1;default:throw new Error("Unknown field op: "+t.tag())}break;default:throw new Error("Unknown change tag: "+e.tag())}},e._affects_mtime=function(e){if(":info"!==e.tid||"info"!==e.rowid)return!1;switch(e.tag()){case"I":case"D":return!0;case"U":return"mtime"in e.updates;default:throw new Error("Unknown change tag: "+e.tag())}},e.prototype.add_change=function(t,n){return this.changes.push(t),this.undo_extras.push(n),void(e._affects_mtime(t)&&(e._is_simple_mtime_update(t)?(null!=this._last_simple_mtime_update&&(this.changes.splice(this._last_simple_mtime_update,1),this.undo_extras.splice(this._last_simple_mtime_update,1)),this._last_simple_mtime_update=this.changes.length-1):this._last_simple_mtime_update=null))},e.prototype.inverse_changes=function(){var e,n,r,a,i,o;for(r=[],o=this.changes,n=a=0,i=o.length;i>a;n=++a)e=o[n],r.push(t(e,this.undo_extras[n]));return r.reverse(),r},e}(),ee.LocalDelta=N,B=10,F=B,ee.make_nonce=function(){return ee.randomWeb64String(B)},ee.value_size=function(e){var t,n,r,a;if(K.is_string(e))return C.Util.countUtf8Bytes(e);if(K.is_bool(e))return 0;if(K.is_number(e))return 0;if(K.is_array(e)){for(t=C.Datastore.List.BASE_ITEM_SIZE*e.length,r=0,a=e.length;a>r;r++)n=e[r],t+=ee.value_size(n);return t}if("object"!=typeof e)throw new Error("Unexpected value: "+e);if(null!=e.I)return 0;if(null!=e.N)return 0;if(null!=e.B)return Math.ceil(3*e.B.length/4);if(null!=e.T)return 0;throw new Error("Unexpected object: "+JSON.stringify(e))},ee.size_difference_for_field_op=function(e,t,n){var r,a,i,o;switch(r=e.get(t),n.tag()){case"P":return a=n.value,null==r?C.Datastore.Record.BASE_FIELD_SIZE+ee.value_size(a):ee.value_size(a)-ee.value_size(r);case"D":return null!=r?-(C.Datastore.Record.BASE_FIELD_SIZE+ee.value_size(r)):0;case"LC":return Q(null==r,"can't create list for field that already exists"),C.Datastore.Record.BASE_FIELD_SIZE;case"LP":return Q(K.is_array(r),"LP on non-list"),Q(0<=(i=n.at)&&i<r.length,"bad index for LP"),ee.value_size(n.value)-ee.value_size(r[n.at]);case"LI":return(null!=r?0:C.Datastore.Record.BASE_FIELD_SIZE)+C.Datastore.List.BASE_ITEM_SIZE+ee.value_size(n.value);case"LD":return Q(K.is_array(r),"LD on non-list"),Q(0<=(o=n.at)&&o<r.length,"bad index for LD"),-(C.Datastore.List.BASE_ITEM_SIZE+ee.value_size(r[n.at]));case"LM":return 0;default:throw new Error("unexpected field op type "+n.tag())}},ee.size_difference_for_change=function(e,t){var n,r,a,i,o,s,l;return o=function(){var o,u;switch(t.tag()){case"I":i=C.Datastore.Record.BASE_RECORD_SIZE,o=t.fields;for(n in o)l=o[n],i+=C.Datastore.Record.BASE_FIELD_SIZE+ee.value_size(l);return i;case"U":a=e.get_record(t.tid,t.rowid),K.assert(null!=a,function(){return"record not found: "+JSON.stringify(t)}),s=0,u=t.updates;for(n in u)r=u[n],s+=ee.size_difference_for_field_op(a,n,r);return s;case"D":return-e.get_record(t.tid,t.rowid)._size;default:throw new Error("unrecognized tag "+t.tag())}}()},V=function(){function e(e,t,n){var r,a;this._tid=e,this._rid=t,null==n&&(n={}),this._fields={},this._size=C.Datastore.Record.BASE_RECORD_SIZE;for(r in n)a=n[r],this._fields[r]=ee.clone(a),this._size+=C.Datastore.Record.BASE_FIELD_SIZE+ee.value_size(a)}return e.prototype.get=function(e){return this._fields[e]},e.prototype.get_all=function(){return this._fields},e.prototype.put=function(e,t){return void(null!=t?this._fields[e]=ee.clone(t):delete this._fields[e])},e.prototype.apply_field_op=function(e,t){var n,r,a,i,o,s,l;switch(n=this._fields[e],t.tag()){case"P":this._fields[e]=ee.clone(t.value);break;case"D":delete this._fields[e];break;case"LC":Q(null==n,"can't create list for field that already exists"),this._fields[e]=[];break;case"LP":Q(K.is_array(n),"LP on non-list"),Q(0<=(a=t.at)&&a<n.length,"bad index for LP"),n[t.at]=ee.clone(t.value);break;case"LI":null!=n?(Q(K.is_array(n),"LI on non-list"),Q(0<=(i=t.before)&&i<=n.length,"bad index for LI"),n.splice(t.before,0,ee.clone(t.value))):(Q(0===t.before,"bad index for LI on nonexistent field"),this._fields[e]=[ee.clone(t.value)]);break;case"LD":Q(K.is_array(n),"LD on non-list"),Q(0<=(o=t.at)&&o<n.length,"bad index for LD"),n.splice(t.at,1);break;case"LM":Q(K.is_array(n),"LM on non-list"),Q(0<=(s=t.from)&&s<n.length,"bad from index for LM"),Q(0<=(l=t.to)&&l<n.length,"bad to index for LM"),r=n[t.from],n.splice(t.from,1),n.splice(t.to,0,r);break;default:throw new Error("unexpected field op type "+t.tag())}},e.prototype.size=function(){return this._size},e}(),$=function(){function e(){this._records={}}return e.prototype.get=function(e){return this._records[e]},e.prototype.put=function(e,t){return void(null!=t?this._records[e]=t:delete this._records[e])},e.prototype.has=function(e){return null!=this._records[e]},e.prototype.is_empty=function(){var e;for(e in this._records)return!1;return!0},e.prototype.list_record_ids=function(){var e,t;t=[];for(e in this._records)t.push(e);return t},e}(),u=function(){function e(e,t){var n,r,a,i,o,s;this._tables={},this._record_count=0,this._size=C.Datastore.BASE_DATASTORE_SIZE;for(s in t){a=t[s],o=this._get_table(s);for(i in a)n=a[i],r=new V(s,i,n),this._check_record_size(e,s,i,r._size),o.put(i,r),this._record_count+=1,this._size+=r._size}this._check_datastore_size(e,this._size),this._changedInfoFields={}}return e.from_get_snapshot_resp=function(t){var n,r,a,i,o,s;for(n={},s=t.rows,a=0,i=s.length;i>a;a++)r=s[a],n[o=r.tid]||(n[o]={}),n[r.tid][r.rowid]=r.data;return new e((!1),n)},e.prototype._size_limit_exceeded=function(e,t){var n;if(e)throw n=new Error(t),n.code="SIZE_LIMIT_EXCEEDED",n;return void console.warn(t)},e.prototype._check_record_size=function(e,t,n,r){return void(r>C.Datastore.Record.RECORD_SIZE_LIMIT&&this._size_limit_exceeded(e,"Record ("+t+", "+n+") too large: "+r+" bytes"))},e.prototype._check_datastore_size=function(e,t){return void(t>C.Datastore.DATASTORE_SIZE_LIMIT&&this._size_limit_exceeded(e,"Datastore too large: "+t+" bytes"))},e.prototype._TEST_calculate_size_from_scratch=function(){var e,t,n,r,a,i,o,s,l,u,c,d;r=0,u=this._tables;for(i in u)for(a=u[i],c=a.list_record_ids(),s=0,l=c.length;l>s;s++){n=c[s],t=a.get(n),r+=C.Datastore.Record.BASE_RECORD_SIZE,d=t.get_all();for(e in d)o=d[e],r+=C.Datastore.Record.BASE_FIELD_SIZE+ee.value_size(o)}return r},e.prototype.raw_data=function(){var e,t,n,r,a,i,o,s;e={},o=this._tables;for(r in o)for(n=o[r],e[r]={},s=n.list_record_ids(),a=0,i=s.length;i>a;a++)t=s[a],e[r][t]=ee.clone(n.get(t).get_all());return e},e.prototype.get_record=function(e,t){var n;return null!=(n=this._tables[e])?n.get(t):void 0},e.prototype.clearInfoFields=function(){return this._changedInfoFields={}},e.prototype.updateInfoFieldsFromChange=function(e){var t,n,r,a,i,o,s,l,u;switch(K.assert(":info"===e.tid,function(){return"updateInfoField: table must be :info, got "+e.tid}),K.assert("info"===e.rowid,function(){return"updateInfoField: row must be info, got "+e.rowid}),e.tag()){case"I":i=e.fields,s=[];for(t in i)r=i[t],s.push(this._changedInfoFields[t]=!0);return s;case"U":o=e.updates,l=[];for(t in o)a=o[t],l.push(this._changedInfoFields[t]=!0);return l;case"D":if(n=this.get_record(":info","info"),null!=n){u=[];for(t in n.get_all())u.push(this._changedInfoFields[t]=!0);return u}break;default:throw new Error("Unknown change tag: "+e.tag())}},e.prototype.updateDatastoreInfo=function(e){var t,n;e=ee.clone(e||{}),t=this.query(":info","info")||{};for(n in this._changedInfoFields)n in t?e[n]=t[n]:delete e[n];return e},e.prototype.getLocalInfoData=function(){return ee.clone(this.query(":info","info")||{})},e.prototype.apply_change=function(e,t){var n,r,a;switch(n=ee.size_difference_for_change(this,t),n>=0&&this._check_datastore_size(e,this._size+n),":info"===t.tid&&"info"===t.rowid&&this.updateInfoFieldsFromChange(t),t.tag()){case"I":this._check_record_size(e,t.tid,t.rowid,n),this._record_count+=1,a=this._apply_insert(t);break;case"U":r=this.get_record(t.tid,t.rowid),K.assert(null!=r,function(){return"apply_change: record does not exist: "+JSON.stringify(t)}),n>=0&&this._check_record_size(e,t.tid,t.rowid,r._size+n),a=this._apply_update(r,t),r._size+=n;break;case"D":this._record_count-=1,a=this._apply_delete(t);break;default:throw new Error("unrecognized tag "+t.tag())}return this._size+=n,a},e.prototype._get_table=function(e){return null==this._tables[e]&&(this._tables[e]=new $),this._tables[e]},e.prototype._apply_insert=function(e){var t,n;return n=this._get_table(e.tid),K.assert(!n.has(e.rowid),function(){return"_apply_insert: record already exists: "+JSON.stringify(e)}),t=new V(e.tid,e.rowid,e.fields),n.put(e.rowid,t),null},e.prototype._apply_update=function(e,t){var n,r,a,i,o,s,l;i={};try{s=t.updates;for(r in s)a=s[r],o=ee.clone(null!=(l=e.get(r))?l:null),e.apply_field_op(r,a),i[r]=o}catch(t){n=t;for(r in i)o=i[r],e.put(!1,r,o);throw n}return i},e.prototype._apply_delete=function(e){var t,n,r;return r=this._get_table(e.tid),K.assert(r.has(e.rowid),function(){return"_apply_delete: record does not exist: "+JSON.stringify(e)}),n=r.get(e.rowid),t=ee.clone(n.get_all()),r.put(e.rowid,null),r.is_empty()&&delete this._tables[e.tid],t},e.prototype.query=function(e,t){var n,r;return r=this._tables[e],null==r?null:(n=r.get(t),null==n?null:ee.clone(n.get_all()))},e.prototype.list_tables=function(){var e,t;return e=function(){var e;e=[];for(t in this._tables)e.push(t);return e}.call(this),e.sort(),e},e.prototype.list_rows_for_table=function(e){var t,n;return n=this._tables[e],null==n?[]:(t=n.list_record_ids(),t.sort(),t)},e.prototype.record_count=function(){return this._record_count},e.prototype.size=function(){return this._size},e}(),R=function(){function e(e,t,n,r,a,i,o,s){this.dbid=e,this.handle=t,this.role=n,this.datastore_model=r,this.resolver=a,this.sync_state=i,this.flob_client=o,this._dslist_listener=s,this.syncStateChanged=new C.Util.EventSource,this._deleted=!1,this._open=!0,this._put_delta_queue=new Y,this._update_mtime_on_change=!0}return e.fresh_managed_datastore=function(t,n,r,a,i,o,s,l){var u;return u=new J(i),new e(t,n,r,a,o,u,s,l)},e.prototype.get_dsid=function(){return this.dbid},e.prototype.get_handle=function(){return this.handle},e.prototype.get_effective_role=function(){return this.role},e.prototype.is_deleted=function(){return this._deleted},e.prototype.mark_deleted=function(){return this._deleted=!0},e.prototype.open=function(){if(this._open)throw new Error("Attempt to open datastore multiple times");return this._open=!0},e.prototype.close=function(){if(!this._open)throw new Error("Attempt to close datastore multiple times");return this._open=!1},e.prototype.is_closed=function(){return!this._open},e.prototype._updateInfoFieldsAfterSync=function(){var e,t,n,r,a,i;for(this.datastore_model.clearInfoFields(),a=this.sync_state.unsynced_deltas,i=[],n=0,r=a.length;r>n;n++)t=a[n],i.push(function(){var n,r,a,i;for(a=t.changes,i=[],n=0,r=a.length;r>n;n++)e=a[n],":info"===e.tid&&"info"===e.rowid?i.push(this.datastore_model.updateInfoFieldsFromChange(e)):i.push(void 0);return i}.call(this));return i},e.prototype._should_notify_dslist_listener_for=function(e){var t,n;if(t=function(e){var t;for(t in e)if("mtime"!==t)return!0;return!1},":info"!==e.tid||"info"!==e.rowid)return!1;switch(e.tag()){case"D":if(n=this.datastore_model.get_record(e.tid,e.rowid),null==n)throw new Error("Record not found: "+e.tid+" "+e.rowid);return t(n.get_all());case"U":return t(e.updates);case"I":return t(e.fields);default:throw new Error("unknown change tag: "+e.tag())}},e.prototype._rollback_unsynced_deltas=function(e){var t,n,r,a,i,o,s,l,u,c,d,p;for(t={},o=this.sync_state.unsynced_deltas.slice().reverse(),s=0,c=o.length;c>s;s++){for(i=o[s],a=i.inverse_changes(),l=0,d=a.length;d>l;l++)r=a[l],this.datastore_model.apply_change(!1,r);if(e)for(u=0,p=a.length;p>u;u++)n=a[u],n.tid in t||(t[n.tid]={}),t[n.tid][n.rowid]=!0}return t},e.prototype._do_sync=function(){var e,t,n,r,a,i,o,s,l,u,c,d,p,f,h,g,m,v;if(i=this.sync_state.get_server_deltas(),0===i.length)return{};for(a=this.resolver.resolve(this.sync_state.unsynced_deltas,i),r=a.rebased_deltas,e=a.affected_records,o=!1,this._rollback_unsynced_deltas(!1),l=0,p=i.length;p>l;l++)for(n=i[l],m=n.changes,u=0,f=m.length;f>u;u++)t=m[u],o|=this._should_notify_dslist_listener_for(t),this.datastore_model.apply_change(!1,t);for(c=0,h=r.length;h>c;c++)for(n=r[c],n.undo_extras=[],v=n.changes,d=0,g=v.length;g>d;d++)t=v[d],o|=this._should_notify_dslist_listener_for(t),s=this.datastore_model.apply_change(!1,t),n.undo_extras.push(s);return this.sync_state.update_unsynced_deltas(r),o&&this._dslist_listener(),e},e.prototype._do_put_delta=function(){var e,t=this;if(!this.sync_state.delta_pending()&&(e=this.sync_state.get_delta_to_put(),null!=e))return this._put_delta_queue.request(function(){return t.flob_client.put_delta(t.handle,e,function(n,r){return null==n&&(null!=r.rev&&(t.sync_state.put_succeeded(e),t.syncStateChanged.dispatch(null)),null!=r.access_denied&&(console.log("Write access denied, reverting pending changes. Reason:",r.access_denied),t._affected_records_from_access_denied=t._rollback_unsynced_deltas(!0),t.sync_state.clear_unsynced_deltas(),t.role=ee.ROLE_VIEWER,t.syncStateChanged.dispatch(null))),t._put_delta_queue.finish()})})},e.prototype._apply_and_queue_local_change=function(e,t){var n,r;return n=this._should_notify_dslist_listener_for(t),r=this.datastore_model.apply_change(e,t),this.sync_state.add_unsynced_change(t,r),void(n&&this._dslist_listener())},e.prototype._clock=function(){return new Date},e.prototype._update_mtime=function(){var e;return this._update_mtime_on_change?(e=null!=this.datastore_model.query(":info","info")?r.from_array(["U",":info","info",{mtime:["P",ee.toDsValue(this._clock())]}]):r.from_array(["I",":info","info",{mtime:ee.toDsValue(this._clock())}]),this._apply_and_queue_local_change(!1,e)):null},e.prototype.perform_local_change=function(e){return this._apply_and_queue_local_change(!0,e),this._update_mtime(),this.syncStateChanged.dispatch(null)},e.prototype.sync=function(){var e;return e=this._affected_records_from_access_denied,null!=e?(delete this._affected_records_from_access_denied,e):(this.has_unfinalized_changes()&&this.sync_state.finalize(),e=this._do_sync(),this._do_put_delta(),this._updateInfoFieldsAfterSync(),e)},e.prototype.get_outgoing_delta_count=function(){return this.sync_state.unsynced_deltas.length},e.prototype.get_incoming_delta_count=function(){return this.sync_state.get_server_deltas().length},e.prototype.has_unfinalized_changes=function(){return this.sync_state.has_unfinalized_changes()},e.prototype.receive_server_delta=function(e){return this.sync_state.receive_server_delta(e),void this.syncStateChanged.dispatch(null)},e.prototype.query=function(e,t){return this.datastore_model.query(e,t)},e.prototype.list_tables=function(){var e;return function(){var t,n,r,a;for(r=this.datastore_model.list_tables(),a=[],t=0,n=r.length;n>t;t++)e=r[t],":info"!==e&&e!==ee.ACL_TID&&a.push(e);return a}.call(this)},e.prototype.list_rows_for_table=function(e){return this.datastore_model.list_rows_for_table(e)},e.prototype.get_record_count=function(){return this.datastore_model.record_count()},e.prototype.get_record_size=function(e,t){return this.datastore_model.get_record(e,t).size()},e.prototype.get_size=function(){return this.datastore_model.size()},e}(),J=function(){function e(e){this._server_rev=e,K.uint(this._server_rev,"_server_rev"),this._pending_delta=null,this._server_deltas=[],this.unsynced_deltas=[],this._last_unsynced_delta_unfinalized=!1}return e.prototype.get_server_rev=function(){return this._server_rev},e.prototype.is_current=function(){return 0===this.unsynced_deltas.length&&0===this._server_deltas.length},e.prototype.get_server_deltas=function(){return this._server_deltas},e.prototype.add_unsynced_change=function(e,t){var n;return n=this.unsynced_deltas.length,void(this._last_unsynced_delta_unfinalized?this.unsynced_deltas[n-1].add_change(e,t):(this.unsynced_deltas.push(new N([e],[t])),this._last_unsynced_delta_unfinalized=!0))},e.prototype._compact_deltas=function(){var e,t,n,r,a,i,o,s,l,u,c,d,p,f,h,g;if(Q(null==this._pending_delta,"delta pending"),r=this.unsynced_deltas.length,!(1>=r)){for(o=this._last_unsynced_delta_unfinalized?this.unsynced_deltas.pop():null,t=[],i=[],f=this.unsynced_deltas,s=0,c=f.length;c>s;s++){for(n=f[s],h=n.changes,l=0,d=h.length;d>l;l++)e=h[l],t.push(e);for(g=n.undo_extras,u=0,p=g.length;p>u;u++)a=g[u],i.push(a)}return this.unsynced_deltas=[new N(t,i)],void(null!=o&&this.unsynced_deltas.push(o))}},e.prototype.get_delta_to_put=function(){var e,t;return Q(null==this._pending_delta,"delta pending"),e=this.unsynced_deltas.length,0===e||1===e&&this._last_unsynced_delta_unfinalized?null:(this._compact_deltas(),this._last_unsynced_delta_unfinalized&&Q(this.unsynced_deltas.length>1,"the only delta is unfinalized"),t=this.unsynced_deltas[0],this._pending_delta=new x({changes:t.changes.slice(),nonce:ee.make_nonce(),rev:this._server_rev}),this._pending_delta)},e.prototype.delta_pending=function(){return null!=this._pending_delta},e.prototype.has_unfinalized_changes=function(){return this._last_unsynced_delta_unfinalized},e.prototype.finalize=function(){return void(this._last_unsynced_delta_unfinalized=!1)},e.prototype.update_unsynced_deltas=function(e){return this.unsynced_deltas=e,this._server_rev+=this._server_deltas.length,this._server_deltas=[]},e.prototype._is_our_pending=function(e){return null!=this._pending_delta&&this._pending_delta.nonce===e.nonce},e.prototype._ack=function(e){return Q(this._is_our_pending(e),"not ours"),Q(0===this._server_deltas.length,"server deltas exist"),this._pending_delta=null,this.unsynced_deltas.shift(),this._server_rev++},e.prototype.put_succeeded=function(e){return this._is_our_pending(e)?this._ack(e):void 0},e.prototype.clear_unsynced_deltas=function(){return this._pending_delta=null,this.unsynced_deltas=[],this._last_unsynced_delta_unfinalized=!1},e.prototype.receive_server_delta=function(e){var t,n;return n=this._server_deltas.length,t=n>0?this._server_deltas[n-1].rev+1:this._server_rev,Q(e.rev<=t,"was expecting rev "+t+", but got "+e.rev+" instead!"),e.rev<t?void 0:void(this._is_our_pending(e)?this._ack(e):(this._server_deltas.push(e),this._pending_delta=null))},e}(),ee.DatastoreModel=u,z=function(){function e(e){this.update_manager=e,this.cancelled=!1,this.cancel_fn=null}return e.prototype.cancel=function(){return null!=this.cancel_fn&&this.cancel_fn(),this.cancelled=!0},e.prototype.poll=function(){var e,t=this;return(e=function(){var n;if(!t.cancelled)return n=ee.clone(t.update_manager._handle_version_map),t.cancel_fn=t.update_manager.flob_client.await(n,t.update_manager._last_dslist_token,function(r,a){var i,o,s,l,u,c,d,p,f,h;if(t.cancel_fn=null,r)return 0===r.status?(console.log("await deltas failed (offline):",r),setTimeout(e,1e4)):r.status&&500<=(p=r.status)&&599>=p?(console.log("server error:",r),setTimeout(e,2e3)):(console.error("Got error in longpoll:",r),setTimeout(e,1e4));if(null!=a.get_deltas){f=a.get_deltas.deltas;for(l in f)if(o=f[l],null!=o.notfound)t.update_manager._data_queue.push({handle:l,notfound:o.notfound}),delete t.update_manager._handle_version_map[l];else if(null!=o.deltas){for(null!=o.role&&t.update_manager._data_queue.push({handle:l,role:o.role}),h=o.deltas,c=0,d=h.length;d>c;c++)s=h[c],t.update_manager._data_queue.push({handle:l,delta:s});u=n[l]+o.deltas.length,i=t.update_manager._handle_version_map[l],null!=i&&(t.update_manager._handle_version_map[l]=Math.max(i,u))}}return null!=a.list_datastores&&(t.update_manager._last_dslist_token=a.list_datastores.token,t.update_manager._data_queue.push({dslist:a.list_datastores})),setTimeout(e,0)})})()},e}(),S=function(){function e(e){this.flob_client=e,this._data_queue=null,this._handle_version_map={},this._last_dslist_token=".",this._pending_poll=null,this._running=!1}return e.prototype.run=function(e){return this._data_queue=new i(e),this._running=!0,this._do_longpoll()},e.prototype.stop=function(){return this._pending_poll?this._pending_poll.cancel():void 0},e.prototype.add_poll=function(e,t){var n,r;return Q(this._running,"update manager is not running"),n=this._handle_version_map[e],r=t,null!=n&&(r=Math.max(t,n)),this._handle_version_map[e]=r,this._do_longpoll()},e.prototype.remove_poll=function(e){return Q(this._running,"update manager is not running"),e in this._handle_version_map?(delete this._handle_version_map[e],this._do_longpoll()):void 0},e.prototype._do_longpoll=function(){return Q(this._running,"update manager is not running"),this._pending_poll&&(this._pending_poll.cancel(),this._pending_poll=null),this._pending_poll=new z(this),this._pending_poll.poll()},e}(),H=function(){function e(e,t,n,r){this.update_manager=e,this.flob_client=t,this._dslist_listener_server=n,this._dslist_listener_local=r,this.update_manager.run(this._handle_server_update.bind(this)),this._cached_objects={},this._handle_to_dsid_map={}}return e.prototype.destroy=function(){var e;for(e in this._cached_objects)this._cached_objects[e].close();return this.update_manager.stop()},e.prototype.getAllCachedUndeletedDatastoreIDs=function(){var e,t;return function(){var n,r;n=this._cached_objects,r=[];for(t in n)e=n[t],e.is_deleted()||r.push(t);return r}.call(this)},e.prototype.getCachedDatastore=function(e){return this._cached_objects[e]},e.prototype._evict=function(e){var t,n;return t=this._handle_to_dsid_map[e],null!=t?(delete this._handle_to_dsid_map[e],t in this._cached_objects&&(n=this._cached_objects[t],n.mark_deleted(),n.is_closed()&&delete this._cached_objects[t]),this.update_manager.remove_poll(e)):void 0},e.prototype.close=function(e){var t,n;if(!(e in this._cached_objects))throw new Error("Attempt to close unknown datastore: "+e);return t=this._cached_objects[e].get_handle(),n=this._cached_objects[e],n.close(),n.is_deleted()?delete this._cached_objects[e]:void 0},e.prototype._handle_server_update=function(e,t){var n,r,a;return e.dslist?(this._dslist_listener_server&&this._dslist_listener_server(e.dslist),t(null)):(a=e.handle,n=this._handle_to_dsid_map[a],null==n?(console.log("unknown handle "+a+" (maybe datastore was evicted)",e,this._handle_to_dsid_map,this._cached_objects),t(null)):null==e.delta?(null!=e.notfound?this._evict(a):null!=e.role&&null!=this._cached_objects[n]&&(this._cached_objects[n].role=e.role),t(null)):(r=e.delta,this._retrieve(n,a,function(e,n){return e?t(e):(n.receive_server_delta(r),t(null))})))},e.prototype.open=function(e,t,n){return this._cached_objects[e]&&this._cached_objects[e].open(),this._retrieve(e,t,n)},e.prototype._retrieve=function(e,t,n){var r,a=this;return r=this._cached_objects[e],null!=r?n(null,r):(this._handle_to_dsid_map[t]=e,this.flob_client.get_snapshot(t,function(r,i){var o,s,l;return null!=r?n(r):null!=a._cached_objects[e]?n(null,a._cached_objects[e]):(o=u.from_get_snapshot_resp(i),l=new b,s=R.fresh_managed_datastore(e,t,i.role,o,i.rev,l,a.flob_client,a._dslist_listener_local),a.update_manager.add_poll(t,s.sync_state.get_server_rev()),a._cached_objects[e]=s,n(null,s))}))},e}(),A=function(){function e(e){var a,i,o,s,u,c,d,p,f,v,y,_=this;for(this.rule_name=null!=e?e:"default",this.precedence=r[this.rule_name],this._transforms={},o=0,c=n.length;c>o;o++)i=n[o],this._transforms[i]={};for(y=["P","D"],s=0,d=y.length;d>s;s++)for(i=y[s],u=0,p=t.length;p>u;u++)a=t[u],this._transforms[i][a]=h,this._transforms[a][i]=g;for(v=0,f=t.length;f>v;v++)a=t[v],"LC"===a?this._transforms.LC.LC=function(){return[null,null]}:(this._transforms.LC[a]=g,this._transforms[a].LC=h);this._transforms.P.P=function(e,t){var n;return n=_.precedence(e.value,t.value),"left"===n?[e,null]:[null,t]},this._transforms.P.D=function(e,t){var n;return n=_.precedence(e.value,null),"left"===n?[e,null]:[null,t]},this._transforms.D.P=function(e,t){var n;return n=_.precedence(null,t.value),"left"===n?[e,null]:[null,t]},this._transforms.D.D=function(e,t){var n;return n=_.precedence(null,null),"left"===n?[e,null]:[null,t]},this._transforms.LP.LP=function(e,t){var n;return e.at!==t.at?[e,t]:(n=_.precedence(e.value,t.value),"left"===n?[e,null]:[null,t])},this._transforms.LP.LI=function(e,t){var n;return n=l(e),n.at+=t.before<=e.at?1:0,[n,t]},this._transforms.LP.LD=function(e,t){var n;return e.at===t.at?[null,t]:(n=l(e),n.at-=t.at<e.at?1:0,[n,t])},this._transforms.LP.LM=function(e,t){var n;return n=l(e),e.at===t.from?n.at=t.to:(n.at-=t.from<n.at?1:0,n.at+=t.to<=n.at?1:0),[n,t]},this._transforms.LI.LP=m(this._transforms.LP.LI),this._transforms.LI.LI=function(e,t){var n,r,a;return a=[l(e),l(t)],n=a[0],r=a[1],e.before<t.before?r.before+=1:n.before+=1,[n,r]},this._transforms.LI.LD=function(e,t){var n,r,a;return a=[l(e),l(t)],n=a[0],r=a[1],n.before-=t.at<e.before?1:0,r.at+=e.before<=t.at?1:0,[n,r]},this._transforms.LI.LM=function(e,t){var n,r,a,i;return i=[l(e),l(t)],r=i[0],a=i[1],e.before===t.to+1&&t.from<=t.to?[e,t]:e.before===t.to&&t.from>t.to?(r.before++,a.from++,[r,a]):(n=t.from<e.before?e.before-1:e.before,a.from+=e.before<=t.from?1:0,r.before=t.to<n?n+1:n,a.to+=n<=t.to?1:0,[r,a])},this._transforms.LD.LP=m(this._transforms.LP.LD),this._transforms.LD.LI=m(this._transforms.LI.LD),this._transforms.LD.LD=function(e,t){var n,r,a;return e.at===t.at?[null,null]:(a=[l(e),l(t)],n=a[0],r=a[1],e.at<t.at?r.at-=1:n.at-=1,[n,r])},this._transforms.LD.LM=function(e,t){var n,r,a;return e.at===t.from?(n=l(e),n.at=t.to,[n,null]):(a=[l(e),l(t)],n=a[0],r=a[1],n.at-=t.from<n.at?1:0,n.at+=t.to<=n.at?1:0,r.to+=r.from<r.to?1:0,r.from-=e.at<r.from?1:0,r.to-=e.at<r.to?1:0,r.to-=r.from<r.to?1:0,[n,r])},this._transforms.LM.LP=m(this._transforms.LP.LM),this._transforms.LM.LI=function(e,t){var n,r,a,i;return i=[l(e),l(t)],r=i[0],a=i[1],t.before===e.to+1&&e.from<=e.to?[e,t]:t.before===e.to&&e.from>e.to?(r.from++,r.to++,[r,a]):(n=e.from<t.before?t.before-1:t.before,r.from+=t.before<=e.from?1:0,a.before=e.to<n?n+1:n,r.to+=n<=e.to?1:0,[r,a])},this._transforms.LM.LD=m(this._transforms.LD.LM),this._transforms.LM.LM=function(e,t){var n,r,a,i,o,s,u,c,d,p,f;return e.from===t.from?e.to===t.to?[null,null]:t.from===t.to?[e,t]:(i=l(t),i.from=e.to,[null,i]):e.to===e.from?(a=l(e),a.from+=(t.to<=e.from)-(t.from<e.from),e.from===t.to&&t.from<t.to&&a.from--,a.to=a.from,[a,t]):t.to===t.from?(i=l(t),i.from+=(e.to<=t.from)-(e.from<t.from),i.to=i.from,[e,i]):(u=[l(e),l(t)],a=u[0],i=u[1],e.to===t.to&&e.from>e.to&&t.from>t.to?(a.to++,t.from>e.from?a.from++:i.from++,[a,i]):e.from===t.to&&t.from===e.to&&e.from<e.to?(i.from--,a.from++,[a,i]):e.from>e.to&&t.from<t.to&&t.to+1===e.to?[e,t]:(c=[e.to,e.from],o=c[0],n=c[1],o+=e.from<o?1:0,o-=t.from<o?1:0,o+=t.to<o?1:0,n-=t.from<n?1:0,n+=t.to<=n?1:0,o-=o>n?1:0,d=[t.to,t.from],s=d[0],r=d[1],s+=t.from<s?1:0,s-=e.from<s?1:0,s+=e.to<=s?1:0,r-=e.from<r?1:0,r+=e.to<=r?1:0,s-=s>r?1:0,p=[o,n],a.to=p[0],a.from=p[1],f=[s,r],i.to=f[0],i.from=f[1],[a,i]))}}var t,n,r,a,i,o,s,l,u,c,d,p,f,h,g,m,v,y,_;for(m=function(e){return Q(null!=e),function(t,n){var r,a,i;return i=e(n,t),r=i[0],a=i[1],[a,r]}},a=["null","bool","num","str","blob","ts","list"],i={},c=y=0,_=a.length;_>y;c=++y)v=a[c],i[v]=c;return u=function(e){if(null==e)return"null";if(K.is_bool(e))return"bool";if(null!=e.I||K.is_number(e))return"num";if(K.is_string(e))return"str";if(null!=e.B)return"blob";if(null!=e.T)return"ts";if(K.is_array(e))return"list";throw new Error("Unrecognized value "+e)},f=function(e){return K.is_number(e)||null!=e.I},o=function(e){return null!=e.I?parseInt(e.I):e},p=function(e,t){var n,r,a;for(n=r=0,a=e.length;a>=0?a>r:r>a;n=a>=0?++r:--r){if(n>=t.length)return!1;if(d(e[n],t[n]))return!0;if(d(t[n],e[n]))return!1}return t.length>e.length},e._is_less_than=d=function(e,t){var n,r;if(n=u(e),r=u(t),n!==r)return i[n]<i[r];if("null"===n)return!1;if("bool"===n)return t&&!e;if("num"===n)return null!=e.I&&null!=t.I?ee.int64_string_less_than(e.I,t.I):o(e)<o(t);if("str"===n)return t>e;if("blob"===n)return e.B<t.B;if("ts"===n)return parseInt(e.T,10)<parseInt(t.T,10);if("list"===n)return p(e,t);throw new Error("unknown type "+n)},e._compute_sum=s=function(e,t,n){var r,a,i,o,s,l;return r=null!=e.I&&null!=t.I&&null!=n.I,null!=e.I&&(e=parseInt(e.I)),
null!=t.I&&(t=parseInt(t.I)),null!=n.I&&(n=parseInt(n.I)),o=0x8000000000000000,s=0x10000000000000000,l=0xfffffffffffff800,a=t-e,i=n+a,r&&(i>=o&&(i-=l),-o>i&&(i+=l),i={I:""+i}),i},g=function(e,t){return[null,t]},h=function(e){return[e,null]},n=["P","D","LC","LP","LI","LD","LM"],t=["LC","LP","LI","LD","LM"],e.copy=l=function(e){return k.from_array(JSON.parse(JSON.stringify(e)))},r={default:function(){return"right"},remote:function(){return"right"},local:function(){return"left"},min:function(e,t){return d(e,t)?"left":"right"},max:function(e,t){return d(e,t)?"right":"left"},sum:function(){return"right"}},e.prototype.transform=function(e,t,n){var r,a,i,o,l;return null==n&&(n=null),"sum"===this.rule_name&&"P"===e.tag()&&"P"===t.tag()&&(null==n&&(n={I:"0"}),f(n)&&f(e.value)&&f(t.value))?(i=s(n,e.value,t.value),r=a=k.from_array(["P",i]),[r,a,t.value]):(o=this._transforms[e.tag()][t.tag()](e,t),l=function(){switch(t.tag()){case"P":return t.value;case"D":return null;default:return{L:!0}}}(),o.push(l),o)},e}(),ee.FieldOpTransformer=A,a=function(){function e(){this._transform_rules={},this._default_transformer=new A}var t,n,a,i,o,s,l,u;for(t={},u=["default","local","remote","min","max","sum"],s=0,l=u.length;l>s;s++)a=u[s],t[a]=new A(a);return o=function(e){return Q(null!=e),function(t,n){var r,a,i;return i=e(n,t),r=i[0],a=i[1],[a,r]}},n=function(e){return e instanceof Array?e.slice():e},i=function(e,t){return e.tid===t.tid&&e.rowid===t.rowid},e.is_no_op=function(e){var t,n,r;if("U"!==e.tag())return!1;r=e.updates;for(n in r)return t=r[n],!1;return!0},e.compact=function(e){var t,n,r,a;for(t=[],r=0,a=e.length;a>r;r++)n=e[r],this.is_no_op(n)||t.push(n);return t},e.prototype.set_field_transformer=function(e,n,r){var a;return null==(a=this._transform_rules)[e]&&(a[e]={}),this._transform_rules[e][n]=t[r]},e.prototype.get_field_transformer=function(e,n){var r;return e in this._transform_rules?null!=(r=this._transform_rules[e][n])?r:this._default_transformer:t.default},e.prototype.transform_ii=function(e,t){var a,o,s;return i(e,t)?(a=function(e){var t,a,i,o,s;i={},s=e.fields;for(a in s)o=s[a],i[a]=k.from_array(["P",n(o)]);return t=r.from_array(["U",e.tid,e.rowid,i]),t.undo_extra={},t},o=a(e),s=a(t),this.transform_uu(o,s)):[[e],[t]]},e.prototype.transform_iu=function(e,t){return i(e,t)?Q(!1,"Couldn't have updated a row that hasn't been inserted yet!"):[[e],[t]]},e.prototype.transform_id=function(e,t){return i(e,t)?Q(!1,"Couldn't have deleted a row that hasn't been inserted yet!"):[[e],[t]]},e.prototype.transform_ui=o(e.prototype.transform_iu),e.prototype.transform_uu=function(e,t){var n,a,o,s,l,u,c,d,p,f,h,g,m,v,y,_,b,w,x;if(!i(e,t))return[[e],[t]];v=[{},{}],p=v[0],f=v[1],d={},y=e.updates;for(o in y)n=y[o],o in t.updates?(a=t.updates[o],h=null!=(b=e.undo_extra[o])?b:null,g=this.get_field_transformer(e.tid,o),w=g.transform(n,a,h),s=w[0],l=w[1],m=w[2],null!=s&&(p[o]=s,d[o]=null!=m?m:null),null!=l&&(f[o]=l)):(p[o]=n,d[o]=null!=(_=e.undo_extra[o])?_:null);x=t.updates;for(o in x)a=x[o],o in e.updates||(f[o]=a);return u=r.from_array(["U",e.tid,e.rowid,p]),u.undo_extra=d,c=r.from_array(["U",t.tid,t.rowid,f]),[[u],[c]]},e.prototype.transform_ud=function(e,t){return i(e,t)?[[],[t]]:[[e],[t]]},e.prototype.transform_di=o(e.prototype.transform_id),e.prototype.transform_du=o(e.prototype.transform_ud),e.prototype.transform_dd=function(e,t){return i(e,t)?[[],[]]:[[e],[t]]},e}(),ee.ChangeTransformer=a,b=function(){function e(){this._change_transformer=new a}return e.prototype.add_resolution_rule=function(e,t,n){return this._change_transformer.set_field_transformer(e,t,n)},e.prototype._transform_one=function(e,t){var n,r,i,o,s;return n=function(e){switch(e.tag()){case"I":return"i";case"U":return"u";case"D":return"d";default:throw new Error("unrecognized op type "+e.tag())}},o="transform_"+n(e)+n(t),s=this._change_transformer[o](e,t),r=s[0],i=s[1],r=a.compact(r),i=a.compact(i),[r,i]},e.prototype._transform_list=function(e,t){var n,r,a,i,o,s,l,u,c,d,p,f,h,g;if(0===e.length)return[[],t];if(0===t.length)return[e,[]];for(n=e[0],r=t[0],f=this._transform_one(n,r),i=f[0],o=f[1],h=this._transform_list(e.slice(1),o),a=h[0],o=h[1],u=0,d=a.length;d>u;u++)s=a[u],i.push(s);for(g=this._transform_list(i,t.slice(1)),i=g[0],l=g[1],c=0,p=l.length;p>c;c++)s=l[c],o.push(s);return[i,o]},e.prototype._resolve=function(e,t){var n,r,a,i,o,s,l;for(i=t.slice(),r=[],o=0,s=e.length;s>o;o++)a=e[o],l=this._transform_list(a,i),n=l[0],i=l[1],r.push(n);return[r,i]},e.prototype.resolve=function(e,t){var n,a,i,o,s,l,u,c,d,p,f,h,g,m,v,y,_,b,w,x,C,T,S,k,A,D,E,P,O,L,I;for(p=[],v=0,w=e.length;w>v;v++){for(c=e[v],a=[],O=c.changes,d=y=0,x=O.length;x>y;d=++y)o=O[d],l=r.from_array(JSON.parse(JSON.stringify(o))),l.undo_extra=ee.clone(c.undo_extras[d]),a.push(l);p.push(a)}for(g=[],_=0,C=t.length;C>_;_++)for(c=t[_],L=c.changes,b=0,T=L.length;T>b;b++)i=L[b],g.push(i);for(I=this._resolve(p,g),f=I[0],u=I[1],h=[],d=D=0,S=f.length;S>D;d=++D){for(s=f[d],m=function(){var e,t,n;for(n=[],t=0,e=s.length;e>t;t++)o=s[t],n.push(null);return n}(),E=0,k=s.length;k>E;E++)o=s[E],delete o.undo_extra;s.length>0&&h.push(new N(s,m))}for(n={},P=0,A=u.length;A>P;P++)i=u[P],i.tid in n||(n[i.tid]={}),n[i.tid][i.rowid]=!0;return{rebased_deltas:h,affected_records:n}},e}(),ee.DefaultResolver=b,Y=function(){function e(){this._waiting=[],this._running=!1}return e.prototype._run_next=function(){var e;this._running||this._waiting.length>0&&(e=this._waiting[0],this._waiting.shift(),this._running=!0,e())},e.prototype.request=function(e){return this._waiting.push(e),this._run_next()},e.prototype.finish=function(){return this._running=!1,setTimeout(this._run_next.bind(this),0)},e}(),i=function(){function e(e){this.consumer=e,this.items=[],this.sync_queue=new Y}return e.prototype.consume=function(){var e=this;return this.sync_queue.request(function(){var t;return 0===e.items.length?e.sync_queue.finish():(t=e.items.shift(),e.consumer(t,function(t){if(t)throw t;return e.sync_queue.finish(),e.consume()}))})},e.prototype.push=function(e){return this.items.push(e),this.consume()},e.prototype.run=function(){return this.consume()},e}(),ee.clone=function(e){var t,n,r,a,i,o,s;if(e instanceof Array){for(s=[],i=0,o=e.length;o>i;i++)t=e[i],s.push(ee.clone(t));return s}if(null!=e&&"object"==typeof e){r={};for(n in e)a=e[n],r[n]=ee.clone(a);return r}return e},ee.WEB64_ALPHABET="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",ee.randomElement=function(e){return e[Math.floor(Math.random()*e.length)]},ee.randomWeb64String=function(e){var t;return function(){var n,r;for(r=[],t=n=0;e>=0?e>n:n>e;t=e>=0?++n:--n)r.push(ee.randomElement(ee.WEB64_ALPHABET));return r}().join("")},ee.uint8ArrayFromBase64String=function(e){var t,n,r,a,i;for(e=e.replace(/-/g,"+").replace(/_/g,"/"),t=C.Util.atob(e),r=t.length,a=new Uint8Array(r),n=i=0;r>=0?r>i:i>r;n=r>=0?++i:--i)a[n]=t.charCodeAt(n);return a},ee.dbase64FromBase64=function(e){return e.replace(/[+]/g,"-").replace(/[\/]/g,"_").replace(/[\=]+$/g,"")},ee.base64StringFromUint8Array=function(e){var t,n,r,a,i;for(n="",a=0,i=e.length;i>a;a++)t=e[a],n+=String.fromCharCode(t);return r=C.Util.btoa(n),ee.dbase64FromBase64(r)},ee.INT64_TAG="dbxInt64",ee.isInt64=function(e){var t;return!(!e||"object"!=typeof e||e.constructor!==Number||!isFinite(e))&&(t=e[ee.INT64_TAG],!(!K.is_string(t)||"0"!==t&&!ee.nonzero_int64_approximate_regex.test(t)))},ee.validateInt64=function(e){var t,n;if(!e&&"object"==typeof e&&e.constructor===Number&&isFinite(e))throw new Error("Not a finite boxed number: "+e);if(n=e[ee.INT64_TAG],!K.is_string(n)||"0"!==n&&!ee.nonzero_int64_approximate_regex.test(n))throw new Error("Missing or invalid tag in int64: "+n);if(t=parseInt(n,10),t!==Number(e))throw new Error("Tag in int64 does not match value "+Number(e)+": "+n);return e},ee.toDsValue=function(e,t){var n,r;if(null==t&&(t=!0),null===e||"undefined"==typeof e)throw new Error("Bad value: "+e);if(K.is_string(e))return e;if(K.is_bool(e))return e;if(K.is_number(e)){if(null!=e[ee.INT64_TAG])return ee.validateInt64(e),{I:e[ee.INT64_TAG]};if(isFinite(e))return e;if(isNaN(e))return{N:"nan"};if(1/0===Number(e))return{N:"+inf"};if(Number(e)===-1/0)return{N:"-inf"};throw new Error("Unexpected number: "+e)}if(K.is_array(e)){if(t)return function(){var t,n,a;for(a=[],t=0,n=e.length;n>t;t++)r=e[t],a.push(ee.toDsValue(r,!1));return a}();throw new Error("Nested array not allowed: "+JSON.stringify(e))}if(K.is_date(e))return n=Math.round(e.getTime()),{T:""+n};if(K.isUint8Array(e))return{B:ee.base64StringFromUint8Array(e)};throw new Error("Unexpected value: "+K.safe_to_string(e))},ee.fromDsValue=function(e,t,n,r){if(K.is_string(r))return r;if(K.is_bool(r))return r;if(K.is_number(r))return r;if(K.is_array(r))return new C.Datastore.List(e,t,n);if("object"!=typeof r)throw new Error("Unexpected value: "+r);if(null!=r.I)return C.Datastore.int64(r.I);if(null==r.N){if(null!=r.B)return ee.uint8ArrayFromBase64String(r.B);if(null!=r.T)return new Date(parseInt(r.T,10));throw new Error("Unexpected object: "+JSON.stringify(r))}switch(r.N){case"nan":return NaN;case"+inf":return 1/0;case"-inf":return-1/0;default:throw new Error("Unexpected object: "+JSON.stringify(r))}},ee.matchDsValues=function(e,t){var n,r,a,i,o;r=function(e,t){if(null==e)throw new Error("Unexpected object: "+e);return null!=t&&n(e,t)},n=function(e,t){var n,a,i,o,s,l;if(ee.toDsValue(e),K.is_string(e)&&K.is_string(t))return String(e)===String(t);if(K.is_bool(e)&&K.is_bool(t))return"object"==typeof e&&(e=e.valueOf()),"object"==typeof t&&(t=t.valueOf()),Boolean(e)===Boolean(t);if(K.is_number(e)&&(K.is_number(t)||null!=t.N||null!=t.I))return t=ee.fromDsValue(void 0,void 0,void 0,t),e[ee.INT64_TAG]&&t[ee.INT64_TAG]?(o=[C.Datastore.int64(e),C.Datastore.int64(t)],e=o[0],t=o[1],String(e[ee.INT64_TAG])===String(t[ee.INT64_TAG])):!(!isNaN(e)||!isNaN(t))||Number(e)===Number(t);if(K.is_array(e)&&K.is_array(t)){if(e.length!==t.length)return!1;for(n=a=0,s=e.length-1;s>=0?s>=a:a>=s;n=s>=0?++a:--a)if(!r(e[n],t[n]))return!1;return!0}if(K.is_date(e)&&(K.is_date(t)||null!=t.T))return null!=t.T&&(t=ee.fromDsValue(void 0,void 0,void 0,t)),e-0===t-0;if(K.isUint8Array(e)&&(K.isUint8Array(t)||null!=t.B)){if(null!=t.B&&(t=ee.fromDsValue(void 0,void 0,void 0,t)),e.length!==t.length)return!1;for(n=i=0,l=e.length-1;l>=0?l>=i:i>=l;n=l>=0?++i:--i)if(e[n]!==t[n])return!1;return!0}return!1};for(a in e)if(o=e[a],i=r(o,t[a]),!i)return i;return!0},q=function(){function e(e){this._datastore=e,this._cache={}}return e.prototype.get=function(e,t){return null==this._cache[e]?null:this._cache[e][t]},e.prototype.getOrCreate=function(e,t){var n;return null==this._cache[e]&&(this._cache[e]={}),n=this._cache[e][t],null==n&&(n=this._cache[e][t]=new C.Datastore.Record(this._datastore,e,t)),n},e.prototype.remove=function(e,t){return delete this._cache[e][t],void(K.is_empty(this._cache[e])&&delete this._cache[e])},e}(),T=function(){function e(){this._registered_handlers=[]}return e.prototype.register=function(e,t){return e.addListener(t),void this._registered_handlers.push([e,t])},e.prototype.unregister_all=function(){var e,t,n,r,a,i;for(a=this._registered_handlers,n=0,r=a.length;r>n;n++)i=a[n],t=i[0],e=i[1],t.removeListener(e)},e}(),C.Datastore.DatastoreInfo=function(){function e(e,t,n,r){this._dsid=e,this._handle=t,this._info_record_data=n,this._role=r}return e.prototype.toString=function(){return"Datastore.DatastoreInfo("+this._dsid+" "+JSON.stringify(this._info_record_data||{})+" "+this.getEffectiveRole()+")"},e.prototype.getId=function(){return this._dsid},e.prototype.isShareable=function(){return"."===this._dsid[0]},e.prototype.getHandle=function(){return this._handle},e.prototype.getTitle=function(){var e;return null==(null!=(e=this._info_record_data)?e.title:void 0)?null:this._info_record_data.title},e.prototype.getModifiedTime=function(){var e;return null==(null!=(e=this._info_record_data)?e.mtime:void 0)?null:this._info_record_data.mtime},e.prototype.getEffectiveRole=function(){return this.isShareable()&&null!=this._role?C.Datastore._roleFromInt(this._role):C.Datastore.OWNER},e.prototype.isWritable=function(){var e;return e=this.getEffectiveRole(),e===C.Datastore.OWNER||e===C.Datastore.EDITOR},e}(),C.Datastore.DatastoreListChanged=function(){function e(e){this._dsinfos=e}return e.prototype.toString=function(){return"Datastore.DatastoreListChanged("+this._dsinfos.length+" datastores)"},e.prototype.getDatastoreInfos=function(){return this._dsinfos},e}(),C.Datastore.impl.EventSourceWithInitialData=function(e){function t(e){this.options=e,t.__super__.constructor.call(this,e),this._have_event=!1,this._last_event=null,this._listenersChanged=new C.Util.EventSource}return ae(t,e),t.prototype._clearLastEvent=function(){return this._have_event=!1,this._last_event=null},t.prototype.addListener=function(e){var n;return n=t.__super__.addListener.call(this,e),this._have_event&&e(this._last_event),this._listenersChanged.dispatch(this._listeners),n},t.prototype.removeListener=function(e){var n;return n=t.__super__.removeListener.call(this,e),this._listenersChanged.dispatch(this._listeners),n},t.prototype.dispatch=function(e){return this._last_event=e,this._have_event=!0,t.__super__.dispatch.call(this,e)},t}(C.Util.EventSource),s="default",C.Datastore.DatastoreManager=function(){function e(e){var t=this;if(!e.isAuthenticated())throw new Error("DatastoreManager requires an authenticated Dropbox.Client!");this.datastoreListChanged=new C.Datastore.impl.EventSourceWithInitialData,this._flob_client=new D(e),this._lastListDsServerResponse=null,this._obj_manager=new H(new S(this._flob_client),this._flob_client,function(e){return t._handleRemoteDslistUpdate(e)},function(){return t._handleLocalDslistUpdate()})}return e.prototype.datastoreListChanged=null,e.prototype.close=function(){return this._obj_manager.destroy()},e.prototype.toString=function(){return"Datastore.DatastoreManager()"},e.prototype._dispatchDslistEvent=function(){var e;return e=this._lastListDsServerResponse||new I({datastores:[],token:"dummy"}),void this.datastoreListChanged.dispatch(new C.Datastore.DatastoreListChanged(this._getOverlaidDatastoreInfosFromListResponse(e)))},e.prototype._handleLocalDslistUpdate=function(){return void this._dispatchDslistEvent()},e.prototype._handleRemoteDslistUpdate=function(e){return this._lastListDsServerResponse=e,void this._dispatchDslistEvent()},e.prototype._getOverlaidDatastoreInfo=function(e,t){var n,r,a,i,o,s,l,u,c;n=this._obj_manager.getCachedDatastore(e),o=(null!=t?t.info:void 0)||{},i=null==n?ee.clone(o):null==t||t.rev<n.sync_state.get_server_rev()?n.datastore_model.getLocalInfoData():n.datastore_model.updateDatastoreInfo(o);for(r in i)u=i[r],i[r]=K.is_array(u)?function(){var e,t,n;for(n=[],e=0,t=u.length;t>e;e++)l=u[e],n.push(ee.fromDsValue(null,null,null,l));return n}():ee.fromDsValue(null,null,null,u);return K.is_empty(i)&&(i=null),a=null!=(null!=t?t.handle:void 0)?t.handle:n.get_handle(),s=null!=(c=null!=t?t.role:void 0)?c:ee.ROLE_OWNER,new C.Datastore.DatastoreInfo(e,a,i,s)},e.prototype._getOverlaidDatastoreInfosFromListResponse=function(e){var t,n,r,a,i,o,s,l,u,c,d;for(I.Type(e),t=this._obj_manager.getAllCachedUndeletedDatastoreIDs(),o={},s=0,u=t.length;u>s;s++)a=t[s],o[a]=null;for(d=e.datastores,l=0,c=d.length;c>l;l++)r=d[l],o[r.dsid]=r;return function(){var e;e=[];for(i in o)n=o[i],e.push(this._getOverlaidDatastoreInfo(i,n));return e}.call(this)},e.prototype._wrapDatastore=function(e,t){return t&&(e._update_mtime(),e.sync()),new C.Datastore(this,e)},e.prototype._getOrCreateDatastoreByDsid=function(e,t){var n=this;return void this._flob_client.get_or_create_db(e,function(r,a){return null!=r?t(r):null==a.handle?t(new Error("get_or_create_datastore failed for "+e)):n._obj_manager.open(e,a.handle,function(e,r){return null!=e?t(e):t(null,n._wrapDatastore(r,a.created))})})},e.prototype._createDatastore=function(e,t,n){var r=this;return void this._flob_client.create_db(e,t,function(t,a){return null!=t?n(t):null==a.handle?n(new Error("create_datastore failed for "+e)):r._obj_manager.open(e,a.handle,function(e,t){return null!=e?n(e):n(null,r._wrapDatastore(t,a.created))})})},e.prototype._getExistingDatastoreByDsid=function(e,t){var n=this;return void this._flob_client.get_db(e,function(r,a){return null!=r?t(r):null==a.handle?t(new Error("Datastore "+e+" not found or not accessible")):n._obj_manager.open(e,a.handle,function(e,r){return null!=e?t(e):t(null,new C.Datastore(n,r))})})},e.prototype.openDefaultDatastore=function(e){return void this._getOrCreateDatastoreByDsid(s,e)},e.prototype.openOrCreateDatastore=function(e,t){return void this._getOrCreateDatastoreByDsid(e,t)},e.prototype.openDatastore=function(e,t){return void this._getExistingDatastoreByDsid(e,t)},e.prototype.createDatastore=function(e){var t,n;return n=ee.randomWeb64String(Math.ceil(256/6)),t="."+ee.dbase64FromBase64(C.Util.sha256(n)),void this._createDatastore(t,n,e)},e.prototype.deleteDatastore=function(e,t){var n=this;return void this._flob_client.get_db(e,function(r,a){return null!=r?t(r):null==a.handle?t(new Error("Datastore "+e+" not found or not accessible")):n._flob_client.delete_db(a.handle,function(e){return t(null!=e?e:null)})})},e.prototype.listDatastores=function(e){var t=this;return null!=this._lastListDsServerResponse?e(null,this._getOverlaidDatastoreInfosFromListResponse(this._lastListDsServerResponse)):void this._flob_client.list_dbs(function(n,r){return null!=n?e(n):e(null,t._getOverlaidDatastoreInfosFromListResponse(r))})},e}(),C.Datastore.List=function(){function e(e,t,n){this._datastore=e,this._record=t,this._field=n}return e.BASE_ITEM_SIZE=20,e.prototype.toString=function(){return"Datastore.List(("+this._record._tid+", "+this._record._rid+", "+this._field+"): "+JSON.stringify(this._array)+")"},e.prototype._array=function(){return this._record._rawFieldValues()[this._field]},e.prototype._checkValid=function(){if(this._record._checkNotDeleted(),!K.is_array(this._array()))throw new Error("Attempt to operate on deleted list ("+this._record._tid+", "+this._record._rid+", "+this._field+")")},e.prototype._storeUpdate=function(e){var t;return t={},t[this._field]=e,void this._record._storeUpdate(t)},e.prototype._fixInsertionIndex=function(e){var t,n;if(!K.is_json_number(e))throw new RangeError("Index not a number: "+e);if(t=this._array().length,n=e>=0?e:t+e,n>=0&&t>=n)return n;throw new RangeError("Bad index for list of length "+t+": "+e)},e.prototype._fixIndex=function(e){var t,n;if(n=this._fixInsertionIndex(e),t=this._array().length,t>n)return n;throw new RangeError("Bad index for list of length "+t+": "+e)},e.prototype.get=function(e){var t;return this._checkValid(),t=ee.clone(this._array()[this._fixIndex(e)]),ee.fromDsValue(void 0,void 0,void 0,t)},e.prototype.set=function(e,t){return this._checkValid(),e=this._fixIndex(e),void this._storeUpdate(["LP",e,ee.toDsValue(t,!1)])},e.prototype.length=function(){return this._checkValid(),this._array().length},e.prototype.pop=function(){if(this._checkValid(),0===this._array().length)throw new Error("List is empty");return this.remove(this._array.length-1)},e.prototype.push=function(e){return this._checkValid(),void this.insert(this._array().length,e)},e.prototype.shift=function(){if(this._checkValid(),0===this._array().length)throw new Error("List is empty");return this.remove(0)},e.prototype.unshift=function(e){return void this.insert(0,e)},e.prototype.splice=function(){var e,t,n,r,a,i,o,s,l;if(r=arguments[0],t=arguments[1],e=3<=arguments.length?ie.call(arguments,2):[],this._checkValid(),!K.is_json_number(t)||0>t)throw new RangeError("Bad second arg to splice: "+r+", "+t);for(r=this._fixInsertionIndex(r),a=this.slice(r,r+t),n=o=0;t>=0?t>o:o>t;n=t>=0?++o:--o)this.remove(r);for(s=0,l=e.length;l>s;s++)i=e[s],this.insert(r,i),r++;return a},e.prototype.move=function(e,t){return this._checkValid(),e=this._fixIndex(e),t=this._fixIndex(t),e===t?void 0:void this._storeUpdate(["LM",e,t])},e.prototype.remove=function(e){var t;return this._checkValid(),e=this._fixIndex(e),t=this.get(e),this._storeUpdate(["LD",e]),t},e.prototype.insert=function(e,t){return this._checkValid(),e=this._fixInsertionIndex(e),void this._storeUpdate(["LI",e,ee.toDsValue(t,!1)])},e.prototype.slice=function(e,t){var n;return this._checkValid(),function(){var r,a,i,o;for(i=this._array().slice(e,t),o=[],r=0,a=i.length;a>r;r++)n=i[r],o.push(ee.fromDsValue(void 0,void 0,void 0,n));return o}.call(this)},e.prototype.toArray=function(){var e;return this._checkValid(),function(){var t,n,r,a;for(r=this._array().slice(),a=[],t=0,n=r.length;n>t;t++)e=r[t],a.push(ee.fromDsValue(void 0,void 0,void 0,e));return a}.call(this)},e}(),C.Datastore.Record=function(){function e(e,t,n){this._datastore=e,this._tid=t,this._rid=n,this._deleted=!1,this._record_cache=this._datastore._record_cache,this._managed_datastore=this._datastore._managed_datastore}return e.RECORD_SIZE_LIMIT=102400,e.BASE_RECORD_SIZE=100,e.BASE_FIELD_SIZE=100,e.prototype.get=function(e){var t;return this._checkNotDeleted(),t=this._rawFieldValues(),e in t?ee.fromDsValue(this._datastore,this,e,t[e]):null},e.prototype.set=function(e,t){var n;return n={},n[e]=t,this.update(n)},e.prototype.getOrCreateList=function(e){var t,n;if(this._checkNotDeleted(),n=this._rawFieldValues(),null==n[e])t={},t[e]=["LC"],this._storeUpdate(t),n=this._rawFieldValues();else if(!K.is_array(n[e]))throw new Error("Can't call getOrCreateList on field "+e+" for record ("+this.tid+", "+this.rid+"): existing value "+n[e]+" is not a list");return ee.fromDsValue(this._datastore,this,e,n[e])},e.prototype.getFields=function(){var e,t,n,r;this._checkNotDeleted(),e={},r=this._rawFieldValues();for(t in r)n=r[t],e[t]=ee.fromDsValue(this._datastore,this,t,n);return e},e.prototype.getSize=function(){return this._managed_datastore.get_record_size(this._tid,this._rid)},e.prototype.update=function(e){var t,n,r;this._datastore._checkWritable(),this._checkNotDeleted(),t={};for(n in e)r=e[n],null!=r?t[n]=["P",ee.toDsValue(r)]:null!=this.get(n)&&(t[n]=["D"]);return K.is_empty(t)||this._storeUpdate(t),this},e.prototype.deleteRecord=function(){var e;return this._datastore._checkWritable(),this._checkNotDeleted(),this._deleted=!0,this._record_cache.remove(this._tid,this._rid),e=r.from_array(["D",this._tid,this._rid]),this._managed_datastore.perform_local_change(e),this._datastore._recordsChangedLocally([this]),this},e.prototype.has=function(e){var t;return this._checkNotDeleted(),t=this._rawFieldValues(),e in t},e.prototype.getId=function(){return this._rid},e.prototype.getTable=function(){return this._datastore.getTable(this._tid)},e.prototype.isDeleted=function(){return this._deleted},e.prototype.toString=function(){var e;return e=this.isDeleted()?"deleted":JSON.stringify(this.getFields()),"Datastore.Record(("+this._tid+", "+this._rid+"): "+e+")"},e.prototype._rawFieldValues=function(){return this._managed_datastore.query(this._tid,this._rid)},e.prototype._storeUpdate=function(e){var t;t=r.from_array(["U",this._tid,this._rid,e]),this._managed_datastore.perform_local_change(t),this._datastore._recordsChangedLocally([this])},e.isValidId=function(e){var t;return t=new RegExp(K.SS_ID_REGEX),K.is_string(e)&&t.test(e)},e.prototype._checkNotDeleted=function(){if(this._deleted)throw new Error("Attempt to operate on deleted record ("+this._tid+", "+this._rid+")")},e}(),C.Datastore.RecordsChanged=function(){function e(e,t){this._recordsByTable=e,this._local=t}return e.prototype.toString=function(){var e,t,n,r,a,i,o;a=0,n=0,o=this._recordsByTable;for(i in o)e=o[i],a+=1,n+=e.length;return r=""+a+" "+(1===a?"table":"tables"),t=""+n+" "+(1===n?"record":"records"),"Datastore.RecordsChanged("+t+" in "+r+" changed "+(this._local?"locally":"remotely")+")"},e._fromRecordList=function(t,n){var r,a,i,o,s;for(a={},o=0,s=t.length;s>o;o++)r=t[o],i=r._tid,null==a[i]&&(a[i]=[]),a[i].push(r);return new e(a,n)},e.prototype.affectedRecordsByTable=function(){return this._recordsByTable},e.prototype.affectedRecordsForTable=function(e){var t;return null!=(t=this._recordsByTable[e])?t:[]},e.prototype.isLocal=function(){return this._local},e}(),G=C.Datastore.RecordsChanged,C.Datastore.Table=function(){function e(e,t){this._datastore=e,this._tid=t,this._record_cache=this._datastore._record_cache,this._managed_datastore=this._datastore._managed_datastore}return e.prototype.getId=function(){return this._tid},e.prototype.get=function(e){var t,n;if(!C.Datastore.Record.isValidId(e))throw new Error("Invalid record ID: "+e);return n=this._record_cache.get(this._tid,e),null!=n?(Q(!n._deleted),n):(t=this._managed_datastore.query(this._tid,e),null==t?null:this._record_cache.getOrCreate(this._tid,e))},e.prototype.getOrInsert=function(e,t){var n;return this._datastore._checkWritable(),n=this.get(e),n?n:this._insertWithId(e,t)},e.prototype.insert=function(e){var t;return this._datastore._checkWritable(),t=this._datastore._generateRid(),Q(null==this.get(t)),this._insertWithId(t,e)},e.prototype.query=function(e){var t,n,r,a,i,o,s;for(i=this._managed_datastore.list_rows_for_table(this._tid),r=[],o=0,s=i.length;s>o;o++)a=i[o],t=this._managed_datastore.query(this._tid,a),(null==e||ee.matchDsValues(e,t))&&(n=this.get(a),Q(null!=n),r.push(n));return r},e.prototype.setResolutionRule=function(e,t){if("remote"!==t&&"local"!==t&&"min"!==t&&"max"!==t&&"sum"!==t)throw new Error(""+t+" is not a valid resolution rule. Valid rules are 'remote', 'local', 'min', 'max', and 'sum'.");return this._managed_datastore.resolver.add_resolution_rule(this._tid,e,t),this},e.isValidId=function(e){var t;return t=new RegExp(K.SS_ID_REGEX),K.is_string(e)&&t.test(e)},e.prototype.toString=function(){return"Datastore.Table("+this._tid+")"},e.prototype._insertWithId=function(e,t){var n,a,i,o,s;a={};for(i in t)s=t[i],a[i]=ee.toDsValue(s);return n=r.from_array(["I",this._tid,e,a]),this._managed_datastore.perform_local_change(n),o=this._record_cache.getOrCreate(this._tid,e),this._datastore._recordsChangedLocally([o]),o},e}(),C.File.ShareUrl=function(){function e(e,t){this.url=e.url,this.expiresAt=C.Util.parseDate(e.expires),this.isDirect=t===!0||t!==!1&&("direct"in e?e.direct:Date.now()-this.expiresAt<=864e5),this.isPreview=!this.isDirect,this._json=null}return e.parse=function(e,t){return e&&"object"==typeof e?new C.File.ShareUrl(e,t):e},e.prototype.url=null,e.prototype.expiresAt=null,e.prototype.isDirect=null,e.prototype.isPreview=null,e.prototype.json=function(){return this._json||(this._json={url:this.url,expires:this.expiresAt.toUTCString(),direct:this.isDirect})},e}(),C.File.CopyReference=function(){function e(e){"object"==typeof e?(this.tag=e.copy_ref,this.expiresAt=C.Util.parseDate(e.expires),this._json=e):(this.tag=e,this.expiresAt=new Date(1e3*Math.ceil(Date.now()/1e3)),this._json=null)}return e.parse=function(e){return!e||"object"!=typeof e&&"string"!=typeof e?e:new C.File.CopyReference(e)},e.prototype.tag=null,e.prototype.expiresAt=null,e.prototype.json=function(){return this._json||(this._json={copy_ref:this.tag,expires:this.expiresAt.toUTCString()})},e}(),C.File.Stat=function(){function e(e){var t,n,r,a;switch(this._json=e,this.path=e.path,"/"!==this.path.substring(0,1)&&(this.path="/"+this.path),t=this.path.length-1,t>=0&&"/"===this.path.substring(t)&&(this.path=this.path.substring(0,t)),n=this.path.lastIndexOf("/"),this.name=this.path.substring(n+1),this.isFolder=e.is_dir||!1,this.isFile=!this.isFolder,this.isRemoved=e.is_deleted||!1,this.typeIcon=e.icon,this.modifiedAt=(null!=(r=e.modified)?r.length:void 0)?C.Util.parseDate(e.modified):null,this.clientModifiedAt=(null!=(a=e.client_mtime)?a.length:void 0)?C.Util.parseDate(e.client_mtime):null,e.root){case"dropbox":this.inAppFolder=!1;break;case"app_folder":this.inAppFolder=!0;break;default:this.inAppFolder=null}this.size=e.bytes||0,this.humanSize=e.size||"",this.hasThumbnail=e.thumb_exists||!1,this.versionTag=e.rev,this.contentHash=e.hash||null,this.mimeType=this.isFolder?e.mime_type||"inode/directory":e.mime_type||"application/octet-stream"}return e.parse=function(e){return e&&"object"==typeof e?new C.File.Stat(e):e},e.prototype.path=null,e.prototype.name=null,e.prototype.inAppFolder=null,e.prototype.isFolder=null,e.prototype.isFile=null,e.prototype.isRemoved=null,e.prototype.typeIcon=null,e.prototype.versionTag=null,e.prototype.contentHash=null,e.prototype.mimeType=null,e.prototype.size=null,e.prototype.humanSize=null,e.prototype.hasThumbnail=null,e.prototype.modifiedAt=null,e.prototype.clientModifiedAt=null,e.prototype.json=function(){return this._json},e}(),C.Http.AppInfo=function(){function e(e,t){var n;this.name=e.name,this._icons=e.icons,n=e.permissions||{},this.canUseDatastores=!!n.datastores,this.canUseFiles=!!n.files,this.canUseFullDropbox="full_dropbox"===n.files,this.hasAppFolder="app_folder"===n.files,this.key=t?t:e.key||null}return e.parse=function(e,t){return e?new C.Http.AppInfo(e,t):e},e.prototype.name=void 0,e.prototype.key=void 0,e.prototype.canUseDatastores=void 0,e.prototype.canUseFiles=void 0,e.prototype.hasAppFolder=void 0,e.prototype.canUseFullDropbox=void 0,e.prototype.icon=function(e,t){return t||(t=e),this._icons[""+e+"x"+t]||null},e.ICON_SMALL=64,e.ICON_LARGE=256,e}(),C.Http.PulledChanges=function(){function e(e){var t;this.blankSlate=e.reset||!1,this.cursorTag=e.cursor,this.shouldPullAgain=e.has_more,this.shouldBackOff=!this.shouldPullAgain,this.changes=e.cursor&&e.cursor.length?function(){var n,r,a,i;for(a=e.entries,i=[],n=0,r=a.length;r>n;n++)t=a[n],i.push(C.Http.PulledChange.parse(t));return i}():[]}return e.parse=function(e){return e&&"object"==typeof e?new C.Http.PulledChanges(e):e},e.prototype.blankSlate=void 0,e.prototype.cursorTag=void 0,e.prototype.changes=void 0,e.prototype.shouldPullAgain=void 0,e.prototype.shouldBackOff=void 0,e.prototype.cursor=function(){return this.cursorTag},e}(),C.Http.PulledChange=function(){function e(e){this.path=e[0],this.stat=C.File.Stat.parse(e[1]),this.stat?this.wasRemoved=!1:(this.stat=null,this.wasRemoved=!0)}return e.parse=function(e){return e&&"object"==typeof e?new C.Http.PulledChange(e):e},e.prototype.path=void 0,e.prototype.wasRemoved=void 0,e.prototype.stat=void 0,e}(),C.Http.PollResult=function(){function e(e){this.hasChanges=e.changes,this.retryAfter=e.backoff||0}return e.parse=function(e){return e?new C.Http.PollResult(e):e},e.prototype.hasChanges=void 0,e.prototype.retryAfter=void 0,e}(),C.Http.RangeInfo=function(){function e(e){var t;(t=/^bytes (\d*)-(\d*)\/(.*)$/.exec(e))?(this.start=parseInt(t[1]),this.end=parseInt(t[2]),this.size="*"===t[3]?null:parseInt(t[3])):(this.start=0,this.end=0,this.size=null)}return e.parse=function(e){return"string"==typeof e?new C.Http.RangeInfo(e):e},e.prototype.start=null,e.prototype.size=null,e.prototype.end=null,e}(),C.Http.UploadCursor=function(){function e(e){this.replace(e)}return e.parse=function(e){return!e||"object"!=typeof e&&"string"!=typeof e?e:new C.Http.UploadCursor(e)},e.prototype.tag=null,e.prototype.offset=null,e.prototype.expiresAt=null,e.prototype.json=function(){return this._json||(this._json={upload_id:this.tag,offset:this.offset,expires:this.expiresAt.toUTCString()})},e.prototype.replace=function(e){return"object"==typeof e?(this.tag=e.upload_id||null,this.offset=e.offset||0,this.expiresAt=C.Util.parseDate(e.expires)||Date.now(),this._json=e):(this.tag=e||null,this.offset=0,this.expiresAt=new Date(1e3*Math.floor(Date.now()/1e3)),this._json=null),this},e}(),"function"==typeof C.Env.global.atob&&"function"==typeof C.Env.global.btoa?(C.Util.atob=function(e){return C.Env.global.atob(e)},C.Util.btoa=function(e){return C.Env.global.btoa(e)}):C.Env.global.require&&C.Env.global.Buffer?(C.Util.atob=function(e){var t,n;return t=new Buffer(e,"base64"),function(){var e,r,a;for(a=[],n=e=0,r=t.length;r>=0?r>e:e>r;n=r>=0?++e:--e)a.push(String.fromCharCode(t[n]));return a}().join("")},C.Util.btoa=function(e){var t,n;return t=new Buffer(function(){var t,r,a;for(a=[],n=t=0,r=e.length;r>=0?r>t:t>r;n=r>=0?++t:--t)a.push(e.charCodeAt(n));return a}()),t.toString("base64");
}):!function(){var e,t,n;return t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n=function(e,n,r){var a,i;for(i=3-n,e<<=8*i,a=3;a>=i;)r.push(t.charAt(63&e>>6*a)),a-=1;for(a=n;3>a;)r.push("="),a+=1;return null},e=function(e,t,n){var r,a;for(a=4-t,e<<=6*a,r=2;r>=a;)n.push(String.fromCharCode(255&e>>8*r)),r-=1;return null},C.Util.btoa=function(e){var t,r,a,i,o,s;for(i=[],t=0,r=0,a=o=0,s=e.length;s>=0?s>o:o>s;a=s>=0?++o:--o)t=t<<8|e.charCodeAt(a),r+=1,3===r&&(n(t,r,i),t=r=0);return r>0&&n(t,r,i),i.join("")},C.Util.atob=function(n){var r,a,i,o,s,l,u;for(s=[],r=0,i=0,o=l=0,u=n.length;(u>=0?u>l:l>u)&&(a=n.charAt(o),"="!==a);o=u>=0?++l:--l)r=r<<6|t.indexOf(a),i+=1,4===i&&(e(r,i,s),r=i=0);return i>0&&e(r,i,s),s.join("")}}(),function(){var e,t,n,r,a,i,o,s,l,u,c;if(C.Util.hmac=function(t,r){return e(n(l(t),l(r),t.length,r.length))},C.Util.sha1=function(t){return e(a(l(t),t.length))},C.Util.sha256=function(t){return e(i(l(t),t.length))},C.Env.require)try{t=C.Env.require("crypto"),t.createHmac&&t.createHash&&(C.Util.hmac=function(e,n){var r;return r=t.createHmac("sha1",n),r.update(e),r.digest("base64")},C.Util.sha1=function(e){var n;return n=t.createHash("sha1"),n.update(e),n.digest("base64")},C.Util.sha256=function(e){var n;return n=t.createHash("sha256"),n.update(e),n.digest("base64")})}catch(e){r=e}return n=function(e,t,n,r){var i,o,s,l;return t.length>16&&(t=a(t,r)),s=function(){var e,n;for(n=[],o=e=0;16>e;o=++e)n.push(909522486^t[o]);return n}(),l=function(){var e,n;for(n=[],o=e=0;16>e;o=++e)n.push(1549556828^t[o]);return n}(),i=a(s.concat(e),64+n),a(l.concat(i),84)},a=function(e,t){var n,r,a,i,o,s,l,u,c,d,p,f,h,g,m,v,y;for(e[t>>2]|=1<<31-((3&t)<<3),e[(t+8>>6<<4)+15]=t<<3,m=Array(80),n=1732584193,a=4023233417,o=2562383102,l=271733878,c=3285377520,p=0,h=e.length;h>p;){for(r=n,i=a,s=o,u=l,d=c,f=y=0;80>y;f=++y)16>f?m[f]=0|e[p+f<<2>>2]:(g=(0|m[f-3<<2>>2])^(0|m[f-8<<2>>2])^(0|m[f-14<<2>>2])^(0|m[f-16<<2>>2]),m[f]=g<<1|g>>>31),v=0|(0|(n<<5|n>>>27)+c)+m[f<<2>>2],v=20>f?0|v+(0|(a&o|~a&l)+1518500249):40>f?0|v+(0|(a^o^l)+1859775393):60>f?0|(0|v+((a&o|a&l|o&l)-1894007588)):0|v+(0|(a^o^l)-899497514),c=l,l=o,o=a<<30|a>>>2,a=n,n=v;n=0|r+n,a=0|i+a,o=0|s+o,l=0|u+l,c=0|d+c,p=0|p+16}return[n,a,o,l,c]},i=function(e,t){var n,r,a,i,l,u,c,d,p,f,h,g,m,v,y,_,b,w,x,C,T,S,k,A,D,E,P,O,L,I,M,N;for(e[t>>2]|=1<<31-((3&t)<<3),e[(t+8>>6<<4)+15]=t<<3,L=Array(80),n=o[0],a=o[1],l=o[2],d=o[3],f=o[4],g=o[5],v=o[6],C=o[7],S=0,A=e.length;A>S;){for(r=n,i=a,u=l,p=d,h=f,m=g,y=v,T=C,k=N=0;64>N;k=++N)16>k?O=L[k]=0|e[S+k<<2>>2]:(b=0|L[k-15<<2>>2],_=(b<<25|b>>>7)^(b<<14|b>>>18)^b>>>3,x=0|L[k-2<<2>>2],w=(x<<15|x>>>17)^(x<<13|x>>>19)^x>>>10,O=L[k]=0|(0|_+(0|L[k-7<<2>>2]))+(0|w+(0|L[k-16<<2>>2]))),c=f&g^~f&v,D=n&a^n&l^a&l,E=(n<<30|n>>>2)^(n<<19|n>>>13)^(n<<10|n>>>22),P=(f<<26|f>>>6)^(f<<21|f>>>11)^(f<<7|f>>>25),I=0|(0|(0|C+P)+(0|c+O))+(0|s[k<<2>>2]),M=0|E+D,C=v,v=g,g=f,f=0|d+I,d=l,l=a,a=n,n=0|I+M;n=0|r+n,a=0|i+a,l=0|u+l,d=0|p+d,f=0|h+f,g=0|m+g,v=0|y+v,C=0|T+C,S+=16}return[n,a,l,d,f,g,v,C]},u=function(e){return 0>e&&(e=4*(1<<30)+e),e.toString(16)},o=[],s=[],function(){var e,t,n,r,a,i,l;for(t=function(e){return 0|4294967296*(e-Math.floor(e))},a=2,l=[],n=i=0;64>i;n=++i){for(;;){for(r=!0,e=2;a>=e*e;){if(0===a%e){r=!1;break}e+=1}if(r)break;a+=1}8>n&&(o[n]=t(Math.pow(a,.5))),s[n]=t(Math.pow(a,1/3)),l.push(a+=1)}return l}(),e=function(e){var t,n,r,a,i;for(a="",t=0,r=4*e.length;r>t;)n=t,i=(255&e[n>>2]>>(3-(3&n)<<3))<<16,n+=1,i|=(255&e[n>>2]>>(3-(3&n)<<3))<<8,n+=1,i|=255&e[n>>2]>>(3-(3&n)<<3),a+=c[63&i>>18],a+=c[63&i>>12],t+=1,a+=t>=r?"=":c[63&i>>6],t+=1,a+=t>=r?"=":c[63&i],t+=1;return a},c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",l=function(e){var t,n,r,a,i;for(t=[],r=255,n=a=0,i=e.length;i>=0?i>a:a>i;n=i>=0?++a:--a)t[n>>2]|=(e.charCodeAt(n)&r)<<(3-(3&n)<<3);return t}}(),C.Util.Oauth=function(){function e(e){this._id=null,this._secret=null,this._stateParam=null,this._authCode=null,this._token=null,this._tokenKey=null,this._tokenKid=null,this._error=null,this._appHash=null,this._loaded=null,this.setCredentials(e)}return e.prototype.setCredentials=function(e){if(e.key)this._id=e.key;else{if(!e.token)throw new Error("No API key supplied");this._id=null}return this._secret=e.secret||null,this._appHash=null,this._error=null,this._loaded=!0,this.reset(),e.token?(this._token=e.token,e.tokenKey&&(this._tokenKey=e.tokenKey,this._tokenKid=e.tokenKid)):e.oauthCode?this._authCode=e.oauthCode:e.oauthStateParam&&(this._stateParam=e.oauthStateParam),this},e.prototype.credentials=function(){var e;return e={},this._id&&(e.key=this._id),this._secret&&(e.secret=this._secret),null!==this._token?(e.token=this._token,this._tokenKey&&(e.tokenKey=this._tokenKey,e.tokenKid=this._tokenKid)):null!==this._authCode?e.oauthCode=this._authCode:null!==this._stateParam&&(e.oauthStateParam=this._stateParam),e},e.prototype.step=function(){return null!==this._token?C.Client.DONE:null!==this._authCode?C.Client.AUTHORIZED:null!==this._stateParam?this._loaded?C.Client.PARAM_LOADED:C.Client.PARAM_SET:null!==this._error?C.Client.ERROR:C.Client.RESET},e.prototype.setAuthStateParam=function(e){if(null===this._id)throw new Error("No API key supplied, cannot do authorization");return this.reset(),this._loaded=!1,this._stateParam=e,this},e.prototype.checkAuthStateParam=function(e){return this._stateParam===e&&null!==this._stateParam},e.prototype.authStateParam=function(){return this._stateParam},e.prototype.error=function(){return this._error},e.prototype.processRedirectParams=function(e){var t;if(e.error){if(null===this._id)throw new Error("No API key supplied, cannot process errors");return this.reset(),this._error=new C.AuthError(e),!0}if(e.code){if(null===this._id)throw new Error("No API key supplied, cannot do Authorization Codes");return this.reset(),this._loaded=!1,this._authCode=e.code,!0}if(t=e.token_type){if(t=t.toLowerCase(),"bearer"!==t&&"mac"!==t)throw new Error("Unimplemented token type "+t);if(this.reset(),this._loaded=!1,"mac"===t){if("hmac-sha-1"!==e.mac_algorithm)throw new Error("Unimplemented MAC algorithms "+e.mac_algorithm);this._tokenKey=e.mac_key,this._tokenKid=e.kid}return this._token=e.access_token,!0}return!1},e.prototype.authHeader=function(e,t,n){var r,a;return null===this._token?(a=null===this._secret?C.Util.btoa(""+this._id+":"):C.Util.btoa(""+this._id+":"+this._secret),"Basic "+a):null===this._tokenKey?"Bearer "+this._token:(r=this.macParams(e,t,n),"MAC kid="+r.kid+" ts="+r.ts+" "+("access_token="+this._token+" mac="+r.mac))},e.prototype.addAuthParams=function(e,t,n){var r;return null===this._token?(n.client_id=this._id,null!==this._secret&&(n.client_secret=this._secret)):(null!==this._tokenKey&&(r=this.macParams(e,t,n),n.kid=r.kid,n.ts=r.ts,n.mac=r.mac),n.access_token=this._token),n},e.prototype.authorizeUrlParams=function(e,t){var n;if("token"!==e&&"code"!==e)throw new Error("Unimplemented /authorize response type "+e);return n={client_id:this._id,state:this._stateParam,response_type:e},t&&(n.redirect_uri=t),n},e.prototype.accessTokenParams=function(e){var t;return t={grant_type:"authorization_code",code:this._authCode},e&&(t.redirect_uri=e),t},e.queryParamsFromUrl=function(e){var t,n,r,a,i,o,s,l,u,c;if(a=/^[^?#]+(\?([^\#]*))?(\#(.*))?$/.exec(e),!a)return{};for(s=a[2]||"","/"===s.substring(0,1)&&(s=s.substring(1)),t=a[4]||"",n=t.indexOf("?"),-1!==n&&(t=t.substring(n+1)),"/"===t.substring(0,1)&&(t=t.substring(1)),o={},c=s.split("&").concat(t.split("&")),l=0,u=c.length;u>l;l++)r=c[l],i=r.indexOf("="),-1!==i&&(o[decodeURIComponent(r.substring(0,i))]=decodeURIComponent(r.substring(i+1)));return o},e.prototype.macParams=function(e,t,n){var r,a;return r={kid:this._tokenKid,ts:C.Util.Oauth.timestamp()},a=e.toUpperCase()+"&"+C.Util.Xhr.urlEncodeValue(t)+"&"+C.Util.Xhr.urlEncodeValue(C.Util.Xhr.urlEncode(n)),r.mac=C.Util.hmac(a,this._tokenKey),r},e.prototype.appHash=function(){return this._appHash?this._appHash:this._appHash=C.Util.sha1("oauth2-"+this._id).replace(/[\/+=]/g,"")},e.prototype.reset=function(){return this._stateParam=null,this._authCode=null,this._token=null,this._tokenKey=null,this._tokenKid=null,this._error=null,this},e.timestamp=function(){return Math.floor(Date.now()/1e3)},e.randomAuthStateParam=function(){return["oas",Date.now().toString(36),Math.random().toString(36)].join("_")},e}(),null==Date.now&&(C.Util.Oauth.timestamp=function(){return Math.floor((new Date).getTime()/1e3)}),2274814865e3===new Date("Fri, 31 Jan 2042 21:01:05 +0000").valueOf()?C.Util.parseDate=function(e){return new Date(e)}:2274814865e3===Date.parse("Fri, 31 Jan 2042 21:01:05 +0000")?C.Util.parseDate=function(e){return new Date(Date.parse(e))}:!function(){var e,t;return t=/^\w+\, (\d+) (\w+) (\d+) (\d+)\:(\d+)\:(\d+) (\+\d+|UTC|GMT)$/,e={Jan:0,Feb:1,Mar:2,Apr:3,May:4,Jun:5,Jul:6,Aug:7,Sep:8,Oct:9,Nov:10,Dec:11},C.Util.parseDate=function(n){var r;return(r=t.exec(n))?new Date(Date.UTC(parseInt(r[3]),e[r[2]],parseInt(r[1]),parseInt(r[4]),parseInt(r[5]),parseInt(r[6]),0)):NaN}}(),C.Util.countUtf8Bytes=function(e){var t,n,r,a,i;for(t=0,r=a=0,i=e.length;i>=0?i>a:a>i;r=i>=0?++a:--a)n=e.charCodeAt(r),127>=n?t+=1:2047>=n?t+=2:n>=55296&&57343>=n?t+=2:65535>=n?t+=3:Q(!1);return t},C.Env.global.XMLHttpRequest?(!C.Env.global.XDomainRequest||"withCredentials"in new XMLHttpRequest?(v=XMLHttpRequest,m=!1,h="undefined"!=typeof FormData&&-1===navigator.userAgent.indexOf("Firefox")):(v=XDomainRequest,m=!0,h=!1),g=!0):(v=C.Env.require("xhr2"),m=!1,h=!1,g=!1),C.Env.global.Uint8Array)if(Object.getPrototypeOf?f=Object.getPrototypeOf(Object.getPrototypeOf(new Uint8Array(0))).constructor:Object.__proto__&&(f=new Uint8Array(0).__proto__.__proto__.constructor),C.Env.global.Blob){try{!function(){return 2===new Blob([new Uint8Array(2)]).size?(_=!0,y=!0):(y=!1,_=2===new Blob([new ArrayBuffer(2)]).size)}()}catch(e){y=!1,_=!1,C.Env.global.WebKitBlobBuilder&&-1!==navigator.userAgent.indexOf("Android")&&(h=!1)}f===Object&&(y=!1)}else _=!1,y=!0;else f=null,_=!1,y=!1;C.Util.Xhr=function(){function e(e,t){this.method=e,this.isGet="GET"===this.method,this.url=t,this.wantHeaders=!1,this.headers={},this.params=null,this.body=null,this.preflight=!(this.isGet||"POST"===this.method),this.signed=!1,this.completed=!1,this.responseType=null,this.callback=null,this.xhr=null,this.onError=null}return e.Request=v,e.ieXdr=m,e.canSendForms=h,e.doesPreflight=g,e.ArrayBufferView=f,e.sendArrayBufferView=y,e.wrapBlob=_,e.prototype.xhr=null,e.prototype.onError=null,e.prototype.setParams=function(e){if(this.signed)throw new Error("setParams called after addOauthParams or addOauthHeader");if(this.params)throw new Error("setParams cannot be called twice");return this.params=e,this},e.prototype.setCallback=function(e){return this.callback=e,this},e.prototype.signWithOauth=function(e,t){return C.Util.Xhr.ieXdr?this.addOauthParams(e):this.preflight||!C.Util.Xhr.doesPreflight?this.addOauthHeader(e):this.isGet&&t?this.addOauthHeader(e):this.addOauthParams(e)},e.prototype.addOauthParams=function(e){if(this.signed)throw new Error("Request already has an OAuth signature");return this.params||(this.params={}),e.addAuthParams(this.method,this.url,this.params),this.signed=!0,this},e.prototype.addOauthHeader=function(e){if(this.signed)throw new Error("Request already has an OAuth signature");return this.params||(this.params={}),this.signed=!0,this.setHeader("Authorization",e.authHeader(this.method,this.url,this.params))},e.prototype.setBody=function(e){if(this.isGet)throw new Error("setBody cannot be called on GET requests");if(null!==this.body)throw new Error("Request already has a body");return"string"==typeof e||"undefined"!=typeof FormData&&e instanceof FormData||(this.headers["Content-Type"]="application/octet-stream",this.preflight=!0),this.body=e,this},e.prototype.setResponseType=function(e){return this.responseType=e,this},e.prototype.setHeader=function(e,t){var n;if(this.headers[e])throw n=this.headers[e],new Error("HTTP header "+e+" already set to "+n);if("Content-Type"===e)throw new Error("Content-Type is automatically computed based on setBody");return this.preflight=!0,this.headers[e]=t,this},e.prototype.reportResponseHeaders=function(){return this.wantHeaders=!0},e.prototype.setFileField=function(e,t,n,r){var a,i,o,s,l;if(null!==this.body)throw new Error("Request already has a body");if(this.isGet)throw new Error("setFileField cannot be called on GET requests");if("object"==typeof n){"undefined"!=typeof ArrayBuffer&&(n instanceof ArrayBuffer?C.Util.Xhr.sendArrayBufferView&&(n=new Uint8Array(n)):!C.Util.Xhr.sendArrayBufferView&&0===n.byteOffset&&n.buffer instanceof ArrayBuffer&&(n=n.buffer)),r||(r="application/octet-stream");try{n=new Blob([n],{type:r})}catch(e){i=e,window.WebKitBlobBuilder&&(s=new WebKitBlobBuilder,s.append(n),(a=s.getBlob(r))&&(n=a))}"undefined"!=typeof File&&n instanceof File&&(n=new Blob([n],{type:n.type})),l=n instanceof Blob}else l=!1;return l?(this.body=new FormData,this.body.append(e,n,t)):(r||(r="application/octet-stream"),o=this.multipartBoundary(),this.headers["Content-Type"]="multipart/form-data; boundary="+o,this.body=["--",o,"\r\n",'Content-Disposition: form-data; name="',e,'"; filename="',t,'"\r\n',"Content-Type: ",r,"\r\n","Content-Transfer-Encoding: binary\r\n\r\n",n,"\r\n","--",o,"--","\r\n"].join(""))},e.prototype.multipartBoundary=function(){return[Date.now().toString(36),Math.random().toString(36)].join("----")},e.prototype.paramsToUrl=function(){var e;return this.params&&(e=C.Util.Xhr.urlEncode(this.params),0!==e.length&&(this.url=[this.url,"?",e].join("")),this.params=null),this},e.prototype.paramsToBody=function(){if(this.params){if(null!==this.body)throw new Error("Request already has a body");if(this.isGet)throw new Error("paramsToBody cannot be called on GET requests");this.headers["Content-Type"]="application/x-www-form-urlencoded",this.body=C.Util.Xhr.urlEncode(this.params),this.params=null}return this},e.prototype.prepare=function(){var e,t,n,r,a=this;if(t=C.Util.Xhr.ieXdr,this.isGet||null!==this.body||t?(this.paramsToUrl(),null!==this.body&&"string"==typeof this.body&&(this.headers["Content-Type"]="text/plain; charset=utf8")):this.paramsToBody(),this.xhr=new C.Util.Xhr.Request,t?(this.xhr.onload=function(){return a.onXdrLoad()},this.xhr.onerror=function(){return a.onXdrError()},this.xhr.ontimeout=function(){return a.onXdrError()},this.xhr.onprogress=function(){}):this.xhr.onreadystatechange=function(){return a.onReadyStateChange()},this.xhr.open(this.method,this.url,!0),!t){r=this.headers;for(e in r)ne.call(r,e)&&(n=r[e],this.xhr.setRequestHeader(e,n))}return this.responseType&&("b"===this.responseType?this.xhr.overrideMimeType&&this.xhr.overrideMimeType("text/plain; charset=x-user-defined"):this.xhr.responseType=this.responseType),this},e.prototype.send=function(e){var t,n;if(this.callback=e||this.callback,null!==this.body){t=this.body,C.Util.Xhr.sendArrayBufferView?t instanceof ArrayBuffer&&(t=new Uint8Array(t)):0===t.byteOffset&&t.buffer instanceof ArrayBuffer&&(t=t.buffer);try{this.xhr.send(t)}catch(e){if(n=e,C.Util.Xhr.sendArrayBufferView||!C.Util.Xhr.wrapBlob)throw n;t=new Blob([t],{type:"application/octet-stream"}),this.xhr.send(t)}}else this.xhr.send();return this},e.urlEncode=function(e){var t,n,r;t=[];for(n in e)r=e[n],t.push(this.urlEncodeValue(n)+"="+this.urlEncodeValue(r));return t.sort().join("&")},e.urlEncodeValue=function(e){return encodeURIComponent(e.toString()).replace(/\!/g,"%21").replace(/'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/\*/g,"%2A")},e.urlDecode=function(e){var t,n,r,a,i,o;for(n={},o=e.split("&"),a=0,i=o.length;i>a;a++)r=o[a],t=r.split("="),n[decodeURIComponent(t[0])]=decodeURIComponent(t[1]);return n},e.prototype.onReadyStateChange=function(){var e,t,n,r,a,i,o,s,l,u,c,d,p,f,h;if(4!==this.xhr.readyState)return!0;if(this.completed)return!0;if(this.completed=!0,this.xhr.status<200||this.xhr.status>=300)return t=new C.ApiError(this.xhr,this.method,this.url),this.onError?this.onError(t,this.callback):this.callback(t),!0;if(this.wantHeaders?(e=this.xhr.getAllResponseHeaders(),o=e?C.Util.Xhr.parseResponseHeaders(e):this.guessResponseHeaders(),c=o["x-dropbox-metadata"]):(o=void 0,c=this.xhr.getResponseHeader("x-dropbox-metadata")),null!=c?c.length:void 0)try{u=JSON.parse(c)}catch(e){if(l=e,i=c.search(/\}\,\s*\{/),-1!==i)try{c=c.substring(0,i+1),u=JSON.parse(c)}catch(e){l=e,u=void 0}else u=void 0}else u=void 0;if(this.responseType){if("b"===this.responseType){for(a=null!=this.xhr.responseText?this.xhr.responseText:this.xhr.response,n=[],s=f=0,h=a.length;h>=0?h>f:f>h;s=h>=0?++f:--f)n.push(String.fromCharCode(255&a.charCodeAt(s)));p=n.join(""),this.callback(null,p,u,o)}else this.callback(null,this.xhr.response,u,o);return!0}switch(p=null!=this.xhr.responseText?this.xhr.responseText:this.xhr.response,r=this.xhr.getResponseHeader("Content-Type"),r&&(d=r.indexOf(";"),-1!==d&&(r=r.substring(0,d))),r){case"application/x-www-form-urlencoded":this.callback(null,C.Util.Xhr.urlDecode(p),u,o);break;case"application/json":case"text/javascript":this.callback(null,JSON.parse(p),u,o);break;default:this.callback(null,p,u,o)}return!0},e.parseResponseHeaders=function(e){var t,n,r,a,i,o,s,l;for(r={},n=e.split("\n"),s=0,l=n.length;l>s;s++)a=n[s],t=a.indexOf(":"),i=a.substring(0,t).trim().toLowerCase(),o=a.substring(t+1).trim(),r[i]=o;return r},e.prototype.guessResponseHeaders=function(){var e,t,n,r,a,i;for(e={},i=["cache-control","content-language","content-range","content-type","expires","last-modified","pragma","x-dropbox-metadata"],r=0,a=i.length;a>r;r++)t=i[r],n=this.xhr.getResponseHeader(t),n&&(e[t]=n);return e},e.prototype.onXdrLoad=function(){var e,t,n;if(this.completed)return!0;if(this.completed=!0,n=this.xhr.responseText,e=this.wantHeaders?{"content-type":this.xhr.contentType}:void 0,t=void 0,this.responseType)return this.callback(null,n,t,e),!0;switch(this.xhr.contentType){case"application/x-www-form-urlencoded":this.callback(null,C.Util.Xhr.urlDecode(n),t,e);break;case"application/json":case"text/javascript":this.callback(null,JSON.parse(n),t,e);break;default:this.callback(null,n,t,e)}return!0},e.prototype.onXdrError=function(){var e;return!!this.completed||(this.completed=!0,e=new C.ApiError(this.xhr,this.method,this.url),this.onError?this.onError(e,this.callback):this.callback(e),!0)},e}(),Z="X-Dropbox-User-Agent",j="X-Dropbox-Request-Id",C.DatastoresClient={_dispatchDatastoreXhr:function(e,t,n,r,a,i){var o,s,u;return u=new C.Util.Xhr(e,t),a.setRequestId&&(s="xxxxxxxxxxxxxxxx".replace(/x/g,function(){return Math.floor(16*Math.random()).toString(16)}),u.setHeader(j,s)),Q(null==n[Z]),n=ee.clone(n),n[Z]="dropbox-js-datastore-sdk/"+l,u.setParams(n),u.signWithOauth(this._oauth,!1),o=function(e,t){return null!=e?i(e):i(null,r.fromJSON(t))},a.isLongPoll?this._dispatchLongPollXhr(u,o):this._dispatchXhr(u,o),u},_listDatastores:function(e){return this._dispatchDatastoreXhr("GET",this._urls.listDbs,{},I,{},e)},_getOrCreateDatastore:function(e,t){return this._dispatchDatastoreXhr("POST",this._urls.getOrCreateDb,{dsid:e},o,{},t)},_createDatastore:function(e,t,n){return this._dispatchDatastoreXhr("POST",this._urls.createDb,{dsid:e,key:t},o,{},n)},_getDatastore:function(e,t){return this._dispatchDatastoreXhr("GET",this._urls.getDb,{dsid:e},E,{},t)},_deleteDatastore:function(e,t){return this._dispatchDatastoreXhr("POST",this._urls.deleteDb,{handle:e},w,{setRequestId:!0},t)},_putDelta:function(e,t,n){return this._dispatchDatastoreXhr("POST",this._urls.putDelta,{handle:e,rev:t.rev,nonce:t.nonce,changes:JSON.stringify(t.changes)},U,{setRequestId:!0},n)},_getSnapshot:function(e,t){return this._dispatchDatastoreXhr("GET",this._urls.getSnapshot,{handle:e},O,{},t)},_datastoreAwait:function(t,n,r){return this._dispatchDatastoreXhr("POST",this._urls.datastoreAwait,{get_deltas:JSON.stringify({cursors:t}),list_datastores:JSON.stringify({token:n})},e,{isLongPoll:!0,setRequestId:!0},r)},getDatastoreManager:function(){var e,t=this;return null==this._datastoreManager&&(this._datastoreManager=new C.Datastore.DatastoreManager(this),e=function(){return t.authStep===C.Client.SIGNED_OUT?(t._datastoreManager.close(),t._datastoreManager=null,t.onAuthStepChange.removeListener(e)):void 0},this.onAuthStepChange.addListener(e)),this._datastoreManager}},function(){var e,t,n,r;n=C.DatastoresClient,r=[];for(t in n)e=n[t],r.push(C.Client.prototype[t]=e);return r}()}).call(this);var FileDB,bind=function(e,t){return function(){return e.apply(t,arguments)}},hasProp={}.hasOwnProperty;FileDB=function(){function e(e){this.apiKey=e,this.allTables={}}var t,n,r,a,i,o,s;return s=0,e.file=t,a=null,e.prototype.setupDropbox=function(e){return a=new Dropbox.Client({key:this.apiKey}),a.authenticate(null,function(t){return function(n){if(null!=n)throw n;return t.loadTables(e)}}(this))},e.prototype.query=function(e,t,n){return null==t&&(t=null),null==n&&(n=null),this.allTables[e].query(t,n)},e.prototype.queryAll=function(e,t){var n,r,a,i,o;return a=null!=t?t:{argQuery:null,argSort:null},n=null!=(i=a.argQuery)?i:null,r=null!=(o=a.argSort)?o:null,this.query(e,n,r)},e.prototype.rowCount=function(e){return this.query(e).length},e.prototype.createTable=function(e){return this.allTables[e]=new n(e,(!0))},e.prototype.createTableWithData=function(e,t){var n,r,a;for(this.createTable(e),r=0,a=t.length;r<a;r++)n=t[r],this.insert(e,n);return this.query(e)},e.prototype.insert=function(e,t){return this.allTables[e].insert(t)},e.prototype.isNew=function(){return 0===Object.keys(this.allTables).length},e.prototype.loadTables=function(e){return a.readdir("/",function(t){return function(r,a){var i,l,u;for(s++,l=0,u=a.length;l<u;l++)i=a[l],"_"!==i[0]&&(s++,t.allTables[i]=new n(i,(!1),function(){return o(e)}));return o(e)}}(this))},i=function(e){var t,n;return n=JSON.stringify(e),t=JSON.parse(n)},o=function(e){if(s--,0===s)return setTimeout(e,0)},r=function(e){return"function"==typeof e?e():void 0},n=function(){function e(e,n,a){var i,o;null==n&&(n=!1),this.tableFileData={},this.dataFileObjects=[],this.data=[],o=new t(e),n?(o.readFile(),this.data[0]={},this.data[0].maxSize=62500,this.data[0].dataFiles=[],i=this.createNewDatafile(),this.dataFileObjects.push(i),this.data[0].dataFiles.push(i.getName()),o.insert(this.data[0]),this.tableFileData=this.data[0],r(a)):o.readFile(function(e){return function(){var n,r,i,s,l,u;for(e.data=o.getDataArray(),e.tableFileData=e.data[0],l=e.tableFileData.data_files,u=[],i=0,s=l.length;i<s;i++)n=l[i],r=new t(n),e.dataFileObjects.push(r),u.push(r.readFile(a));return u}}(this))}return e.prototype.updateTableData=function(){var e,t,n,r,a;for(e=[],a=this.dataFileObjects,n=0,r=a.length;n<r;n++)t=a[n],e.push(t.getName());return tableFile.update(void 0,{data_files:dataFiles})},e.prototype.insert=function(e){var t;return t=this.dataFileObjects[this.dataFileObjects.length-1],t.getSize()>this.tableFileData.maxSize&&(t=createNewDatafile(),this.dataFileObjects.push(t),this.tableFileData.dataFiles.push(t.getName()),this.updateTableData()),t.insert(e)},e.prototype.query=function(e,t){var n,r,a,i,o,s,l,u;for(null==e&&(e=null),null==t&&(t=null),l=[],s=this.dataFileObjects,r=0,i=s.length;r<i;r++)n=s[r],l=l.concat(n.query(e));if((null!=t)instanceof Array)for(a=0,o=t.length;a<o;a++)u=t[a],l.sort(sortResults(u[0],u[1]));return l},e.prototype.createNewDatafile=function(){var e,n;return n="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){return function(e){var t,n;return t=16*Math.random()|0,n="x"===e?t:3&t|8,n.toString(16)}}(this)),e=new t("_"+n),e.readFile(),e},e.prototype.sortResults=function(e,t){return null==t&&(t=null),function(n){return function(n,r){var a,i;return a=n[e],i=r[e],a("string")&&(a=a.toLowerCase()),i("string")&&(i=i.toLowerCase()),"DESC"===t?a===i?0:a<i?1:-1:a===i?0:a>i?1:-1}}(this)},e}(),t=function(){function e(e){this.fileName=e,this.sync=bind(this.sync,this),this.syncing=!1,this.syncingAddedData=null,this.timeExtension=0,this.timeLastRead=0,this.fileStats=null,this.dataObject={}}var t,n,o;return e.prototype.query=function(e){return this.toDataArray(t(e))},t=function(e){return"function"==typeof e?n(e):null==e?this.dataObject:o(e)},e.prototype.remove=function(e){var n,r;this.scheduleSync(),r=t(e);for(n in r)hasProp.call(r,n)&&delete this.dataObject[n];return this.query(e)},e.prototype.update=function(e,n){var r,a,o,s,l,u;s=t(e);for(a in s)if(hasProp.call(s,a)){l=s[a],o=i(l);for(r in n)hasProp.call(n,r)&&(u=n[r],o[r]=u);this.remove(this.dataObject[a]),this.insert(o)}return this.query(e)},e.prototype.insert=function(e){var t;return this.scheduleSync(),t=this.getNextId(),this.dataObject[t]=e},n=function(e){var t,n,r,a;r={},n=this.dataObject;for(t in n)hasProp.call(n,t)&&(a=n[t],e(i(a))===!0&&(r[t]=a));return r},o=function(e){var t,n,r,a,o,s,l;s={},o=this.dataObject;for(a in o)if(hasProp.call(o,a)){l=o[a],r=!1;for(n in e)hasProp.call(e,n)&&(t=e[n],l[n]===t(r=!0)||(r=!1));r&&(s[a]=i(l))}return s},e.prototype.getNextId=function(){var e,t;return t=(new Date).getTime(),this.timeExtension++,e=this.timeExtension%1e3,e<10?t+"00"+e:e<100?t+"0"+e:""+t+e},e.prototype.scheduleSync=function(){if(!this.syncing)return this.syncing=!0,setTimeout(this.sync,0)},e.prototype.sync=function(){var e,t;return this.syncing=!1,t=(new Date).getTime(),e="0",null!=this.fileStats&&(e=this.fileStats.versionTag),this.readStat(function(n){return function(){var r;if(e!==n.fileStats.versionTag)return r=i(n.dataObject),n.readFile(function(){return n.dataObject=n.merge(r,n.dataObject),n.timeLastRead=t,n.writeFile()})}}(this))},e.prototype.getVersionTag=function(){return this.fileStats.versionTag},e.prototype.getSize=function(){var e;return e=0,null!=this.syncingAddedData&&(e=JSON.stringify(this.syncingAddedData).length),JSON.stringify(this.dataObject).length+e},e.prototype.getName=function(){return this.fileName},e.prototype.getData=function(){return i(this.dataObject)},e.prototype.getDataArray=function(){return this.toDataArray(this.dataObject)},e.prototype.toDataArray=function(e){var t,n;t=[];for(n in e)t.push(e[n]);return i(t)},e.prototype.readFile=function(e){return a.readFile(this.fileName,function(t){return function(n,a,i){if(t.error(n,e))return t.dataObject=JSON.parse(a),t.fileStats=i,r(e)}}(this))},e.prototype.writeFile=function(e){return a.writeFile(this.fileName,JSON.stringify(this.dataObject),function(t){return function(n,a){var i;if(t.error(n,e))return i=a,r(e)}}(this))},e.prototype.readStat=function(e){return a.stat(this.fileName,function(t){return function(n,a){if(t.error(n,e))return t.fileStats=a,r(e)}}(this))},e.prototype.error=function(e,t){var n;if(n=!0,null!=e)switch(e.status){case 404:n=!1,console.log("File not found - creating new file"),this.writeFile(t);break;case 503:n=!1,console.log("Too many requests - try again in 1000ms"),setTimeout(this.sync,1e3);break;default:console.error(e),n=!1}return n},e.prototype.merge=function(e,t){var n,r,a;console.log("MERGING"),r={},a=0;for(n in t)hasProp.call(t,n)&&(null!=e[n]&&(r[n]=t[n]),null==e[n]&&(a=parseInt(n.slice(0,13)),a>this.timeLastRead&&(r[n]=e[n])));return r},e}(),e}();